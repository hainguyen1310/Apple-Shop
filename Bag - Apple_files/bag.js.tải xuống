/*! 5.2.3 | BH: 3bb7f219d46088023bc0 | CH: 583503f59 */
/*! License information is available at licenses.txt */(()=>{var e,t,a={7630:(e,t,a)=>{var r,n,s;!function(l){if("object"==typeof e.exports){var o=l(a(5076),t);void 0!==o&&(e.exports=o)}else n=[a,t],void 0===(s="function"==typeof(r=l)?r.apply(t,n):r)||(e.exports=s)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletEncryptedData=t.ECDHWrappedData=t.ApplePayCryptoLib_ECV2=void 0;t.ApplePayCryptoLib_ECV2=class{constructor(){this.ecdhParams={name:"ECDH",namedCurve:"P-256"},this.keyLengthECAndDerived=256,this.keyLengthSecretKeyInBytes=16,this.aesParamsForDerivedSecret={name:"AES-GCM",length:this.keyLengthECAndDerived},this.aesParamsForSecretKey={name:"AES-GCM",length:this.keyLengthSecretKeyInBytes},this.sha256="SHA-256"}ec_v2_web(e,t){if(!e||0==e.trim().length)throw"RecipientPublicKeyJwk is invalid";if(!t||0==t.trim().length)throw"PlaintextToEncrypt is invalid";let a;try{a=JSON.parse(e)}catch(e){throw"RecipientPublicKeyJwk is not proper JSON"}const r=window.crypto.subtle.generateKey(this.ecdhParams,!1,["deriveKey"]),n=window.crypto.subtle.importKey("jwk",a,this.ecdhParams,!0,[]);return Promise.all([r,n]).then((e=>{const a=e[0],r=e[1];return this.innerEcv2Encrypt(a.privateKey,a.publicKey,r,t)}))}innerEcv2Encrypt(e,t,a,r){const n={name:"ECDH",public:a},s=window.crypto.subtle.deriveKey(n,e,this.aesParamsForDerivedSecret,!0,["encrypt"]),l=window.crypto.subtle.exportKey("spki",a);return Promise.all([s,l]).then((e=>{const a=e[0],n=e[1];return window.crypto.subtle.exportKey("raw",a).then((e=>this.ecv2KdfWrapper(t,r,e,n)))}))}ecv2KdfWrapper(e,t,a,r){return this.ecv2Kdf(a,e,this.keyLengthECAndDerived).then((a=>window.crypto.subtle.digest(this.sha256,a).then((a=>{const n=a.slice(0,this.keyLengthSecretKeyInBytes);return window.crypto.subtle.importKey("raw",n,this.aesParamsForSecretKey,!1,["encrypt"]).then((a=>{const n=new ArrayBuffer(this.keyLengthSecretKeyInBytes),s=this.convertStringToUTF8ByteArray(t),l={name:"AES-GCM",iv:n},o=window.crypto.subtle.encrypt(l,a,s),i=this.ecPublicKeyToRawUncompressed(e,this.keyLengthECAndDerived);return this.createEcv2Response(o,i,r)}))}))))}createEcv2Response(e,t,n){const s=window.crypto.subtle.digest(this.sha256,n);return Promise.all([e,t,s]).then((e=>{const t=e[0],n=e[1],s=e[2],l=this.buf2hex(t),o=this.buf2hex(n),i=new r(o,l);return new a("EC_v2",i,this.buf2hex(s))}))}ecv2Kdf(e,t,a){return this.ecPublicKeyToRawUncompressed(t,a).then((t=>{var a=0,r=new ArrayBuffer(t.byteLength+4+e.byteLength),n=new Uint8Array(r);a=this.write(new Uint8Array(e),n,a);var s=new Uint8Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=1,a=this.write(s,n,a),this.write(new Uint8Array(t),n,a),r}),(e=>{throw"KDF failed"}))}ecPublicKeyToRawUncompressed(e,t){t/=8;var a=new ArrayBuffer(2*t+1),r=new Int8Array(a),n=0;return r[n]=4,n++,window.crypto.subtle.exportKey("jwk",e).then((e=>{for(var t=this.base64UrlDecode(e.x||""),s=0;s<t.length;++s,++n)r[n]=t[s];var l=this.base64UrlDecode(e.y||"");for(s=0;s<l.length;++s,++n)r[n]=l[s];return a}),(e=>{throw"Cannot uncompress key"}))}base64UrlDecode(e){for(e=e.replace(/-/g,"+").replace(/_/g,"/");e.length%4;)e+="=";const t=window.atob(e);for(var a=new Int8Array(t.length),r=0;r<t.length;++r)a[r]=t.codePointAt(r)||0;return a}write(e,t,a){for(var r=0;r<e.length;++r)t[r+a]=e[r];return r+a}buf2hex(e){return Array.from(new Uint8Array(e)).map((e=>this.padStart(e.toString(16),2,"0"))).join("")}padStart(e,t,a){return t|=0,e.length>t?e:((t-=e.length)>a.length&&(a+=a.repeat(t/a.length)),a.slice(0,t)+e)}convertStringToUTF8ByteArray(e){const t=new Uint8Array(e.length);return Array.prototype.forEach.call(t,(function(t,a,r){r[a]=e.charCodeAt(a)})),t}};class a{constructor(e,t,a){this._encryptionVersion=e,this._encryptedData=t,this._publicKeyHash=a}}t.WalletEncryptedData=a;class r{constructor(e,t){this.ephemeralPublicKey=e,this.gcmEncryptedData=t.substr(0,t.length-32),this.gcmTag=t.substr(t.length-32)}}t.ECDHWrappedData=r}))},6941:(e,t,a)=>{var r,n,s;!function(l){if("object"==typeof e.exports){var o=l(a(5076),t);void 0!==o&&(e.exports=o)}else n=[a,t],void 0===(s="function"==typeof(r=l)?r.apply(t,n):r)||(e.exports=s)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyAgreementParams=t.KDFParams=t.JWSRoot=t.JWSProtected=t.JWSHeader=t.EncryptionParams=t.EncryptedMessage=t.EncryptedDataContainer=t.ApplePayCryptoLib_ECV3=void 0;t.ApplePayCryptoLib_ECV3=class{constructor(){this.ecdhParams={name:"ECDH",namedCurve:"P-256"},this.ecdsaParams={name:"ECDSA",namedCurve:"P-256"},this.keyLengthECAndDerived=256,this.keyLengthSecretKeyInBytes=16,this.aesParamsForDerivedSecret={name:"AES-GCM",length:this.keyLengthECAndDerived},this.aesParamsForSecretKey={name:"AES-GCM",length:this.keyLengthSecretKeyInBytes},this.sha256="SHA-256",this.defaultSender="web"}ec_v3_web_with_jws(e,t,a,r,n){if(!a||0==a.trim().length)throw"Nonce is invalid";if(!e||0==e.trim().length)throw"RecipientSigningPublicKeyJwk is invalid";if(!t||0==t.trim().length)throw"RecipientKeyAgreementPublicKeyJwk is invalid";if(!r||0==r.trim().length)throw"PlaintextToEncrypt is invalid";if(!n||0==n.trim().length)throw"Recipient is invalid";let s,l;try{s=JSON.parse(e)}catch(e){throw"RecipientSigningPublicKeyJwk is not proper JSON"}try{l=JSON.parse(t)}catch(e){throw"RecipientKeyAgreementPublicKeyJwk is not proper JSON"}const o=window.crypto.subtle.importKey("jwk",s,this.ecdhParams,!0,[]),i=window.crypto.subtle.importKey("jwk",l,this.ecdhParams,!0,[]),c=window.crypto.subtle.generateKey(this.ecdhParams,!1,["deriveKey"]),d=window.crypto.subtle.generateKey(this.ecdsaParams,!1,["sign"]);return Promise.all([c,d,i,o]).then((e=>{const t=e[0],s=e[1],l=e[2],o=e[3];return this.innerEcv3Encrypt(t.privateKey,t.publicKey,s.publicKey,l,o,r,n).then((e=>this.ecPublicKeyToRawUncompressed(s.publicKey,this.keyLengthECAndDerived).then((t=>{const r=window.crypto.subtle.digest(this.sha256,t),n=window.crypto.subtle.exportKey("jwk",s.publicKey);return this.preSignAndGenerateJws(r,n,e[0],a,s.privateKey)}))))}))}preSignAndGenerateJws(e,t,a,r,n){return Promise.all([e,t]).then((e=>{const t=e[0],s=e[1],l=this.base64EncodeFromBuffer(t);return this.signAndGenerateJws(a,l,r,s,n).then((e=>[e]))}))}signAndGenerateJws(e,t,a,r,n){const s=new i("ES256",t,"JOSE+JSON","application/json; charset=utf-8",(new Date).toISOString(),a,["nonce","created"]),l={name:"ECDSA",hash:this.sha256},d=this.base64UrlEncodeNoPadding(JSON.stringify(s)),m=this.base64UrlEncodeNoPadding(JSON.stringify(e)),u=d+"."+m,p=this.convertStringToUTF8ByteArray(u);return window.crypto.subtle.sign(l,n,p).then((e=>{const t=this.base64UrlEncodeFromBuffer(e),a=new c(r);return new o(m,d,a,t)}))}ec_v3_web(e,t,a,r){if(!e||0==e.trim().length)throw"RecipientSigningPublicKeyJwk is invalid";if(!t||0==t.trim().length)throw"RecipientKeyAgreementPublicKeyJwk is invalid";if(!a||0==a.trim().length)throw"PlaintextToEncrypt is invalid";if(!r||0==r.trim().length)throw"Recipient is invalid";let n,s;try{n=JSON.parse(e)}catch(e){throw"RecipientSigningPublicKeyJwk is not proper JSON"}try{s=JSON.parse(t)}catch(e){throw"RecipientKeyAgreementPublicKeyJwk is not proper JSON"}const l=window.crypto.subtle.importKey("jwk",n,this.ecdhParams,!0,[]),o=window.crypto.subtle.importKey("jwk",s,this.ecdhParams,!0,[]),i=window.crypto.subtle.generateKey(this.ecdhParams,!1,["deriveKey"]),c=window.crypto.subtle.generateKey(this.ecdsaParams,!1,["sign"]);return Promise.all([i,c,o,l]).then((e=>{const t=e[0],n=e[1],s=e[2],l=e[3];return this.innerEcv3Encrypt(t.privateKey,t.publicKey,n.publicKey,s,l,a,r)}))}innerEcv3Encrypt(e,t,a,r,n,s,l){var o={name:"ECDH",public:r};return window.crypto.subtle.deriveKey(o,e,this.aesParamsForDerivedSecret,!0,["encrypt"]).then((e=>window.crypto.subtle.exportKey("raw",e).then((e=>this.ecv3KdfWrapper(t,a,r,n,s,e,l)))))}ecv3KdfWrapper(e,t,a,r,n,s,l){return this.ecv3Kdf(s,e,t,a,r,this.keyLengthECAndDerived).then((s=>window.crypto.subtle.digest("SHA-256",s).then((s=>{var o=s.slice(0,this.keyLengthSecretKeyInBytes);return window.crypto.subtle.importKey("raw",o,this.aesParamsForSecretKey,!1,["encrypt"]).then((o=>{const i=s.slice(this.keyLengthSecretKeyInBytes,32),c=this.convertStringToUTF8ByteArray(n),d={name:"AES-GCM",iv:i};return window.crypto.subtle.encrypt(d,o,c).then((n=>this.createEcv3Response(n,r,a,e,t,l)))}))}))))}ecv3Kdf(e,t,a,r,n,s){var l=this.ecPublicKeyToRawUncompressed(t,s),o=this.ecPublicKeyToRawUncompressed(a,s),i=this.ecPublicKeyToRawUncompressed(r,s),c=this.ecPublicKeyToRawUncompressed(n,s);return Promise.all([l,o,i,c]).then((t=>{var a=t[0],r=t[1],n=t[2],s=t[3],l=0,o=new ArrayBuffer(e.byteLength+4+a.byteLength+r.byteLength+n.byteLength+s.byteLength),i=new Uint8Array(o);l=this.write(new Uint8Array(e),i,l);var c=new Uint8Array(4);return c[0]=0,c[1]=0,c[2]=0,c[3]=1,l=this.write(c,i,l),l=this.write(new Uint8Array(a),i,l),l=this.write(new Uint8Array(r),i,l),l=this.write(new Uint8Array(n),i,l),this.write(new Uint8Array(s),i,l),o}),(e=>{throw"KDF failed"}))}createEcv3Response(e,t,o,i,c,d){const m=window.crypto.subtle.exportKey("raw",i),u=this.ecPublicKeyToRawUncompressed(o,this.keyLengthECAndDerived),p=this.ecPublicKeyToRawUncompressed(t,this.keyLengthECAndDerived),g=this.ecPublicKeyToRawUncompressed(c,this.keyLengthECAndDerived);return Promise.all([m,u,p,g]).then((t=>{const o=t[0],i=t[1],c=t[2],m=t[3],u=window.crypto.subtle.digest(this.sha256,i),p=window.crypto.subtle.digest(this.sha256,c),g=window.crypto.subtle.digest(this.sha256,m);return Promise.all([u,p,g]).then((t=>{const i=t[0],c=t[1],u=t[2],p=new l(this.base64EncodeFromBuffer(o),this.base64EncodeFromBuffer(i)),g=this.base64EncodeFromBuffer(u),y=new s(g,this.base64EncodeFromBuffer(c)),h=new n("EC_v3",p,y),E=new r(h,this.base64EncodeFromBuffer(e));return[new a(this.defaultSender,this.base64EncodeFromBuffer(m),d,E)]}))}))}ecPublicKeyToRawUncompressed(e,t){t/=8;var a=new ArrayBuffer(2*t+1),r=new Int8Array(a),n=0;return r[n]=4,n++,window.crypto.subtle.exportKey("jwk",e).then((e=>{for(var t=this.base64UrlDecode(e.x||""),s=0;s<t.length;++s,++n)r[n]=t[s];var l=this.base64UrlDecode(e.y||"");for(s=0;s<l.length;++s,++n)r[n]=l[s];return a}),(e=>{throw"Cannot uncompress key"}))}write(e,t,a){for(var r=0;r<e.length;++r)t[r+a]=e[r];return r+a}base64UrlDecode(e){for(e=e.replace(/-/g,"+").replace(/_/g,"/");e.length%4;)e+="=";const t=atob(e);for(var a=new Int8Array(t.length),r=0;r<t.length;++r)a[r]=t.codePointAt(r)||0;return a}base64UrlEncodeFromBuffer(e){var t="";const a=new Uint8Array(e),r=a.byteLength;for(var n=0;n<r;n++)t+=String.fromCharCode(a[n]);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_")}base64EncodeFromBuffer(e){var t="";const a=new Uint8Array(e),r=a.byteLength;for(var n=0;n<r;n++)t+=String.fromCharCode(a[n]);return btoa(t)}base64UrlEncodeNoPadding(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}convertStringToUTF8ByteArray(e){const t=new Uint8Array(e.length);return Array.prototype.forEach.call(t,(function(t,a,r){r[a]=e.charCodeAt(a)})),t}};class a{constructor(e,t,a,r){this.sender=e,this.senderSigningKey=t,this.recipient=a,this.message=r}}t.EncryptedMessage=a;class r{constructor(e,t){this.params=e,this.data=t}}t.EncryptedDataContainer=r;class n{constructor(e,t,a){this.algorithmIdentifier=e,this.keyAgreement=t,this.kdf=a}}t.EncryptionParams=n;class s{constructor(e,t){this.senderSigningKeyFingerprint=e,this.recipientSigningKeyFingerprint=t}}t.KDFParams=s;class l{constructor(e,t){this.sender=e,this.recipientFingerprint=t}}t.KeyAgreementParams=l;class o{constructor(e,t,a,r){this.payload=e,this.protected=t,this.header=a,this.signature=r}}t.JWSRoot=o;class i{constructor(e,t,a,r,n,s,l){this.alg=e,this.kid=t,this.typ=a,this.cty=r,this.created=n,this.nonce=s,this.crit=l}}t.JWSProtected=i;class c{constructor(e){this.jwk=e}}t.JWSHeader=c}))},5076:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=5076,e.exports=t},3797:(e,t,a)=>{a(5069)},5069:e=>{let t={init:function(){document.addEventListener("click",this.handleClick.bind(this))},handleClick:function(e){let t=e.target,a=null;if(document.documentElement.contains(t))for(;null!==t;){if(t.classList.contains("as-chat-button")){a=t;break}t=t.parentElement}a&&(e.preventDefault(),this.createForm(a),this.openChatWindow())},createForm:function(e){let t,a,r,n,s,l,o,i=window.chatConfig.chat.page,c=i?Object.keys(i):[],d=[],m=null,u=document.forms.chatForm,p=function(e,t){null===t&&(t=""),d+='<input type="hidden" id="'+e+'" name="'+e+'" value="'+t+'" />'};for(a=e?e.getAttribute("data-chat-ui"):null,m=a?a.split(";"):[],r=Object.keys(m),o=0;o<r.length;o++)n=m[r[o]].split("="),""!==n[0]&&p(n[0],n[1]);for(o=0;o<c.length;o++)s=i[c[o]],"url"!==s.name&&p(s.name,s.value),"url"===s.name&&(t=s.value);p("WEB_CHAT_PAGE_URL",document.URL),l=document.createElement("form"),l.id="chatForm",l.dataset.analyticsType="chat",l.action=t,l.target="chatWin",l.method="post",l.innerHTML=d,u&&document.body.removeChild(u),document.body.appendChild(l)},openChatWindow:function(){let e=document.getElementById("chatForm");window.open("#","chatWin","width=375,height=773,menubar=no,location=no,scrollbars=no,status=no"),e.submit()}};document.addEventListener("DOMContentLoaded",(function(){let e=window.chatConfig;e&&e.chat?t.init():window.console.log("No chat config detected.")})),e.exports=t},8693:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(2224),n=a.n(r);const s=({videoId:e,posterImage:t,videoImage:a,posterFrameUrl:r,isStageRevision:s,files:l,captionLanguage:o,captionLanguageCode:i})=>{const c=n().get(t,"srcSet.src"),d=n().get(a,"srcSet.src"),m=n().get(l,"mp4.src"),u=n().get(l,"m4v.src"),p=n().get(l,"hls.src"),g=n().get(l,"webm.src"),y=n().get(l,"quicktime.src"),h=n().get(l,"vtt.src"),E=[];return h&&E.push({src:h,label:o,srclang:i,mode:"hidden"}),{id:e,crossOrigin:s?"use-credentials":"anonymous",src:p||m||u||g||y,tracks:E,poster:d||c||r}}},1836:()=>{const e=window.asMetrics||{};window.as=window.as||{},window.as.mvt=e.Mvt,window.apple=window.apple||{},window.apple.metrics=window.apple.metrics||{},window.apple.metrics.Metrics=e.Metrics,window.Event.onLoad=()=>{}},5127:()=>{!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=function(e){for(var t=window.document,a=n(t);a;)a=n(t=a.ownerDocument);return t}(),t=[],a=null,r=null;l.prototype.THROTTLE_TIMEOUT=100,l.prototype.POLL_INTERVAL=null,l.prototype.USE_MUTATION_OBSERVER=!0,l._setupCrossOriginUpdater=function(){return a||(a=function(e,a){r=e&&a?m(e,a):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),a},l._resetCrossOriginUpdater=function(){a=null,r=null},l.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},l.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},l.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},l.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},l.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,a){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==a[t-1]}))},l.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},l.prototype._monitorIntersections=function(t){var a=t.defaultView;if(a&&-1==this._monitoringDocuments.indexOf(t)){var r=this._checkForIntersections,s=null,l=null;this.POLL_INTERVAL?s=a.setInterval(r,this.POLL_INTERVAL):(o(a,"resize",r,!0),o(t,"scroll",r,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in a&&(l=new a.MutationObserver(r)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(s&&e.clearInterval(s),i(e,"resize",r,!0)),i(t,"scroll",r,!0),l&&l.disconnect()}));var c=this.root&&(this.root.ownerDocument||this.root)||e;if(t!=c){var d=n(t);d&&this._monitorIntersections(d.ownerDocument)}}},l.prototype._unmonitorIntersections=function(t){var a=this._monitoringDocuments.indexOf(t);if(-1!=a){var r=this.root&&(this.root.ownerDocument||this.root)||e,s=this._observationTargets.some((function(e){var a=e.element.ownerDocument;if(a==t)return!0;for(;a&&a!=r;){var s=n(a);if((a=s&&s.ownerDocument)==t)return!0}return!1}));if(!s){var l=this._monitoringUnsubscribes[a];if(this._monitoringDocuments.splice(a,1),this._monitoringUnsubscribes.splice(a,1),l(),t!=r){var o=n(t);o&&this._unmonitorIntersections(o.ownerDocument)}}}},l.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},l.prototype._checkForIntersections=function(){if(this.root||!a||r){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(r){var n=r.element,l=c(n),o=this._rootContainsTarget(n),i=r.entry,d=e&&o&&this._computeTargetAndRootIntersection(n,l,t),m=null;this._rootContainsTarget(n)?a&&!this.root||(m=t):m={top:0,bottom:0,left:0,right:0,width:0,height:0};var u=r.entry=new s({time:window.performance&&performance.now&&performance.now(),target:n,boundingClientRect:l,rootBounds:m,intersectionRect:d});i?e&&o?this._hasCrossedThreshold(i,u)&&this._queuedEntries.push(u):i&&i.isIntersecting&&this._queuedEntries.push(u):this._queuedEntries.push(u)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},l.prototype._computeTargetAndRootIntersection=function(t,n,s){if("none"!=window.getComputedStyle(t).display){for(var l,o,i,d,u,g,y,h,E=n,v=p(t),b=!1;!b&&v;){var f=null,w=1==v.nodeType?window.getComputedStyle(v):{};if("none"==w.display)return null;if(v==this.root||9==v.nodeType)if(b=!0,v==this.root||v==e)a&&!this.root?!r||0==r.width&&0==r.height?(v=null,f=null,E=null):f=r:f=s;else{var N=p(v),S=N&&c(N),C=N&&this._computeTargetAndRootIntersection(N,S,s);S&&C?(v=N,f=m(S,C)):(v=null,E=null)}else{var T=v.ownerDocument;v!=T.body&&v!=T.documentElement&&"visible"!=w.overflow&&(f=c(v))}if(f&&(l=f,o=E,i=void 0,d=void 0,u=void 0,g=void 0,y=void 0,h=void 0,i=Math.max(l.top,o.top),d=Math.min(l.bottom,o.bottom),u=Math.max(l.left,o.left),g=Math.min(l.right,o.right),h=d-i,E=(y=g-u)>=0&&h>=0&&{top:i,bottom:d,left:u,right:g,width:y,height:h}||null),!E)break;v=v&&p(v)}return E}},l.prototype._getRootRect=function(){var t;if(this.root&&!g(this.root))t=c(this.root);else{var a=g(this.root)?this.root:e,r=a.documentElement,n=a.body;t={top:0,left:0,right:r.clientWidth||n.clientWidth,width:r.clientWidth||n.clientWidth,bottom:r.clientHeight||n.clientHeight,height:r.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(t)},l.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,a){return"px"==t.unit?t.value:t.value*(a%2?e.width:e.height)/100})),a={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return a.width=a.right-a.left,a.height=a.bottom-a.top,a},l.prototype._hasCrossedThreshold=function(e,t){var a=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(a!==r)for(var n=0;n<this.thresholds.length;n++){var s=this.thresholds[n];if(s==a||s==r||s<a!=s<r)return!0}},l.prototype._rootIsInDom=function(){return!this.root||u(e,this.root)},l.prototype._rootContainsTarget=function(t){var a=this.root&&(this.root.ownerDocument||this.root)||e;return u(a,t)&&(!this.root||a==t.ownerDocument)},l.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},l.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=l,window.IntersectionObserverEntry=s}function n(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}function s(e){this.time=e.time,this.target=e.target,this.rootBounds=d(e.rootBounds),this.boundingClientRect=d(e.boundingClientRect),this.intersectionRect=d(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,a=t.width*t.height,r=this.intersectionRect,n=r.width*r.height;this.intersectionRatio=a?Number((n/a).toFixed(4)):this.isIntersecting?1:0}function l(e,t){var a,r,n,s=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(s.root&&1!=s.root.nodeType&&9!=s.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(a=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,n=null,function(){n||(n=setTimeout((function(){a(),n=null}),r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(s.rootMargin),this.thresholds=this._initThresholds(s.threshold),this.root=s.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function o(e,t,a,r){"function"==typeof e.addEventListener?e.addEventListener(t,a,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,a)}function i(e,t,a,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,a,r||!1):"function"==typeof e.detachEvent&&e.detachEvent("on"+t,a)}function c(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function d(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function m(e,t){var a=t.top-e.top,r=t.left-e.left;return{top:a,left:r,height:t.height,width:t.width,bottom:a+t.height,right:r+t.width}}function u(e,t){for(var a=t;a;){if(a==e)return!0;a=p(a)}return!1}function p(t){var a=t.parentNode;return 9==t.nodeType&&t!=e?n(t):(a&&a.assignedSlot&&(a=a.assignedSlot.parentNode),a&&11==a.nodeType&&a.host?a.host:a)}function g(e){return e&&9===e.nodeType}}()},5338:(e,t,a)=>{"use strict";var r=a(5206);t.H=r.createRoot,r.hydrateRoot},1594:e=>{"use strict";e.exports=React},5206:e=>{"use strict";e.exports=ReactDOM},2224:e=>{"use strict";e.exports=_},6942:(e,t)=>{var a;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e="",t=0;t<arguments.length;t++){var a=arguments[t];a&&(e=l(e,s(a)))}return e}function s(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var a in e)r.call(e,a)&&e[a]&&(t=l(t,a));return t}function l(e,t){return t?e?e+" "+t:e+t:e}e.exports?(n.default=n,e.exports=n):void 0===(a=function(){return n}.apply(t,[]))||(e.exports=a)}()}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={exports:{}};return a[e](s,s.exports,n),s.exports}n.m=a,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,a)=>(n.f[a](e,t),t)),[])),n.u=e=>"ac-video.chunk.js",n.miniCssF=e=>"ac-video.css",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="rs-checkout:",n.l=(a,r,s,l)=>{if(e[a])e[a].push(r);else{var o,i;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var m=c[d];if(m.getAttribute("src")==a||m.getAttribute("data-webpack")==t+s){o=m;break}}o||(i=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=a),e[a]=[r];var u=(t,r)=>{o.onerror=o.onload=null,clearTimeout(p);var n=e[a];if(delete e[a],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((e=>e(r))),t)return t(r)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),i&&document.head.appendChild(o)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var r=a.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=a[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{if("undefined"!=typeof document){var e=e=>new Promise(((t,a)=>{var r=n.miniCssF(e),s=n.p+r;if(((e,t)=>{for(var a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var n=(l=a[r]).getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(n===e||n===t))return l}var s=document.getElementsByTagName("style");for(r=0;r<s.length;r++){var l;if((n=(l=s[r]).getAttribute("data-href"))===e||n===t)return l}})(r,s))return t();((e,t,a,r,s)=>{var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",n.nc&&(l.nonce=n.nc),l.onerror=l.onload=a=>{if(l.onerror=l.onload=null,"load"===a.type)r();else{var n=a&&a.type,o=a&&a.target&&a.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+n+": "+o+")");i.name="ChunkLoadError",i.code="CSS_CHUNK_LOAD_FAILED",i.type=n,i.request=o,l.parentNode&&l.parentNode.removeChild(l),s(i)}},l.href=t,a?a.parentNode.insertBefore(l,a.nextSibling):document.head.appendChild(l)})(e,s,null,t,a)})),t={971:0};n.f.miniCss=(a,r)=>{t[a]?r.push(t[a]):0!==t[a]&&{553:1}[a]&&r.push(t[a]=e(a).then((()=>{t[a]=0}),(e=>{throw delete t[a],e})))}}})(),(()=>{var e={971:0};n.f.j=(t,a)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else{var s=new Promise(((a,n)=>r=e[t]=[a,n]));a.push(r[2]=s);var l=n.p+n.u(t),o=new Error;n.l(l,(a=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=a&&("load"===a.type?"missing":a.type),l=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+l+")",o.name="ChunkLoadError",o.type=s,o.request=l,r[1](o)}}),"chunk-"+t,t)}};var t=(t,a)=>{var r,s,[l,o,i]=a,c=0;if(l.some((t=>0!==e[t]))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(i)i(n)}for(t&&t(a);c<l.length;c++)s=l[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},a=globalThis.webpackChunkrs_checkout=globalThis.webpackChunkrs_checkout||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{encrypt:()=>Mt});var t={};n.r(t),n.d(t,{encrypt:()=>_t});var a={};n.r(a),n.d(a,{encrypt:()=>Vt});var r={};n.r(r),n.d(r,{encrypt:()=>jt});n(1836);var s=n(1594),l=n.n(s),o=n(5338);const i=e=>{if(!e)throw new Error("moduleName parameter required for Logger");const t={TRACE:4,DEBUG:3,INFO:2,WARN:1,ERROR:0};let a,r;const n=n=>s=>{if(r=window.sessionStorage.getItem("AS_LOG_LEVEL")||window.AS_LOG_LEVEL||t.ERROR,a=r in t?t[r]:t.ERROR,t[n]<=a)try{let t;t="string"==typeof s||"number"==typeof s||"boolean"==typeof s||"bigint"==typeof s?{message:s}:Array.isArray(s)?{message:s.toString()}:function(e){const t={message:e.message,colno:e.colno,lineno:e.lineno,stack:e.stack||e.error&&e.error.stack,name:e.name,code:e.code};return{...e,...t}}(s),(e=>{const t=new CustomEvent("echoLogEvent",{detail:e});window.dispatchEvent(t)})({...t,id:e,type:n.toLowerCase()}),console[n.toLowerCase()](s)}catch(e){console.error("as-utilities/logger: could not log message",e)}};return{error:n("ERROR"),warn:n("WARN"),info:n("INFO"),debug:n("DEBUG"),trace:n("TRACE")}},c={Backspace:8,Tab:9,Clear:12,Return:13,Shift:16,Ctrl:17,Alt:18,Esc:27,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45,CapsLock:20,LeftCommand:91,RightCommand:93,MozillaCommand:224,RightWindowsStart:92,Pause:19,Space:32,Help:47,LeftWindow:91,Select:93,NumPad0:96,NumPad1:97,NumPad2:98,NumPad3:99,NumPad4:100,NumPad5:101,NumPad6:102,NumPad7:103,NumPad8:104,NumPad9:105,NumPadMultiply:106,NumPadPlus:107,NumPadEnter:108,NumPadMinus:109,NumPadPeriod:110,NumPadDivide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NumLock:144,ScrollLock:145},d={};Object.entries(c).forEach((([e,t])=>d[t]=e));const m=/^(\S+)\s*(.+)?$/,u="data-trigger";let p=!1;const g={},y=(e,t,a)=>{const r=(e=>{if(e=e.trim(),!g[e]){const t=e.split(",").map((e=>e.trim())).filter((e=>!!e)).map((e=>{const t=e.match(m);return{type:t&&t[1],sel:t&&t[2]}}));g[e]=t}return g[e]})(t);let n=null;r.forEach((({type:t,sel:r})=>{if("preventDefault"===t)a.preventDefault();else if("focus"===t||"click"===t){n=n||(e=>{for(let t=e;t;t=t.parentElement)if(t.hasAttribute("data-trigger-context"))return t;return document.body})(e);const a=r?((e,t=document)=>Array.from(t.querySelectorAll(e)))(r,n):[e];a.forEach((e=>e[t]?e[t]():null))}}))},h=e=>{const t=e.target,a=e&&"keyCode"in e?e.keyCode:null,r=null!==a,n=null!==a&&d[a];for(let s=t;s;s=s.parentElement){if(s&&s.hasAttribute("data-trigger-stoppropagation"))return;const t=!r&&s.getAttribute(`${u}-${e.type}`)||r&&s.getAttribute(`${u}-${a}`)||r&&s.getAttribute(`${u}-${n}`);t&&y(s,t,e)}},E={userAgent:e=>{const t=/(AppleWebkit)/i.test(e),a=/Chrome/.test(e)&&/Google Inc/.test(navigator.vendor),r=/Android.*Mobile|Mobile.*Android/i.test(e),n=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(e),s=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(e),l=n&&n[1]||s&&s[1],o=/(ipad)/i.test(e),i=/(iphone|ipod)/i.test(e)&&t,c=i||o?e.match(/os ([\d_]*)/i):null,d=/CriOS/.test(e)&&i,m=c&&c[1]||"0";return{isMobileIos:i,isIpad:o,isAndroidMobile:r,isIosChrome:d,userAgent:e,isPhantom:/Phantom/i.test(e),isFirefox:/(Firefox)/i.test(e),isChrome:/(Chrome)/i.test(e),isSafari:/(Safari)/i.test(e)&&!/(Chrome)/i.test(e),isHandheldPhone:i||r,iosVersion:parseFloat(m.replace("_",".")),isIe:Boolean(l),ieVersion:parseFloat(l||"0"),isAndroidInternet:r&&!a&&t,androidVersion:r?parseFloat(e.slice(e.indexOf("Android")+8)):0}},getReferrer:()=>document.referrer,getUrlHash:()=>window.location.hash,setUrlHash:e=>{window.location.hash=e},doRedirect:e=>{window.location.href=e},isOnline:()=>window.navigator.onLine,getWindowQueryString:()=>window.location.search,getCurrentPathname:()=>window.location.pathname,getViewportScrollX:()=>window.scrollX,getViewportScrollY:()=>window.scrollY,getViewportHeight:()=>window.innerHeight||document.documentElement.clientHeight,getViewportWidth:()=>window.innerWidth||document.documentElement.clientWidth,submit:e=>{(e&&"get"in e?e.get(0):e).submit()},getFocused:()=>document.activeElement,focus:e=>e.focus(),pixelRatio:window.devicePixelRatio,devicePixelRatio:e=>(E.pixelRatio=void 0!==e?e:E.pixelRatio,E.pixelRatio),selectedText:()=>{const e=window.getSelection();return e?e.toString():""},getCookies:()=>document.cookie||"",setCookie:e=>{document.cookie=e}},v=["","-webkit-","-moz-","-o-","-ms-","-khtml-"],b=["","Webkit","Moz","O","ms","Khtml"];let f=null,w=null;const N=()=>{const e=w||document.createElement("div");return w=e,e},S=(e,t)=>{if("length"===e||"parentRule"===e)return null;const a=N();a.style[e]="";const r=a.style[e],n=v.find((n=>{a.style[e]=n+t;const s=a.style[e]!==r;return a.style[e]="",s}));return"string"==typeof n?n:null},C=e=>{const t=document&&document.documentElement.style,a=e.charAt(0).toUpperCase()+e.slice(1);return b.map((t=>t?t+a:e)).find((e=>e in t))||null},T=(e,t)=>{return!!(t&&C(e))||(a=N().style[e],Boolean(a||""===a));var a},L=(e,t,a,r)=>{const n=document.createElement(t);return n.id=a,n.textContent=r,e.appendChild(n),n},k=()=>{const e=Object.prototype.hasOwnProperty;try{if(e.call(window,"styleMedia")&&window.styleMedia.matchMedium("(-webkit-transform-3d)"))return!0;{const e=document.getElementById("supportsThreeDStyle")||L(document.head,"style","supportsThreeDStyle","@media (transform-3d),(-o-transform-3d),(-moz-transform-3d),(-ms-transform-3d),(-webkit-transform-3d) { #supportsThreeD { height:3px } }");return 3===(document.getElementById("supportsThreeD")||L(document.body,"div","supportsThreeD","")).offsetHeight||"MozTransform"in e.style||"WebkitTransform"in e.style}}catch(e){return!1}},I=()=>{try{const e=document.createElement("a");return!!e.relList&&e.relList.supports("ar")}catch(e){return!1}},A=()=>{if(f)return f;const e=document.createElement("input"),t=document.createElement("textarea"),a=E.userAgent(navigator.userAgent),r=a.userAgent,n=a.isMobileIos,s=a.isIpad,l=a.iosVersion,o=a.isIe,i=a.ieVersion,c=a.isPhantom,d=a.isAndroidMobile,m=a.isAndroidInternet,u=a.androidVersion,p=a.isHandheldPhone,g=a.isSafari,y=navigator.appVersion,h=document&&document.documentElement.style,v=N(),b=r.match(/AppleWebKit\/(\d+)/),w=b&&b[1]||"",L=parseFloat(w)||null,A=-1!==y.indexOf("Mac")?"macosx":-1!==y.indexOf("X11")||-1!==y.indexOf("Linux")?"linux":-1!==y.indexOf("SunOS")?"sunos":"windows",P=Boolean(window.ontransitionend),D=("transition"in h||"MozTransition"in h)&&(!d||d&&P),O=D?"transitionend":"msTransition"in h?"MSTransitionEnd":"WebkitTransition"in h?"webkitTransitionEnd":null,x=D?"animationend":"msTransition"in h?"MSAnimationEnd":"WebkitTransition"in h?"webkitAnimationEnd":null;try{v.style.height="100vh"}catch(e){}const R="100vh"===v.style.height;try{v.style.height=""}catch(e){}const F={cssPropertyName:C,cssPropertyValuePrefix:S,inputPlaceholder:"placeholder"in e,maxlengthTextarea:"maxLength"in t,onInput:"oninput"in e,touch:!!("ontouchstart"in window)&&!c,overflowScrolling:T("overflowScrolling",!0),textOverflow:T("textOverflow",!0),transform:T("transform",!0),boxShadow:T("boxShadow",!0),opacity:T("opacity",!1),animation:T("animationName",!0),transition:T("transitionProperty",!0),transformProperty:C("transform"),positionSticky:null!==S("position","sticky"),gradient:null!==S("backgroundImage","linear-gradient(top, black, white)"),backgroundSvg:Boolean(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),threeDTransforms:k(),supportsAR:I(),webkitVersion:L,iosVersion:l,ieVersion:i,androidVersion:u,os:A,vhHeight:R,transitionEndName:O,animationEndName:x,isMobileIos:n,isIpad:s,isSafari:g,isIe:o,isAndroidMobile:d,isAndroidInternet:m,isHandheldPhone:p,rtl:!1,isMobileOptimized:!1};return f=F,F},P="as-keyboarduser",D=[c.Tab,c.Esc,c.Alt,c.Ctrl,c.ArrowDown,c.ArrowLeft,c.ArrowRight,c.ArrowUp];let O=null,x=!1,R=!1,F=!1;const M=()=>{O&&(O.classList.toggle("as-mouseuser",x),O.classList.toggle(P,R))},B=()=>{x||(x=!0,R=!1,M())},_=e=>{!R&&D.indexOf(e.keyCode)>-1&&(x=!1,R=!0,M())};n(3797);const $=(e,t)=>{(0,s.useEffect)((()=>(e&&t&&window.addEventListener(e,t),()=>{e&&t&&window.removeEventListener(e,t)})),[e,t])};var U=n(2224),K=n.n(U);const V=(e,t,a)=>(0,s.useCallback)(K().debounce(e,t,a),[]),H=[{name:"small",mediaQuery:"only screen and (max-width: 1023px) and (max-device-width: 736px)"},{name:"medium",mediaQuery:"only screen and (max-width: 1023px) and (max-device-width: 736px)"},{name:"large",mediaQuery:"only screen and (max-width: 1440px)"},{name:"xlarge",mediaQuery:"only screen and (min-width: 1441px)"}],j=e=>{for(let t=0;t<e.length;t+=1){const a=e[t];if(window.matchMedia(a.mediaQuery).matches)return a.name}return"large"},G=(e={})=>{const{recalculate:t=!0,debounceWait:a=100,breakpoints:r=H}=e,[n,s]=l().useState(j(r)),o=V((()=>s(j(r))),a);return $("resize",t?o:void 0),[n]},W={open:"Open",close:"Close",top:"Top",right:"Right",bottom:"Bottom",left:"Left",next:"Next",previous:"Previous",selected:"Selected",show:"Show",hide:"Hide",play:"Play",pause:"Pause",mute:"Mute",unmute:"Unmute",loading:"Loading...",fullscreen:"Show fullscreen",pip:"Show picture-in-picture",airplay:"Show AirPlay",captions:"Show captions",showMore:"Show more",showLess:"Show less",more:"More",less:"Less",item:"Item",image:"Image",video:"Video",edit:"Edit",change:"Change",update:"Update",add:"Add",remove:"Remove",save:"Save",cancel:"Cancel",submit:"Submit",reset:"Reset",opensNewWindow:"(Opens in a new window)",galleryItem:"Gallery item"},q=()=>((0,s.useEffect)((()=>{const e=new CustomEvent("echoPerformanceNowEvent",{detail:{performanceNow:performance.now(),id:"react-app-render"}});window.dispatchEvent(e)}),[]),null),Y=(0,s.createContext)({retina:!0,viewport:"large",assets:W}),z=()=>(0,s.useContext)(Y),X=({children:e})=>{const[t]=G(),a={...W,...window.GLOBAL_ASSETS,...window.assets,...window.testAssets},r={...window.fragments,...window.testFragments};return l().createElement(l().Fragment,null,l().createElement(Y.Provider,{value:{viewport:t,assets:a,fragments:r}},e),l().createElement(q,null))},J="a",Z="b",Q="c",ee="d",te="events",ae="m",re="meta",ne="t",se="p",le="r",oe=[J,Z,Q,ee,ae,ne,se,le],ie=["f",...oe],ce={createdAt:0,lastUpdated:{},shouldPersist:!1,wasPersisted:!1,wasAncestorPersisted:!1},de="action",me="metric",ue="rule",pe="action",ge="!focused",ye="clear_bind_messages",he="click",Ee="commit",ve="data",be="delete_mod",fe="focused",we="load",Ne="maybe_set_focus",Se="metric",Ce="mouseover",Te="mouseout",Le="run_deferred_data_updates",ke="set",Ie="set_bind_property",Ae="set_bind_value",Pe="set_mod_data",De="set_mod_property",Oe="set_at_path",xe={ERROR:"ERROR",WARNING:"WARN",INFO:"INFO"},Re=["/","^","~"],Fe="_$$_",Me="_$$CACHE",Be=`${Fe}pathToValue`,_e="isLoadingFault",$e="isLoadingSubmit",Ue="wasSubmitted",Ke="wasValidated",Ve="error",He="messages",je="polling",Ge="PAGE",We="MODULE",qe="BINDING",Ye={title:"",metric:{},metricName:"",url:"",htmlUrl:""},ze=!1,Xe={"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"Fetch","x-aos-model-page":"","x-aos-stk":"",syntax:"",modelVersion:""};let Je=[];const Ze=e=>{Je.push(e)},Qe=()=>{Je.forEach((e=>{e()}))},et=()=>{Je=[]},tt=/"/g,at="&quot;",rt=(e,t,a)=>{const r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",t.replace(tt,at)),r.setAttribute("value",a.replace(tt,at)),e.appendChild(r)},nt=e=>{if(!e)return null;const t=e.head&&e.head.data||{},a=t.method?(t.method+"").toLowerCase():"get",r=parseInt((e.head&&e.head.status)+"",10),n=r>=301&&r<=307,s=r>=400&&r<600;return n&&("get"===a||"delete"===a||"put"===a)?((e,t)=>{if(!e)return;const a=[];if(t){for(const e in t)a.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]+""));e+=(e.indexOf("?")>-1?"&":"?")+a.join("&")}E.doRedirect(e)})(t.url,t.args):n&&"post"===a&&((e,t)=>{if(!e)return;const a=document.createElement("form"),r={};if(a.setAttribute("id","AsJsonRpcForm"),a.setAttribute("action",e),a.setAttribute("method","post"),t)for(const e in t){const n=t[e];if(Array.isArray(n))for(let e=0;e<n.length;e++)r[e]!==n[e]&&(rt(a,e+"",n[e]+""),r[e]=n[e]);else r[e]!==n&&(rt(a,e,n+""),r[e]=n)}a.style.display="none",document.body.appendChild(a),a.submit()})(t.url,t.args),s||n?null:e.body||null},st=({from:e="",to:t=""})=>{if(!t)return e;let a="";const r=t[0];switch(Re.includes(r)&&(a=r,t=t.split("").slice(1).join("")),a){case"/":return t;case"^":return t?e.split(".").slice(0,-1).concat(t).join("."):e.split(".").slice(0,-1).join(".");default:return e?`${e}.${t}`:t}},lt=e=>e.split(".").slice(0,-1).join("."),ot=e=>e.split(".").pop()||"",it=(e,t,a=new Set)=>(K().get(e,[t,Q],[]).forEach((r=>{const n=`${t}.${r}`;e[n]&&a.add(n),it(e,n,a)})),[...a]),ct=({currentModKey:e="",get:t=""})=>{let a="";const r=t[0];Re.includes(r)&&(a=r,t=t.split("").slice(1).join(""));const n=t.split("."),s=n.findIndex((e=>ie.includes(e))),l=n.slice(0,s),o=st({from:e,to:`${a}${l.join(".")}`}),i=n.slice(s);return i[0]===Z&&i[2]!==se&&i.splice(2,0,se),[o,...i]},dt=e=>{const t=3===e.length&&e[1]===ee,a=3===e.length&&e[1]===se,r=5===e.length&&e[1]===Z&&e[3]===se;return t||a||r},mt=(e,{modKey:t,bindName:a})=>{const r=K().get(e,[t,Z,a,se,Be],""),n=ct({currentModKey:t,get:r});return K().get(e,n,null)},ut=e=>null==e||""===String(e).trim(),pt=e=>"string"==typeof e?e:JSON.stringify(e),gt=e=>{let t=null;try{t=nt(e)}catch(e){}return t},yt=e=>{if(null==e)return"";const t=Math.abs(e/60),a=Math.abs(e%60);return`GMT${e>0?"-":"+"}${t<10?"0":""}${t}${a<10?"0":""}${a}`},ht=(e,t,a)=>{const r=t.pop()||"";K().get(e,t,{})[r]=a};class Et extends Error{constructor(e,t){const a=e.status||0===e.status?e.status:"",r=`${a} ${e.statusText||""}`.trim(),n=r?`response.status: ${r}`:"an unknown error";t.options&&delete t.options.body,t.options&&delete t.options.headers,super(`Request failed with ${n}, response.type: ${e.type}, response.redirected: ${e.redirected}, request.options: ${JSON.stringify(t.options)}, content-type: ${e.headers&&e.headers.get("Content-Type")}, x-request-id: ${e.headers&&e.headers.get("x-request-id")}`),this.name="HTTPError",this.code=a}}class vt extends Error{constructor(e,t,a){const r=e.status||0===e.status?e.status:"",n=`${r} ${e.statusText||""}`.trim(),s=n?`response.status: ${n}`:"an unknown error";t.options&&delete t.options.body,t.options&&delete t.options.headers,super(`Received non-JSON response from JSON API with error.message: ${a&&a.message}, ${s}, response.type: ${e.type}, response.redirected: ${e.redirected}, request.options: ${JSON.stringify(t.options)}, content-type: ${e.headers&&e.headers.get("Content-Type")}, x-request-id: ${e.headers&&e.headers.get("x-request-id")}`),this.name="JSONError",this.code=r}}class bt extends Error{constructor(e){e.options&&delete e.options.body,e.options&&delete e.options.headers,super(`Request timed out after ${e.options&&e.options.timeout} ms, request.options: ${JSON.stringify(e.options)}`),this.name="TimeoutError",this.code=408}}const ft=async(e,t={})=>{let a;t.timeout=t.timeout||1e4;let r=new AbortController;const n={url:e,options:{method:"GET",credentials:"same-origin",signal:r.signal,...t}},s=fetch(n.url,n.options).then((e=>e)),l=new Promise(((e,s)=>{a=setTimeout((()=>{r.abort(),s(new bt(n))}),t.timeout)}));try{const e=window.performance&&window.performance.now(),t=await Promise.race([s,l]);if(t.ok){const a=window.performance&&window.performance.now();return window.performance&&function({request:e,response:t,start:a,end:r}){const n=i("as-utilities/measureFetch");try{let n={};n=new URL(t.url);const s=new CustomEvent("echoCustomEvent",{detail:{type:"fetchTimer",message:`hostname: ${n.hostname}, pathname: ${n.pathname}, duration: ${r-a}, request.options: ${JSON.stringify(e.options)}, response.status: ${t.status}, response.type: ${t.type}, content-type: ${t.headers&&t.headers.get("Content-Type")}, x-request-id: ${t.headers&&t.headers.get("x-request-id")}`}});window.dispatchEvent(s)}catch(e){n.error(e)}}({request:n,response:t,start:e,end:a}),t}throw new Et(t,n)}catch(e){throw e}finally{clearTimeout(a)}},wt=async(e,t={})=>{let a;const r={url:e,options:t};try{a=await ft(r.url,r.options)}catch(e){throw e}try{return await a.json()}catch(e){throw new vt(a,r,e)}},Nt=e=>{const t=new ArrayBuffer(e.length/2),a=new Uint8Array(t);for(let t=0,r=0;t<e.length;t+=2,r++)a[r]=parseInt(e.substr(t,2),16);return a},St="SHA-256",Ct="spki",Tt=!1,Lt=!0,kt="encrypt",It="jwk",At="EC_v2",Pt="EC_v2.1",Dt="EC_v3",Ot="rsa-with-hash",xt={name:"ECDH",namedCurve:"P-256"},Rt=(e,t)=>{const a=(e=>{const t=new ArrayBuffer(e.length),a=new Uint8Array(t);for(let t=0,r=e.length;t<r;t++)a[t]=e.charCodeAt(t);return t})(window.atob(e));return window.crypto.subtle.importKey(Ct,a,{name:t,hash:St},Tt,[kt])},Ft=(e,t,a)=>window.crypto.subtle.encrypt({name:t.algorithm},e,(e=>(new TextEncoder).encode(e))(a)).then((e=>({cipherText:window.btoa(String.fromCharCode(...new Uint8Array(e))),publicKeyHash:t.publicKeyHash}))),Mt=(e,t)=>{let a=t;return"string"==typeof a&&(a=a.replace(/\s/g,"")),Rt(e.publicKey,e.algorithm).then((t=>Ft(t,e,a)))};const Bt=new(n(7630).ApplePayCryptoLib_ECV2),_t=(e,t)=>{const a=e.serverKeyAgreementPublicKey,r=Nt(a);return window.crypto.subtle.importKey(Ct,r,xt,Lt,[]).then((e=>window.crypto.subtle.exportKey(It,e).then((e=>Bt.ec_v2_web(JSON.stringify(e),t)))))};class $t{constructor(e,t,a){this._encryptionVersion=e,this._encryptedData=t,this._publicKeyHash=a}}class Ut{constructor(e,t){this.ephemeralPublicKey=e,this.gcmEncryptedData=t.substr(0,t.length-32),this.gcmTag=t.substr(t.length-32)}}const Kt=new class{constructor(){this.ecdhParams={name:"ECDH",namedCurve:"P-256"},this.keyLengthECAndDerived=256,this.keyLengthSecretKeyInBytes=16,this.aesParamsForDerivedSecret={name:"AES-GCM",length:this.keyLengthECAndDerived},this.aesParamsForSecretKey={name:"AES-GCM",length:this.keyLengthSecretKeyInBytes},this.sha256="SHA-256"}ec_v2_web(e,t){if(!e||0==e.trim().length)throw"RecipientPublicKeyJwk is invalid";if(!t||0==t.trim().length)throw"PlaintextToEncrypt is invalid";let a;try{a=JSON.parse(e)}catch(e){throw"RecipientPublicKeyJwk is not proper JSON"}const r=window.crypto.subtle.generateKey(this.ecdhParams,!1,["deriveKey"]),n=window.crypto.subtle.importKey("jwk",a,this.ecdhParams,!0,[]);return Promise.all([r,n]).then((e=>{const a=e[0],r=e[1];return this.innerEcv2Encrypt(a.privateKey,a.publicKey,r,t)}))}innerEcv2Encrypt(e,t,a,r){const n={name:"ECDH",public:a},s=window.crypto.subtle.deriveKey(n,e,this.aesParamsForDerivedSecret,!0,["encrypt"]),l=window.crypto.subtle.exportKey("spki",a);return Promise.all([s,l]).then((e=>{const a=e[0],n=e[1];return window.crypto.subtle.exportKey("raw",a).then((e=>this.ecv2KdfWrapper(t,r,e,n)))}))}ecv2KdfWrapper(e,t,a,r){return this.ecv2Kdf(a,e,this.keyLengthECAndDerived).then((a=>window.crypto.subtle.digest(this.sha256,a).then((a=>{const n=a.slice(0,this.keyLengthSecretKeyInBytes);return window.crypto.subtle.importKey("raw",n,this.aesParamsForSecretKey,!1,["encrypt"]).then((a=>{const n=new ArrayBuffer(this.keyLengthSecretKeyInBytes),s=this.convertStringToUTF8ByteArray(t),l={name:"AES-GCM",iv:n},o=window.crypto.subtle.encrypt(l,a,s),i=this.ecPublicKeyToRawUncompressed(e,this.keyLengthECAndDerived);return this.createEcv2Response(o,i,r)}))}))))}createEcv2Response(e,t,a){const r=window.crypto.subtle.digest(this.sha256,a);return Promise.all([e,t,r]).then((e=>{const t=e[0],a=e[1],r=e[2],n=this.base64EncodeFromBuffer(t),s=this.base64EncodeFromBuffer(a),l=new Ut(s,n);return new $t("EC_v2.1",l,this.base64EncodeFromBuffer(r))}))}ecv2Kdf(e,t,a){return this.ecPublicKeyToRawUncompressed(t,a).then((t=>{let a=0;const r=new ArrayBuffer(t.byteLength+4+e.byteLength),n=new Uint8Array(r);a=this.write(new Uint8Array(e),n,a);const s=new Uint8Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=1,a=this.write(s,n,a),this.write(new Uint8Array(t),n,a),r}),(e=>{throw"KDF failed"}))}ecPublicKeyToRawUncompressed(e,t){t/=8;const a=new ArrayBuffer(2*t+1),r=new Int8Array(a);let n=0;r[n]=4,n++;return window.crypto.subtle.exportKey("jwk",e).then((e=>{const t=this.base64UrlDecode(e.x||"");for(var s=0;s<t.length;++s,++n)r[n]=t[s];const l=this.base64UrlDecode(e.y||"");for(s=0;s<l.length;++s,++n)r[n]=l[s];return a}),(e=>{throw"Cannot uncompress key"}))}base64UrlDecode(e){for(e=e.replace(/-/g,"+").replace(/_/g,"/");e.length%4;)e+="=";const t=window.atob(e),a=new Int8Array(t.length);for(let e=0;e<t.length;++e)a[e]=t.codePointAt(e)||0;return a}write(e,t,a){let r=0;for(;r<e.length;++r)t[r+a]=e[r];return r+a}base64EncodeFromBuffer(e){let t="";const a=new Uint8Array(e),r=a.byteLength;for(let e=0;e<r;e++)t+=String.fromCharCode(a[e]);return btoa(t)}padStart(e,t,a){return t>>=0,e.length>t?e:((t-=e.length)>a.length&&(a+=a.repeat(t/a.length)),a.slice(0,t)+e)}convertStringToUTF8ByteArray(e){const t=new Uint8Array(e.length);return Array.prototype.forEach.call(t,((t,a,r)=>{r[a]=e.charCodeAt(a)})),t}},Vt=(e,t)=>{const a=e.serverKeyAgreementPublicKey,r=Nt(a);return window.crypto.subtle.importKey(Ct,r,xt,Lt,[]).then((e=>window.crypto.subtle.exportKey(It,e).then((e=>Kt.ec_v2_web(JSON.stringify(e),t)))))};const Ht=new(n(6941).ApplePayCryptoLib_ECV3),jt=(e,t)=>{const a=e.serverSigningPublicKey,r=e.serverKeyAgreementPublicKey,n=Nt(a),s=Nt(r),l=window.crypto.subtle.importKey(Ct,n,xt,Lt,[]),o=window.crypto.subtle.importKey(Ct,s,xt,Lt,[]);return Promise.all([l,o]).then((a=>{const r=a[0],n=a[1],s=window.crypto.subtle.exportKey(It,r),l=window.crypto.subtle.exportKey(It,n);return Promise.all([s,l]).then((a=>{const r=JSON.stringify(a[0]),n=JSON.stringify(a[1]);return Ht.ec_v3_web_with_jws(r,n,e.nonce,t,"ino")}))}))},Gt={[At]:t,[Pt]:a,[Dt]:r,[Ot]:e},Wt=Object.values(xe),qt=(e,t=xe.ERROR)=>({key:"",text:e||"",level:Wt.includes(t)?t:xe.ERROR}),Yt=(e,t)=>{const a=[t,ee,He];return[...K().get(e,[...a,"errors"],[]).map((e=>qt(e,xe.ERROR))),...K().get(e,[...a,"infos"],[]).map((e=>qt(e,xe.INFO)))]},zt=(e,t)=>{const a=e[`${t}.${Ve}`];return[...K().get(a,[ee,"errors"],[]).map((e=>qt(e,xe.ERROR))),...K().get(a,[ee,"infos"],[]).map((e=>qt(e,xe.INFO)))]},Xt=(e,{modKey:t,bindName:a="",level:r="",includeAll:n=!1})=>{if(!t)return[];let s=[...K().get(e,[t,ae],[]),...Yt(e,t),...zt(e,t)];if(n)return s;if(a){const e=`${Z}.${a}`;s=s.filter((t=>t.key===e))}else s=s.filter((e=>!e.key));return r&&(s=s.filter((e=>e.level===r))),s},Jt=e=>Object.entries(e).map((([e,t])=>`${encodeURIComponent(pt(e))}=${encodeURIComponent(pt(t))}`)).join("&"),Zt=({state:e,submitFrom:t,shouldValidate:a=!0,setIsLoading:r=K().noop,setWasSubmitted:n=K().noop,setWasValidated:s=K().noop})=>{const{bindingToFocus:l}=Sa,o={},i={},c=[],d=[];let m=!1;!function t(r){const n=e[r];if(!Boolean(n&&n[se].active&&n[se].enabled&&!n[re].get().wasPersisted))return;const s=n[Z];Object.entries(s).forEach((([t,n])=>{const s=`${r}.${t}`,u=Boolean(n[se].submit&&n[se].active),p=n[se].validate;if(!u&&!p)return;const g=K().get(e,[r,Z,t,se,Be],""),y=ct({currentModKey:r,get:g}),h=(e=>ut(e)?"":e)(K().get(e,y,"")),E=Boolean(n[se].optional&&!h);if(a&&!1!==p&&!E){const a=Xt(e,{modKey:r,bindName:t,level:xe.ERROR}),s=Boolean(a.length),o=Boolean(n[se].valid);if(s||o)return m=!0,d.push({modKey:r,bindName:t,hasError:!0}),l.add(r,t),void(u&&c.push({modKey:r,bindName:t,hasError:!0}));d.push({modKey:r,bindName:t,hasError:!1})}if(u){c.push({modKey:r,bindName:t,hasError:!1}),o[s]=h;const{encryption:e}=n[se];e&&h&&(i[s]=e)}})),n[Q].forEach((e=>{t(`${r}.${e}`)}))}(t),m||r(),n(c),s(d);const u=Boolean(Object.keys(i).length);if(!m&&u){const e=Object.keys(i),t=[];return Object.entries(i).forEach((([e,a])=>{const r=o[e];t.push(((e,t)=>{const a=`message=encrypt.call,scheme=${e.scheme}`,r=new CustomEvent("echoCustomEvent",{detail:{message:a,id:"as-crypto.encrypt",type:"fn.call"}});window.dispatchEvent(r);try{const a=Gt[e.scheme].encrypt(e.config,t);return a.catch((t=>{const a=t.toString?t.toString():"",r=`message=${t.message},stack=${t.stack},err=${t},scheme=${e.scheme},errStr=${a}`,n=new CustomEvent("echoCustomEvent",{detail:{message:r,id:"as-crypto.encrypt",type:"error"}});window.dispatchEvent(n)})),a}catch(t){const a=t.toString?t.toString():"",r=`message=${t.message},stack=${t.stack},ex=${t},scheme=${e.scheme},exStr=${a}`,n=new CustomEvent("echoCustomEvent",{detail:{message:r,id:"as-crypto.encrypt",type:"error"}});return window.dispatchEvent(n),null}})(a,r))})),Promise.all(t).then((t=>{t.forEach(((t,a)=>{const r=e[a],n=i[r];o[r]=null===t&&"rsa-with-hash"===n.scheme?"FAIL":t}));return{body:Jt(o),submitted:c,validated:d}})).catch((e=>Promise.reject({error:e,submitted:c,validated:d})))}return new Promise(((e,t)=>{if(m){t({error:new Error("Form submitted with client-side errors, canceling POST request."),submitted:c,validated:d})}else{e({body:Jt(o),submitted:c,validated:d})}}))},Qt=(e,t)=>{[t,...Sa.dependents.get(t)].forEach((t=>{if(!e[t])return;e[t][se][Me].clear();const a=K().get(e,[t,Z],{});Object.values(a).forEach((e=>{e[se][Me].clear()}))}))},ea=(e,{state:t,modKey:a,meta:r,key:n,value:s})=>{const{subscriptions:l}=Sa;((e,t)=>{if(e!==He||!t)return!1;const a=Array.isArray(t.errors),r=Array.isArray(t.infos);return a||r})(n,s)&&r.set("lastUpdated",[ae]),Object.defineProperty(e,`${Fe}${n}`,{enumerable:!1,writable:!0,value:s}),Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>e[`${Fe}${n}`],set(s){e[`${Fe}${n}`]!==s&&(e[`${Fe}${n}`]=s,r.set("lastUpdated",[ee]),Qt(t,a),l.run([a]))}})},ta=({state:e,modKey:t,meta:a,initData:r={}})=>{const n={};return Object.entries(r).forEach((([r,s])=>{ea(n,{state:e,modKey:t,meta:a,key:r,value:s})})),n},aa=({state:e,onOrbitUpdate:t=K().noop,customFetcher:a})=>{const{headers:r}=Sa,n=[],s=new WeakMap;function l(e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function o(){if(!n.length)return;const e=n[0],a=s.get(e);a&&(t(e,a),n.shift(),s.delete(e),o())}async function c(e){const t=i("createAjax/fetchOrbit"),{body:n,url:c,onComplete:m=K().noop}=e,u={headers:r.get(),method:"POST",credentials:"include",body:n};try{let t;a?t=await a(e,u):(u.timeout=9e4,t=await wt(c,u)),s.set(e,gt(t))}catch(a){t.error(a),l(e),d(e,!1),m({data:{},updated:[],isError:!0})}finally{o()}}function d(t,a){const{modKey:r,origin:n}=t;if(r&&ht(e,[r,se,$e],a),n){const{modKey:t,bindName:r=""}=n;ht(e,[t,Z,r,se,$e],a)}}function m(t){t.forEach((({modKey:t,bindName:a})=>{ht(e,[t,Z,a,se,Ue],!0)}))}function u(t){t.forEach((({modKey:t,bindName:a})=>{ht(e,[t,Z,a,se,Ke],!0)}))}return{fetchDataFault:async function(t){const n=i("createAjax/fetchDataFault"),{modKey:s,url:l="",onComplete:o=K().noop}=t,c={headers:r.get(),method:"GET",credentials:"include"};let d;try{a?d=await a(t,c):(c.timeout=9e4,d=await wt(l,c)),function(t,a){const{modKey:r,key:n="",onComplete:s=K().noop}=t,l=n?K().get(a,n):a;if(l){const t=K().get(e,[r,re]);K().get(e,[r,re,"set"],K().noop)("lastUpdated",[ee]),Object.entries(l).forEach((([a,n])=>{const s={state:e,modKey:r,meta:t,key:a,value:n};ea(e[r][ee],s)})),ht(e,[r,se,_e],!1),s({data:l,updated:[r],isError:!1})}}(t,gt(d))}catch(t){n.error(t),ht(e,[s,se,_e],!1),o({data:{},updated:[],isError:!0})}},enqueue:function(t){n.push(t);const{modKey:a,submit:r,shouldValidate:s=!0,onComplete:o=K().noop}=t,p=()=>d(t,!0);if(!r)return p(),void c(t);const g={state:e,submitFrom:a,shouldValidate:s,setIsLoading:p,setWasSubmitted:m,setWasValidated:u},y=i("createAjax/enqueue/getRequestBody");Zt(g).then((({body:e})=>{t.body=e,c(t)})).catch((({error:e,submitted:a,validated:r})=>{y.debug(e),d(t,!1),m(a),u(r),l(t),o({data:{},updated:[],isError:!0})}))}}},ra=(e,t,{forceDelete:a=!1}={})=>{const r=[];if(!e[t])return r;const n=e[t][re],s=n.get().shouldPersist&&!a;it(e,t).forEach((t=>{s?e[t][re].set("wasAncestorPersisted",!0):delete e[t],r.push(t)})),s?n.set("wasPersisted",!0):delete e[t],r.push(t);const l=t.split("."),o=l.pop(),i=l.join("."),c=e[i];return c&&(c[Q]=c[Q].filter((e=>e!==o)),r.push(i)),r},na=(e,{state:t,actionArgs:a=[],currentModKey:r="",ajax:n,key:s="",origin:l,deferDataUpdate:o,expectedDataUpdate:i})=>{const c=new Set,d=K().get(window,"asMetrics.fireMicroEventCollection",K().noop),m=K().get(window,"acStore.__setItemCount",K().noop),{subscriptions:u}=Sa,p=(e,{updatedActionArgs:g=null,isDelayed:y=!1}={})=>{if(!(K().isObject(e)&&!Array.isArray(e)))return e;g&&(a=g);const h=e.args||[],E=h.map((e=>p(e)));if(e.delay&&!y)return e.delayId&&clearTimeout(e.delayId),e.delayId=setTimeout((()=>{p(e,{isDelayed:!0})}),e.delay),null;if(e.condition&&!p(e.condition))return null;if(e.if){const t=p(e.if)?e.then:e.else;return p(t)}if(!e.streaming&&e.url){const t=K().toString(p(e.url)||"");if("_top"===e.target)window.location.href=t;else{const a=e.module?st({from:r,to:p(e.module)}):r,s=((e,{modKey:t,origin:a,deferDataUpdate:r,expectedDataUpdate:n})=>({modKey:t,origin:a,isDataFault:!1,deferDataUpdate:r,expectedDataUpdate:n,url:e.url||"",submit:Boolean(e.submit),shouldValidate:!1!==e.validate,includeGsToken:e.includeGSToken||!1,body:null}))({...e,url:t},{modKey:a,origin:l||{modKey:r},deferDataUpdate:o,expectedDataUpdate:i});n.enqueue(s)}}if(e.streaming){const t=new window.EventSource(e.url);t.addEventListener("message",(e=>{const t=JSON.parse(e.data);gt(t)})),t.addEventListener("close",(e=>{t.close();const a=JSON.parse(e.data);gt(a)}))}if("error"in e)return p(e.error);if("val"in e){const t=p(e.val),r=K().isNumber(t)?t:0;return a[r]}if(e.set){const a=K().toString(p(e.set)),n=ct({currentModKey:r,get:a}),s=p(e.to);dt(n)&&ht(t,n,s)}if(e.update){const a=p(e.from)||e.from||{},n=K().toString(p(e.update))||ee;if(K().isObject(a)){const e=ct({currentModKey:r,get:n});Object.entries(a).forEach((([a,r])=>{ht(t,[...e,a],r)}))}}if(e.get){const n=E.length>0?E:a,s=p(e.get,{updatedActionArgs:n});if(K().isString(s)){const e=ct({currentModKey:r,get:s}),a=K().get(t,e);if(Boolean(a&&a.run))return a.run({actionArgs:n,origin:l});const[o]=e;return o!==r&&c.add(o),a}return p(s,{updatedActionArgs:n})}if(e.do){(Array.isArray(e.do)?e.do:[e.do]).forEach((e=>{if(K().isString(e)){const n=ct({currentModKey:r,get:e}),s=K().get(t,n);if(s.run){const e={actionArgs:a,origin:l,deferDataUpdate:o,expectedDataUpdate:i};s.run(e)}else ze}else p(e)}))}if(e.metric){const n=K().toString(p(e.metric)),s=ct({currentModKey:r,get:n}),o=K().get(t,s,{});o.run&&o.run({actionArgs:a,origin:l})}if(e.microEvents||e.macroEvents||e.products){const t=K().toString(p(e.macroEvents)),a=K().toString(p(e.products)),r=(e.microEvents||[]).map((e=>({key:p(e.key),value:p(e.value),feature:p(e.feature),slot:p(e.slot)})));if(Boolean(t||a||r.length)){const e={microEvents:r,macroEvents:t};a&&(e.products=a),d({[s]:e},(()=>{}))}}if(e.delete&&p(e.delete)){const e=ra(t,r);u.run(e)}if(e.op){const t=K().toString(p(e.op)),a=t.startsWith("!"),r=!a,n=a?t.slice(1):t,s=E[0],l=E.slice(1);if("NUMERIC"===n){return E.every((e=>!Number.isNaN(parseFloat(e))))?r:a}if("MATCH"===n){const e=K().toString(E[0]);return l.every((t=>K().toString(t).match(e)))?r:a}if("MATCHALL"===n){const e=K().toString(E[0]);return l.every((t=>e.match(K().toString(t))))?r:a}if("MATCHANY"===n){const e=K().toString(E[0]);return l.some((t=>e.match(K().toString(t))))?r:a}if("EMPTY"===n){return E.every((e=>ut(e)))?r:a}if("AND"===n){return E.every((e=>Boolean(e)))?r:a}if("OR"===n){return E.some((e=>Boolean(e)))?r:a}if("EQ"===n){return E.every((e=>e===E[0]))?r:a}if("GT"===n){const e=parseFloat(s);return l.every((t=>e>parseFloat(t)))?r:a}if("LT"===n){const e=parseFloat(s);return l.every((t=>e<parseFloat(t)))?r:a}if("GTE"===n){const e=parseFloat(s);return l.every((t=>e>=parseFloat(t)))?r:a}if("LTE"===n){const e=parseFloat(s);return l.every((t=>e<=parseFloat(t)))?r:a}if("ADD"===n)return l.reduce(((e,t)=>e+t),s);if("SUB"===n)return l.reduce(((e,t)=>e-parseFloat(t)),parseFloat(s));if("DIV"===n)return l.reduce(((e,t)=>e/parseFloat(t)),parseFloat(s));if("JOIN"===n&&!E[1]){const e=s;return E.slice(2).join(K().toString(e))}if("JOIN"===n&&E[1])return E.slice(2).filter((e=>!ut(e))).join(K().toString(s));if("IN"===n){const e=E[1],t=K().isObject(s)?null:s;return Array.isArray(e)&&e.includes(t)||K().isString(t)&&K().isString(e)&&e.includes(t)?r:a}if("REPLACE"===n){const e=K().toString(E[0]),t=new RegExp(K().toString(E[1])),a=K().toString(E[2]);return e.replace(t,a)}if("LENGTH"===n)return K().isString(s)||Array.isArray(s)?s.length:K().isNumber(s)?s.toString().length:0;if("ROUND"===n){const e=parseFloat(K().toString(E[0])),t=parseFloat(E[1]);return null===t?e:e.toFixed(t)}if("FLOAT"===n){const e=E[1]?K().toString(E[1]):".",t=K().toString(E[0]).split(e,2).map((e=>e.replace(/[^\d\-+]/g,""))).join(".");return parseFloat(t)}if("NOT"===n)return!E[0];if("LUHN"===n){const e=K().toString(E[0]).replace(/\D/g,""),t=e.length%2;let a=0;for(let r=0;r<e.length;r++){let n=parseFloat(e.charAt(r));r%2===t&&(n*=2,n>9&&(n-=9)),a+=n}return a%10==0}if("DEVICEID"===n&&window.DeviceID)return window.DeviceID.validate();if("FDC"===n)return encodeURIComponent(JSON.stringify({U:window.navigator.userAgent,L:window.navigator.language||"",Z:yt((new Date).getTimezoneOffset()),V:"1.0"}))}return"updateBagCount"===e.method&&m(parseFloat(h[0])),e.print&&window.print(),e};return{value:p(e),dependencies:[...c]}},sa=({state:e,ajax:t,modKey:a="",type:r=de,initActions:n={}})=>{const s={};return Object.entries(n).forEach((([n,l])=>{const o=(({modKey:e="",type:t=de,name:a=""})=>{let r;switch(t){case me:r=ne;break;case ue:r=le;break;default:r=J}return`${e}.${r}.${a}`})({modKey:a,type:r,name:n});s[n]={key:o,type:r,action:l,run(s={}){const{value:i}=na(l,{state:e,currentModKey:a,ajax:t,key:o,actionArgs:[],origin:{modKey:a,name:n,type:r},...s});return i}}})),s},la=({state:e,ajax:t,modKey:a,bindName:r,initEvents:n=[]})=>{const s=n;s.forEach((n=>{n.on===we&&Ze((()=>{const s={modKey:a,bindName:r,eventType:we};l(n),na(n,{state:e,currentModKey:a,ajax:t,origin:s})}))}));const l=t=>{const n=Array.isArray(t.do)?t.do:[t.do],s=Boolean(n.find((t=>{if(K().isString(t)){const r=ct({currentModKey:a,get:t});return K().get(e,[...r,de,je])===qe}return!1})));ht(e,[a,Z,r,se,je],s)};return{actions:s,run:function(n="",l={}){const o=n?s.filter((e=>e.on===n)):s,i=mt(e,{modKey:a,bindName:r}),c={modKey:a,bindName:r,eventType:n};o.forEach((r=>{na(r,{state:e,currentModKey:a,ajax:t,origin:c,actionArgs:[i],...l})}))}}},oa=(e,{state:t,ajax:a,modKey:r,meta:n,bindName:s="",pathToValue:l="",key:o,value:i})=>{const{dependents:c,subscriptions:d}=Sa,m=Boolean(s&&l);Object.defineProperty(e,`${Fe}${o}`,{enumerable:!1,writable:!0,value:i}),Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get(){const n=e[`${Fe}${o}`],i=[],d={modKey:r,isCompute:!0,bindName:s};if(m){const e=ct({currentModKey:r,get:l}),a=K().get(t,e);i.push(a)}const{value:u="",dependencies:p=[]}=na(n,{state:t,ajax:a,actionArgs:i,currentModKey:r,origin:d});return p.forEach((e=>{c.add(e,r)})),u},set(a){if(e[`${Fe}${o}`]!==a){e[`${Fe}${o}`]=a;const s=m?Z:se;n.set("lastUpdated",[s]),Qt(t,r),d.run([r])}}})},ia=({state:e,ajax:t,modKey:a="",meta:r,defaultProps:n={},initProps:s={},bindName:l=""})=>{const o={key:"",...n,...s},i=Boolean(l),c=i?`${a}.${l}`:a;let d="";i&&(d=o.key?String(o.key):`${ee}.${l}`),Object.entries(o).forEach((([n,s])=>{oa(o,{state:e,ajax:t,modKey:a,meta:r,bindName:l,pathToValue:d,key:n,value:s})})),Object.defineProperty(o,"key",{enumerable:!0,writable:!1,value:c}),d&&Object.defineProperty(o,Be,{enumerable:!1,writable:!1,value:d});let m=null;const u={get:()=>m||(m={key:c},Object.entries(o).forEach((([e,t])=>{m&&(m[e]=t)})),m),clear:()=>{m=null},debug:()=>m};return Object.defineProperty(o,Me,{enumerable:!1,writable:!1,value:u}),o},ca={submit:!1,[Ue]:!1,[Ke]:!1,[$e]:!1,polling:!1,validate:null,enabled:!0,active:!0,optional:!1,focused:!1,visible:!0,valid:"",info:"",warn:"",type:"",subtype:""},da=({state:e,meta:t,ajax:a,modKey:r,initBindings:n={}})=>{const{bindingToFocus:s}=Sa,l={};return Object.keys(n).forEach((o=>{const i={...ca,...n[o]},c={},d=Object.entries(i).reduce(((e,[t,a])=>([se,te].includes(t)||(e[t]=K().get(i,[se,t],a),"focused"===t&&s.is(r,o)&&(e[t]=!1)),e)),{...i[se]||{}});Object.defineProperties(c,{[se]:{enumerable:!0,writable:!1,value:ia({modKey:r,ajax:a,meta:t,bindName:o,initProps:d,state:e})},[te]:{enumerable:!0,writable:!1,value:la({state:e,modKey:r,bindName:o,initEvents:i[te]||[],ajax:a})}}),Object.defineProperty(l,o,{enumerable:!0,writable:!1,value:c})})),l},ma=Object.values(xe),ua=({modKey:e,initMessages:t=[]})=>{const{bindingToFocus:a}=Sa;return Array.isArray(t)?t.filter((e=>Boolean(e.text))).map((t=>{if(t.key){const r=t.key.split(".").pop()||"";a.add(e,r)}return{key:t.key||"",text:t.text||"",level:ma.includes(t.level)?t.level:xe.ERROR}})):[]},pa={[_e]:!1,[$e]:!1,visible:!0,enabled:!0,active:!0,valid:""},ga=({data:e,modKey:t,modData:a,state:r,ajax:n})=>{const s={},l=a[se]||{},o=a.f;if(o){if(o.abstract){const r=st({from:t,to:o.abstract}),n=K().get(e,r,{});a[J]={...n[J],...a[J]},a[Z]={...n[Z],...a[Z]},a[ee]={...n[ee],...a[ee]},a[Q]=[...n[Q]||[],...a[Q]||[]],a[ne]={...n[ne],...a[ne]},a[ae]=[...n[ae]||[],...a[ae]||[]],a[se]={...n[se],...a[se]},a[le]={...n[le],...a[le]}}if(o.url&&"data"===o.type){l[_e]=!0;const e=((e,{modKey:t})=>({modKey:t,origin:{modKey:t},isDataFault:!0,url:e.url||"",submit:!1,key:e.key||"",body:null}))(o,{modKey:t});n.fetchDataFault(e)}}const i=(()=>{const e=K().cloneDeep(ce);function t(t){const a=Date.now();t.forEach((t=>{oe.includes(t)&&(e.lastUpdated[t]=a)}))}return e.createdAt=Date.now(),t([J,Z,Q,ee,ae,ne,se,le]),{get:()=>({...e}),set:(a,r)=>{switch(a){case"lastUpdated":Array.isArray(r)&&t(r);break;case"createdAt":e[a]=Number(r);break;case"shouldPersist":case"wasPersisted":case"wasAncestorPersisted":e[a]=Boolean(r)}}}})(),c=ua({modKey:t,initMessages:a[ae]||[]});return Object.defineProperties(s,{[J]:{enumerable:!0,writable:!1,value:sa({state:r,ajax:n,modKey:t,type:de,initActions:a[J]||{}})},[Z]:{enumerable:!0,writable:!1,value:da({state:r,meta:i,ajax:n,modKey:t,initBindings:a[Z]||{}})},[Q]:{enumerable:!0,writable:!0,value:a[Q]||[]},[ee]:{enumerable:!0,writable:!1,value:ta({state:r,modKey:t,meta:i,initData:a[ee]||{}})},[ae]:{enumerable:!0,writable:!0,value:c},[re]:{enumerable:!0,writable:!1,value:i},[ne]:{enumerable:!0,writable:!1,value:sa({state:r,ajax:n,modKey:t,type:me,initActions:a[ne]||{}})},[se]:{enumerable:!0,writable:!1,value:ia({state:r,ajax:n,modKey:t,meta:i,defaultProps:pa,initProps:l})},[le]:{enumerable:!0,writable:!1,value:sa({state:r,ajax:n,modKey:t,type:ue,initActions:a[le]||{}})}}),s},ya=(e,{data:t,ajax:a})=>{const r=new Set,n=K().get(t,"meta",{});var s;function l({modData:n,parentModKey:s="",name:o=""}){const i=Boolean(s),c=i?`${s}.${o}`:o;if(!n)return;if(i&&e[s]){const t=e[s][Q];t.includes(o)||t.push(o)}if(i&&o===Ve){K().get(e,[s,re,"set"],K().noop)("lastUpdated",[ae])}e[c]=ga({data:t,modKey:c,modData:n,state:e,ajax:a}),r.add(c);(n[Q]||[]).forEach((e=>{l({modData:n[e],parentModKey:c,name:e})}))}return n.x&&(n.x||[]).forEach((t=>{const a=st({to:t});e[a]&&ra(e,a).forEach((e=>{r.add(e)}))})),n.l&&(n.l||[]).forEach((a=>{const n=st({to:a}),s=K().get(t,n,{}),o=[],i=Object.keys(e).reduce(((e,a)=>(a.startsWith(n)&&!K().get(t,a,!1)&&e.push(a),e)),o);i.forEach((t=>{r.add(t);const a=e[t][re],{shouldPersist:n}=a.get(),s=((e,t,a)=>t.split(".").some(((t,r,n)=>{const s=[...Array(r)].map(((e,t)=>n[t])).join(".");if(e[s]){const t=a.includes(s),{shouldPersist:r}=e[s][re].get();return t&&r}return!1})))(e,t,i);n?a.set("wasPersisted",!0):s?a.set("wasAncestorPersisted",!0):delete e[t]})),l({modData:s,parentModKey:lt(n),name:ot(n)})})),n.u&&(s=n.u||{},Object.entries(s).forEach((([n,s])=>{const l=s,o=st({to:n});if(!Boolean(e[o]))return;const i=K().get(e,[o,re]),c=[],d=o.split("."),m=d.length>1,u=d.pop();if(m&&u===Ve){const t=d.join(".");K().get(e,[t,re,"set"],K().noop)("lastUpdated",[ae])}l.forEach((r=>{const n=`${o}.${r}`;switch(r.split(".").shift()||ee){case ae:{const a=t,r=K().get(a,n,[]),s=ua({modKey:o,initMessages:r});ht(e,[o,ae],s),c.push(ae);break}case ee:ea(e[o][ee],{state:e,modKey:o,meta:i,key:r.split(".")[1],value:K().get(t,n)}),c.push(ee);break;case se:oa(e[o][se],{state:e,ajax:a,modKey:o,meta:i,key:r.split(".")[1],value:K().get(t,n)}),c.push(se);break;case Z:{const s=r.split("."),l=s[1],d=e[o][Z][l];d&&oa(d[se],{state:e,ajax:a,modKey:o,meta:i,bindName:l,pathToValue:d[se][Be],key:s[2]===se?s[3]:s[2],value:K().get(t,n)}),c.push(Z);break}}})),Qt(e,o),i.set("lastUpdated",c),r.add(o)}))),r},ha=["l","x","u"],Ea=(()=>{const e={...Xe};return{get:t=>t?e[t]:{...e},update:t=>{const a=K().get(t,[re,"h"],{});Object.assign(e,a)}}})(),va=(()=>{let e={};const t=(a,r=new Set)=>{const n=e[a];return n&&n.forEach((e=>{if(!r.has(e))return r.add(e),t(e,r)})),[...r]};return{get:t,add:(t,a)=>{t!==a&&(e[t]||(e[t]=new Set),e[t].add(a))},clear:(t="")=>{t?delete e[t]:e={}}}})(),ba=(e=>{const t={},a={func:e=>e()},r=(a=[])=>{const r=new Set;a.forEach((a=>{(a=>{const r=new Set(t[a]);return e.get(a).forEach((e=>{t[e]&&t[e].forEach((e=>{r.add(e)}))})),r})(a).forEach((e=>{r.add(e)}))})),r.forEach((e=>{e()}))};return{add:(e,a)=>(t[e]||(t[e]=new Set),t[e].add(a),function(){t[e].delete(a)}),run:e=>{const t=[...e];a.func((()=>r(t)))},setRunner:e=>{a.func=e},clear:e=>{delete t[e]},debug:()=>t}})(va),fa=(()=>{const e=new Set,t=new Set;return{add:(a,r)=>{e.add(a),t.add(`${a}.${r}`)},is:(e,a)=>!(!e||!a)&&t.has(`${e}.${a}`),maybeIn:()=>[...e],clear:()=>{t.clear()}}})(),wa=(()=>{const e=[];return{add:({keysToDefer:t=[],keysExpected:a,data:r,origin:n})=>{const s=[],l=r.meta||{},o=Object.keys(r.meta).filter((e=>ha.includes(e)));if(a){if(!K().isEqual(a.sort(),o.sort()))return s}return t.forEach((t=>{if(l[t]){const a={...r};a.meta={[t]:l[t]},e.push({data:a,origin:n,key:t}),s.push(t)}})),s},run:({state:t,ajax:a,filters:r={}})=>{const{subscriptions:n}=Sa;e.forEach(((s,l)=>{const{data:o,origin:i,key:c}=s;if(r.modKey&&i.modKey!==r.modKey)return;if(r.bindName&&i.bindName!==r.bindName)return;if(r.key&&c!==r.key)return;const d=ya(t,{data:o,ajax:a});n.run(d),Qe(),et(),e.splice(l,1)}))},queue:e,clear:()=>{e.splice(0,e.length)}}})(),Na=(()=>{const e=new Set;let t=null;const a=e=>{const a=K().get(e,"meta.page",null);return!!a&&(t={...Ye,...a},!0)};return{set:a,get:()=>t?{...t}:null,addListener:t=>(e.add(t),()=>e.delete(t)),update:r=>{a(r)&&e.forEach((e=>e(t)))},listeners:e,debug:t}})(),Sa={headers:Ea,dependents:va,subscriptions:ba,bindingToFocus:fa,deferredDataUpdates:wa,page:Na},Ca=[ve,Le],Ta={meta:{}},La=(e=Ta,t,a={})=>{const{headers:r,subscriptions:n,deferredDataUpdates:s,page:l}=Sa;r.update(e),l.set(e);const o={},i=aa({state:o,onOrbitUpdate:c,customFetcher:a.customFetcher});function c(e,t){const{modKey:a,deferDataUpdate:c,expectedDataUpdate:d,origin:m,onComplete:u=K().noop}=e,{modKey:p,bindName:g=""}=m,y=`${Fe}${$e}`;if(ht(o,[a,se,y],!1),ht(o,[p,Z,g,se,y],!1),Qt(o,a),a!==p&&Qt(o,p),c){s.add({keysToDefer:c,keysExpected:d,data:t,origin:m}).forEach((e=>delete t.meta[e]))}const h=ya(o,{data:t,ajax:i});h.add(a),h.add(p),n.run(h),l.update(t),r.update(t),Qe(),et(),u({data:t,updated:[...h],isError:!1})}function d(e){return Boolean(o[e])}function m(e,t){if(!o[e])return t?null:{};const a=o[e][se][Me].get();return t?K().get(a,t,null):{...a}}function u(e,t,a){const r=K().get(o,[e,Z,t],null);if(!r)return a?null:{};const n=r[se][Me].get();return a?K().get(n,a,null):{...n}}return ya(o,{data:e,ajax:i}),Qe(),et(),t&&n.setRunner(t),{dispatch:function(e){((e,t,a)=>{const{subscriptions:r,bindingToFocus:n,deferredDataUpdates:s,page:l,headers:o}=Sa,{ajax:i}=a,{modKey:c="",bindName:d,type:m,name:u,path:p,key:g,value:y,fwdOptions:h,filters:E={},data:v=null}=t,b=!Ca.includes(m),f=Boolean(e[c]);if(!b||f)switch(t.type){case ge:case he:case Ee:case fe:case we:case Ce:case Te:case ke:if(d){const t=K().get(e,[c,Z,d,te]);t&&t.run(m,h)}break;case pe:if(u){const t=K().get(e,[c,J,u]);t&&t.run(h)}break;case Se:if(u){const t=K().get(e,[c,ne,u],null);t&&t.run()}break;case be:{const t=ra(e,c,{forceDelete:!0});r.run(t);break}case Oe:if(p){const t=ct({currentModKey:c,get:p});dt(t)&&ht(e,t,y)}break;case Pe:g&&ht(e,[c,ee,g],y);break;case De:g&&ht(e,[c,se,g],y);break;case Ae:{const t=K().get(e,[c,Z,d,se,Be],""),a=ct({currentModKey:c,get:t});ht(e,a,y);break}case Ie:d&&g&&ht(e,[c,Z,d,se,g],y);break;case ye:if(d){const t=`${Z}.${d}`,a=K().get(e,[c,ae],[]).filter((e=>e.key!==t));ht(e,[c,ae],a),r.run([c])}break;case Ne:if(n.is(c,d)){if(!K().get(e,[c,Z,d,se,"active"]))break;const t=[c,Z,d,se,"focused"];K().get(e,t)||ht(e,t,!0),n.clear()}break;case Le:s.run({state:e,ajax:i,filters:E});break;case ve:if(v){const t=ya(e,{data:v,ajax:i});r.run(t),o.update(v),l.update(v)}}})(o,e,{ajax:i})},getHeaders:function(e){return r.get(e)},fetchOrbit:function(e,t=K().noop){const{isDataFault:a=!1}=e,r={modKey:"",origin:{modKey:""},isDataFault:!1,body:null,onComplete:t,...e};a?i.fetchDataFault(r):i.enqueue(r)},moduleExists:d,moduleShouldPersist:function(e){d(e)&&o[e][re].set("shouldPersist",!0)},moduleWasPersisted:function(e){if(d(e)){o[e][re].set("wasPersisted",!0);const t=it(o,e);t.forEach((e=>{o[e][re].set("wasAncestorPersisted",!0)})),n.run([e,...t])}},moduleActive:function(e=""){return!!d(e)&&!o[e][re].get().wasPersisted},getModuleMeta:function(e){return d(e)?o[e][re].get():{...ce}},getModuleData:function(e,t,a){if(!d(e))return t?a:{};if(!t)return{...o[e][ee]};const r=o[e][ee][t];return void 0===r&&void 0!==a?(ea(o[e][ee],{state:o,modKey:e,meta:o[e][re],key:t,value:a}),a):r},getModuleProps:m,getModuleChildren:function(e){return K().get(o,[e,Q],[]).map((t=>`${e}.${t}`))},getModuleMessages:function(e,t={}){return Xt(o,{modKey:e,...t})},getModuleBindingData:function(e){const t={};return d(e)?Object.keys(o[e][Z]).reduce(((t,a)=>(t[a]=mt(o,{modKey:e,bindName:a}),t)),t):t},getModulePolling:function(e){return!!d(e)&&Boolean(Object.keys(o[e][J]).find((t=>K().get(o,[e,J,t,de,je])===We)))},getPagePolling:function(){return Boolean(Object.keys(o).find((e=>Object.keys(o[e][J]).find((t=>K().get(o,[e,J,t,de,je])===Ge)))))},bindingExists:function(e,t){return!!d(e)&&Boolean(o[e][Z][t])},getBindingProps:u,getBindingValue:function(e,t){return mt(o,{modKey:e,bindName:t})},getBindingMessages:function(e,t,{level:a}={}){return Xt(o,{modKey:e,bindName:t,level:a})},getAtSpecPath:function(e,t){const a=ct({currentModKey:e,get:t}),r=a[0],n=3===a.length&&a[1]===se,s=5===a.length&&a[4]===se;let l;if(n){l=m(r,a[2])}else if(s){l=u(r,a[2],a[4])}else l=K().get(o,a);return{modKey:r,value:l}},subscribe:function(e,t){return n.add(e,t)},getPage:function(){return l.get()},addPageListener:function(e){return l.addListener(e)},debug:function(){return{state:o,ajax:i,onOrbitUpdate:c,...Sa}}}},ka=(0,s.createContext)(La({})),Ia=({initData:e,onInit:t=K().noop,customFetcher:a,children:r})=>{const n=(0,s.useRef)(La(e,null,{customFetcher:a}));return(0,s.useEffect)((()=>{t(n.current)})),l().createElement(ka.Provider,{value:n.current},r)},Aa=()=>(0,s.useContext)(ka),Pa=()=>Aa().getHeaders(),Da=e=>{const t=Aa(),[a,r]=(0,s.useReducer)((e=>e+1),0);return(0,s.useEffect)((()=>{const a=e.map((e=>t.subscribe(e,r)));return()=>{a.forEach((e=>e()))}}),[e,t]),t},Oa=(e,t)=>{const{createdAt:a}=e.getModuleMeta(t);return{modExists:e.moduleExists(t),modCreatedAt:a,data:e.getModuleData(t),properties:e.getModuleProps(t),childModKeys:e.getModuleChildren(t)}},xa=(e,t,a,r={})=>{const{dispatch:n,bindingExists:s,getBindingValue:l,getBindingProps:o,getBindingMessages:i}=e,{deferLoadWithDelete:c}=r;return{bindExists:s(t,a),value:l(t,a),properties:o(t,a),errors:i(t,a,{level:xe.ERROR}),setValue:e=>{n({type:Ae,modKey:t,bindName:a,value:e})},runSetEvents:()=>{n({type:ke,modKey:t,bindName:a})},setProperty:(e,r)=>{n({type:Ie,modKey:t,bindName:a,key:e,value:r})},clearMessages:()=>{n({type:ye,modKey:t,bindName:a})},maybeSetFocus:()=>{n({type:Ne,modKey:t,bindName:a})},runClickEvents:()=>{const e={};c&&(e.deferDataUpdate=["l"],e.expectedDataUpdate=["x","l"]),n({type:he,modKey:t,bindName:a,fwdOptions:e})},runFocusEvents:()=>{n({type:fe,modKey:t,bindName:a})},runBlurEvents:()=>{n({type:ge,modKey:t,bindName:a})}}},Ra=e=>{const t=Da([e]);return Oa(t,e)},Fa=e=>Da([e]).moduleExists(e),Ma=e=>{const t=Da([e]),a=t.getModuleData(e),r=t.getModuleMeta(e);return[a,K().get(r,"lastUpdated.d","")]},Ba=(e,t,a)=>{const r=Da([e]);return[r.getModuleData(e,t,a),a=>{r.dispatch({type:Pe,modKey:e,key:t,value:a})}]},_a=e=>{const t=Da([e]),a=t.getModuleMessages(e),r=t.getModuleMeta(e);return[a,K().get(r,"lastUpdated.m","")]},$a=e=>{const t=Aa(),a=t.getModuleChildren(e);return Da([e,...a]),a.map((e=>Oa(t,e)))},Ua=()=>Aa().dispatch,Ka=(e,t)=>{const a=Da([e]);return xa(a,e,t)},Va=!1,Ha=(e="",t="",a={})=>{const r=Da([e]),n=r.moduleExists(e),l=xa(r,e,t,a),{value:o=null,properties:i={},errors:c=[],setProperty:d=K().noop,runClickEvents:m=K().noop,runFocusEvents:u=K().noop,runBlurEvents:p=K().noop,maybeSetFocus:g=K().noop}=l;(0,s.useEffect)(g);const y=(0,s.useRef)(),h=a.ref||y,E=a.focusDelay||0,v=!1===i.active||!1===i.enabled,[b,f]=(0,s.useState)(Va),[w,N]=(0,s.useState)(""),S=c.map((e=>e.text)).join(" "),C=!a.disableErrorOnBlur,T=!a.disableFocusSync;(0,s.useEffect)((()=>{if(!w&&!i.focused)if(S)N(S);else if(i.valid){const e=i.optional&&!o,t=b&&C||i.wasValidated;!e&&t&&N(i.valid)}})),(0,s.useEffect)((()=>{S||i.valid||N("")}),[S,i.valid]),(0,s.useEffect)((()=>{n||(b!==Va&&f(Va),""!==w&&N(""))}),[n,b,w]),(0,s.useEffect)((()=>{T&&i.focused&&h.current&&(E>0?setTimeout((()=>{h.current&&h.current.focus()}),E):h.current.focus())}),[i.focused,T,h]);return{binding:l,state:{error:w,setError:N,touched:b,setTouched:f},props:{id:i.key,onClick:()=>{m()},onFocus:()=>{f(!0),T&&d("focused",!0),u()},onBlur:()=>{T&&d("focused",!1),p()},ref:h,disabled:v,value:o}}},ja=(e="",t="",a={})=>Ha(e,t,a),Ga=(e="",t="",a={})=>{const{binding:r,state:n,props:s}=Ha(e,t,a),{setValue:l,runSetEvents:o,clearMessages:i,setProperty:c}=r,{error:d,setError:m}=n,{id:u,value:p,ref:g,disabled:y,onClick:h,onFocus:E,onBlur:v}=s;return{binding:r,state:n,props:{id:u,onClick:h,onFocus:E,onBlur:v,onChange:e=>{l(e.target.checked),o(),i(),c("wasSubmitted",!1),m("")},ref:g,disabled:y,error:d,checked:Boolean(p)}}};var Wa=n(6942),qa=n.n(Wa);const Ya=e=>({dangerouslySetInnerHTML:{__html:e}}),za=(...e)=>(0,s.useMemo)((()=>e.every((e=>null===e))?null:t=>{e.forEach((e=>{((e,t)=>{if(null!==e)if(K().isFunction(e))e(t);else try{e.current=t}catch(a){throw new Error(`Cannot assign value "${t}" to ref "${e}"`)}})(e,t)}))}),e),Xa=(e,t,a,r)=>{const n=(e-t)%(a+1-t);return r?(n<0?a+1:t)+n:Math.max(t,Math.min(a,e))},Ja=()=>document?.documentElement?.getAttribute?.("dir"),Za=(e,t)=>{let a="";for(let r=0;r<t;r+=1)a+=e;return a},Qa=(e,t,a,r)=>{let{value:n,cursor:s}=e;const l=s>=a,o=s<a+1;return s=l&&o&&r<0?a:s,s+=l&&o&&r>0?t.length:0,s+=l&&!o?t.length:0,n=n.slice(0,a)+t+n.slice(a),{value:n,cursor:s}},er=(e,t,a=0,r="")=>{if(!e)return null;return((e,t,a)=>{const{value:r,cursor:n}=e,{inputRegex:s,suffix:l,autoCapitalization:o}=t,i=t.blocks||[],c=r.length===n&&a>0;let d=a,m={value:"",cursor:n},u=0,p=0,g=!1;for(let e=0;e<r.length;e+=1){const t=r.charAt(e),a=r.charAt(e+1),n=i[u]||{},l=i[u+1],o=(l&&l.start||"").charAt(0),h=n.inputRegex||s,E=e>=r.length-1,v=u>=i.length-1,b=n.length||n.maxLength||1/0,f=p>=b,w=void 0!==n.length,N=n.pad&&w,S=!w&&t===n.pad&&p<1,C=E&&t===n.pad,T=!S||C,L=!h||(y=h,"string"==typeof y||y instanceof String?new RegExp(y):y).test(t),k=!f&&T&&L,I=0===e&&t===o||a===o;g||!k&&!c&&w||(m=Qa(m,n.start||"",m.value.length,d),g=!0),p+=k?1:0,m.value+=k?t:"",m.cursor+=k||m.cursor<=m.value.length?0:-1;const A=d>0&&m.cursor===m.value.length,P=d>0&&m.cursor===m.value.length+1,D=I&&P&&N,O=I&&!w,x=p>=b||D||O;if(n.unit&&(x||E)&&!f){const e=p%3==0,t=Math.floor(p/3)-(e?1:0);for(let e=0;e<t;e+=1){const t=(3+n.unit.length)*e+3;m=Qa(m,n.unit,m.value.length-t,d)}}if(D||O&&n.pad&&p<1){const e=O?1:(n.length||0)-p,t=m.value.length-p;m=Qa(m,Za(n.pad||"",e),t,d),m.cursor+=O&&m.cursor===t?1:0}x&&!v&&(u+=1,p=0,g=!1,d=d>0&&!w&&A?0:d)}var y;return l&&m.value&&(m.value+=l),o&&(m.value=m.value?.toString?.().toUpperCase?.()),m})({value:r||e.value,cursor:e.selectionStart||0},t,a)},tr=e=>{const{value:t,format:a,...r}=e,[n,l]=(0,s.useState)(t),[o,i]=(0,s.useState)(-1),c=(0,s.useRef)(null),d=e.ref||c,m=(0,s.useRef)(!1);let u="";(0,s.useEffect)((()=>{const e=d.current;e&&o>-1&&m.current&&(e.selectionStart=o,e.selectionEnd=o,m.current=!1)}));return((...e)=>{const t={};return e.forEach((e=>{Object.keys(t).forEach((a=>{/^on[A-Z]/.test(a)&&"function"==typeof t[a]&&"function"==typeof e[a]?t[a]=((...e)=>(...t)=>{e.forEach((e=>{"function"==typeof e&&e(...t)}))})(t[a],e[a]):"className"===a&&"string"==typeof t.className&&"string"==typeof e.className?t[a]=qa()(t.className,e.className):t[a]=void 0!==e[a]?e[a]:t[a]})),Object.keys(e).forEach((a=>{void 0===t[a]&&(t[a]=e[a])}))})),t})({...{value:n,ref:d,onPaste:e=>{const t=e.clipboardData||window.clipboardData,a=e.target;u=a&&t?[a.value.slice(0,a.selectionStart||0),t.getData("text/plain"),a.value.slice(a.selectionEnd||a.value.length)].join(""):""},onChange:e=>{const t=e.nativeEvent.inputType||e.target.inputType,r=e.target,n=er(r,a,"deleteContentBackward"===t?-1:1,u);return u="",m.current=!0,l(n.value),i(n.cursor),n}}},{...r})},ar=[c.ArrowUp,c.ArrowDown,c.ArrowLeft,c.ArrowRight,c.Home,c.PageUp,c.PageDown],rr="number",nr=(e="",t="",a={})=>{const{binding:r,state:n,props:l}=Ha(e,t,a),{properties:o,setValue:i,runSetEvents:c,clearMessages:d,setProperty:m}=r,{error:u,setError:p}=n,{debounce:g=0}=a,y=g?K().debounce(c,g):c,h=(0,s.useCallback)(y,[g]),{id:E,ref:v,disabled:b,onClick:f,onFocus:w,onBlur:N}=l,S=null!==l.value?String(l.value):"",C=Boolean(o.optional),T=o.autofill||"off",L=a.format||o.format,k=Boolean(L),I=tr({value:S,format:L,ref:l.ref}),P=!k&&o.maxLen?`${o.maxLen}`:null,D=S.includes("•"),O=o.focused;(0,s.useEffect)((()=>{O&&D&&v.current&&v.current.select()}),[O]);const x=((e,{isMaskedValue:t,shouldFormat:a})=>{const r=A().isHandheldPhone,{type:n,subtype:s}=e;return s?(r||a||t)&&s===rr?"tel":s:n||"text"})(o,{isMaskedValue:D,shouldFormat:k}),R=e=>{D&&O&&e.preventDefault()};return{binding:r,state:n,props:{id:E,type:x,onClick:f,onFocus:w,onBlur:N,onChange:e=>{const t=k&&I.onChange(e);let a;a=t?t.value:x===rr&&P?e.target.value.substr(0,Number(P)):e.target.value,i(a),h(),d(),m("wasSubmitted",!1),p("")},onMouseDown:R,onMouseMove:R,onKeyDown:e=>{const t=ar.includes(e.keyCode);D&&t&&e.preventDefault()},ref:v,disabled:b,maxLength:P,required:!C,"aria-required":!C,"aria-invalid":Boolean(u),autoComplete:T,error:u,value:S}}},sr=(e="",t="")=>{const a=Da([e]),r=xa(a,e,t),{errors:n,properties:l,setValue:o,runSetEvents:i,clearMessages:c}=r,[d,m]=(0,s.useState)(!1),[u,p]=(0,s.useState)(""),g=n.map((e=>e.text)).join(" ");u||(g?p(g):d&&l.valid&&p(l.valid));return{binding:r,state:{touched:d,setTouched:m,error:u,setError:p},props:{value:"",checked:!1,onChange:e=>{m(!0),o(e.target.value),i(),c(),p("")}}}},lr=(e="",t="",a={})=>{const{binding:r,state:n,props:s}=Ha(e,t,a),{setValue:l,runSetEvents:o,clearMessages:i,setProperty:c}=r,{error:d,setError:m}=n,{id:u,ref:p,disabled:g,onFocus:y,onBlur:h}=s;return{binding:r,state:n,props:{id:u,onFocus:y,onBlur:h,onChange:e=>{l(e.target.value),o(),i(),c("wasSubmitted",!1),m("")},ref:p,disabled:g,error:d,value:null!==s.value?String(s.value):""}}},or=e=>{const t=Da([e]);return{setModWillPersist:()=>t.moduleShouldPersist(e),persistMod:()=>t.moduleWasPersisted(e),modActive:t.moduleActive(e),deleteMod:()=>t.dispatch({type:be,modKey:e})}},ir=(e,t)=>{const a=Da([e]),r=t||a.getModuleChildren(e),{createdAt:n}=a.getModuleMeta(e);(0,s.useEffect)((()=>{r.forEach((e=>{a.moduleShouldPersist(e)}))}),[n]);return r.map((e=>({modKey:e,modExists:a.moduleExists(e),modActive:a.moduleActive(e),props:{appear:!1,onExited:()=>{(e=>{a.dispatch({type:be,modKey:e})})(e),(e=>{a.dispatch({type:Le,filters:{modKey:e}})})(e)}}})))},cr=e=>{const{setModWillPersist:t,persistMod:a,modActive:r,deleteMod:n}=or(e);return[{visible:r,onEnter:t,onExited:n,onClose:a,mountOnEnter:!0,unmountOnExit:!0},a]},dr=(e,t,a={})=>{const r=Aa(),{binding:n,state:s,props:o}=nr(e,t,a),{setValue:i,runSetEvents:c,clearMessages:d}=n,{setError:m}=s,{typeAheadDataKey:u}=n.properties,p=u?r.getModuleData(e,u):null,[g,y]=l().useState(p||[]);l().useEffect((()=>{u&&p&&y(p)}),[p,u]);const h="clientData"===u;l().useEffect((()=>{if(h){const e=p.filter((e=>e.toLowerCase().startsWith(o.value.toLowerCase())));y(e)}}),[o.value,h,p]);return{binding:n,state:s,props:{...o,options:g,onSelection:e=>{i(e),c(),d(),m("")},autoComplete:"off"}}},mr=(e,t)=>{const a=(0,s.useRef)(!0);(0,s.useEffect)((()=>{a.current||e()}),[...t]),(0,s.useEffect)((()=>{a.current=!1}),[])};function ur(){return ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ur.apply(null,arguments)}var pr=n(5206),gr=n.n(pr);const yr=({message:e="",...t})=>{const a=l().useId(),r=document.getElementById("portal")||document.body;return(0,pr.createPortal)(l().createElement("span",ur({id:`announce-message-${a}`,key:`announce-message-${a}`,"aria-live":"polite",role:"status","data-core-announce-message":!0},t,Ya(e))),r)},hr=({resetDelay:e=1e3}={})=>{const[t,a]=(0,s.useState)("");return[t,t=>{a(t),setTimeout((()=>a("")),e)}]},Er="idle",vr="pending",br="finished",fr={pending:""},wr=({isPending:e=!1,messages:t=fr,finishedDelay:a=500,resetDelay:r=1e3})=>{const[n,o]=(0,s.useState)(Er),[i,c]=(0,s.useState)(null),{pending:d="",finished:m=""}=t;return(0,s.useEffect)((()=>{e&&n===Er?(c(d),o(vr)):e||n!==vr?n===br&&setTimeout((()=>{c(null),o(Er)}),r):setTimeout((()=>{c(m),o(br)}),a)}),[n,e]),l().createElement(yr,{message:i||""})};function Nr(e,t){if(null==e)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;a[r]=e[r]}return a}function Sr(e,t){return Sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sr(e,t)}function Cr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Sr(e,t)}function Tr(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const Lr=!1,kr=l().createContext(null);var Ir=function(e){return e.scrollTop},Ar="unmounted",Pr="exited",Dr="entering",Or="entered",xr="exiting",Rr=function(e){function t(t,a){var r;r=e.call(this,t,a)||this;var n,s=a&&!a.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?s?(n=Pr,r.appearStatus=Dr):n=Or:n=t.unmountOnExit||t.mountOnEnter?Ar:Pr,r.state={status:n},r.nextCallback=null,r}Cr(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Ar?{status:Pr}:null};var a=t.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var a=this.state.status;this.props.in?a!==Dr&&a!==Or&&(t=Dr):a!==Dr&&a!==Or||(t=xr)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,a,r=this.props.timeout;return e=t=a=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,a=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:a}},a.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Dr){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:gr().findDOMNode(this);a&&Ir(a)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Pr&&this.setState({status:Ar})},a.performEnter=function(e){var t=this,a=this.props.enter,r=this.context?this.context.isMounting:e,n=this.props.nodeRef?[r]:[gr().findDOMNode(this),r],s=n[0],l=n[1],o=this.getTimeouts(),i=r?o.appear:o.enter;!e&&!a||Lr?this.safeSetState({status:Or},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,l),this.safeSetState({status:Dr},(function(){t.props.onEntering(s,l),t.onTransitionEnd(i,(function(){t.safeSetState({status:Or},(function(){t.props.onEntered(s,l)}))}))})))},a.performExit=function(){var e=this,t=this.props.exit,a=this.getTimeouts(),r=this.props.nodeRef?void 0:gr().findDOMNode(this);t&&!Lr?(this.props.onExit(r),this.safeSetState({status:xr},(function(){e.props.onExiting(r),e.onTransitionEnd(a.exit,(function(){e.safeSetState({status:Pr},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Pr},(function(){e.props.onExited(r)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,a=!0;return this.nextCallback=function(r){a&&(a=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},a.onTransitionEnd=function(e,t){this.setNextCallback(t);var a=this.props.nodeRef?this.props.nodeRef.current:gr().findDOMNode(this),r=null==e&&!this.props.addEndListener;if(a&&!r){if(this.props.addEndListener){var n=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],s=n[0],l=n[1];this.props.addEndListener(s,l)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===Ar)return null;var t=this.props,a=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Nr(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return l().createElement(kr.Provider,{value:null},"function"==typeof a?a(e,r):l().cloneElement(l().Children.only(a),r))},t}(l().Component);function Fr(){}Rr.contextType=kr,Rr.propTypes={},Rr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Fr,onEntering:Fr,onEntered:Fr,onExit:Fr,onExiting:Fr,onExited:Fr},Rr.UNMOUNTED=Ar,Rr.EXITED=Pr,Rr.ENTERING=Dr,Rr.ENTERED=Or,Rr.EXITING=xr;const Mr=Rr;var Br=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((a=e).classList?a.classList.remove(r):"string"==typeof a.className?a.className=Tr(a.className,r):a.setAttribute("class",Tr(a.className&&a.className.baseVal||"",r)));var a,r}))},_r=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,a){var r=t.resolveArguments(e,a),n=r[0],s=r[1];t.removeClasses(n,"exit"),t.addClass(n,s?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,a)},t.onEntering=function(e,a){var r=t.resolveArguments(e,a),n=r[0],s=r[1]?"appear":"enter";t.addClass(n,s,"active"),t.props.onEntering&&t.props.onEntering(e,a)},t.onEntered=function(e,a){var r=t.resolveArguments(e,a),n=r[0],s=r[1]?"appear":"enter";t.removeClasses(n,s),t.addClass(n,s,"done"),t.props.onEntered&&t.props.onEntered(e,a)},t.onExit=function(e){var a=t.resolveArguments(e)[0];t.removeClasses(a,"appear"),t.removeClasses(a,"enter"),t.addClass(a,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var a=t.resolveArguments(e)[0];t.addClass(a,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var a=t.resolveArguments(e)[0];t.removeClasses(a,"exit"),t.addClass(a,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,a){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,a]},t.getClassNames=function(e){var a=t.props.classNames,r="string"==typeof a,n=r?""+(r&&a?a+"-":"")+e:a[e];return{baseClassName:n,activeClassName:r?n+"-active":a[e+"Active"],doneClassName:r?n+"-done":a[e+"Done"]}},t}Cr(t,e);var a=t.prototype;return a.addClass=function(e,t,a){var r=this.getClassNames(t)[a+"ClassName"],n=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===a&&n&&(r+=" "+n),"active"===a&&e&&Ir(e),r&&(this.appliedClasses[t][a]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((a=e).classList?a.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(a,r)||("string"==typeof a.className?a.className=a.className+" "+r:a.setAttribute("class",(a.className&&a.className.baseVal||"")+" "+r)));var a,r}))}(e,r))},a.removeClasses=function(e,t){var a=this.appliedClasses[t],r=a.base,n=a.active,s=a.done;this.appliedClasses[t]={},r&&Br(e,r),n&&Br(e,n),s&&Br(e,s)},a.render=function(){var e=this.props,t=(e.classNames,Nr(e,["classNames"]));return l().createElement(Mr,ur({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(l().Component);_r.defaultProps={classNames:""},_r.propTypes={};const $r=_r,Ur=(e,t,a)=>{const r=(0,s.useRef)(e&&!t),n=(0,s.useRef)(!e);(0,s.useEffect)((()=>{r.current!==e&&(r.current=e),n.current===e&&(n.current=!e)}),[e]);return{finalTransitionClass:qa()({[`${a}-enter-done`]:r.current&&e,[`${a}-exit-done`]:n.current&&!e}),setTransitionHidden:()=>{n.current=!0}}},Kr=e=>{const t=e.match(/^([\d.+-]+)(\w+)$/)||["0","ms"];return parseFloat(t[0])*("ms"===t[1]?1:1e3)},Vr=e=>{if(e.indexOf(",")>0){const t=e.split(",").map((e=>Kr(e.trim()))).sort();return t[t.length-1]}return Kr(e)},Hr=(e,t)=>{const a=(0,s.useRef)(e),r=!!t;return(0,s.useLayoutEffect)((()=>{t&&(a.current=(e=>{const t=window.getComputedStyle(e),{transitionDuration:a,transitionDelay:r}=t;return Vr(a)+Vr(r)})(t))}),[r]),a.current},jr=(e,t)=>{if(e)return()=>e(t)},Gr=({className:e,in:t,timeout:a=400,classNames:r="r-fade-transition",appear:n=!1,onEnter:o,onEntering:i,onEntered:c,onExit:d,onExiting:m,onExited:u,children:p,...g},y)=>{const h=(0,s.useRef)(null),E=za(h,y),v=(0,s.useRef)(!1),{finalTransitionClass:b,setTransitionHidden:f}=Ur(t,n,r),w=Hr(a,h.current);return l().createElement($r,ur({in:t,timeout:w,appear:n,classNames:r,onEnter:jr(o,h.current),onEntering:jr(i,h.current),onEntered:jr(c,h.current),onExit:()=>{v.current=!0,d&&d(h.current)},onExiting:jr(m,h.current),onExited:()=>{v.current=!1,f(),u&&u(h.current)},className:qa()(e,v.current?"":b),nodeRef:h},g),l().createElement("div",{ref:E,"aria-hidden":!t||void 0,"data-core-fade-transition-wrapper":""},p))},Wr=(0,s.forwardRef)(Gr),qr=({className:e,in:t,timeout:a=400,classNames:r="r-height-transition",appear:n=!1,onEnter:o,onEntering:i,onEntered:c,onExit:d,onExiting:m,onExited:u,children:p,...g},y)=>{const h=(0,s.useRef)(null),E=za(h,y),v=(0,s.useRef)(!1),b=(0,s.useRef)(null),[f,w]=(0,s.useState)(""),N=()=>b.current?b.current.getBoundingClientRect().height:"",S=()=>{t&&h.current&&(h.current.style.height="")};(0,s.useLayoutEffect)((()=>{const e=N();w(t?`${e}px`:"0px")}),[w,t]),(0,s.useEffect)((()=>{setTimeout(S,a)}),[]);const{finalTransitionClass:C,setTransitionHidden:T}=Ur(t,n,r),L=Hr(a,h.current);return l().createElement($r,ur({in:t,appear:n,timeout:L,classNames:r,onEnter:jr(o,h.current),onEntering:jr(i,h.current),onEntered:()=>{S(),c&&c(h.current)},onExit:()=>{if(v.current=!0,h.current){const e=N();h.current.style.height=`${e}px`}d&&d(h.current)},onExiting:jr(m,h.current),onExited:()=>{v.current=!1,T(),u&&u(h.current)},className:qa()(e,v.current?"":C),nodeRef:h},g),l().createElement("div",{ref:E,style:{height:f},"aria-hidden":!t||void 0,"data-core-height-transition-wrapper":""},l().createElement("div",{ref:b,"data-core-height-transition-content":""},p)))},Yr=(0,s.forwardRef)(qr),zr=l().useId,Xr=function(){return null},Jr=i("measureBagRender");let Zr=null;const Qr="[\\s!¡\\?¿‽\\.\\,…:;_\\-–—~·•‘’“”‚„‛‟′`″'\"#\\$&\\*@§¶\\^\\|\\/]",en=(new RegExp("^"+Qr+"+"),new RegExp(Qr+"+$")),tn=/\+/g,an=e=>e.replace(en,""),rn=e=>Object.keys(e).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(""+e[t]))).join("&"),nn=e=>{const t={};return(e="?"===e.charAt(0)||"#"===e.charAt(0)?e.substring(1):e).split("&").forEach((e=>{const a=e.indexOf("="),r=-1!==a,n=r?e.substring(0,a):e,s=r?e.substring(a+1):"",l=decodeURIComponent(s.replace(tn," ")),o=t[n];if(l&&o){const e=Array.isArray(o)?o:[o];e.push(l),t[n]=e}else l&&(t[n]=l)})),t},sn=e=>{const t=Zr||document.createElement("a");Zr=t,t.href=e;const{protocol:a,hostname:r,search:n,hash:s}=t;return{protocol:a,hostname:r,pathname:"/"===(t.pathname||"").charAt(0)?t.pathname:"/"+t.pathname,port:"0"===t.port?"":t.port,search:n,hash:s}},ln=e=>{const{protocol:t,hostname:a,pathname:r,port:n,search:s,hash:l}=e;return(a?t+"//"+a+(n?":"+n:""):"")+r+s+l},on=(e,t)=>{const a=sn(e),r=nn(a.search);return Object.keys(t).forEach((e=>r[e]=t[e])),a.search="?"+rn(r),ln(a)},cn=e=>e.replace(/([[\\^$.|?*+(){}])/g,"\\$1"),dn=(e,t,a="{",r="}")=>{if(null==e)return String(e);const n=cn(a),s=cn(r);return e.replace(new RegExp(`${n}([\\w-]+)${s}`,"g"),((e,a)=>{return 0===(r=t[a])||r?t[a]+"":"";var r}))},mn=Object.freeze({DISABLED_COUNTRY:1,NOT_SAFARI:2,OLD_DEVICE:3,OLD_SAFARI:4,DENIED:5,UNSUPPORTED:6,SUPPORTED:7,COMPLETED:8,SUPPLEMENTARY_SUPPORTED:9}),un=(Object.freeze({UNSUPPORTED:1,SUPPORTED:2,COMPLETED:3,SUPPLEMENTARY_SUPPORTED:4,API_NIL:5,NIL:6}),Object.freeze({INSTALLMENT:"_installments",BANNER:"_banner",OVERLAYHEADER:"_overlayHeader",OVERLAYFOOTER:"_overlayFooter",NOACI:"_no_aci"})),pn=Object.freeze({INLINE:0,BANNER:1,OVERLAYHEADER:2,OVERLAYFOOTER:3}),gn=Object.freeze({UPDATE:"update",OPEN_OVERLAY:"open_overlay",CLOSE_OVERLAY:"close_overlay",APPLIED:"ac_apply",UPDATE_CONFIG:"update_config"}),yn=Object.freeze({NO_CARD:"no_card",WITH_CARD:"with_card"}),hn=(e,t)=>{switch(t.type){case gn.UPDATE:return{...e,...t.payload};case gn.OPEN_OVERLAY:return{...e,overlayVisible:!0,isCompleted:!1,overlayTriggerSel:t.payload.triggerSel,showOverlayContentForBanner:t.payload.isBanner,overrideShowOverlay:t.payload.overrideShowOverlay,assetVariables:{...t.payload.assetVariables},metricsInfo:t.payload.metricsInfo};case gn.CLOSE_OVERLAY:return{...e,overlayVisible:!1};case gn.APPLIED:return{...e,isCompleted:!0,hasApplied:!0};case gn.UPDATE_CONFIG:return{...e,...t.payload};default:return{...e}}},En=e=>{const t=window.cookieMap;return t&&"object"==typeof t&&e in t?t[e]:e},vn=e=>(e=>{let t=null;if(!e)return t;const a=(E.getCookies()||"").split(";");for(let r=0;r<a.length;r++){const n=(a[r]||"").trim();if(n.substring(0,e.length+1)===e+"="){t=decodeURIComponent(n.substring(e.length+1));break}}if(t&&t.match(/^\s*\{/))try{t=JSON.parse(t)}catch(e){}return t})(En(e)),bn=e=>{document.body.classList.toggle("as-buyflowmessages-applycompleted",e)},fn=e=>{const t=vn(e)||"";return 0===t.indexOf("~")?t.slice(1):t},wn=()=>{const e=window.sessionStorage;e&&e.removeItem("acs")},Nn=(e,t,a,r)=>{const n=K().get(e,"appleCardStatusUrl"),s=fn("as_cn");n&&s&&wt(n).then((e=>{const{body:t={}}=e;if(1===t.acs){Object.assign(r,{appleCardState:mn.COMPLETED});const e=!0;a({type:gn.UPDATE,payload:{hasNativeState:e}})}bn(Boolean(t.acs)),wn(),(e=>{const t=window.sessionStorage;if(t){const a=fn("as_cn");if(a){const r={as_cn_value:a,state:e};t.setItem("acs",JSON.stringify(r))}}})(t.acs)})).catch((e=>{window.console.log("error fetching card status...",e)}))},Sn=(e,t,a,r)=>{if((e=>!e||[mn.DISABLED_COUNTRY,mn.NOT_SAFARI,mn.OLD_DEVICE,mn.OLD_SAFARI,mn.DENIED,mn.UNSUPPORTED].includes(e))(r.appleCardState)){const t=(()=>{const e=window.sessionStorage;let t=null;if(e){const a=fn("as_cn");let r=e.getItem("acs");r=r&&JSON.parse(r),r&&r.as_cn_value===a?t=r.state:wn()}return t})();if([0,1].includes(t)){if(1===t){Object.assign(r,{appleCardState:mn.COMPLETED});const e=!0;a({type:gn.UPDATE,payload:{hasNativeState:e}})}}else Nn(e,0,a,r);bn(Boolean(t))}else{const e=!0;a({type:gn.UPDATE,payload:{hasNativeState:e}})}},Cn=(e,t=!1,a=!1,r=!1,n={},s=!1)=>{const l=s?"web apply | ":"";switch(e){case mn.DISABLED_COUNTRY:return{key:"disabledcountry",overlay:!1,showExisting:!0,evarGroupText:`${l}denied | pre:wrong country`};case mn.NOT_SAFARI:return{key:"notonsafari",overlay:!1,showExisting:!0,evarGroupText:`${l}denied | pre:not safari`};case mn.OLD_DEVICE:return{key:"devicenotcapable",overlay:!1,showExisting:!0,evarGroupText:`${l}denied | pre:unsupported device`};case mn.OLD_SAFARI:return{key:"osunsupported",overlay:a,showExisting:!0,evarGroupText:`${l}denied | pre:osunsupported`};case mn.DENIED:{const e=K().get(n,"apiStates.applePay","nil");return{key:"denied",overlay:!1,showExisting:!0,evarGroupText:l+(n.apiStates&&"nil"===n.apiStates.appleCard?`denied | api:[${e}, nil]`:"denied | pre:nil")}}case mn.UNSUPPORTED:return{key:"unsupported",overlay:!1,showExisting:!0,evarGroupText:`${l}denied | api:unsupported`};case mn.SUPPORTED:return{key:"supported",overlay:!0,evarGroupText:(t?"":l)+t&&a?"supported_installments":"supported"};case mn.COMPLETED:return{key:"completed",overlay:a&&r,evarGroupText:t&&a?"completed_installments":"completed"};case mn.SUPPLEMENTARY_SUPPORTED:return{key:"supplementarysupported",overlay:a&&r,evarGroupText:t&&a?"supplementarysupported_installments":"supplementarysupported"};default:return null}},Tn=({status:e,asset:t,isInstallmentSupported:a,messageType:r=pn.INLINE,isBFIEnabled:n,showBFILink:s,showOverlayContentForBanner:l,isACIXEnabled:o=!1,assetVariables:i={},templateId:c,isBag:d})=>{const{key:m}=Cn(e,n,s),u=(e=>{switch(e){case mn.DISABLED_COUNTRY:case mn.NOT_SAFARI:case mn.OLD_DEVICE:case mn.OLD_SAFARI:case mn.DENIED:case mn.UNSUPPORTED:case mn.SUPPORTED:return yn.NO_CARD;case mn.COMPLETED:case mn.SUPPLEMENTARY_SUPPORTED:return yn.WITH_CARD;default:return null}})(e);let p=m;const g=[mn.COMPLETED,mn.SUPPORTED,mn.SUPPLEMENTARY_SUPPORTED];if(n&&(a&&-1!==g.indexOf(e)&&(p=`${m}${un.INSTALLMENT}`),d||s||r!==pn.INLINE||(o||-1!==g.indexOf(e))&&(p=`${m}${un.NOACI}`)),r===pn.BANNER&&(p+=un.BANNER),r===pn.OVERLAYHEADER||r===pn.OVERLAYFOOTER){const e=r===pn.OVERLAYHEADER,a=e?`${p}${un.OVERLAYHEADER}`:`${p}${un.OVERLAYFOOTER}`,o=e?"overlayHeader":"overlayFooter",i=e?`overlayHeader${un.NOACI}`:`overlayFooter${un.NOACI}`;p=n&&(s||l||d)?t&&t[a]&&n?a:t&&t[o]?o:"":!n||s||l?o:t&&t[i]?i:""}r===pn.INLINE&&(t&&t[`${p}_${c}`]?p=`${p}_${c}`:t&&t[`${u}_${c}`]?p=`${u}_${c}`:t&&t[u]&&(p=u));const y=K().get(t,p,"");return K().isEmpty(i)?y:dn(y,{...i})},Ln="cid%3Dapy-220-100002",kn="cid%3Dapy-220-100004",In={desktop:{buyflowDefaultValue:"cid%3Dapy-220-100013",defaultValue:"cid%3Dapy-220-100014"},handheld:{buyflowDefaultValue:"cid%3Dapy-220-100016",defaultValue:"cid%3Dapy-220-100017"}},An=e=>e?Ln:kn,Pn=e=>{const{isHandheldPhone:t}=A(),a=t?"handheld":"desktop";return e?K().get(In,`${a}.buyflowDefaultValue`):K().get(In,`${a}.defaultValue`)},Dn={bagLearnMoreLink:{hier1:"aos:bag",prop3:"modal open|ribbon|learn more about acmi",evar6:'D=pageName+"|ribbon|learn more about acmi|open modal"'},bagLearnMoreWebApply:{evar6:"aos:bag|learn more about acmi|apply for apple card"},bagSummaryLink:{evar6:'D=pageName+"|summary|get 3% daily cash|open modal"'},bagSummaryWebApply:{evar6:'D=pageName+"|modal|info - get 3% daily cash|apply for apple card"'}},On=e=>{try{window.asMetrics&&window.asMetrics.sendUserInteraction({name:"metrics",data:e})}catch(e){window.console.log(e)}},xn=e=>{try{window.asMetrics&&!K().isEmpty(e)&&window.asMetrics.fireMicroEvent({eVar:"eVar6",page:window.s.pageName,...e})}catch(e){window.console.log(e)}},Rn=(e="apple card modal",t=!1)=>{xn({feature:`${e} - ${t?"web apply":"native apply"}`,action:"apply now"})},Fn=(e,t,a=!1)=>{const r=window.acStoreApplePaySetup.RELAY_EVENT_ID,n=a?Pn(t):An(t);window.asMetrics&&window.asMetrics.relay&&window.asMetrics.relay.sendBeacon({key:r,element:e,callback:()=>{},defaultCampaign:n})},Mn=(e,t,a=(e=>e),r)=>{const n=K().get(e,"messages.additionalData.namedAssets",{}),{isBFIEnabled:s,isACIXEnabled:l}=n,o=Boolean(e.acmiEnabled);let i={},c="";const d={},m=window.asMetrics&&window.asMetrics.relay,u={config:{merchantIdentifier:t.merchantIdentifier||"",signature:t.signature||"",signedFields:t.signedFields||null}};m&&m.getOne&&(u.config.referrerIdentifier=m.getOne(window.acStoreApplePaySetup.RELAY_EVENT_ID));const p=u.config.referrerIdentifier||Pn(t.fireWithBuyflowReferrer);let g={};p&&(g=nn(decodeURIComponent(p)));const y=K().get(e,"appleCardApplyUrl");if(d.appleCardApplyUrl=y?on(y,g):"",u.config.referrerIdentifier||(u.config.referrerIdentifier=An(t.fireWithBuyflowReferrer)),window.acStoreApplePaySetup&&window.acStoreApplePaySetup.getState)try{window.acStoreApplePaySetup.getState(u).then((m=>{if(m&&(i=Cn(m.appleCardState,m.supportsInstallments,s,t.showBFILink,{apiStates:m.apiStates},e.webApplyEnabled),d.supportsInstallments=t.buyflowInstallmentsOverrideEnabled||m.supportsInstallments),d.objStatusMessage=m,!m||!n[i.key]&&i.showExisting)d.showDefaultFinancing=!0;else{d.showDefaultFinancing=!1;const e=t.defaultFinancingSelector||".as-productdecision-selectionarea";if(e){const t=document.querySelector(e);t&&(t.classList+=" as-buyflow-messages-hidedefaultfinancing")}c=n?Tn({status:m.appleCardState,assets:n,isInstallmentsSupported:t.supportsInstallments,messageType:pn.INLINE,isBFIEnabled:s,showBFILink:t.showBFILink,isACIXEnabled:l,templateId:t.templateId}):c,d.linkText=c}d.isSupplementaryLink=(e=>e===mn.SUPPLEMENTARY_SUPPORTED)(m.appleCardState),d.canNativeApply=(e=>e===mn.SUPPORTED)(m.appleCardState,t.showBFILink);const u=(l?o:s)&&i.key?Tn({status:m.appleCardState,asset:n,isInstallmentsSupported:t.supportsInstallments,messageType:pn.BANNER,isBFIEnabled:s,isACIXEnabled:l}):null;if(d.bannerMessage=u,document.body.classList.toggle("rf-acmibanner-enabled",Boolean(u)),r){Sn(e,0,a,m);const n=((e=[],{supportsInstallments:t,appleCardState:a})=>{let r=0;if(0===e.length){const e=[mn.COMPLETED,mn.SUPPORTED,mn.SUPPLEMENTARY_SUPPORTED];t?r=1:-1!==e.indexOf(a)&&(r=2)}else{const n=t?1:0,s=K().find(e,(e=>{const{state:t=[],inst:r=[]}=e;return-1!==t.indexOf(a)&&-1!==r.indexOf(n)}));r=s.key||0}return r})(t.aciConfigMap||[],m);r({messagingState:m.appleCardState,...i,linkText:c,isSupplementaryLink:t.isSupplementaryLink,supportsInstallments:t.supportsInstallments,hasApplied:t.hasApplied,acmiLevel:n,bannerMessage:u})}a({type:gn.UPDATE,payload:{...d}}),window.acmState={...d},i&&i.evarGroupText&&(e=>{window.asMetrics&&window.asMetrics.appleCard&&window.asMetrics.appleCard({name:"Step 1",status:e})})(i.evarGroupText)}))}catch(e){window.console.log(e)}},Bn=(e,t,{isBanner:a=!1,evarParam:r="",triggerSel:n,assetVariables:s={},metricsInfo:l="apple card",metricsKey:o,overrideShowOverlay:i=!1,part:c=""}={})=>{t({type:gn.OPEN_OVERLAY,payload:{isBanner:a,triggerSel:n,assetVariables:s,metricsInfo:l,overrideShowOverlay:i}}),o?(e=>{On(Dn[e])})(o):(({evarParam:e,metricsInfo:t,part:a})=>{xn({slot:e,feature:t||"apple card",part:a,action:"open modal"})})({evarParam:r,metricsInfo:l,part:c})},_n=(e,t,a={})=>{const r=!0,{fireWithBuyflowReferrer:n,appleCardApplyUrl:s,metricsInfo:l}=e,{metricsKey:o}=a;(s||o)&&(t.preventDefault&&t.preventDefault(),o?(e=>{let t;const a=window.asMetrics&&window.asMetrics.relay;a&&a.getOne&&(t=a.getOne(window.acStoreApplePaySetup.RELAY_EVENT_ID));const r=t||Pn();On({...Dn[e],evar17:r,events:"event287"})})(o):(Rn(l,r),Fn(t,n,r)),wn(),s&&(window.location.href=s))},$n=(e,t,a={})=>{window.acStoreApplePaySetup&&window.acStoreApplePaySetup.setup&&(window.acStoreApplePaySetup.setup(e.objStatusMessage),t({type:gn.APPLIED}),Rn(e.metricsInfo),Fn(a,e.fireWithBuyflowReferrer))},Un=(e,t,a,r)=>{a({type:gn.CLOSE_OVERLAY}),Mn(e,t,a,r),xn({feature:"apple card modal",action:"thank you"})},Kn=({bootstrap:e,onCompleted:t=(e=>e),additionalState:a={}})=>{const{merchantIdentifier:r="",signature:n="",signedFields:l=null}=e,[o,i]=(0,s.useReducer)(hn,{merchantIdentifier:r,signature:n,signedFields:l,overlayVisible:!1,onCompleted:t,...a});(0,s.useEffect)((()=>{Mn(e,o,i,t)}),[]);return{state:o,handleOpenOverlay:e=>Bn(0,i,e),handleCloseOverlay:()=>((e,t,a,r)=>{a({type:gn.CLOSE_OVERLAY}),t.isCompleted&&Mn(e,t,a,r)})(e,o,i,t),handleApplyClick:e=>$n(o,i,e),handleWebApplyClick:(e,t)=>_n(o,e,t),handleInlineApplyClick:e=>((e,t,a)=>{e.canNativeApply?$n(e,t,a):_n(e,a)})(o,i,e),handleContinueClick:()=>Un(e,o,i,t),handleConfigUpdate:a=>((e,t,a,r,n)=>{const s=K().has(r,"showBFILink"),l=K().get(t,"objStatusMessage.appleCardState"),o={merchantIdentifier:r.merchantIdentifier||t.merchantIdentifier,signature:r.signature||t.signature,signedFields:r.signedFields||t.signedFields,showBFILink:s?r.showBFILink:t.showBFILink,shouldHideLinks:K().has(r,"shouldHideLinks")?r.shouldHideLinks:t.shouldHideLinks};if(a({type:gn.UPDATE_CONFIG,payload:{...o}}),l&&n&&s){const a=K().get(e,"messages.additionalData.namedAssets",{}),s=Cn(l,t.supportsInstallments,a.isBFIEnabled,t.showBFILink);n({linkText:Tn({status:l,asset:a,isInstallmentsSupported:t.supportsInstallments,messageType:pn.INLINE,isBFIEnabled:a.isBFIEnabled,showBFILink:r.showBFILink,isACIXEnabled:a.isACIXEnabled,assetVariables:t.assetVariables,templateId:t.templateId}),...s,isConfigUpdated:!0})}})(e,o,i,a,t),handleSupplementarySetup:e=>((e,t={})=>{t.preventDefault&&t.preventDefault(),window.acStoreApplePaySetup&&window.acStoreApplePaySetup.setup&&(window.acStoreApplePaySetup.setup(e.objStatusMessage),Fn(t,e.fireWithBuyflowReferrer))})(o,e)}},Vn="data-ariafocusable",Hn="data-ariasaved-tabindex",jn="data-ariasaved-disabled",Gn="data-ariasaved-ariadisabled",Wn="data-ariasaved-href";const qn=e=>"BUTTON"===e.tagName||"INPUT"===e.tagName,Yn=(e,t=document)=>Array.from(t.querySelectorAll(e)),zn=e=>{const t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)||t>=0},Xn=(e,t,a=!0)=>{const r=Yn("a,input,select,button,textarea,iframe,*[tabindex]",e).filter(zn),n=a?r.filter((e=>"none"!==e.style.display)):r;return t?n.slice(0,t):n},Jn=e=>{e.forEach((e=>{if(e.setAttribute(Vn,"true"),qn(e)){const t=e.disabled,a=Boolean(e.getAttribute(jn))||t?"true":"";e.setAttribute(jn,a),e.disabled=!0}const t=e.getAttribute("aria-disabled")||"",a=e.getAttribute(Gn)||"";e.setAttribute(Gn,a||t),e.setAttribute("aria-disabled","true");const r=e.getAttribute("href")||"",n=e.getAttribute(Wn)||"";r&&(e.setAttribute(Wn,n||r),e.removeAttribute("href"));const s=e.getAttribute("tabindex")||"",l=e.getAttribute(Hn)||"";e.setAttribute(Hn,l||s),e.setAttribute("tabindex","-1")}))},Zn=e=>{e.forEach((e=>{if(e.removeAttribute(Vn),qn(e)){const t=e.disabled,a=e.getAttribute(jn);t&&(e.disabled=Boolean(a)),e.removeAttribute(jn)}const t=e.getAttribute("aria-disabled")||"",a=e.getAttribute(Gn)||"";"true"===t&&(a?e.setAttribute("aria-disabled",a):e.removeAttribute("aria-disabled")),e.removeAttribute(Gn);const r=e.getAttribute("href")||"",n=e.getAttribute(Wn)||"";""===r&&n&&e.setAttribute("href",n),e.removeAttribute(Wn);const s=e.getAttribute("tabindex")||"",l=e.getAttribute(Hn)||"";parseInt(s,10)<0&&(l?e.setAttribute("tabindex",l):e.removeAttribute("tabindex")),e.removeAttribute(Hn)}))},{iosVersion:Qn}=A(),es=Qn>0,ts=es&&Qn<15,as=HTMLElement.prototype.hasOwnProperty("inert");const rs=new class{constructor(){this.map={},this.anyOverlayOpen=!1,this.scrollState={},this.initialPageState={processedNodes:[],originalValues:[],focusableNodes:[]}}update(e,t){this.map[e]=t;const a=Object.keys(this.map).every((e=>!this.map[e]));t&&!this.anyOverlayOpen?(this.initialPageState=(()=>{const e=document.getElementById("portal"),t=Array.from(document.querySelectorAll("body > *")).filter((e=>!e.matches("script,style"))),a=[],r=[],n=[];return t.forEach((t=>{if(t!==e)if(as){if(t.inert)return;a.push(t),t.toggleAttribute("inert")}else{const e=t.getAttribute("aria-hidden");if(null!==e&&"false"!==e)return;r.push(e),a.push(t),t.setAttribute("aria-hidden","true"),n.push(Xn(t))}})),as||n.forEach((e=>Jn(e))),{processedNodes:a,originalValues:r,focusableNodes:n}})(),this.anyOverlayOpen=!0):!t&&a&&this.anyOverlayOpen&&((({processedNodes:e,originalValues:t,focusableNodes:a})=>{e.forEach(((e,a)=>{if(as)e.toggleAttribute("inert");else{const r=t[a];null===r?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r)}})),as||a.forEach((e=>Zn(e)))})(this.initialPageState),this.anyOverlayOpen=!1)}scrollLock(e){const t=document.documentElement,a=`data-core-overlay-${ts?"open-ios-fixed":"open"}`;e?(es&&(this.scrollState.scrollX||(this.scrollState.scrollX=window.pageXOffset),this.scrollState.scrollY||(this.scrollState.scrollY=window.pageYOffset)),t.setAttribute(a,"")):setTimeout((()=>{!this.anyOverlayOpen&&t.hasAttribute(a)&&(t.removeAttribute(a),es&&(window.scrollTo(this.scrollState.scrollX||0,this.scrollState.scrollY||0),this.scrollState={}))}),0)}remove(e){delete this.map[e]}getMap(){return this.map}},ns=(0,s.forwardRef)((({in:e,visible:t=e,timeout:a=100,mountOnEnter:r=!0,onEntered:n,onExit:o,onExited:i,onClose:d=(()=>{}),returnFocusRef:m,noCover:u=!1,isFullscreen:p=!1,disableClickAway:g=!1,disableEsc:y=!1,disableFocusIn:h=!1,disableFocusOut:E=!1,ariaLabel:v,ariaDesc:b,ariaModal:f=!0,contentAttrs:w,role:N="dialog",className:S,children:C,...T},L)=>{const k=l().useId(),I=(0,s.useRef)(null),A=za(I,L),P=(0,s.useRef)(null),D=(0,s.useRef)(null),O=document.getElementById("portal");(0,s.useEffect)((()=>{t&&D&&(D.current=document.activeElement),rs.update(k,t)}),[t]);(0,s.useEffect)((()=>()=>{rs.update(k,!1),rs.scrollLock(!1),rs.remove(k)}),[]),$("click",t?e=>{t&&!g&&I.current===e.target&&d(e)}:null),$("keydown",t?e=>{t&&!y&&e.keyCode===c.Esc&&d(e)}:null);const x={"data-core-overlay":"","data-core-overlay-cover":u?void 0:"","data-core-overlay-fullscreen":p?"":void 0};return(0,pr.createPortal)(l().createElement(Wr,ur({ref:A,in:t,timeout:a,mountOnEnter:r,onEntered:()=>{rs.scrollLock(!0),h||P.current&&P.current.focus(),n&&setTimeout(n,0)},onExit:()=>{rs.scrollLock(!1),o&&setTimeout(o,0)},onExited:()=>{E||(m&&m.current?m.current.focus():D.current&&D.current.focus()),i&&setTimeout(i,0)},className:S},x,T),l().createElement("div",ur({"data-core-overlay-content":"",tabIndex:-1,ref:P,role:N,"aria-labelledby":v,"aria-describedby":b,"aria-modal":f},w),C)),O||document.body)}));ns.displayName="Overlay";const ss=ns,ls=({ariaLabel:e="Close",className:t,stickyClose:a,alignStart:r,children:n,...s})=>l().createElement("button",ur({type:"button",className:qa()("rc-overlay-close",t,{"rc-sticky":a,"rc-align-start":r}),"aria-label":e,"data-autom":"overlay-close"},s),l().createElement("span",ur({className:"rc-overlay-closesvg"},Ya('<svg width="21" height="21" class="as-svgicon as-svgicon-close as-svgicon-tiny as-svgicon-closetiny" role="img" aria-hidden="true"><path fill="none" d="M0 0h21v21H0z"/><path d="m12.12 10 4.07-4.06a1.5 1.5 0 1 0-2.11-2.12L10 7.88 5.94 3.81a1.5 1.5 0 1 0-2.12 2.12L7.88 10l-4.07 4.06a1.5 1.5 0 0 0 0 2.12 1.51 1.51 0 0 0 2.13 0L10 12.12l4.06 4.07a1.45 1.45 0 0 0 1.06.44 1.5 1.5 0 0 0 1.06-2.56Z"/></svg>'))),n),os=l().forwardRef((({onClose:e,noPadding:t,doublePadding:a,fixedWidth:r=!0,wide:n,isFullscreen:s,noCloseButton:o,disableClickAway:i,footerContent:c,stickyClose:d,blur:m,startAlignClose:u,classes:p={root:"",content:"",close:""},className:g,children:y,closeButtonAttrs:h={},...E},v)=>{const{assets:b,viewport:f}=z();return l().createElement(ss,ur({className:qa()("rc-overlay",g,p.root,s?"rc-overlay-fullscreen":"rc-overlay-popup",{"rc-overlay-fixed-width":r&&!s,"rc-overlay-content-nopadding":t,"rc-overlay-content-doublepadding":a,"rc-overlay-content-wide":n,"rc-overlay-with-footer":!!c,"rc-blur":m,"rc-overlay-no-close-button":o}),onClose:e,isFullscreen:s,disableClickAway:i,ref:v},E),s?l().createElement("div",{className:"rc-overlay-fullscreen-outer"},l().createElement("div",{className:qa()(p.content,"rc-overlay-fullscreen-content")},y,c&&l().createElement("div",{className:"rc-overlay-footer"},c)),!o&&l().createElement(ls,ur({className:p.close,onClick:e,ariaLabel:b.close,stickyClose:d,alignStart:u},h))):l().createElement("div",{className:qa()(p.content,"rc-overlay-popup-outer")},l().createElement("div",{className:"rc-overlay-popup-content"},y),c&&l().createElement("div",{className:"rc-overlay-footer"},c),!o&&l().createElement(ls,ur({className:p.close,onClick:e,ariaLabel:b.close,stickyClose:d,alignStart:u},h))),s||"small"!==f||i?null:l().createElement("div",{className:"rc-overlay-popup-dismiss",onClick:e}))}));os.displayName="Overlay";const is=os,cs=({id:e,className:t,children:a,isLoading:r,hasDefaultClass:n=!0,...s},o)=>{const i=qa()([t,{"form-button":n},{"button-spinner":r}]);return l().createElement("button",ur({id:e,type:"button",className:i,ref:o},s),l().createElement("span",null,a))},ds=l().forwardRef(cs),ms=({bootstrap:e,state:t,webApplyButtonProps:a,onClose:r=(e=>e),handleApplyClick:n=(e=>e),handleWebApplyClick:s=(e=>e),handleContinueClick:o=(e=>e),dataAutomForOverlay:i})=>{const c=K().get(e,"messages.additionalData.namedAssets",{}),{isBFIEnabled:d,isACIXEnabled:m}=c,u=t&&t.objStatusMessage?t.objStatusMessage:{},p=!d||!t.supportsInstallments||t.overrideShowBFILink||!t.showBFILink&&!t.showOverlayContentForBanner,{appleCardApplyUrl:g,isBag:y}=e,h=!t.overrideShowBFILink&&t.showBFILink,E=t.isCompleted&&d&&c.appliedOverlayHeader?c.appliedOverlayHeader:Tn({status:u.appleCardState,asset:c,isInstallmentSupported:t.supportsInstallments,messageType:pn.OVERLAYHEADER,isBFIEnabled:d,showBFILink:h,showOverlayContentForBanner:t.showOverlayContentForBanner,assetVariables:t.assetVariables,isACIXEnabled:m,isBag:y}),v=t.isCompleted&&d&&c.appliedOverlayFooter?c.appliedOverlayFooter:Tn({status:u.appleCardState,asset:c,isInstallmentSupported:t.supportsInstallments,messageType:pn.OVERLAYFOOTER,isBFIEnabled:d,showBFILink:h,showOverlayContentForBanner:t.showOverlayContentForBanner,assetVariables:t.assetVariables,isACIXEnabled:m,isBag:y});return l().createElement("div",null,l().createElement(is,{visible:t.overlayVisible,isFullscreen:t.isHandheldPhone,className:"rf-acmessages-overlay",onClose:()=>r(),contentAttrs:{className:"rf-acmessages-overlay-content","data-autom":i},ariaLabel:"buyflowmessages-overlay-header"},l().createElement("div",ur({className:qa()("rf-acmessages-overlayheader",{"rf-acmessages-noproductprice":K().isEmpty(t.assetVariables)||t.showOverlayContentForBanner})},Ya(E))),t.canNativeApply&&!t.isCompleted&&p?l().createElement("button",{onClick:e=>n(e),className:"form-button",type:"button"},c.apply):"",t.hasNativeState||t.isCompleted||!g?"":l().createElement("a",{href:g,onClick:e=>s(e),className:"rf-acmessages-web-apply form-button","data-autom":"Apply Now","aria-label":K().get(c,"applyAllyText")},c.apply),!t.hasNativeState&&a&&l().createElement(ds,ur({},a,{onClick:e=>{s(e,{metricsKey:"bagSummaryWebApply"}),a.onClick()}}),a.label),t.hasNativeState&&t.isCompleted?l().createElement("button",{onClick:o,className:"form-button",type:"button"},c.continue):"",l().createElement("div",ur({className:"rf-acmessages-overlayfooter"},Ya(v)))))},us=({bootstrap:e,state:t,overlayAttrs:a})=>{const r=K().get(e,"messages.additionalData.namedAssets")||{},{isBFIEnabled:n}=r,s=t&&t.objStatusMessage?t.objStatusMessage:{},o=Cn(s.appleCardState,t.supportsInstallments,n,t.showBFILink);if(!o)return"";const i=o.overlay||t.showOverlayContentForBanner||t.overrideShowOverlay;return l().createElement(l().Fragment,null,n||i?l().createElement(ms,a):null)},ps=e=>{const t=l().useRef(null),a=l().useRef(null);return l().useEffect((()=>{t.current&&(e?(a.current=Xn(t.current),Jn(a.current),a.current.forEach((e=>e.setAttribute("aria-disabled",!0)))):a.current&&(Zn(a.current),a.current.forEach((e=>e.removeAttribute("aria-disabled")))))}),[e]),t},gs=({disabled:e,classes:t={},children:a,...r})=>{const n=ps(e);return l().createElement("div",ur({ref:n,className:qa()(t.root,{[t.disabled||""]:e}),"data-core-disabled":e},r),a)},ys=({bootstrap:e,state:t,handleOpenOverlay:a,handleSupplementarySetup:r,assetVariables:n={},templateId:s,isDisabled:o})=>{const i=K().get(e,"messages.additionalData.namedAssets")||{},{isBFIEnabled:c,isACIXEnabled:d}=i,m=t&&t.objStatusMessage?t.objStatusMessage:{},u=Cn(m.appleCardState,t.supportsInstallments,c,t.showBFILink);if(!u)return"";const{isBag:p,webApplyEnabled:g,bagWebApplyStates:y}=e,h=g&&y&&-1!==y.indexOf(m.appleCardState),E=Tn({status:m.appleCardState,asset:i,isInstallmentsSupported:t.supportsInstallments,messageType:pn.INLINE,isBFIEnabled:c,isACIXEnabled:d,showBFILink:t.showBFILink,assetVariables:n,templateId:s,isBag:p}),v=e=>{if(e.target&&e.target.matches('[data-buyflow-messages-overlay = "button"]')){const t=e.target,r=t.getAttribute("data-buyflow-messages-metrics-info"),s=t.closest("[data-messages-part]"),l=s?s.getAttribute("data-messages-part"):"";e.preventDefault(),a({assetVariables:n,evarParam:l?"":"summary",metricsInfo:r,overrideShowOverlay:!0,part:l?`select mac - ${l}`:""})}},b={onClick:v},f=t.isSupplementaryLink&&r?{onClick:r}:{onClick:v},w=p?"bagSummaryLink":"";return l().createElement(l().Fragment,null,c&&t.showBFILink&&!t.shouldHideLinks?l().createElement("div",ur({className:"rf-acmessages-defaultlink"},b,Ya(E))):null,!c||t.showBFILink||t.shouldHideLinks?null:l().createElement("div",null,h||u.overlay&&!t.isSupplementaryLink?l().createElement("button",{className:"as-buttonlink",onClick:()=>a({metricsKey:w}),type:"button"},l().createElement("span",Ya(E))):l().createElement(gs,{disabled:o},l().createElement("div",ur({className:"rf-acmessages-defaultlink"},f,Ya(E))))),c||t.shouldHideLinks?null:l().createElement("div",ur({className:"rf-acmessages-defaultlink"},f,Ya(E))))},hs=({bootstrap:e,state:t,handleOpenOverlay:a,handleCloseOverlay:r,handleApplyClick:n,handleWebApplyClick:s,handleContinueClick:o,handleSupplementarySetup:i,assetVariables:c={},templateId:d,webApplyButtonProps:m,dataAutom:u,dataAutomForOverlay:p,isDisabled:g})=>{const y={state:t,bootstrap:e,webApplyButtonProps:m,onClose:r,handleApplyClick:n,handleWebApplyClick:s,handleContinueClick:o,dataAutomForOverlay:p};return l().createElement("div",{"data-autom":u},l().createElement(ys,{bootstrap:e,state:t,handleOpenOverlay:a,handleSupplementarySetup:i,assetVariables:c,templateId:d,isDisabled:g}),l().createElement(us,{state:t,bootstrap:e,overlayAttrs:y}))},Es=(e,t)=>{(0,s.useEffect)((()=>{const a=a=>{if(a.target.matches('[data-buyflow-messages-overlay="ribbon"]')){const t=a.target;a.preventDefault();const r="data-analytics-region",n=t.closest(`[${r}]`),s=n?n.getAttribute(r):"ribbon";e({isBanner:!0,evarParam:s,metricsInfo:t.getAttribute("data-buyflow-messages-metrics-info")})}else a.target.matches("[data-buyflow-messages-apply]")&&(a.preventDefault&&a.preventDefault(),t(a))},r=e=>{e.keyCode!==c.Return&&e.keyCode!==c.Space||a(e)};return document.addEventListener("click",a),document.addEventListener("keydown",r),()=>{document.removeEventListener("click",a),document.removeEventListener("keydown",r)}}),[])},vs=({bootstrap:e={},showDefaultFinancing:t=!1,shouldHideLinks:a=!1,fireWithBuyflowReferrer:r=!1,onCompleted:n=(e=>e),acConfig:o=null,aciConfigMap:i=[],children:c,webApplyButtonProps:d,dataAutom:m,dataAutomForOverlay:u,isDisabled:p=!1})=>{const{buyflowMessagesEnabled:g}=e,{assetVariables:y,templateId:h}=o||{},{state:E,handleOpenOverlay:v,handleCloseOverlay:b,handleApplyClick:f,handleWebApplyClick:w,handleInlineApplyClick:N,handleContinueClick:S,handleConfigUpdate:C,handleSupplementarySetup:T}=Kn({bootstrap:e,onCompleted:n,additionalState:{showDefaultFinancing:t,shouldHideLinks:a,fireWithBuyflowReferrer:r,assetVariables:y,aciConfigMap:i,hasNativeState:!1,templateId:h}}),L=K().get(E,"showDefaultFinancing")||!g;return Es(v,N),(0,s.useEffect)((()=>{o&&C&&C(o)}),[o]),l().createElement("div",{id:"buyflow-message-container",className:"rf-ac-messages"},E&&g?l().createElement(hs,{bootstrap:e,state:E,handleOpenOverlay:v,handleCloseOverlay:b,handleApplyClick:f,handleWebApplyClick:w,handleContinueClick:S,handleSupplementarySetup:T,assetVariables:y,templateId:h,webApplyButtonProps:d,dataAutom:m,isDisabled:p,dataAutomForOverlay:u}):"",L&&l().createElement("div",{"data-autom":m,className:"rf-acmessages-defaultmessage"},c))},bs=l().createContext(),fs=(bs.Consumer,"shoppingCart"),ws="shoppingCart.items",Ns="shoppingCart.toolbar",Ss="shoppingCart.cartBanner",Cs="shoppingCart.cartMessages",Ts="shoppingCart.recommendedSystem",Ls="shoppingCart.shoppingCartMetaData",ks="shoppingCart.recurringServicesSummary",Is="shoppingCart.summary",As="shoppingCart.deviceTradeInServicesSummary",Ps="shoppingCart.actions",Ds="shoppingCart.xMerch",Os="shoppingCart.footnotes",xs="shoppingCart.summary.webApply",Rs="shoppingCart.pricingOptions",Fs="shoppingCart.header",Ms="shoppingCart.iUPTradeInSummary",Bs="shoppingCart.getReadyBanner",_s="shoppingCart.savedItemsMessages",$s="shoppingCart.bagSavedItems",Us="shoppingCart.bagSavedItems.bagSavedListItems",Ks="eVar1",Vs="eVar6",Hs="eVar4",js="eVar17",Gs="eVar21",Ws=K().get(window,"asMetrics.sendUserInteraction",K().noop),qs=l().createContext({viewReady:!1,acState:null,acAvailable:!1,acEnabledInstallment:!1,acSupportInstallment:!1,acShowInstallment:!1}),Ys=({children:e})=>{const[t]=Ma(Ls),[a]=Ba(Ps,"merchantIdentifier"),{appleCardInstallmentConfig:r,appleCardInstallmentsEnabled:n,appleCardInstallmentsAvailable:o,partnerFinancedInstallmentsAvailable:c,isPartnerFinancingSelectionDisabled:d}=t,{supportInstallments:m,appleCardAvailable:u}=n||{},p=!(m||u),[g,y]=(0,s.useState)(!1),[h]=Ba(Is,"buyflowMessages"),{state:E}=Kn({bootstrap:{...h}}),[v,b]=(0,s.useState)({viewReady:p,acState:null,acAvailable:!1,acEnabledInstallment:p,acSupportInstallment:!1,acShowInstallment:Boolean(p&&o),showCheckoutButton:!1,showInstallmentTile:!d}),{viewReady:f,acState:w,acEnabledInstallment:N,acShowInstallment:S}=v;return(0,s.useEffect)((()=>{!w&&r&&(f===p&&N===p||b((e=>({...e,viewReady:p,acEnabledInstallment:p}))),(({config:e,appleCardInstallmentsEnabled:t,state:a,setState:r})=>{const n=i("getApplePaySetup/acStoreApplePaySetup.getState/1"),s=i("getApplePaySetup/acStoreApplePaySetup.getState/2");try{window.acStoreApplePaySetup&&window.acStoreApplePaySetup.getState&&window.acStoreApplePaySetup.getState({config:e}).then((e=>{const n=window.acStoreApplePaySetup.AppleCardState,{supportsInstallments:s,appleCardState:l}=e,{supportInstallments:o,appleCardAvailable:i}=t||{};let{acEnabledInstallment:c}=a;const d=l===n.SUPPLEMENTARY_SUPPORTED||l===n.COMPLETED;t&&(c=o&&i?s||d:o?s:!i||d),r((e=>({...e,viewReady:!0,appleCardState:l,acAvailable:d,acEnabledInstallment:c,acSupportInstallment:s})))})).catch((e=>{n.error(e),r((t=>({...t,viewReady:!0,error:e})))}))}catch(e){s.error(e),r((t=>({...t,viewReady:!0,error:e})))}})({config:r,appleCardInstallmentsEnabled:n,state:v,setState:b}))}),[r]),(0,s.useEffect)((()=>{const e=Boolean(N&&o||c);e!==S&&b((t=>({...t,acShowInstallment:e})))}),[N,o,c]),(0,s.useEffect)((()=>{S&&!g&&(Ws({name:"metrics",data:{[Vs]:"view|acmi bag"}}),y(!0))}),[S]),(0,s.useEffect)((()=>{if(!v.acAvailable&&E.objStatusMessage){const e=window.acStoreApplePaySetup.AppleCardState;E.objStatusMessage.appleCardState===e.COMPLETED&&b((e=>({...e,acAvailable:!0})))}}),[E.objStatusMessage&&E.objStatusMessage.appleCardState,v.acAvailable]),(0,s.useEffect)((()=>{const e=i("AppleCardContextProvider/setApplePayHasActiveCard");try{window.acStoreApplePay.init(),a&&(window.acStoreApplePay.setApplePayHasActiveCard(a),setTimeout((()=>{b((e=>({...e,showCheckoutButton:!0})))}),3e3))}catch(t){e.error(t),b((e=>({...e,showCheckoutButton:!0})))}}),[a]),l().createElement(qs.Provider,{value:v},e)},zs=()=>(0,s.useContext)(qs),Xs=e=>{const t=(0,s.useRef)(e);return(0,s.useEffect)((()=>{t.current=e})),t.current},Js=({title:e,className:t="",error:a,children:r,...n})=>l().createElement("div",ur({className:qa()(["form-alert",t,{"is-error":a}])},n),e&&l().createElement("p",{className:"form-alert-title"},e),r),Zs=l().forwardRef(((e,t)=>{const{messages:a,lastUpdated:r,className:n,dataAutom:o}=e,i=(0,s.useRef)(),c=t||i,d=Boolean(a.length),m=a.length>1,u=a.sort(((e,t)=>e.level>t.level?1:-1));return(0,s.useEffect)((()=>{d&&c.current&&c.current.focus()}),[c,d,r]),d&&l().createElement("div",{className:qa()("rt-messages",n),"data-autom":o,tabIndex:"-1",ref:c,role:m?"list":void 0},u.map((({level:e,text:t})=>{const a="ERROR"===e;let r=m?"listitem":void 0;return a&&(r="alert"),l().createElement(Js,{key:t,error:a,role:r},l().createElement("div",ur({className:"rt-messages-text"},Ya(t))))})))})),Qs=Zs,el=e=>{const t=Da([e]);return t.getModuleChildren(e).reduce(((e,a)=>(e.push(a),t.getModuleChildren(a).forEach((a=>{const{isChildItem:r,isBundlePromoItem:n}=t.getModuleData(a);r&&n&&e.push(a)})),e)),[])},tl={modExists:!1,data:{},properties:{},childModKeys:[]},al="_editing";function rl(e,t){var a=Object.create(null);return e&&s.Children.map(e,(function(e){return e})).forEach((function(e){a[e.key]=function(e){return t&&(0,s.isValidElement)(e)?t(e):e}(e)})),a}function nl(e,t,a){return null!=a[t]?a[t]:e.props[t]}function sl(e,t){return rl(e.children,(function(a){return(0,s.cloneElement)(a,{onExited:t.bind(null,a),in:!0,appear:nl(a,"appear",e),enter:nl(a,"enter",e),exit:nl(a,"exit",e)})}))}function ll(e,t,a){var r=rl(e.children),n=function(e,t){function a(a){return a in t?t[a]:e[a]}e=e||{},t=t||{};var r,n=Object.create(null),s=[];for(var l in e)l in t?s.length&&(n[l]=s,s=[]):s.push(l);var o={};for(var i in t){if(n[i])for(r=0;r<n[i].length;r++){var c=n[i][r];o[n[i][r]]=a(c)}o[i]=a(i)}for(r=0;r<s.length;r++)o[s[r]]=a(s[r]);return o}(t,r);return Object.keys(n).forEach((function(l){var o=n[l];if((0,s.isValidElement)(o)){var i=l in t,c=l in r,d=t[l],m=(0,s.isValidElement)(d)&&!d.props.in;!c||i&&!m?c||!i||m?c&&i&&(0,s.isValidElement)(d)&&(n[l]=(0,s.cloneElement)(o,{onExited:a.bind(null,o),in:d.props.in,exit:nl(o,"exit",e),enter:nl(o,"enter",e)})):n[l]=(0,s.cloneElement)(o,{in:!1}):n[l]=(0,s.cloneElement)(o,{onExited:a.bind(null,o),in:!0,exit:nl(o,"exit",e),enter:nl(o,"enter",e)})}})),n}var ol=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},il=function(e){function t(t,a){var r,n=(r=e.call(this,t,a)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:n,firstRender:!0},r}Cr(t,e);var a=t.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var a=t.children,r=t.handleExited;return{children:t.firstRender?sl(e,r):ll(e,a,r),firstRender:!1}},a.handleExited=function(e,t){var a=rl(this.props.children);e.key in a||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var a=ur({},t.children);return delete a[e.key],{children:a}})))},a.render=function(){var e=this.props,t=e.component,a=e.childFactory,r=Nr(e,["component","childFactory"]),n=this.state.contextValue,s=ol(this.state.children).map(a);return delete r.appear,delete r.enter,delete r.exit,null===t?l().createElement(kr.Provider,{value:n},s):l().createElement(kr.Provider,{value:n},l().createElement(t,r,s))},t}(l().Component);il.propTypes={},il.defaultProps={component:"div",childFactory:function(e){return e}};const cl=il,dl=({children:e,...t})=>l().createElement($r,ur({classNames:"rs-bag-item-transition",timeout:600},t),e),ml=(0,s.createContext)({modKey:"",isReview:!1,isEditable:!1}),ul=()=>(0,s.useContext)(ml),pl=({classes:e="",name:t,labelRed:a,label:r,value:n,valuea11y:s,subLabel:o,subValue:i,monthlyValue:c,useLedgerSummary:d})=>{const m=t&&`rs-summary-${t.toLowerCase()}`,u=`bag${m}label`,p=`bag${m}value`,g=`bag${m}sublabel`,y=`bag${m}subvalue`,h=`bag${m}monthlyValue`,E=`bag${m}labelRed`,v=qa()("rs-summary-content",m,e),b=qa()("rs-summary-label",{"rs-webinstallment-monthlyinstallmentlabel":"monthlyTotal"===t});return l().createElement("div",{className:v},l().createElement("div",{className:"rs-summary-labelandvaluecontainer"},r&&("string"==typeof r?l().createElement("div",ur({className:b,"data-autom":u},Ya(r))):l().createElement("div",{className:b,"data-autom":u},r)),n&&("string"==typeof n?s&&l().createElement("div",{className:"rs-summary-value","data-autom":p},l().createElement("span",ur({role:"text","aria-label":s},Ya(n))))||l().createElement("div",ur({className:"rs-summary-value","data-autom":p},Ya(n))):l().createElement("div",{className:"rs-summary-value","data-autom":p},n))),o&&("string"==typeof o?l().createElement("div",ur({className:qa()("rs-summary-sublabel",{"rs-review-monthly-installment":d}),"data-autom":g},Ya(o))):l().createElement("div",{className:qa()("rs-summary-sublabel",{"rs-review-monthly-installment":d}),"data-autom":g},o)),c&&("string"==typeof c?l().createElement("div",ur({className:"rs-summary-value","data-autom":h},Ya(c))):l().createElement("div",{className:"rs-summary-value","data-autom":h},c)),i&&("string"==typeof i?l().createElement("div",ur({className:"rs-summary-subvalue large-last large-6 small-12","data-autom":y},Ya(i))):l().createElement("div",{className:"rs-summary-subvalue large-last large-6 small-12","data-autom":y},i)),a&&("string"==typeof a?l().createElement("div",ur({className:"rs-summary-labelred","data-autom":E},Ya(a))):a.length>0&&l().createElement("div",{className:"rs-summary-labelred","data-autom":E},a.map((e=>l().createElement("div",ur({key:e,className:"rs-summary-labelred-item"},Ya(e))))))))},gl=(e=!1,t,a)=>{const{viewport:r}=z(),[n,l]=(0,s.useState)(e),o=(0,s.useCallback)(((e,t)=>{"function"==typeof e&&e(...t)}),[]);return{isSmallScreen:"small"===r,isVisible:n,open:(0,s.useCallback)(((...e)=>{l(!0),o(t,e)}),[l,t,o]),close:(0,s.useCallback)(((...e)=>{l(!1),o(a,e)}),[l,a,o])}},yl=({linkClassName:e,linkText:t,linkMetrics:a,content:r,...n})=>{const{isVisible:s,open:o,close:i}=gl(!1,a);return l().createElement("div",{className:e},l().createElement("button",ur({className:"as-buttonlink",type:"button",onClick:o},Ya(t))),l().createElement(is,ur({},n,{visible:s,onClose:i}),l().createElement("div",Ya(r))))},hl="eVar1",El="eVar5",vl="eVar6",bl="eVar21",fl="prop37",wl=(K().get(window,"acStoreApplePaySetup.RELAY_EVENT_ID",""),K().get(window,"asMetrics.relay.sendBeacon",K().noop),K().get(window,"asMetrics.fireMicroEvent",K().noop)),Nl=K().get(window,"asMetrics.sendUserInteraction",K().noop),Sl=(K().get(window,"asMetrics.appleCard",K().noop),K().get(window,"asMetrics.triggerPageHasLoaded",K().noop)),Cl=K().get(window,"asMetrics.dude2",K().noop),Tl=({isLightning:e,feature:t})=>{wl({action:e?"CompareCoverageOptionsSelected":"LearnMoreSelected",feature:t,eVar:El})},Ll=()=>{wl({eVar:fl,feature:"bag",action:"continue checking out"})},kl=e=>{wl({eVar:fl,slot:"Pickup",feature:"StoreLocator",part:"map",action:e?"expanded":"collapsed"})},Il=e=>{wl({eVar:bl,slot:e,feature:"ExploreAllMonthlyPaymentOffers",action:"Selected"})},Al=({messages:e,isGiftCard:t,hasBuyFlowInstallmentDetails:a,priceMessage:r,hasPreOrderTradeIn:n,hasCarrierTradeIn:s,isRecommendedSystems:o,recommendedSystemsQuantity:i,recommendedSystemsActions:c,promoLabel:d,brandTitle:m,productTitle:u,productImage:p,showProductImage:g,productInfo:y,productInfoTrigger:h,carrierLearnMoreTrigger:E,description:v,processLinkText:b,processLinkMetrics:f,processOverlayContent:w,showQuantity:N,quantity:S,price:C,carrierLabel:T,carrierName:L,relatedParentLabel:k,relatedParent:I,inlineFees:A,installmentPrice:P,fullPriceInfo:D,hasSegmentSavingsMessage:O,removeButton:x,saveForLaterButtonMarkup:R,partNumber:F,isNonRefundable:M,installmentDetails:B=[],hasPromos:_,itemRef:$,itemTabIndex:U,changeProduct:K,changeAppleCare:V,changeProductDisclaimer:H,children:j,dataAutom:G,purchaseOptionDescription:W,alignDetailsLeft:q,appleCareDescription:Y,vatInfo:X,itemBundleHeader:J,itemBundleDetails:Z,itemDownPayment:Q,isFullWidthTitleMow:ee,carrierDiscountMessage:te,carrierConnectivityCalloutInfo:ae,carrierConnectivityDiscountMessage:re,priceAfterDiscountMessage:ne,savingsBadge:se})=>{const{isReview:le,isEditable:oe,isBundle:ie}=ul(),ce=Boolean(B.length),de=Boolean(T&&L),me=ce&&!_,ue=!me,pe=Boolean(r),{viewport:ge,assets:ye}=z(),he="small"===ge,Ee="small"!==ge,ve=qa()("rs-bag-item rs-iteminfo-wrap",{"rs-bag-item-bundle":ie}),be=qa()("rs-iteminfo","row",{"rs-iteminfo-giftcardcontent":t}),fe=qa()("rs-iteminfo-image","column","large-3",{"small-3":le,"small-12":!le}),we=qa()("rs-iteminfo-content","column",{"large-9":g,"large-12":!g,"small-9":le,"small-12":!le}),Ne=qa()("rs-iteminfo-details",{"rs-has-segmentsavings":O,"rs-has-pricemessage":pe}),Se=qa()("rs-iteminfo-title-wrapper","large-6",{"small-12":ee,"small-6 rs-iteminfo-halfwidth":!ee||s}),Ce=qa()("rs-iteminfo-quantity",{"large-2":a,"small-12":r}),Te=qa()("rs-iteminfo-pricedetails","large-last",{"rs-iteminfo-averageprice":s||pe,"large-4":o||a,"large-6":!N&&!o,"small-9":o||s,"small-6":!N&&!o,"small-12":N&&a||pe||ie}),Le=qa()("rs-iteminfo-detail-wrap",{"rs-iteminfo-detail-wrap-nocarrier":!de}),ke=te?`- ${te}`:"",Ie=de&&l().createElement("div",{className:"rs-iteminfo-carrier-details small-12"},l().createElement("span",{className:"rs-carrier-label"},T),l().createElement("span",{className:"rs-carrier-name"},`${L} ${ke}`),E&&l().createElement("div",{className:"rs-carrier-learnmore"},E)),Ae=k&&I&&l().createElement("div",{className:"rs-iteminfo-related-details small-12"},l().createElement("div",{className:"rs-related-label"},k),l().createElement("div",{className:"rs-related-name"},I)),Pe=b&&l().createElement(yl,{linkClassName:"rs-iteminfo-process-link",className:"rs-iteminfo-process-overlay",linkText:b,linkMetrics:()=>{(e=>{Nl({name:"metrics",data:{[El]:e}})})(f)},content:w}),De=v&&l().createElement("span",{className:"rs-iteminfo-description"},v),Oe=se&&l().createElement("div",ur({className:"rs-iteminfo-savings-badge"},Ya(se)));return l().createElement("li",{className:ve,"data-autom":G,role:"listitem"},!he&&e,l().createElement("div",{className:be,tabIndex:U,ref:$},g&&l().createElement("div",{className:fe,"aria-hidden":"true"},p),l().createElement("div",{className:we},he&&e,d&&l().createElement("div",ur({className:"rs-iteminfo-savings-promo"},Ya(d))),l().createElement("div",{className:Ne},m&&l().createElement("span",ur({className:"rs-iteminfo-brand-title"},Ya(m))),l().createElement("div",{className:Se},u,J,Ee&&l().createElement(l().Fragment,null,F&&l().createElement("div",{className:"rs-iteminfo-partnumber"},ye.partNumber,": ",F),Oe,re&&l().createElement("p",{className:"rs-iteminfo-carrie-connectivity"},re),ne&&l().createElement("p",{className:"rs-iteminfo-price-discount-message"},ne),Ae,Ie,!me&&q&&l().createElement("div",{className:Le},pe&&l().createElement("div",ur({className:"rs-iteminfo-detail"},Ya(r))),n&&l().createElement("div",ur({className:"rs-iteminfo-detail"},Ya(ye.preOrderTradeInMessage))),W&&l().createElement("div",ur({className:"rs-iteminfo-detail small-12"},Ya(W))),Y&&l().createElement("div",{className:"rs-iteminfo-detail"},Y),X&&l().createElement("div",ur({className:"rs-iteminfo-detail"},Ya(X)))),Z,ue&&l().createElement("div",{className:"rs-iteminfo-actions-left"},De,h,y,Pe,M&&l().createElement("div",{className:"rs-iteminfo-noreturnlabel"},ye.noReturns)))),N&&l().createElement("div",{className:Ce},S),o&&i&&l().createElement("div",{className:"rs-iteminfo-recommendedsystemsqty large-2"},i),l().createElement("div",{className:Te},l().createElement("div",{"data-autom":"Monthly_price",className:"rs-iteminfo-price"},C),!me&&Ee&&A,P&&l().createElement("div",{className:"rs-iteminfo-installmentprice"},P),D&&l().createElement("div",{className:"rs-iteminfo-fullpriceinfo"},D),Ee&&oe&&ue&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-iteminfo-actions-right"},x),l().createElement("div",{className:"rs-iteminfo-actions-right"},R)),Ee&&c),Q,he&&l().createElement(l().Fragment,null,re&&l().createElement("p",{className:"rs-iteminfo-carrie-connectivity"},re),ne&&l().createElement("p",{className:"rs-iteminfo-price-discount-message"},ne),Ae,Ie,Z,!me&&q&&l().createElement("div",{className:Le},pe&&l().createElement("div",ur({className:"rs-iteminfo-detail"},Ya(r))),n&&l().createElement("div",ur({className:"rs-iteminfo-detail"},Ya(ye.preOrderTradeInMessage))),W&&l().createElement("div",ur({className:"rs-iteminfo-detail small-12"},Ya(W))),Y&&l().createElement("div",{className:"rs-iteminfo-detail"},Y),X&&l().createElement("div",ur({className:"rs-iteminfo-detail"},Ya(X))))),me&&l().createElement("div",{className:"rs-iteminfo-pricelineitemwrapper"},q&&pe&&l().createElement("div",ur({className:"rs-iteminfo-detail"},Ya(r))),n&&l().createElement("div",ur({className:"rs-iteminfo-detail"},Ya(ye.preOrderTradeInMessage))),B.map((({label:e,value:t})=>l().createElement(pl,{key:`installment-detail-${e}`,name:"iteminfopricelineitem",label:e,value:t}))),q&&l().createElement(l().Fragment,null,W&&l().createElement("div",ur({className:"rs-iteminfo-detail small-12"},Ya(W))),Y&&l().createElement("div",{className:"rs-iteminfo-detail"},Y),X&&l().createElement("div",ur({className:"rs-iteminfo-detail"},Ya(X)))),Ee&&A,Ee&&l().createElement(pl,{name:"iteminfoactions",label:l().createElement("div",{className:"rs-iteminfo-actions-left"},De,h,y,Pe,M&&l().createElement("div",{className:"rs-iteminfo-noreturnlabel"},ye.noReturns)),value:oe&&l().createElement("div",{className:"rs-iteminfo-actions-right"},x)}),Ee&&l().createElement(pl,{name:"iteminfosavelater",value:l().createElement("div",{className:"rs-iteminfo-actions-right"},R)}))),Ee&&K,Ee&&V,he&&l().createElement(l().Fragment,null,A,l().createElement("div",{className:"row rs-iteminfo-actions"},l().createElement("div",{className:"rs-iteminfo-actions-left"},F&&l().createElement("div",{className:"rs-iteminfo-partnumber"},ye.partNumber,": ",F),Oe,De,Pe,h),y,oe&&l().createElement("div",{className:"rs-iteminfo-actions-right"},l().createElement("div",null,x),l().createElement("div",{className:"rs-iteminfo-action-savelater"},R))),K,V,c,M&&l().createElement("div",{className:"rs-iteminfo-noreturnlabel"},ye.noReturns)),H,ae,j)))};n(5127);const Pl=e=>{const{observerOptions:t={},triggerOnce:a=!0,onChange:r=(()=>{})}=e,n=(0,s.useRef)(null),l=(0,s.useRef)(null),[o,i]=(0,s.useState)({inView:!1,entry:null});return[(0,s.useCallback)((e=>{n.current&&l.current&&l.current.unobserve(n.current),e&&(l.current=((e,t,a)=>{const r=new IntersectionObserver((e=>{e.forEach((e=>{const{isIntersecting:r,intersectionRatio:n}=e;let s=!1;void 0!==r&&(s=r||n>=t.threshold,a(s,e))}))}),t);return r.observe(e),r})(e,t,((t,n)=>{i({inView:t,entry:n}),t&&a&&l.current.unobserve(e),r(t,n)}))),n.current=e}),[a]),o.inView,o.entry]},Dl="loading"in HTMLImageElement.prototype,Ol=(e,t,a)=>{const r=sn(e),n=nn(r.search);return Object.keys(t).forEach((e=>n[e]=t[e])),r.search="?"+((e,t=[])=>Object.keys(e).map((a=>{const r=t?.includes(a);return(r?a:encodeURIComponent(a))+"="+(r?e[a]:encodeURIComponent(""+e[a]))})).join("&"))(n,a),ln(r)},xl=({src:e,srcSet:t,sources:a,alt:r,width:n,height:l,data:o})=>{const i=n||K().get(o,"width"),c=l||K().get(o,"height"),d=null!=r?r:K().get(o,"alt",""),m=K().get(o,"src",""),u=K().get(o,"srcSet.src",""),p=(0,s.useMemo)((()=>o&&o.srcSet?(e=>{if(!e||!e.src)return{};const[t,a]=e.src.split("?"),r=a?nn(a):{};return{src:Ol(t,e?.scaleParams2?nn(e.scaleParams2||""):r,[".v"])}})(o.srcSet):o),[m,u]),g=e?{src:e,srcSet:t}:p,y=K().get(o,"sources",[]),h=K().get(y,"[0].srcSet",""),E=(0,s.useMemo)((()=>h?(e=>e&&0!==e.length?e.map((e=>{if(e.srcSet){const[t,a]=e.srcSet.split("?"),r=a?nn(a):{};return{...e,srcSet:Ol(t,r,[".v"])}}return e})):[])(y):y),[y.length,h]);return{finalWidth:i,finalHeight:c,finalAlt:d,finalSrcAttrs:g,finalSources:a??E}},Rl=({observerOptions:e,children:t})=>{const[a,r]=Pl({observerOptions:{rootMargin:"100px 0px 100px",...e}});return r?t:l().createElement("div",{ref:a})},Fl=({src:e,srcSet:t,sources:a,alt:r,width:n,height:o,data:i,showInView:c,observerOptions:d,...m})=>{const{finalWidth:u,finalHeight:p,finalAlt:g,finalSrcAttrs:y,finalSources:h}=xl({src:e,srcSet:t,sources:a,alt:r,width:n,height:o,data:i}),E=(0,s.useCallback)((e=>t=>{t&&!t.src&&(t.src=e)}),[]),v=h?.length>1?l().createElement("picture",null,h.map((e=>l().createElement("source",{key:e.type,srcSet:e.srcSet,type:e.type}))),l().createElement("img",ur({loading:Dl&&c?"lazy":void 0,width:u,height:p,alt:g,ref:E(h[h.length-1].srcSet)},m))):l().createElement("img",ur({loading:Dl&&c?"lazy":void 0,width:u,height:p,alt:g,src:1===h?.length?h[0].srcSet:y?.src},m));return c&&!Dl?l().createElement(Rl,{observerOptions:d},v):v},Ml=({src:e="",scaleParams1:t="",linkUrl:a=""})=>{const r=qa()("rs-iteminfo-child-image",{"as-util-relatedlink":Boolean(a)}),n=a?`click [data-relatedlink='${a}']`:"",s=t?{srcSet:{src:e,scaleParams1:t}}:{src:e};return(e=>e.includes("tradein-icon-recycle"))(e)?l().createElement("div",ur({className:qa()(r,"as-icondetails-icon","as-svgicon-container"),"data-trigger-click":n},Ya('<svg viewBox="0 0 25 25" class="as-svgicon as-svgicon-recycle as-svgicon-reduced as-svgicon-recyclereduced" role="img" aria-hidden="true" width="25px" height="25px"><path fill="none" d="M0 .213h25v25H0z"/><path d="m21.6 17.4-2.97-5.151a.55.55 0 0 0-.953.55l2.969 5.148a1.244 1.244 0 0 1 .012 1.275 1.312 1.312 0 0 1-1.155.651h-4.562l1.341-1.341a.55.55 0 1 0-.777-.777l-2.161 2.161a.549.549 0 0 0-.339.507c0 .01.005.019.006.029a.542.542 0 0 0 .155.419l2.334 2.338a.55.55 0 1 0 .777-.777L14.823 21H19.5a2.425 2.425 0 0 0 2.107-1.229A2.349 2.349 0 0 0 21.6 17.4ZM11.44 19.873H5.5a1.307 1.307 0 0 1-1.141-.665 1.327 1.327 0 0 1 0-1.34l2.307-4 .512 1.911a.55.55 0 0 0 .531.408.556.556 0 0 0 .143-.019.55.55 0 0 0 .389-.674L7.38 12.3c0-.01-.01-.016-.013-.026a.5.5 0 0 0-.584-.368.519.519 0 0 0-.077.005l-3.194.856a.55.55 0 0 0 .143 1.082.556.556 0 0 0 .143-.019l1.912-.512-2.308 4A2.466 2.466 0 0 0 5.5 21h5.94a.574.574 0 0 0 .55-.578.55.55 0 0 0-.55-.549ZM13.635 5.791l2.31 4-1.911-.512a.55.55 0 1 0-.285 1.062l3.194.856a.556.556 0 0 0 .143.019.542.542 0 0 0 .244-.066c.009 0 .02 0 .029-.008s.013-.013.021-.018a.543.543 0 0 0 .112-.1c.011-.013.026-.023.036-.037a.541.541 0 0 0 .087-.179l.856-3.195a.55.55 0 1 0-1.062-.285L16.9 9.241l-2.31-4a2.4 2.4 0 0 0-2.1-1.212 2.4 2.4 0 0 0-2.1 1.211l-2.971 5.145a.55.55 0 0 0 .953.551l2.974-5.146a1.307 1.307 0 0 1 1.144-.661 1.308 1.308 0 0 1 1.145.662Z"/></svg>'))):l().createElement("div",{className:r,"data-trigger-click":n,"aria-hidden":"true"},l().createElement(Fl,{data:s}))},Bl=({messages:e,imageSrc:t,imageScaleParams1:a,imageLinkUrl:r,hasTradeInLogo:n,children:s})=>{const o=Boolean(t),i=qa()("rs-iteminfo-child",{"rs-iteminfo-child-tradein":n},{"rs-iteminfo-child-no-image":!o});return l().createElement("div",{className:i},e,l().createElement("div",{className:"rs-iteminfo-child-content row"},l().createElement("div",{className:"rs-iteminfo-child-details column small-12 large-12"},o&&l().createElement("div",{className:"as-icondetails"},l().createElement(Ml,{src:t,scaleParams1:a,linkUrl:r})),s)))},_l="trade_in_carrier",$l="trade_in_instant",Ul="price_details",Kl="trade_in",Vl="default",Hl="iphone_upgrade",jl=e=>{const{carrierSubsidyTradeInDetails:t,tradeInCredit:a,priceOfNewIphoneValue:r,priceOfNewProduct:n,priceDetails:s,tradeinProduct:l,iupUpgrdCredit:o}=e;return t?_l:a&&(r||n)?$l:s?Ul:l?Kl:o?Hl:Vl},Gl=({modKey:e,children:t})=>{const a=Ra(e),{src:r,dataScaleParams1:n,productUrl:s,promos:o,showChildItemLink:i}=a.data,c=jl(a.data).startsWith(Kl),{isEditable:d}=ul(),m=!o&&i&&d?s:"",[u,p]=_a(e);return l().createElement(Bl,{messages:l().createElement(Qs,{messages:u,lastUpdated:p}),imageSrc:r,imageScaleParams1:n,imageLinkUrl:m,hasTradeInLogo:c},t)},Wl=l().memo(Gl),ql=(()=>{const e=i("utils/financeSupported");try{const{iosVersion:e,isIpad:t}=A();return window.ApplePaySession&&window.ApplePaySession.supportsVersion(14)&&e>0&&!t}catch(t){return e.error(t),!1}})(),Yl=(e,t)=>{const a=i("utils/sendBagIdToPrism");try{e&&window.webkit&&window.webkit.messageHandlers.updateValueFromAOS.postMessage(JSON.stringify({key:t,value:e}))}catch(e){a.error(e)}},zl=({header:e,description:t,subsidyDetails:a,devicePaymentsHeader:r,devicePaymentsSubHeader:n,devicePaymentsSubHeaderA11y:s,deviceBillCredits:o,overlayWithButton:i,showTradeInBalanceGiftMessage:c})=>{const{assets:d}=z();return l().createElement("div",{className:"rs-item-child-content-carriertradein as-icondetails-detail"},l().createElement("div",{className:"large-6 small-12"},l().createElement("h3",{className:"rs-carrier-tradein-header"},e),l().createElement("div",{className:"rs-carrier-tradein-ledger"},a.map((({label:e,value:t,valueA11y:a})=>l().createElement("div",{key:`trade-in-row-${e}`,className:"rs-carrier-tradein-details"},l().createElement("div",{className:"rs-carrier-tradein-details-label"},e),a?l().createElement("div",{className:"rs-carrier-tradein-details-value"},l().createElement("span",ur({"aria-hidden":"true"},Ya(t))),l().createElement("span",ur({className:"visuallyhidden"},Ya(a)))):l().createElement("div",ur({className:"rs-carrier-tradein-details-value"},Ya(t))))))),l().createElement("div",{className:"rs-carrier-tradein-desc"},t),l().createElement("div",{className:"rs-carrier-devicepayments-wrapper"},l().createElement("div",{className:"rs-carrier-devicepayments"},l().createElement("h4",{className:"rs-carrier-devicepayments-header"},r),l().createElement("div",{className:"rs-carrier-devicepayments-subheader"},l().createElement("span",{"aria-hidden":"true"},n),l().createElement("span",ur({className:"visuallyhidden"},Ya(s))))),o.map((({label:e,value:t,valueA11y:a})=>l().createElement("div",{key:`trade-in-row-${e}`,className:"rs-carrier-tradein-details"},l().createElement("div",{className:"rs-carrier-tradein-details-label"},e),a?l().createElement("div",{className:"rs-carrier-tradein-details-value"},l().createElement("span",ur({"aria-hidden":"true"},Ya(t))),l().createElement("span",ur({className:"visuallyhidden"},Ya(a)))):l().createElement("div",ur({className:"rs-carrier-tradein-details-value"},Ya(t)))))))),c&&l().createElement("p",{className:"rs-item-child-content-tradein-overfund typography-body-reduced"},d.tradeInOverfundText),i)},Xl=({hasPriceOfNewProduct:e,instantCreditMessage:t,removeBtn:a,infos:r,priceDetails:n,title:s,tradeInPromoSavings:o,overlayWithButton:i,showTradeInBalanceGiftMessage:c})=>{const d=qa()("rs-iteminfo-tradein-pricedetails",{"rs-iteminfo-tradein-newdevicedetails":e,"rs-iteminfo-tradein-includes-tradeinpromosavings":!!o}),{assets:m}=z();return l().createElement("div",{className:"rs-item-child-content-instanttradein as-icondetails-detail"},l().createElement("div",{className:"rs-iteminfo-child-wrapper rs-iteminfo-tradein-ledger"},s,a&&l().createElement("div",{className:"rs-iteminfo-child-actions"},a),l().createElement("div",{className:"rs-iteminfo-tradein-details"},r.map((({label:e,value:t,labelDataAutom:a,valueDataAutom:r})=>t?l().createElement("div",{key:`row-${e}`,className:"rs-iteminfo-instant-tradein-row row"},l().createElement("span",{className:"small-12","data-autom":a},e),l().createElement("span",ur({className:"rs-iteminfo-tradein-inlinevalue","data-autom":r},Ya(t)))):null)),l().createElement("div",{className:"column large-6 small-12"},l().createElement("div",{className:d},n.map((({label:e,value:t,labelDataAutom:a,valueDataAutom:r})=>t?l().createElement("div",{key:`row-${e}`,className:"rs-iteminfo-tradein-pricedetails-row row"},l().createElement("span",ur({className:"large-9 small-9 column","data-autom":a},Ya(e))),l().createElement("span",ur({className:"large-3 small-3 column rs-iteminfo-tradein-value","data-autom":r},Ya(t)))):null))))),c&&l().createElement("p",{className:"rs-item-child-content-tradein-overfund typography-body-reduced"},m.tradeInOverfundText),o&&l().createElement("div",{className:"rs-instant-tradein-tradeinpromosavings"},o),t&&l().createElement("div",{className:"rs-instant-tradein-message"},t)),i)},Jl=({totalPrice:e,savingsMessage:t,priceDetails:a,removeBtn:r,infos:n,title:s,savingsBadge:o})=>{const i=e&&l().createElement("p",ur({className:"rs-iteminfo-child-price"},Ya(e))),c=l().createElement("div",{className:"rs-iteminfo-child-taglinewrapper"},n.map((e=>e?l().createElement("div",{key:`info-row-${e}`,className:"rs-iteminfo-child-desc"},l().createElement("p",ur({className:"rs-iteminfo-child-tagline rs-iteminfo-applecare-desc"},Ya(e)))):null))),d=Boolean(t),m=qa()("rs-summary-iteminfochilddetails-action",{"rs-has-segmentsavings":d});return l().createElement("div",{className:"rs-item-child-content-pricedetails as-icondetails-detail rs-iteminfo-icondetails-detail"},l().createElement(pl,{name:"itemInfoChildDetails",label:l().createElement("div",{className:"rs-iteminfo-child-wrapper"},s),value:i}),a.map((({label:e,value:t})=>l().createElement(pl,{key:`price-detail-row-${e}-${t}`,name:"itemInfoChildPriceDetails",label:e,value:t}))),l().createElement(pl,{name:"itemInfoChildDetails",classes:m,label:c,value:d&&l().createElement("div",ur({className:"rs-iteminfo-segmentsavings"},Ya(t)))}),o&&l().createElement("div",ur({className:"rs-iteminfo-savings-badge"},Ya(o))),l().createElement("div",{className:"rs-iteminfo-child-actions"},r))},Zl=({creditDisclaimer:e,tradeInEstimatedHeader:t,tradeInEstimatedValue:a,tradeInSubHeader:r,tradeInProduct:n,priceAfterTradeInSubHeader:s,priceAfterTradeIn:o,tradeInCreditInfo:i,tradeInIncentiveHeader:c,tradeInIncentive:d,removeBtn:m,title:u,overlayWithButton:p,showTradeInBalanceGiftMessage:g,serialNumberHeader:y,serialNumber:h,imeiNumberHeader:E,imeiNumber:v})=>{const{viewport:b,assets:f}=z(),w="small"===b,N=l().createElement("div",{className:"rs-iteminfo-child-taglinewrapper"},l().createElement("div",{className:"rs-iteminfo-child-tradeinproduct"},r&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-iteminfo-child-subheader"},r),l().createElement("div",{className:"rs-iteminfo-child-value"},n)),y&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-iteminfo-child-subheader"},y),l().createElement("div",{className:"rs-iteminfo-child-value"},h)),E&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-iteminfo-child-subheader"},E),l().createElement("div",{className:"rs-iteminfo-child-value"},v)),t&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-iteminfo-child-subheader"},t),a&&l().createElement("div",ur({className:"rs-iteminfo-child-value"},Ya(a)))),o&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-iteminfo-child-subheader"},s),l().createElement("div",{className:"rs-iteminfo-child-value"},o)),i&&l().createElement("div",{className:"rs-iteminfo-child-tradeincreditinfo"},i),d&&l().createElement("div",{className:"rs-iteminfo-child-tradeinincentive"},l().createElement("div",{className:"rs-iteminfo-child-subheader"},c),l().createElement("div",{className:"rs-iteminfo-child-value"},d)),e&&l().createElement("div",{className:"rs-iteminfo-child-tradeinmessage"},e)));return l().createElement("div",{className:"rs-item-child-content-tradein as-icondetails-detail rs-iteminfo-icondetails-detail"},l().createElement("div",{className:"rs-iteminfo-child-wrapper","data-autom":"tradein_recycledetails"},u,!w&&l().createElement(l().Fragment,null,N,p),g&&l().createElement("p",{className:"rs-item-child-content-tradein-overfund typography-body-reduced"},f.tradeInOverfundText)),w&&l().createElement(l().Fragment,null,N,p),m&&l().createElement("div",{className:"rs-iteminfo-child-actions"},m))},Ql=({label:e,labelA11y:t,sendOmniClickEvents:a,hasOverlay:r,setOverlayVisible:n,href:s,productMetricId:o,productEvar1:i,ACPlusForiUPEnabled:c})=>{const{assets:d}=z();return r?l().createElement("button",{type:"button",className:qa()("rs-iteminfo-more-details-link as-buttonlink",{more:c,"icon icon-after icon-pluscircle":!c}),onClick:()=>{n(!0),a()},"data-autom":"Learn_more"},l().createElement("span",Ya(e)),l().createElement("span",{className:"visuallyhidden"},t)):l().createElement("a",{href:s,onClick:a,className:"rs-iteminfo-more-details-link icon icon-after icon-pluscircle",target:"_blank",rel:"noopener noreferrer","data-evar1":i,"data-s-object-id":o,"data-autom":"Learn_more"},l().createElement("span",Ya(e)),l().createElement("span",{className:"visuallyhidden"},t,d.newWindowAlly))},eo=({visible:e,setVisible:t,content:a,id:r})=>{const{viewport:n}=z(),s="small"===n;return l().createElement(is,{className:"rs-inline-recommendation-overlay",visible:e,onClose:()=>t(!1),isFullscreen:s,noPadding:!0,fixedWidth:!0,ariaLabel:`${r}-overlayHeading`},l().createElement("div",ur({className:"rs-inline-recommendation-overlay-content"},Ya(a))))},to=({totalPrice:e,savingsMessage:t,priceMessage:a,removeBtn:r,infos:n,title:o,learnMoreOverlay:i,name:c,productMetricId:d,productEvar1:m,id:u,savingsBadge:p})=>{const{viewport:g,assets:y,fragments:h}=z(),E="small"===g,v=Boolean(r||e||t||a),[b,f]=(0,s.useState)(!1),w=Boolean(t),N=E&&!w,S=Boolean(a),C=qa()("rs-iteminfo-child-taglinewrapper",{"rs-has-segmentsavings":w}),T=i?dn(i,{id:u,title:c},"${","}"):"",L=i&&l().createElement(l().Fragment,null,l().createElement(Ql,{hasOverlay:i,label:y.learnMore,labelA11y:dn(h.inlineRecommendationLearnMoreA11y,{title:c}),setOverlayVisible:f,sendOmniClickEvents:()=>{i&&Tl({isLightning:!1,feature:m})},productMetricId:d,productEvar1:m}),l().createElement(eo,{visible:b,setVisible:f,content:T,id:u})),k=l().createElement("div",{className:C},n.map((e=>e?l().createElement("div",{key:`info-${e}`,className:"rs-iteminfo-child-desc"},l().createElement("p",ur({className:"rs-iteminfo-child-tagline rs-iteminfo-applecare-desc"},Ya(e)))):null)),L,p&&l().createElement("div",ur({className:"rs-iteminfo-savings-badge"},Ya(p))));return l().createElement("div",{className:"rs-item-child-content-default as-icondetails-detail rs-iteminfo-icondetails-detail"},l().createElement("div",{className:"rs-iteminfo-child-wrapper"},o,!N&&k),N&&k,v&&l().createElement("div",{className:"rs-iteminfo-child-actions"},e&&l().createElement("p",ur({className:"rs-iteminfo-child-price"},Ya(e))),w&&l().createElement("div",ur({className:"rs-iteminfo-segmentsavings"},Ya(t))),S&&l().createElement("div",ur({className:"rs-iteminfo-price-details"},Ya(a))),r))},ao=()=>{const{fragments:e}=z();return K().get(window,"chatConfig.chat",null)&&l().createElement("div",{className:"rs-chatspecialist-wrapper"},l().createElement("div",{className:"as-chat rs-chat rs-chatspecialist"},l().createElement("div",ur({className:"rs-chat-content"},Ya(e.chatSpecialist)))))},ro=({btnLabel:e,overlayContent:t,productFamily:a,btnDataAutom:r})=>{const{viewport:n}=z(),o="small"===n,[i,c]=(0,s.useState)(!1);return l().createElement(l().Fragment,null,l().createElement("button",ur({type:"button",className:"rs-iteminfo-more-details-link as-buttonlink icon icon-after icon-pluscircle",onClick:()=>{c(!0),(({productFamily:e})=>{wl({eVar:vl,feature:"Bag",action:"Trade In Next Steps"}),Nl({name:"metrics",data:{hier1:"aos:bag",evar13:e?e.toLowerCase():null,evar6:"modal open|tradein message|learn more about tradein",evar1:"AOS: account/savedbag | get ready:apple card applicant | link | see how trade-in works",prop3:"modal open|tradein message|learn more about tradein"}})})({productFamily:a})}},Ya(e),{"data-autom":r})),l().createElement(is,{className:"rs-trade-in-overlay",visible:i,onClose:()=>c(!1),isFullscreen:o,noPadding:!0,fixedWidth:!0,ariaLabel:"pd-overlay-header rs-instant-tradeinoverlay-header"},l().createElement("div",ur({className:"rs-trade-in-overlay-content"},Ya(t))),l().createElement(ao,null)))},no=({showProductLink:e=!1,productUrl:t="",productMetrics:a={},name:r,description:n,titleDataAutom:s})=>l().createElement("h3",{className:"rs-iteminfo-child-title","data-autom":s},e?l().createElement("a",ur({href:t},a,{"data-relatedlink":t}),l().createElement("span",Ya(r))):l().createElement("span",Ya(r)),n&&l().createElement(l().Fragment,null,l().createElement("span",{"aria-hidden":"true"}," - "),l().createElement("span",Ya(n)))),so=l().forwardRef(((e,t)=>{const{className:a,isLoading:r,onClick:n,a11yLabel:s,...o}=e,i=qa()(a,"as-buttonlink"),{assets:c}=z();return r?l().createElement("div",{role:"img",className:"waitindicator waitindicator-inline waitindicator16-gray","aria-label":c.processing}):l().createElement("button",ur({type:"button",className:i,onClick:n,ref:t},o),c.remove,l().createElement("span",ur({className:"visuallyhidden"},Ya(s))))})),lo=so,oo=({hasPriceOfNewProduct:e,removeBtn:t,priceDetails:a,title:r,iupSubHeader:n})=>{const s=qa()("rs-iteminfo-iup-pricedetails",{"rs-iteminfo-iup-newdevicedetails":e});return l().createElement("div",{className:"rs-item-child-content-iup as-icondetails-detail"},l().createElement("div",{className:"rs-iteminfo-child-wrapper rs-iteminfo-iup-ledger"},r,t&&l().createElement("div",{className:"rs-iteminfo-child-actions"},t),n&&l().createElement("div",{className:"rs-iteminfo-iup-subheader"},n),l().createElement("div",{className:"rs-iteminfo-iup-details"},l().createElement("div",{className:"column large-8 small-12"},l().createElement("div",{className:s},a.map((({label:e,value:t,labelDataAutom:a,valueDataAutom:r})=>t?l().createElement("div",{key:`row-${e}`,className:"rs-iteminfo-iup-pricedetails-row row"},l().createElement("span",{className:"column","data-autom":a},e),l().createElement("span",{className:"column rs-iteminfo-iup-value","data-autom":r},t)):null)))))))},io=({modKey:e,setAppleCarePlusType:t,removeBtnRef:a,handleRemoveClick:r})=>{const{assets:n,fragments:s}=z(),o=Ra(e),{modKey:i,isEditable:c,announceMessage:d,isFulfillment:m,isBundle:u}=ul(),[p]=Ba(i,"productFamilyDisplayName"),g=Fa(`${i}.phoneDetails`),{name:y,description:h,descriptionA11Y:E,isRemovable:v,unitListSavings:b,showPrice:f,totalPrice:w,promos:N,showChildItemLink:S,productUrl:C,productEvar1:T,productMetricId:L,productEvar11:k,segmentSavingsMessage:I,savingsBadge:A,showTradeInBalanceGiftMessage:P,priceMessage:D,tradeInSubHeader:O,tradeinProduct:x,priceAfterTradeIn:R,carrierSpecialTradeInHeader:F,carrierSubsidyTradeInDetails:M,carrierSubsidyDesc:B,devicePaymentsHeader:_,devicePaymentsSubHeader:$,devicePaymentsSubHeaderA11y:U,deviceBillCredits:K,imeiNumberHeader:V,imeiNumber:H,serialNumberHeader:j,serialNumber:G,priceOfNewIphoneHeader:W,priceOfNewIphoneValue:q,priceOfNewProductLabel:Y,priceOfNewProduct:X,tradeInCredit:J,instantCreditMessage:Z,tradeInPromoSavings:Q,creditDisclaimer:ee,tradeInEstimatedHeader:te,tradeinEstimatedValue:ae,priceAfterTradeInSubHeader:re,tradeInCreditInfo:ne,tradeInIncentiveHeader:se,tradeInIncentive:le,priceDetails:oe,iupSubHeader:ie,iupUpgrdCredit:ce,iupPriceAfterCreditValue:de,includedInInstallments:me,displayTagLine:ue,insurancePremiumTax:pe,complimentaryACOverlay:ge,id:ye}=o.data,he=v,Ee=ja(e,"delete",{focusDelay:250,deferLoadWithDelete:!0}),{isLoadingSubmit:ve}=Ee.binding.properties,be=h&&E?`${y} - ${E}`:w?`${y} - ${w}`:y,fe={...Ee.props,className:"rs-iteminfo-child-actions-button",a11yLabel:be,isLoading:ve,onClick:e=>{d(n.processing),Ee.props.onClick(e),t(y.split("for")[0].trim()),r()},"data-autom":`bag-item-remove-button-${y}`},we=(({childModData:e,hasTradeInSummary:t,isBundle:a})=>{const{carrierSubsidyTradeInDetails:r,tradeInCredit:n,priceOfNewIphoneValue:s,showTradeInLedgerLink:l,hasCarrierTradeIn:o,priceOfNewProduct:i}=e;return(a||r||n&&(s||i)||o||!t)&&l})({childModData:o.data,hasTradeInSummary:Fa(As)||!1,isBundle:u}),Ne=(({childModData:e,assets:t,isCarrierDevice:a,isBundle:r})=>{const{carrierSubsidyTradeInDetails:n,tradeInOverlay:s,tradeInCredit:l,priceOfNewIphoneValue:o}=e;return r?t.bundleTradeInOverlayLink:r||n||s&&a||l&&o?t.tradeinOverlayLink:t.tradeInInstruction})({childModData:o.data,assets:n,isCarrierDevice:g,isBundle:u}),Se=(({childModData:e,fragments:t,isCarrierDevice:a,isBundle:r})=>{const{id:n,carrierSubsidyTradeInDetails:s,tradeInOverlay:l,tradeInCredit:o,priceOfNewIphoneValue:i}=e;return r?t.bundleTradeInOverlayContent:s||l&&a||o&&i?t[`${l}OverlayContent`]:l&&!a?t.tradeUpInstructionOverlayContent:dn(t.acmiTradeInOverlayContent,{headerId:`${n}-tradein-heading`})})({childModData:o.data,fragments:s,isCarrierDevice:g,isBundle:u}),Ce=b&&dn(n.includedLoyaltySavings,{includedSavings:b}),Te=I||Ce,Le=!m&&f&&w?w:"",ke=Boolean(!N&&S&&c&&C),Ie={"data-evar1":T,"data-s-object-id":L,"data-evar11":k};switch(jl(o.data)){case _l:return l().createElement(zl,{header:F,description:B,subsidyDetails:M,devicePaymentsHeader:_,devicePaymentsSubHeader:$,devicePaymentsSubHeaderA11y:U,deviceBillCredits:K,showTradeInBalanceGiftMessage:P,overlayWithButton:we&&l().createElement(ro,{btnLabel:Ne,overlayContent:Se,productFamily:p})});case $l:return l().createElement(Xl,{hasPriceOfNewProduct:Boolean(X),name:y,instantCreditMessage:Z,showTradeInBalanceGiftMessage:P,removeBtn:he&&l().createElement(lo,fe),tradeInPromoSavings:Q,infos:[{label:O,value:x,labelDataAutom:"yourTradeInDevice",valueDataAutom:"yourTradeInDeviceValue"},{label:V,value:H},{label:j,value:G,labelDataAutom:"tradeInLedgerSerialno",valueDataAutom:"tradeInLedgerSerialValue"}],priceDetails:[{label:W||n.priceOfNewIphoneLabel,value:q,labelDataAutom:"newProductPrice",valueDataAutom:"newProductValue"},{label:Y,value:X},{label:n.tradeInCreditLabel,value:J,labelDataAutom:"tradeInCredit",valueDataAutom:"tradeInCreditValue"},{label:n.priceAfterTradeInLabel,value:R,labelDataAutom:"fullPriceWithTradeIn",valueDataAutom:"fullPriceWithTradeInValue"}],title:l().createElement(no,{name:y,description:h,titleDataAutom:"tradeInLedgerdetailsHeader"}),overlayWithButton:we&&l().createElement(ro,{btnLabel:Ne,overlayContent:Se,productFamily:p,btnDataAutom:"tradeInOverlay"})});case Kl:return l().createElement(Zl,{creditDisclaimer:ee,tradeInEstimatedHeader:te,tradeInEstimatedValue:ae,serialNumberHeader:j,serialNumber:G,imeiNumberHeader:V,imeiNumber:H,tradeInSubHeader:O,tradeInProduct:x,priceAfterTradeInSubHeader:re,priceAfterTradeIn:R,tradeInCreditInfo:ne,tradeInIncentiveHeader:se,tradeInIncentive:le,showTradeInBalanceGiftMessage:P,removeBtn:he&&l().createElement(lo,fe),title:l().createElement(no,{name:y,description:h}),overlayWithButton:we&&l().createElement(ro,{btnLabel:Ne,overlayContent:Se,productFamily:p})});case Ul:return l().createElement(Jl,{totalPrice:Le,savingsMessage:Te,priceDetails:oe,savingsBadge:A,removeBtn:he&&l().createElement(lo,fe),infos:[me?n.includedInInstallments:"",ue,pe],title:l().createElement(no,{showProductLink:ke,productUrl:C,productMetrics:Ie,name:y,description:h})});case Hl:return l().createElement(oo,{hasPriceOfNewProduct:Boolean(X),iupSubHeader:ie,title:l().createElement(no,{name:y,description:h}),priceDetails:[{label:n.priceOfNewIphoneLabel,value:X,labelDataAutom:"newProductPrice",valueDataAutom:"newProductValue"},{label:n.iupCreditLabel,value:`- ${ce}`,labelDataAutom:"iUpCredit",valueDataAutom:"iUpCreditValue"},{label:n.fullPriceAfterCreditLabel,value:de,labelDataAutom:"fullPriceCredit",valueDataAutom:"fullPriceCreditValue"}],removeBtn:he&&l().createElement(lo,fe)});default:return l().createElement(to,{totalPrice:Le,savingsMessage:Te,priceMessage:D,savingsBadge:A,removeBtn:he&&l().createElement(lo,ur({},fe,{ref:a})),infos:[me?n.includedInInstallments:"",ue,pe],title:l().createElement(no,{showProductLink:ke,productUrl:C,productMetrics:Ie,name:y,description:h}),name:y,productEvar1:T,productMetricId:L,learnMoreOverlay:!m&&ge,id:ye})}},co=l().memo(io),mo=({itemRef:e,setItemTabIndex:t,setAppleCarePlusType:a,removeBtnRef:r,acPlusAddRef:n,handleRemoveClick:o})=>{const i=(0,s.useRef)(!1),{assets:c}=z(),{modKey:d,announceMessage:m}=ul(),u=(e=>{const t=Aa();return t.getModuleChildren(e).filter((e=>{const{isChildItem:a,isBundlePromoItem:r}=t.getModuleData(e);return a&&!r}))})(d),p=ir(d,u),[g]=Ba(Is,"total"),[y]=Ba(Rs,"emiAmount"),h=y||g;return(0,s.useEffect)((()=>{if(t(-1),u.length&&i.current){e&&e.current&&e.current.focus();const t=`${c.bagUpdateSuccessAlly},${dn(c.itemsHeader,{price:h})}`;r&&r.current&&r.current.focus(),n&&n.current&&n.current.blur(),m(t)}i.current=!0}),[u.length,r,n]),l().createElement(cl,{className:"rs-bag-item-children"},p.map((({modKey:e,props:t})=>l().createElement(Wr,ur({key:`bag-item-child-${e}`,className:"rs-item-child-wrap"},t,{appear:i.current,enter:!0}),l().createElement(Wl,{modKey:e},l().createElement(co,{modKey:e,setAppleCarePlusType:a,removeBtnRef:r,handleRemoveClick:o}))))))},uo=l().memo(mo),po=({className:e,error:t,errorA11y:a,errorAttrs:r,...n})=>l().createElement("div",ur({className:qa()([e,"form-message-wrapper"])},n),a&&l().createElement("span",{className:"visuallyhidden"},a),"string"==typeof t?l().createElement("span",ur({className:"form-message",dangerouslySetInnerHTML:{__html:t}},r)):l().createElement("div",ur({className:"form-message"},r),t)),go=({id:e,name:t,value:a,label:r,allowNone:n,error:s,errorA11y:o,errorAttrs:i={},classes:c={},children:d,"aria-describedby":m="",...u},p)=>{const g=l().useId(),y=e||g,h=qa()(["form-dropdown-select",c.select,{"form-dropdown-selectnone":!a&&!n}]);return l().createElement("div",{className:qa()("form-dropdown",c.root,{"is-error":s})},l().createElement("select",ur({id:y,name:t,value:a,className:h,"aria-labelledby":`${y}_label`,"aria-describedby":`${y}_error ${m}`,ref:p},u),d),l().createElement("span",{className:qa()("form-dropdown-chevron",c.chevron),"aria-hidden":"true"}),l().createElement("span",{className:qa()("form-dropdown-label",c.label),id:`${y}_label`,"aria-hidden":"true"},r),s&&l().createElement(po,{id:`${y}_error`,className:c.error,error:s,errorA11y:o,errorAttrs:i}))},yo=l().forwardRef(go),ho=({children:e,...t},a)=>l().createElement("option",ur({ref:a},t),e),Eo=l().forwardRef(ho),vo="middle",bo="left",fo="right",wo=(e,t)=>{const a=vo,r=K().get(e,"current"),n=K().get(t,"current");if(!r||!n)return a;const s=r.getBoundingClientRect(),l=n.getBoundingClientRect(),o=s.x+s.width/2,i=l.width/2,c=document.body.offsetWidth-i;return o<i?bo:o>c?fo:a},No=({className:e,...t})=>l().createElement("div",ur({className:qa()("form-tooltip-title",e)},t)),So=({className:e,...t})=>l().createElement("div",ur({className:qa()("form-tooltip-content",e)},t)),Co=({id:e,before:t,after:a,left:r,right:n,middle:s,autoAlign:o,labelA11y:i,className:c,onFocus:d=(()=>{}),onBlur:m=(()=>{}),onMouseEnter:u=(()=>{}),onMouseLeave:p=(()=>{}),onKeyDown:g=(()=>{}),children:y,...h})=>{const[E,v]=l().useState(!1),[b,f]=l().useState(!1),w=l().useId(),N=e||w,[S,C]=l().useState(""),T=l().useRef(null),L=l().useRef(null);return l().createElement("div",{className:qa()("form-tooltip",c,{"form-tooltip-before":t,"form-tooltip-after":a,"form-tooltip-show":E||b})},l().createElement("button",ur({type:"button",className:"form-tooltip-button","aria-labelledby":N,onFocus:e=>{o&&C(wo(T,L)),v(!0),d(e)},onBlur:e=>{v(!1),m(e)},onMouseEnter:e=>{o&&C(wo(T,L)),f(!0),u(e)},onMouseLeave:e=>{f(!1),p(e)},onKeyDown:e=>{"Escape"===e.key&&v(!1),g(e)},ref:T},h),l().createElement("span",{className:qa()("form-icons","form-icons-info19")}),l().createElement("span",{className:"visuallyhidden"},i)),l().createElement("div",{id:N,className:qa()("form-tooltip-info",{"form-tooltip-pointer-left":r||S===bo,"form-tooltip-pointer-middle":s||S===vo,"form-tooltip-pointer-right":n||S===fo}),role:"tooltip","aria-hidden":"true",ref:L},y))},To=({isFirst:e,isAdding:t,imageData:a,title:r,titleA11y:n,appleCareTitle:s,descriptions:o,addBtnProps:i,learnMoreBtn:c,savingsMessage:d,isLast:m,options:u,appleCarePartNumber:p,appleCareDropdownProps:g,id:y,acPlusAddRef:h,savingsBadge:E})=>{const{assets:v}=z(),b=qa()("rs-inline-recommendation","rs-iteminfo-child",{"rs-inline-recommendation-first":e});return l().createElement("div",{className:b},l().createElement("div",{className:"row rs-iteminfo-child-content"},l().createElement("div",{className:"column small-12 large-12 rs-iteminfo-child-details"},l().createElement("div",{className:"as-icondetails"},l().createElement("div",{className:"rs-iteminfo-child-image","aria-hidden":"true"},l().createElement(Fl,{data:a}))),l().createElement("div",{className:"as-icondetails-detail"},l().createElement("h3",ur({id:y,"aria-label":n,className:"rs-iteminfo-child-title small-8 "+(u?"large-5 small-12 rs-iteminfo-applecare":"large-9")},Ya(r))),u&&l().createElement(l().Fragment,null,l().createElement(yo,ur({},g,{label:v.selectCoverage,classes:{root:"rs-applecare-dropdown large-4 small-8 "+(p?"":"rs-applecare-selectnone")},value:p,allowNone:p}),u&&u.map((e=>l().createElement(Eo,{"aria-label":e.value?"":s,"aria-hidden":!e.value,key:e.value,value:e.value,disabled:!e.value},e.name)))),l().createElement(Co,{labelA11y:l().createElement("span",Ya(v.appleCareTooltipAlly)),autoAlign:!0,after:!0},l().createElement("span",Ya(v.appleCareTooltip)))),l().createElement("div",{className:"rs-iteminfo-child-desc "+(u?"rs-applecare-options-desc":"")},d&&l().createElement("div",ur({className:"rs-iteminfo-segmentsavings"},Ya(d))),o.map((e=>l().createElement("p",ur({key:`description-${e}`,className:"rs-iteminfo-child-tagline"},Ya(e))))),m&&c,E&&l().createElement("div",ur({className:"rs-iteminfo-savings-badge"},Ya(E)))),l().createElement("div",{className:"column rs-iteminfo-child-actions "+(u?"large-1 large-last":"large-3 small-4")},t?l().createElement("div",{role:"img",className:"waitindicator waitindicator-inline waitindicator16-gray","aria-label":v.processing}):l().createElement("button",ur({},i,{type:"button",className:"rs-iteminfo-child-actions-button as-buttonlink","aria-label":n,ref:h}),v.add))))))},Lo=({modKey:e,isLast:t,acPlusAddRef:a,removeClick:r})=>{const{modKey:n,announceMessage:o}=ul(),[i]=Ba(`${n}.inlineRecommendations`,"isLightning"),c=Ra(e),d=lr(`${e}`,"appleCarePartNumber").props,{isLoadingSubmit:m}=c.properties,{width:u,height:p,src:g,dataScaleParams1:y,id:h,title:E,price:v,acmiPrice:b,description:f,descriptionA11Y:w,details:N,insurancePremiumTax:S,unitListSavings:C,learnMoreOverlay:T,learnMoreLink:L,AppleCareEvar1:k,productEvar1:I,options:A,monthlyPrice:P,priceA11y:D,monthlyPriceA11y:O,appleCarePartNumber:x,productMetricId:R,ACPlusForiUPEnabled:F,segmentSavingsMessage:M,displayNameVO:B,savingsBadge:_}=c.data,$={width:u,height:p,srcSet:{src:g,scaleParams1:y}},{viewReady:U,acShowInstallment:K}=zs(),V=U&&K,H=V&&b?b:v,j=[];N&&j.push(N),S&&j.push(S);const{assets:G,fragments:W}=z(),q=W[`inlineRecommendationTitle${f?"Desc":""}`],Y=dn(q,{title:E,price:H,description:f}),X=W.combinationTitle,J=dn(X,{title:E,price:H,monthlyPrice:P}),Z=dn(G.combinationTitleAlly,{title:E,priceA11y:D,monthlyPriceA11y:O}),Q=W[`inlineRecommendationTitle${f&&w?"DescA11y":"A11y"}`],ee=dn(Q,{title:E,price:H,descriptionA11Y:w,displayNameVO:B}),te=dn(G.loyaltySavingsLabel,{unitListSavings:C}),ae=C?te:"",re=ja(e,"add",{focusDelay:250,deferLoadWithDelete:!0}),ne=A&&{disabled:!x},se={...re.props,"data-autom":"bag-inlineattach-add",...ne,onClick:e=>{o(G.processing),re.props.onClick(e)}},[le,oe]=(0,s.useState)(!1),ie=i&&t&&Boolean(T),ce=Boolean(T||L)&&!(i&&!t),de=!i&&Boolean(T),me=ie||de;let ue="";ie?ue=G.compareCoverage:ce&&(ue=G.learnMore),F&&(ue=G.learnMoreIup);const pe=ce&&l().createElement(Ql,{hasOverlay:me,label:ue,labelA11y:dn(W.inlineRecommendationLearnMoreA11y,{title:E}),href:L,setOverlayVisible:oe,sendOmniClickEvents:()=>{me?Tl({isLightning:i,feature:k}):(({feature:e})=>{wl({action:"LearnMoreSelected",feature:e,eVar:El})})({feature:k}),V&&Nl({name:"metrics",data:{hier1:"aos:bag",channel:"aos:bag",prop3:"modal open|inline recommendation|learn more about apple care"}})},productMetricId:R,productEvar1:I,ACPlusForiUPEnabled:F}),ge=me?dn(T,{id:h,title:E,price:H},"${","}"):"";return(0,s.useEffect)((()=>{r&&a&&a.current&&a.current.focus()}),[r,a]),l().createElement(l().Fragment,null,l().createElement(To,{isAdding:m,imageData:$,title:P&&J||Y,titleA11y:P&&Z||ee,descriptions:j,addBtnProps:se,learnMoreBtn:pe,appleCareTitle:E,isLast:t,options:A,appleCarePartNumber:x,appleCareDropdownProps:d,savingsMessage:M||ae,id:E.split("for")[0].trim(),acPlusAddRef:a,savingsBadge:_}),me&&l().createElement(eo,{visible:le,setVisible:oe,content:ge,id:h}))},ko=l().memo(Lo),Io=({appleCarePlusType:e,acPlusAddRef:t,removeClick:a})=>{const r=(0,s.useRef)(!1),{assets:n}=z(),{modKey:o,announceMessage:i}=ul(),c=Ua(),d=`${o}.inlineRecommendations`,{childModKeys:m,modCreatedAt:u}=Ra(d),{modActive:p,setModWillPersist:g}=or(d),y=Boolean(m.length)&&p,[h]=Ba(Is,"total"),[E]=Ba(Rs,"emiAmount"),v=E||h;(0,s.useEffect)((()=>{r.current=!0}),[r]),(0,s.useEffect)((()=>{if(m.length){const t=`${n.bagUpdateSuccessAlly},${dn(n.itemsHeader,{price:v})}`;if(e){const t=document.getElementById(`${e}`);t&&t.focus()}i(t)}}),[m.length,e]),(0,s.useEffect)(g,[u]);return l().createElement(Wr,{className:"rs-item-inline-recommendations",in:y,onExited:()=>{c({type:Le})},appear:r.current,enter:!0,unmountOnExit:!0,mountOnEnter:!0},m.map(((e,r)=>l().createElement(ko,{key:d,modKey:e,isLast:r===m.length-1,acPlusAddRef:t,removeClick:a}))))},Ao=l().memo(Io),Po=({messages:e,lastUpdated:t})=>l().createElement("div",{className:"rs-iteminfo-messages large-9  small-12 small-offset-0"},l().createElement(Qs,{messages:e,lastUpdated:t})),Do=()=>{const{modKey:e}=ul(),[t,a]=_a(e);return Boolean(t.length)&&l().createElement(Po,{messages:t,lastUpdate:a})},Oo=l().memo(Do),xo=({showAddBtn:e,addBtnProps:t,showDeleteBtn:a,deleteBtnProps:r})=>{const{assets:n}=z();return l().createElement("div",{className:"rs-iteminfo-recommendedsystemsactions"},e&&l().createElement("button",ur({type:"button",className:"form-button"},t),n.addToBag),a&&l().createElement("button",ur({type:"button",className:"as-buttonlink rs-iteminfo-recommended-systems-delete"},r),n.delete))},Ro=()=>{const{modKey:e}=ul(),[t]=Ma(e),{isValidSystem:a}=t,r=ja(e,"addToCart"),n=r.binding.bindExists&&Boolean(a),s=ja(e,"delete"),o=s.binding.bindExists;return l().createElement(xo,{showAddBtn:n,addBtnProps:r.props,showDeleteBtn:o,deleteBtnProps:s.props})},Fo=l().memo(Ro),Mo=({name:e,productUrl:t,productEvar1:a,productMetricId:r,linkRef:n,productTitleHeadingLevel:s=2})=>{const o=`h${s}`;return Boolean(n&&t)?l().createElement(o,{className:"rs-iteminfo-title"},l().createElement("a",{href:t,"data-evar1":a,"data-s-object-id":r,"data-autom":"bag-item-name",ref:n},e)):l().createElement(o,{className:"rs-iteminfo-title"},e)},Bo=({linkRef:e,productTitleHeadingLevel:t=2,shouldFormatName:a=!1})=>{const{modKey:r}=ul(),[n]=Ma(r),{name:s="",productUrl:o,productEvar1:i,productMetricId:c}=n,d=s&&s.replace(/\u00a0/g," ");return l().createElement(Mo,{name:a?d:s,productUrl:o,productEvar1:i,productMetricId:c,linkRef:e,productTitleHeadingLevel:t})},_o=l().memo(Bo),$o=({data:e,onClick:t})=>{const a=qa()({"as-util-relatedlink":Boolean(t)});return l().createElement(Fl,{data:e,className:a,onClick:t,"aria-hidden":"true","data-autom":"bag-item-image"})},Uo=({linkRef:e})=>{const{modKey:t}=ul(),[a]=Ma(t),r={width:a.width,height:a.height,srcSet:{src:a.src,scaleParams1:a.dataScaleParams1}},n=Boolean(e&&e.current)?()=>e.current.click():null;return l().createElement($o,{data:r,onClick:n})},Ko=l().memo(Uo),Vo="mac",Ho="phone",jo=e=>{const t=Ra(`${e}.phoneDetails`),a=Ra(`${e}.macDetails`);return t.modExists?[t,Ho]:a.modExists?[a,Vo]:[{...tl},""]},Go=({type:e,label:t,a11y:a,visible:r,setVisible:n,onVisibilityChange:s})=>{const o=qa()("rs-iteminfo-link","icon","icon-after",{"icon-chevronup":r,"icon-chevrondown":!r});return l().createElement("button",{type:"button",className:o,onClick:()=>{n((e=>(s(!e),!e)))},"data-autom":`item-${e}details-link`,"aria-label":`${t} ${a}`,"aria-expanded":r},t)},Wo=({modKey:e,visible:t,setVisible:a})=>{const{modKey:r}=ul(),[n]=Ma(e||r),[s,o]=jo(e||r),i=s.modExists&&o,{assets:c,fragments:d,viewport:m}=z();if(!n.standaloneDeviceActivation&&!i&&!o)return null;const u=(({type:e,itemData:t,assets:a,viewport:r,visible:n})=>{const{isRecommendedSystems:s,standaloneDeviceActivation:l}=t,o="small"===r;if(l)return n?a.hideCarrierDetailsLabel:a.showCarrierDetailsLabel;switch(e){case Vo:return n?a.hideDetailsLabel:a.showDetailsLabel;case Ho:return n?o||s?a.hideDetailsLabel:a.hidePhoneDetailsLabel:s?a.showDetailsLabel:a.showPhoneDetailsLabel;default:return""}})({type:o,itemData:n,assets:c,viewport:m,visible:t}),p=dn(o===Ho?d.phoneDetailsExpandedA11y:d.macDetailsExpandedA11y,s.data),g=n.standaloneDeviceActivation&&dn(d.phoneDetailsExpandedA11y,{model:n.name});return l().createElement(Go,{type:o,label:u,a11y:g||p,visible:t,setVisible:a,onVisibilityChange:e=>{(e=>{Nl({name:"metrics",data:{evar21:`D=pageName+"|Cart|${e} carrier details and charges"`}})})(e?"Show":"Hide")}})},qo=l().memo(Wo),Yo=({isExpandable:e,visible:t,acmiDetails:a,children:r})=>l().createElement("div",{className:"rs-item-product-info large-12 rs-iteminfo-detailstext"},e?l().createElement(Yr,{in:t,timeout:300},r):r,a),zo=({phoneDetails:e,editIPhoneUrl:t,tradeInDetails:a,financeOfferPlanDetails:r})=>{const{assets:n,fragments:s}=z(),{ratePlanDetails:o}=e||{},i=Boolean(o&&o.length),c=t=>(({action:e,feature:t})=>{wl({action:e,feature:t,eVar:El})})(t,e.metricsEvar1);return l().createElement("div",{className:"rs-item-product-info-phone row"},e&&l().createElement("div",{className:"column large-12 small-12 rs-phonedetails-container"},l().createElement("div",{className:"rs-phonedetails"},l().createElement("h3",{className:"rs-phonedetails-label"},n.phoneDetails),l().createElement("ul",{role:"list"},l().createElement("li",null,e.model),l().createElement("li",null,e.capacity),l().createElement("li",null,e.finish),t&&l().createElement("li",null,l().createElement("a",{href:t,className:"as-buttonlink",id:"rs-edit-iphone-link",onClick:()=>c("EditiPhoneModel")},l().createElement("span",{"aria-hidden":"true"},n.editModelLabel),l().createElement("span",{className:"visuallyhidden"},n.editIphoneModel),l().createElement("span",{className:"more","aria-hidden":"true"})))),e.phoneNumber&&l().createElement(l().Fragment,null,l().createElement("h3",{className:"rs-phonedetails-label"},n.phoneNumber),l().createElement("p",{className:"rs-phonedetails-value as-direction-ltr"},e.phoneNumber)))),l().createElement("div",{className:"rs-phonedetails-rateplan-details"},i&&o.map(((t,a)=>{const r=a===o.length&&Boolean(e.editIPhoneRatePlanUrl);return l().createElement("div",{key:`row-${t.label}`,className:"rs-phonedetails-row"},l().createElement("h3",{className:"rs-phonedetails-label"},t.label),l().createElement("span",ur({className:"rs-phonedetails-value"},Ya(t.value))),r&&l().createElement("a",{href:e.editIPhoneRatePlanUrl,className:"as-buttonlink",id:"rs-edit-carrier-link",onClick:()=>c("EditCarrierPlan")},l().createElement("span",{"aria-hidden":"true"},n.editPlan),l().createElement("span",{className:"visuallyhidden"},dn(s.editPlanA11y,e)),l().createElement("span",{className:"more","aria-hidden":"true"})))})),e&&e.disclaimer&&l().createElement("div",ur({className:"rs-phonedetails-disclaimer small-12 large-12"},Ya(e.disclaimer))),r&&l().createElement(l().Fragment,null,l().createElement("h3",{className:"rs-phonedetails-subheader"},r.headerLabel),r.row.map((e=>l().createElement("div",{key:`financeoffer-plandetails-${e.value}`,className:"rs-phonedetails-financeoffer-details"},l().createElement("h4",{className:"rs-phonedetails-label"},e.label),l().createElement("span",{className:"rs-phonedetails-value"},e.value))))),a&&l().createElement(l().Fragment,null,l().createElement("h3",{className:"rs-phonedetails-subheader"},a.headerLabel),l().createElement("div",{className:"rs-phonedetails-tradein-details"},a.row.map((e=>[l().createElement("div",{key:`tradein-details-${e.value}`},l().createElement("h4",{className:"rs-phonedetails-label"},e.label),l().createElement("span",{className:"rs-phonedetails-value"},e.value))])),a.upgradeProgramBalance&&l().createElement("span",{className:"rs-phonedetails-label"},a.upgradeProgramBalance)))))},Xo=({macHardwareDetails:e,macSoftwareDetails:t})=>{const{assets:a}=z();return l().createElement("div",{className:"rs-item-info-mac row"},l().createElement("div",{className:"rs-macdetails"},e&&l().createElement("div",null,l().createElement("h3",{className:"rs-macdetails-label list-title"},a.macHardwareLabel),l().createElement("ul",{className:"list large-6 small-12"},e.map((e=>l().createElement("li",{key:`hardware-detail-${e}`},e))))),t&&l().createElement("div",null,l().createElement("h3",{className:"rs-macdetails-label list-title"},a.macSoftwareLabel),l().createElement("ul",{className:"list large-6 small-12"},t.map((e=>l().createElement("li",{key:`software-detail-${e}`},e)))))))},Jo=({carrierDetails:e,financeOfferPlanDetails:t,tradeInDetails:a})=>{const{carrierStaticTerms:r,carrierDisclaimer:n,eSimLegalLabel:s,eSimLegalLabelText:o}=e,i=Boolean(r&&r.length);return l().createElement("div",{className:"rs-item-product-info-phone row"},l().createElement("div",{className:"rs-phonedetails-rateplan-details"},l().createElement("ul",{role:"list"},l().createElement("li",{className:"rs-phonedetails-row"},l().createElement("span",{className:"rs-phonedetails-label"},s),l().createElement("span",ur({className:"rs-phonedetails-value"},Ya(o)))),i&&r.map((e=>l().createElement("li",{key:`row-${e.label}`,className:"rs-phonedetails-row"},l().createElement("span",{className:"rs-phonedetails-label"},e.label),l().createElement("span",ur({className:"rs-phonedetails-value"},Ya(e.value))))))),n&&l().createElement("div",ur({className:"rs-phonedetails-disclaimer small-12 large-12"},Ya(n))),t&&l().createElement(l().Fragment,null,t.headerLabel&&l().createElement("h3",{className:"rs-phonedetails-subheader"},t.headerLabel),l().createElement("ul",{role:"list"},t.row.map((e=>l().createElement("li",{key:`financeoffer-plandetails-${e.value}`,className:"rs-phonedetails-financeoffer-details"},l().createElement("span",{className:"rs-phonedetails-label"},e.label),l().createElement("span",{className:"rs-phonedetails-value"},e.value)))))),a&&l().createElement(l().Fragment,null,a.headerLabel&&l().createElement("h3",{className:"rs-phonedetails-subheader"},a.headerLabel),l().createElement("div",{className:"rs-phonedetails-tradein-details"},l().createElement("ul",{role:"list"},a.row.map((e=>[l().createElement("li",{key:`tradein-details-${e.value}`},l().createElement("span",{className:"rs-phonedetails-label"},e.label),l().createElement("span",{className:"rs-phonedetails-value"},e.value))]))),a.upgradeProgramBalance&&l().createElement("span",{className:"rs-phonedetails-label"},a.upgradeProgramBalance)))))},Zo=({buyFlowInstallmentsDetails:e})=>l().createElement("div",{className:"row rs-buyflow-installmentsdetails"},l().createElement("h3",{className:"rs-phonedetails-subheader"},e.headerLabel,l().createElement("span",{className:"visuallyhidden"},e.name)),e.row.map((e=>l().createElement("div",{key:`buyflow-installmentsdetails-${e.value}`,className:"rs-phonedetails-webinstallment-details"},l().createElement("span",{className:"rs-phonedetails-label"},e.label),l().createElement("span",{className:"rs-phonedetails-value"},e.value))))),Qo=[Vo,Ho],ei=({modKey:e,visible:t})=>{const{modKey:a}=ul(),[r]=Ma(e||a),[n,s]=jo(e||a),o=n.modExists&&Qo.includes(s),i=o&&n.data,c=o||r.buyFlowInstallmentsDetails,d=(r.standaloneDeviceActivation||o)&&void 0!==t;if(!r.standaloneDeviceActivation&&!c)return null;let m=null;m=s===Vo?l().createElement(Xo,{macHardwareDetails:i.macHardwareDetails,macSoftwareDetails:i.macSoftwareDetails}):r.standaloneDeviceActivation?l().createElement(Jo,{carrierDetails:r.standAloneDeviceActivationDetails,financeOfferPlanDetails:r.financeOfferPlanDetails,tradeInDetails:r.tradeinDetails}):l().createElement(zo,{phoneDetails:i,editIPhoneUrl:r.editIPhoneUrl,tradeInDetails:r.tradeinDetails,financeOfferPlanDetails:r.financeOfferPlanDetails});const u=r.buyFlowInstallmentsDetails&&r.buyFlowInstallmentsDetails.headerLabel&&l().createElement(Zo,{buyFlowInstallmentsDetails:r.buyFlowInstallmentsDetails});return l().createElement(Yo,{isExpandable:d,visible:t,acmiDetails:u},m)},ti=l().memo(ei),ai=({id:e,name:t,value:a,label:r,labelA11y:n,type:s="text",error:o,errorA11y:i,errorAttrs:c={},search:d,valid:m,validA11y:u,countryCode:p,countryCodeA11y:g,characterCounter:y,characterCounterA11y:h,onReset:E,resetA11y:v,resetAttrs:b,classes:f={},children:w,"aria-describedby":N="",...S},C)=>{const T=qa()(["form-textbox",f.root,{"is-error":o,"form-textbox-with-button":w,"form-textbox-with-righticon":E||m,"form-textbox-with-lefticon":d,"form-textbox-with-countrycode":p&&p.length>4,"form-textbox-with-countrycode-twodigits":p&&3===p.length,"form-textbox-with-countrycode-threedigits":p&&4===p.length,"form-textbox-with-countrycode-onedigit":p&&p.length<=2,"form-textbox-with-counter":y}]),L=qa()(["form-textbox-input",f.input,{"form-textbox-entered":Boolean(a)}]),k=l().useId(),I=e||k;return l().createElement("div",{className:T}," ",p&&l().createElement("div",{className:qa()("form-textbox-countrycode",f.countryCode)},g&&l().createElement("div",{className:"visuallyhidden"},g),l().createElement("div",null,p)),l().createElement("input",ur({id:I,name:t,value:a,type:s,className:L,"aria-labelledby":`${I}_label`,"aria-describedby":`${I}_error ${N}`,"aria-invalid":Boolean(o),ref:C},S)),l().createElement("span",{id:`${I}_label`,className:qa()("form-textbox-label",f.label),"aria-hidden":"true","aria-label":n},r),w,o&&l().createElement(po,{id:`${I}_error`,className:f.error,error:o,errorA11y:i,errorAttrs:c}),y&&l().createElement("div",{className:qa()("form-textbox-counter-wrapper",f.characterCounter,{"is-error":o})},h&&l().createElement("span",{className:"visuallyhidden"},h),l().createElement("span",{className:"form-textbox-counter"},y)),d&&l().createElement("div",{className:"form-textbox-lefticon"},l().createElement("span",{className:qa()(["form-icons","form-icons-search15"])})),m&&l().createElement("div",{className:"form-textbox-righticon"},l().createElement("span",{className:qa()(["icon","icon-check"]),role:"img","aria-label":u})),E&&l().createElement("div",{className:"form-textbox-righticon"},l().createElement("button",ur({type:"button",onClick:E,className:qa()(["form-icons","form-icons-reset"])},b),v&&l().createElement("span",{className:"visuallyhidden"},v))))},ri=l().forwardRef(ai),ni=({classes:e={},children:t,...a},r)=>l().createElement("button",ur({type:"button",className:qa()("form-textbox-button",e.root),ref:r},a),t),si=l().forwardRef(ni),li=({children:e})=>l().createElement("div",{className:"rs-quantity"},e),oi=({quantity:e,productName:t,label:a})=>{const{assets:r}=z();return l().createElement("div",{className:"rs-quantity-text"},a&&l().createElement("span",{"aria-hidden":"true"},a),l().createElement("span",{className:"visuallyhidden"},dn(r.quantityA11y,{productName:t})),l().createElement("span",null,e))},ii=({id:e,productName:t,maxQty:a,maxDropdownQty:r,quantity:n,onChange:o})=>{const i=[...Array(a<=r?a:r+1)],{assets:c}=z(),d=dn(c.quantityA11y,{productName:t}),[m,u]=(0,s.useState)({width:"0rem"}),p=(0,s.useRef)();return(0,s.useEffect)((()=>{if(p.current){const e=p.current.clientWidth/17+"rem";u({width:e})}}),[n,p]),l().createElement("div",{className:"rs-quantity-selector"},l().createElement("div",{className:"rs-quantity-wrapper form-dropdown"},l().createElement("select",{className:"rs-quantity-dropdown form-dropdown-select",id:e,onChange:o,style:m,value:n,"data-autom":"item-quantity-dropdown"},i.map(((e,t)=>{const a=t+1,n=a>r?`${a}+`:a;return l().createElement("option",{key:`option-${a}`,value:a,"aria-label":`${n} ,  ${d}`},n)}))),l().createElement("label",{htmlFor:e,"aria-hidden":"true",className:"visuallyhidden"},n),l().createElement("span",{className:"rs-quantity-icon form-dropdown-chevron","aria-hidden":"true"}),l().createElement("select",{ref:p,"aria-hidden":"true",className:"rs-quantity-hidden-select",onChange:K().noop},l().createElement("option",null,n))))},ci=({label:e})=>{const{viewport:t,assets:a}=z(),r="small"===t,{modKey:n,announceMessage:o}=ul(),[i]=Ma(n),{originalQty:d,name:m,totalPrice:u}=i,p=`${n}.itemQuantity`,[g]=Ma(p),{maxQuantity:y,quantity:h}=g,[E,v]=Ba(p,"wasUpdateQuantityInvoked"),b=Ka(p,"quantity"),f=V(b.runSetEvents,500,{leading:!1}),w=b.bindExists,N=b.properties.enabled,[S]=Ba(Is,"total"),[C]=Ba(Rs,"emiAmount"),T=C||S,[L,k]=(0,s.useState)(b.value),[I,A]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(I){const e=`${dn(a.quantityUpdateSuccessAlly,g)}, ${dn(a.itemsHeader,{price:T})}`;o(e)}}),[u]);const P=r||y<=10?y:9,[D,O]=(0,s.useState)(b.value<=P);(0,s.useEffect)((()=>{D&&O(b.value<=P),k(b.value)}),[b.value,P]);const x=(0,s.useRef)(null);(0,s.useEffect)((()=>{!D&&x.current&&L!==b.value&&x.current.focus()}),[D]),(0,s.useEffect)((()=>{x.current&&E&&(setTimeout((()=>{x.current.focus()}),0),v(!1))}),[E]);if(Boolean(d)||!w||!N){const t=d||h;return l().createElement(li,null,l().createElement(oi,{quantity:t,productName:m,label:e}))}const R=e=>{const t=(e.target.value||String(b.value)).replace(/^0+|\D/g,""),r=t?parseInt(t,10):0,n=r>0?String(r):"";if(k(n),D&&r>P)return r;return b.value!==r&&!(""===n)&&(b.setValue(r),o(a.processing),f()),A(!0),r};if(D){const e=e=>{((e=b.value)=>{O(e<=P)})(R(e))};return l().createElement(li,null,l().createElement(ii,{id:b.properties.id,productName:m,maxQty:y,maxDropdownQty:P,quantity:b.value,onChange:e}))}return l().createElement(li,null,l().createElement(ri,{id:b.properties.id,ref:x,classes:{input:"rs-quantity-textbox form-textbox-entered"},label:a.quantityLabel,type:"tel",value:L,maxLength:b.properties.maxLen,onChange:e=>{const t=e.target.value.replace(/^0+|\D/g,"");k(t)},onFocus:e=>{setTimeout((()=>{e.target.select()}),1)},onBlur:e=>{E||R(e)},onKeyDown:e=>{e.keyCode===c.Return&&R(e)}}))},di=l().memo(ci),mi=({totalPrice:e,totalPriceA11y:t,unitPrice:a,message:r,isRecommendedSystems:n,recSysSubTotal:s,recSysSavings:o,segmentSavingsMessage:i})=>{const{assets:c}=z();return l().createElement(l().Fragment,null,t?l().createElement(l().Fragment,null,l().createElement("span",ur({className:"visuallyhidden"},Ya(t))),l().createElement("span",ur({"aria-hidden":"true"},Ya(e)))):l().createElement(l().Fragment,null,n&&l().createElement("div",{className:"rs-iteminfo-recommendedsystemstotal"},c.systemstotal),l().createElement("p",Ya(e||a))),n&&l().createElement(l().Fragment,null,s&&l().createElement("div",{className:"rs-recommended-systems-price-row"},l().createElement("span",{className:"rs-iteminfo-label"},c.subtotal),l().createElement("span",ur({className:"rs-iteminfo-value"},Ya(s)))),o&&l().createElement("div",{className:"rs-recommended-systems-price-row"},l().createElement("span",{className:"rs-iteminfo-label"},c.savingsLabel),l().createElement("span",ur({className:"rs-iteminfo-value"},Ya(o))))),i&&l().createElement("div",{className:"rs-iteminfo-segmentsavings"},i),r&&l().createElement("div",ur({className:"rs-iteminfo-pricemessage"},Ya(r))))},ui=()=>{const{assets:e,viewport:t}=z(),a="small"===t?"16":"18",r=qa()("waitindicator","waitindicator-inline",`waitindicator${a}-gray`);return l().createElement("div",{role:"img",className:r,"aria-label":e.processing})},pi=({itemData:e})=>{const{priceMessage:t,hasCarrierFinancedPromo:a,billedByCarrier:r,promoMessage:n}=e;return t||(a&&r?r:n||"")},gi=({showPriceMessage:e=!0})=>{const{modKey:t}=ul(),[a]=Ma(t),r=Ra(`${t}.itemQuantity`),{isLoadingSubmit:n}=r.properties,{totalPrice:s,totalPriceAlly:o,unitPrice:i,purchaseOptionDescription:c,segmentSavingsMessage:d,isRecommendedSystems:m,subTotal:u,savings:p,isValidSystem:g}=a;return m&&!g?null:n?l().createElement(ui,null):l().createElement(mi,{totalPrice:s,totalPriceA11y:o,unitPrice:i,purchaseOptionDescription:c,message:e&&pi({itemData:a}),isRecommendedSystems:m,recSysSubTotal:u,recSysSavings:p,segmentSavingsMessage:d})},yi=l().memo(gi),hi=({fees:e})=>l().createElement("div",{className:"rs-iteminfo-inlinefee-container"},e.map((({label:e,value:t})=>l().createElement("p",{key:`inline-fee-${e}-${t}`,className:"rs-iteminfo-inlinefee-wrapper"},l().createElement("span",null,e," "),l().createElement("span",{className:"rs-iteminfo-inlinefee-price"},t))))),Ei=()=>{const{modKey:e}=ul(),[t]=Ma(e),{inlineCopyrightFee:a,inlineRecycleFee:r}=t,{assets:n}=z(),s=[];a&&s.push({label:n.inlineCopyrightFee.trim(),value:a}),r&&s.push({label:n.inlineRecycleFee.trim(),value:r});return Boolean(s.length)&&l().createElement(hi,{fees:s})},vi=l().memo(Ei),bi=({content:e})=>l().createElement("div",{className:"as-chat rs-chat"},l().createElement("div",ur({className:"as-l-container rs-chat-content"},Ya(e)))),fi=(e={})=>{const{chatConfig:t}=window,{fragments:a}=z();let r;return e.acmiChat&&t&&t.chat?r=e.acmiChat:a.chatNow&&t&&t.chat?r=a.chatNow:a.chatNowText&&!t&&(r=a.chatNowText),r?l().createElement(bi,{content:r}):null},wi=l().memo(fi),Ni=({content:e,removeButtonLabel:t,cancelButtonLabel:a,overlayControls:r,removeButtonProps:n})=>{const{isVisible:s,close:o}=r;return l().createElement(is,{className:"rs-item-remove-overlay",footerContent:l().createElement(wi,null),ariaLabel:"item-remove-overlay-header",visible:s,onClose:o,fixedWidth:!0},l().createElement("div",ur({className:"rs-item-remove-overlay-content"},Ya(e))),l().createElement("div",{className:"rs-item-remove-overlay-actions"},l().createElement(ds,ur({type:"button",className:"rs-item-overlay-button"},n),t),l().createElement("button",{type:"button",className:"as-buttonlink",onClick:()=>{Nl({name:"metrics",data:{[fl]:'D=pageName+"||Cart|NoKeep"'}}),o()}},a)))},Si=({index:e,removedItemIndex:t})=>{const{assets:a,fragments:r}=z(),{modKey:n,announceMessage:s}=ul(),[o]=Ma(n),{name:i,isRemovable:c=!0}=o,d=Ra(`${n}.phoneDetails`),m=d.modExists,{model:u,capacity:p,finish:g}=d.data,y=Ra(`${n}.cartItemDeleteOverlay`),{contentType:h,removeButtonLabel:E,cancelButtonLabel:v,eVar6Metrics:b}=y.data,f=y.modExists,w=gl(!1),N=dn(r[`content${h}`]||"",y.data),S=ja(n,"delete",{deferLoadWithDelete:!0}),{isLoadingSubmit:C}=S.binding.properties,T=m?`${u} ${p} ${g}`:i,L=ja(`${n}.cartItemDeleteOverlay`,"remove-button"),{isLoadingSubmit:k}=L.binding.properties;return c&&l().createElement(l().Fragment,null,l().createElement(lo,ur({},!f&&S.props,{onClick:f?()=>{var e;e=b,Nl({name:"metrics",data:{[vl]:e}}),w.open()}:r=>{s(a.processing),S.props.onClick(r),t.current=e},className:"rs-iteminfo-remove",a11yLabel:T,isLoading:C,"data-autom":"bag-item-remove-button"})),f&&l().createElement(Ni,{content:N,removeButtonLabel:E||a.removeCartItem,cancelButtonLabel:v||a.keepCartItem,removeButtonProps:{...L.props,disabled:k,isLoading:k,onClick:r=>{s(a.processing),L.props.onClick(r),t.current=e}},overlayControls:w}))},Ci=l().memo(Si),Ti=({a11yLabel:e,isSaving:t,...a})=>{const{assets:r}=z();return t?l().createElement("div",{role:"img",className:"waitindicator waitindicator-inline waitindicator16-gray","aria-label":r.processing}):l().createElement("button",ur({type:"button",className:"rs-iteminfo-savelater as-buttonlink"},a),r.saveLaterLabel,l().createElement("span",ur({className:"visuallyhidden"},Ya(e))))},Li=({overlayContent:e,overlayControls:t,saveConfirmButtonProps:a,dontSaveButtonProps:r,handleOverlayExited:n})=>{const{isVisible:s,close:o}=t,{assets:i}=z();return l().createElement(is,{className:"rs-item-saveforlater-overlay",footerContent:l().createElement(wi,null),ariaLabel:"item-saveforlater-overlay-header",visible:s,onClose:o,onExited:n,fixedWidth:!0},l().createElement("h2",{className:"rs-item-saveforlater-overlay-header",id:"item-saveforlater-overlay-header"},i.saveLaterOverlayHeader),l().createElement("div",ur({className:"rs-item-saveforlater-overlay-content"},Ya(e))),l().createElement("div",{className:"rs-item-saveforlater-overlay-actions"},l().createElement(ds,ur({type:"button",className:"rs-item-overlay-button"},a),i.saveItemsButtonLabel),l().createElement("button",ur({type:"button",className:"as-buttonlink"},r),i.dontSaveButtonLabel)))},ki=()=>{const{modKey:e}=ul(),[t]=Ma(e),{sku:a}=t,r=K().get(window,"asMetrics.takeaway.onProductSaved",K().noop),n=Ra(`${e}.savedItemOverlay`),{content:o,dontSaveMetric:i,saveForLaterMetric:c}=n.data,d=n.modExists,m=gl(!1),u=ja(`${e}.savedItemOverlay`,"saveForLaterButton"),p=ja(e,"saveForLater"),[g,y]=(0,s.useState)(!1),[h,E]=_a(Cs),v=Boolean(h.length);(0,s.useEffect)((()=>{v&&m.isVisible&&(y(!0),m.close())}),[v,E]);const{properties:{isLoadingSubmit:b},bindExists:f}=p.binding,w={onClick:()=>{(e=>{Nl({name:"metrics",data:{prop3:e}})})(i),m.close()}};return f&&l().createElement(l().Fragment,null,l().createElement(Ti,ur({},p.props,{onClick:d?()=>{(e=>{Nl({name:"metrics",data:{prop3:e}})})(c),m.open()}:e=>{p.props.onClick(e),r({sku:a})},a11yLabel:t&&t.name,isSaving:b,"data-autom":"bag-item-savelater-button"})),d&&l().createElement(Li,{overlayContent:o,saveConfirmButtonProps:{...u.props,disabled:u?.binding?.properties?.isLoadingSubmit,isLoading:u?.binding?.properties?.isLoadingSubmit},dontSaveButtonProps:w,overlayControls:m,handleOverlayExited:g&&(()=>{y(!1),window.scrollTo(window.pageXOffset,0)})}))},Ii=l().memo(ki),Ai=({amount:e})=>{const{assets:t}=z();return l().createElement("div",{className:"row rs-iteminfo-child"},l().createElement("div",{className:"column large-9 small-8 rs-iteminfo-child-details"},l().createElement("h3",{className:"as-icondetails-detail rs-iteminfo-child-title"},t.copyRightFeeLabel)),l().createElement("div",{className:"column large-3 small-4 rs-iteminfo-child-actions"},l().createElement("p",{className:"rs-iteminfo-child-price"},e)))},Pi=()=>{const{modKey:e}=ul(),[t]=Ba(e,"exclusiveCopyrightFee");return Boolean(t)&&l().createElement(Ai,{amount:t})},Di=l().memo(Pi),Oi=({promos:e=[],priceDetails:t=[]})=>{const a=Boolean(t.length),r=Boolean(e.length);return l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-iteminfo-savings"},e.map((({label:e,amount:t})=>l().createElement("div",{key:`promo-${e}`,className:"rs-iteminfo-savings-line large-12 small-12 row"},l().createElement("div",{className:"column large-9 small-8 rs-iteminfo-child-details"},l().createElement("div",{className:"rs-iteminfo-savings-title"},e)),l().createElement("div",{className:"column large-3 small-4 rs-iteminfo-child-actions"},l().createElement("p",{className:"rs-iteminfo-savings-price"},t)))))),a&&r&&l().createElement("div",{className:"rs-iteminfo-pricelineitem"},t.map((({label:e,name:t,value:a})=>l().createElement(pl,{key:`price-detail-${e}`,name:t||"itempricedetail",label:e,value:a})))))},xi=()=>{const{modKey:e}=ul(),{assets:t}=z(),[a]=Ma(e),{promos:r,priceDetails:n=[]}=a;if(!r)return null;const s=(({list:e,taxInclusive:t},a)=>e.map((e=>{const{showPrefix:r}=e;let{label:n,amount:s}=e;return r&&(n=t?a.totalSavings:a.savingsLabel),s&&(s=`-${s}`),{label:n,amount:s}})))(r,t);return l().createElement(Oi,{promos:s,priceDetails:n})},Ri=l().memo(xi),Fi=({title:e,products:t})=>l().createElement("div",{className:"rs-iteminfo-recommendedsystemschild-wrapper large-7 small-12"},l().createElement("div",{className:"rs-iteminfo-recommendedsystemschild-title"},l().createElement("span",Ya(e))),l().createElement("div",{className:"rs-iteminfo-recommendedsystemschild-items"},t.map((({name:e,quantity:t})=>l().createElement("div",{key:e},e," ",t>1?`(${t})`:t))))),Mi=()=>{const{modKey:e}=ul(),[t]=Ma(`${e}.recommendedSystemCartMoreProducts`),{name:a,productsInSystem:r=[]}=t;return Boolean(r.length)&&l().createElement(Fi,{title:a,products:r})},Bi=l().memo(Mi),_i=({isStandardGiftCard:e,showEditBtn:t,editBtnProps:a,editBtnA11y:r,isPhysicalGiftCard:n,fromName:s,fromEmail:o,toName:i,toEmail:c,showMessageHeader:d,messageHeader:m,messageLines:u=[]})=>{const{assets:p}=z();let g=p.giftMsgOnCard;e&&(g=n?p.giftPhysicalMsgOnCard:p.giftEgcMsgOnCard);const y=Boolean(u.length);return l().createElement("div",{className:"rs-item-gift-card-details rs-iteminfo-child"},l().createElement("div",{className:"row rs-iteminfo-child-content"},l().createElement("div",{className:"column as-icondetails large-12 small-12"},l().createElement("div",ur({className:"as-icondetails-icon as-svgicon-container"},Ya('<svg viewBox="0 0 25 25" class="as-svgicon as-svgicon-giftcard as-svgicon-reduced as-svgicon-giftcardreduced" role="img" aria-hidden="true" width="25px" height="25px"><path fill="none" d="M0 0h25v25H0z"/><path d="M19.5 20h-14A2.475 2.475 0 0 1 3 17.5v-10A2.476 2.476 0 0 1 5.5 5h14A2.476 2.476 0 0 1 22 7.5v10a2.475 2.475 0 0 1-2.5 2.5ZM5.5 6A1.532 1.532 0 0 0 4 7.5v10A1.531 1.531 0 0 0 5.5 19h14a1.531 1.531 0 0 0 1.5-1.5v-10A1.532 1.532 0 0 0 19.5 6Z"/><path d="M15.135 10.62a1.592 1.592 0 0 0-.738 1.328 1.516 1.516 0 0 0 .926 1.4 3.24 3.24 0 0 1-.474.989c-.294.423-.617.853-1.084.853s-.587-.279-1.137-.279c-.527 0-.715.287-1.144.287s-.738-.392-1.084-.883a4.32 4.32 0 0 1-.723-2.3 1.861 1.861 0 0 1 1.739-2.068c.467 0 .843.3 1.129.3s.7-.317 1.22-.317a1.607 1.607 0 0 1 1.37.69Zm-2.552-.762c-.038 0-.068-.008-.1-.008 0-.023-.008-.075-.008-.128a1.547 1.547 0 0 1 .384-.943 1.5 1.5 0 0 1 1.016-.528.735.735 0 0 1 .008.136 1.594 1.594 0 0 1-.361.973 1.346 1.346 0 0 1-.939.497Z"/></svg>'))),l().createElement("div",{className:"as-icondetails-detail rs-iteminfo-child-details"},l().createElement("div",{className:"rs-iteminfo-child-title"},l().createElement("span",{className:"rs-iteminfo-child-titletext"},g),t&&l().createElement("div",{className:"rs-iteminfo-child-divider"},l().createElement("button",ur({},a,{type:"button",className:"as-buttonlink","data-autom":"bag-egcdetails-edit"}),l().createElement("span",{"aria-hidden":"true"},p.edit),l().createElement("span",ur({className:"visuallyhidden"},Ya(r)))))),n?l().createElement("div",{className:"rs-iteminfo-child-tagline"},!e&&l().createElement("div",{className:"rs-iteminfo-label"},p.egcMessageLabel,":"),e&&y?u.map(((e,t)=>l().createElement("div",{key:`${e}-${t}`},e))):l().createElement("div",{className:"rs-iteminfo-greytext"},p.noneLabel)):l().createElement("div",{className:"rs-iteminfo-egcdetails"},l().createElement("div",{className:"rs-iteminfo-child-tagline"},l().createElement("div",{className:"rs-iteminfo-label"},p.egcToLabel,":"),l().createElement("div",{className:"rs-iteminfo-egcemail"},i," (",c,")")),l().createElement("div",{className:"rs-iteminfo-child-tagline"},l().createElement("div",{className:"rs-iteminfo-label"},p.egcFromLabel,":"),l().createElement("div",{className:"rs-iteminfo-egcemail"},s," (",o,")")),l().createElement("div",{className:"rs-iteminfo-child-tagline"},l().createElement("div",{className:"rs-iteminfo-label"},p.egcMessageLabel,":"),d&&l().createElement("div",{className:"rs-gift-card-msg-header"},m),u.map(((e,t)=>l().createElement("div",{key:`${e}-${t}`,className:"rs-gift-card-msg-line"},e))),e&&!y&&l().createElement("div",{className:"rs-iteminfo-greytext"},p.noneLabel),!e&&!y&&l().createElement("div",{className:"rs-iteminfo-greytext"},p.noneLabel)))))))},$i=i("hooks/use-forked-ref"),Ui=e=>l().useMemo((()=>t=>{e.forEach((e=>{if(e)if(K().isFunction(e))e(t);else try{e.current=t}catch(e){$i.error(e)}}))}),e),Ki=({id:e,name:t,value:a,label:r,classes:n={},error:s,errorA11y:o,errorAttrs:i={},characterCounter:c,characterCounterA11y:d,children:m,onFocus:u=(()=>{}),onBlur:p=(()=>{}),placeholder:g,autoGrow:y,onChange:h=(()=>{}),"aria-describedby":E="",...v},b)=>{const[f,w]=l().useState(!1),N=0===c||c,S=qa()(["form-textbox",n.root,{"is-error":s,"form-textbox-with-counter":N}]),C=qa()(["form-textarea",n.wrapper,{"form-textbox-entered":Boolean(a),"form-textarea-with-placeholder":g,"form-textarea-autogrow":y,focused:f}]),T=l().useRef(null),L=Ui([b,T]),k=l().useId(),I=e||k;return l().createElement("div",{className:S},l().createElement("div",{className:C,onClick:()=>{T.current&&T.current.focus()}},l().createElement("textarea",ur({id:I,name:t,value:a,className:n.input,onFocus:e=>{w(!0),u(e)},onBlur:e=>{w(!1),p(e)},onChange:e=>{h(e),T.current&&y&&(T.current.style.height=`${T.current.scrollHeight}px`)},placeholder:g,"aria-labelledby":`${I}_label`,"aria-describedby":`${I}_error ${E}`,ref:L},v))),l().createElement("span",{id:`${I}_label`,className:qa()("form-textbox-label",n.label),"aria-hidden":"true"},r),s&&l().createElement(po,{id:`${I}_error`,className:n.error,error:s,errorA11y:o,errorAttrs:i}),N&&l().createElement("div",{className:qa()("form-textbox-counter-wrapper",n.characterCounter,{"is-error":s})},d&&l().createElement("span",{className:"visuallyhidden"},d),l().createElement("span",{className:"form-textbox-counter"},c)),m)},Vi=l().forwardRef(Ki),Hi=({visible:e,setVisible:t,onEntered:a,onExited:r,id:n,messages:s,isStandardGiftCard:o,isPhysicalGiftCard:i,emailFields:c,showMessageHeader:d,msgHeaderProps:m,msgBodyProps:u,msgBodyA11y:p,giftCardImage:g,saveBtnProps:y})=>{const{viewport:h,assets:E}=z(),v="small"===h;let b=E.egcOverlayHeader;o&&(b=i?E.physicalOverlayHeader:E.giftEgcMsgOnCard);const f=E.egcMessageSubject,w=i?E.giftPhysicalOverlayMsgOptional:E.overlayYourMessageOptional;return l().createElement(is,{contentAttrs:{className:"rs-gift-card-overlay"},ariaLabel:`${n}-overlayHeading`,visible:e,onClose:()=>t(!1),isFullscreen:v,onEntered:a,onExited:r,disableFocusOut:!0,doublePadding:!0,fixedWidth:!0,mountOnEnter:!0,unmountOnExit:!0},l().createElement("h2",{id:`${n}-overlayHeading`,className:"rs-gift-card-overlay-header"},b),s,l().createElement("div",{className:"rs-gift-card-overlay-section"},c,!o&&d&&l().createElement("div",{className:"rs-gift-card-overlay-element"},l().createElement(ri,ur({},m,{label:f,"data-autom":"bag-egcoverlay-editMessageHeader","aria-required":!1,required:!1}))),i&&g,l().createElement("div",{className:"rs-gift-card-overlay-element"},l().createElement(Vi,ur({},u,{"data-autom":"bag-egcoverlay-editMessageBody","aria-required":!1,required:!1,label:w,"aria-describedby":`${n}-messagebody`})),l().createElement("span",{"aria-hidden":"true",className:"visuallyhidden",id:`${n}-messagebody`},p)),o&&!i&&g,l().createElement("div",{className:"rs-gift-card-overlay-buttoncontainer"},l().createElement(ds,ur({},y,{"aria-label":E.giftCardDetailsA11y,"data-autom":"giftcard-save"}),E.save),l().createElement("div",{className:"rs-gift-card-overlay-cancel"},l().createElement("button",{type:"button",className:"as-buttonlink","data-autom":"giftcard-cancel",onClick:()=>t(!1)},E.cancel)))))},ji=({messageLines:e=[],data:t})=>l().createElement("div",{className:"row rs-gift-card-overlay-imgbox"},l().createElement("div",{className:"rs-gift-card-overlay-msgcontainer large-10 large-centered"},e.map(((e,t)=>l().createElement("div",{key:`${e}-${t}`,className:"rs-gift-card-overlay-msgline"},e)))),l().createElement("div",{className:"rs-gift-card-overlay-imgcontainer large-12"},l().createElement(Fl,{className:"rs-gift-card-overlay-img",data:t}))),Gi=({isStandardGiftCard:e,toNameProps:t,toEmailProps:a,fromNameProps:r,fromEmailProps:n})=>{const{assets:s}=z(),o=e?s.egcRecipientName:s.egcRecipient,i=s.egcRecipientEmail,c=e?s.egcSenderName:s.egcYourName,d=e?s.egcSenderEmail:s.egcYourEmail;return l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-gift-card-overlay-element"},l().createElement(ri,ur({},t,{label:o,"data-autom":"bag-egcoverlay-editToName"}))),l().createElement("div",{className:"rs-gift-card-overlay-element"},l().createElement(ri,ur({},a,{label:i,"data-autom":"bag-egcoverlay-editToEmail"}))),l().createElement("div",{className:"rs-gift-card-overlay-element"},l().createElement(ri,ur({},r,{label:c,"data-autom":"bag-egcoverlay-editFromName"}))),l().createElement("div",{className:"rs-gift-card-overlay-element"},l().createElement(ri,ur({},n,{label:d,"data-autom":"bag-egcoverlay-editFromEmail"}))))},Wi=i("rs-checkout/giftcard"),qi=({showOverlayBtnRef:e})=>{const{assets:t}=z(),{modKey:a,announceMessage:r}=ul(),n=`${a}.egc`,o=Fa(n)?n:`${a}.giftCard`,i=Ra(o),[c,d]=Ba(o,al,!1),{id:m,isPhysicalGiftCard:u,showProductImage:p,imageData:g={},nameMaxLength:y,emailAddressMaxLength:h,showMessageHeader:E,headerMaxLength:v,messageLines:b=[],wrapMessageUrl:f,giftCardPartNumber:w}=i.data,N=Boolean(p&&g),S={...nr(o,"editToName").props,maxLength:y},C={...nr(o,"editToEmail").props,maxLength:h},T={...nr(o,"editFromName").props,maxLength:y},L={...nr(o,"editFromEmail").props,maxLength:h},k=!u&&l().createElement(Gi,{isStandardGiftCard:N,toNameProps:S,toEmailProps:C,fromNameProps:T,fromEmailProps:L}),I={...nr(o,"editMessageHeader").props,maxLength:v},A=nr(o,"editMessageBody",{debounce:500}),P=N&&i.data.showCharCount,D=A.props.value.length,O=A.props.maxLength,x=O-D,R=dn(t.messageCountA11y,{max:O}),[F,M]=(0,s.useState)([]),B=Pa(),_=V(((e,t)=>{const a=new URLSearchParams(t);wt(e,{method:"POST",headers:B,body:a}).then((e=>{const t=K().get(e,"body.lines",[]);M(t)})).catch((e=>{Wi.error(`Network ERROR: ${e}`)}))}),700),$={...A.props,onChange:e=>{A.props.onChange(e),_(f,{input:e.target.value,product:w})},characterCounter:P?`${D}/${O}`:""},[U,H]=(0,s.useState)(""),j=V((e=>H(e)),500);(0,s.useEffect)((()=>{if(P&&x<30){const e=dn(t.remainingLengthLabel,{remainingLength:x});j(e)}}),[P,j,x]),(0,s.useEffect)((()=>{c&&M(b)}),[c]);const G=p&&l().createElement(ji,{messageLines:F,data:{width:g.width,height:g.height,srcSet:{src:g.src,scaleParams1:g.dataScaleParams1}}}),W=ja(o,"save-button"),{isLoadingSubmit:q}=W.binding.properties,Y={...W.props,disabled:W.props.disabled||q,isLoading:q,onClick:e=>{W.props.onClick(e),r(t.processing)}},[X,J]=_a(o),Z=(0,s.useRef)(),Q=l().createElement(Qs,{messages:X,lastUpdated:J,ref:Z});return l().createElement(l().Fragment,null,l().createElement(Hi,{visible:c,setVisible:d,onEntered:()=>{X.length&&Z.current&&Z.current.focus()},onExited:()=>{e.current&&e.current.focus()},id:m,messages:Q,isPhysicalGiftCard:u,isStandardGiftCard:N,emailFields:k,showMessageHeader:E,msgHeaderProps:I,msgBodyProps:$,msgBodyA11y:R,giftCardImage:G,saveBtnProps:Y}),P&&l().createElement(yr,{message:U}))},Yi=l().memo(qi),zi=()=>{const{modKey:e,isEditable:t}=ul(),{fragments:a}=z(),[r]=Ba(e,"name"),n=`${e}.egc`,s=Fa(n)?n:`${e}.giftCard`,o=Ra(s),{canEdit:i,isPhysicalGiftCard:c,showProductImage:d,imageData:m,fromName:u,fromEmail:p,toName:g,toEmail:y,showMessageHeader:h,messageHeader:E,messageLines:v}=o.data,b=Boolean(d&&m),[,f]=Ba(s,al,!1),w=dn(a.editEgcGiftMsgOnCardA11y,{name:r}),N=ja(s,"show-edit"),S={...N.props,onClick:e=>{N.props.onClick(e),f(!0)}};return l().createElement(l().Fragment,null,l().createElement(_i,{isStandardGiftCard:b,showEditBtn:t&&i,editBtnProps:S,editBtnA11y:w,isPhysicalGiftCard:c,fromName:u,fromEmail:p,toName:g,toEmail:y,showMessageHeader:h,messageHeader:E,messageLines:v}),l().createElement(Yi,{showOverlayBtnRef:S.ref}))},Xi=l().memo(zi),Ji=(0,s.forwardRef)((({sources:e=[],tracks:t=[],fallback:a=l().createElement("p",null,"Video is not supported"),className:r,...n},s)=>l().createElement("video",ur({ref:s,className:qa()("rc-video",r)},n),e.map((e=>l().createElement("source",{key:e.src,src:e.src,type:e.type}))),t.map((e=>l().createElement("track",{key:e.label,src:e.src,label:e.label,srcLang:e.srclang,default:e.default}))),a)));Ji.displayName="Video";const Zi=Ji,Qi=e=>e?Math.floor(10*e.volume):0,ec=e=>{const t=Math.floor(e,10),a=Math.floor(t/60/60);return(a>0?`${a.toString().padStart(2,"0")}:`:"")+`${(Math.floor(t/60)-60*a).toString().padStart(2,"0")}:`+(t%60).toString().padStart(2,"0")},tc=({withTimeUpdate:e}={})=>{const t=(0,s.useRef)(null),[a,r]=(0,s.useState)(!1),[n,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1),[g,y]=(0,s.useState)(!1),[h,E]=(0,s.useState)(!1),[v,b]=(0,s.useState)(0),f=(0,s.useRef)(0),[w,N]=(0,s.useState)(!1),[S,C]=(0,s.useState)(!1),[T,L]=(0,s.useState)([]),[k,I]=(0,s.useState)(!1),[A,P]=(0,s.useState)(0),[D,O]=(0,s.useState)(0),[x,R]=(0,s.useState)(!1),[F,M]=(0,s.useState)(!1),[B,_]=(0,s.useState)(!1),$=(0,s.useRef)(!1);async function U(){const e=i("use-video/useVideo/play"),a=t.current;if(a&&(a.paused||a.ended))try{await a.play(),p(!0),N(!0),y(!1)}catch(t){p(!1),e.error(t)}}const K=()=>{const e=t.current;e&&(e.pause(),p(!1))},V=e=>{const a=t.current;if(a){const t=Xa(e,0,10);0===t?(a.muted=!0,E(!0)):(a.muted=!1,E(!1)),a.volume=t/10,b(t)}},H=()=>{const e=t.current;e&&!h&&(f.current=v,V(0),e.muted=!0,E(!0))},j=()=>{const e=t.current;e&&h&&(V(f.current),e.muted=!1,E(!1))},G=e=>{const a=t.current;a&&e>=0&&e<A&&(a.currentTime=e,O(e))},W=e=>{const a=t.current;if(a){let t=!1;const r=T.map(((r,n)=>{const s=n===e;return a.textTracks[n]&&(a.textTracks[n].mode=s?"showing":"hidden",s&&(t=!0)),r.selected=s,r}));I(t),L(r)}};return(0,s.useEffect)((()=>{const e=t.current;if(e){if(b(Qi(e)),R(e.webkitSupportsPresentationMode&&"function"==typeof e.webkitSetPresentationMode),e.textTracks.length>0){const t=[];for(let a=0;a<e.textTracks.length;a+=1)t.push({label:e.textTracks[a].label,language:e.textTracks[a].language,selected:!1});e.textTracks.length>1&&t.push({label:"Off",language:null,selected:!0}),L(t)}const t=e=>M(e&&"available"===e.availability);window.WebKitPlaybackTargetAvailabilityEvent&&(e.addEventListener("webkitplaybacktargetavailabilitychanged",t),setTimeout((()=>{e.removeEventListener("webkitplaybacktargetavailabilitychanged",t)}),1e4))}}),[]),(0,s.useEffect)((()=>{const a=t.current;if(a){const t=()=>{l(!1),r(!0),P(a.duration)},n=()=>{l(!1),r(!0)},s=()=>{$.current=!1,setTimeout((()=>{$.current||l(!0)}),400)},o=()=>{$.current=!0,l(!1)},i=()=>c(!0),d=()=>{y(!0),p(!1)},m=()=>O(a.currentTime),u=()=>C(!!document.fullscreenElement),g=()=>C(!!document.webkitIsFullScreen),h=()=>C(!!document.mozFullScreen),v=()=>C(!!document.msFullscreenElement),f=()=>p(!1),w=()=>p(!0),N=()=>{b(Qi(a)),E(a.muted)},S=()=>_(!0),T=()=>_(!1);return a.addEventListener("loadedmetadata",t),a.addEventListener("loadeddata",n),a.addEventListener("waiting",s),a.addEventListener("playing",o),a.addEventListener("canplay",o),a.addEventListener("canplaythrough",o),a.addEventListener("stalled",i),a.addEventListener("ended",d),e&&a.addEventListener("timeupdate",m),document.addEventListener("fullscreenchange",u),document.addEventListener("webkitfullscreenchange",g),document.addEventListener("mozfullscreenchange",h),document.addEventListener("msfullscreenchange",v),a.addEventListener("pause",f),a.addEventListener("play",w),a.addEventListener("volumechange",N),a.addEventListener("webkitbeginfullscreen",S),a.addEventListener("webkitendfullscreen",T),()=>{a.removeEventListener("loadedmetadata",t),a.removeEventListener("loadeddata",n),a.removeEventListener("waiting",s),a.removeEventListener("playing",o),a.removeEventListener("canplay",o),a.removeEventListener("canplaythrough",o),a.removeEventListener("stalled",i),a.removeEventListener("ended",d),e&&a.removeEventListener("timeupdate",m),document.removeEventListener("fullscreenchange",u),document.removeEventListener("webkitfullscreenchange",g),document.removeEventListener("mozfullscreenchange",h),document.removeEventListener("msfullscreenchange",v),a.removeEventListener("pause",f),a.removeEventListener("play",w),a.removeEventListener("volumechange",N),a.removeEventListener("webkitbeginfullscreen",S),a.removeEventListener("webkitendfullscreen",T)}}}),[e]),(0,s.useEffect)((()=>{!S&&T.length>0&&(()=>{const e=t.current;if(e){let t=-1;[...e.textTracks].forEach(((e,a)=>{"showing"===e.mode&&(t=a)})),W(t)}})()}),[S]),{ref:t,state:{isLoaded:a,isWaiting:n,isStalled:o,isError:d,isPlaying:u,isEnded:g,isMuted:h,volume:v,isTouched:w,isFullscreen:S,duration:A,currentTime:D,durationString:ec(A),currentTimeString:ec(D),currentTimePercent:Xa(D/A*100,0,100)||0,timeRemainingString:ec(A-D),captions:T,isCaptionsOn:k,isPIPSupported:x,isAirPlaySupported:F,iosFullScreen:B},controls:{handleError:()=>{m(!0)},play:U,pause:K,togglePlay:()=>{u?K():U()},stop:(e=!0)=>{const a=t.current;a&&(K(),a.currentTime=0,e&&y(!1))},mute:H,unmute:j,toggleMute:()=>{t.current&&(h?j():H())},volumeUp:()=>{const e=t.current;e&&v<10&&(e.muted=!1,E(!1),V(v+1))},volumeDown:()=>{t.current&&v>0&&V(v-1)},setVolume:V,toggleFullscreen:()=>{const e=t.current;e&&(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),C(!1)):(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),C(!0)))},setCurrentTime:G,setCurrentTimePercent:e=>{const a=t.current;if(a){const t=e*a.duration/100;G(t)}},setCaption:W,toggleAirPlay:()=>{const e=t.current;e&&F&&window.WebKitPlaybackTargetAvailabilityEvent&&e.webkitShowPlaybackTargetPicker()},togglePIP:()=>{const e=t.current;e&&x&&e.webkitSetPresentationMode&&e.webkitSetPresentationMode("picture-in-picture"===e.webkitPresentationMode?"inline":"picture-in-picture")}}}},ac=Object.freeze({OPEN_OVERLAY:"OPEN_OVERLAY",CLOSE_OVERLAY:"CLOSE_OVERLAY",SET_PART:"SET_PART",SET_DATA:"SET_DATA",FETCH_META_START:"FETCH_META_START",FETCH_META_SUCCESS:"FETCH_META_SUCCESS",FETCH_META_ERROR:"FETCH_META_ERROR",CLEAR_META_DATA:"CLEAR_META_DATA",UPDATE_SELECTION_DATA:"UPDATE_SELECTION_DATA",SAVE_SELECTION:"SAVE_SELECTION",CLEAR_SELECTION:"CLEAR_SELECTION",UPDATE_SELECTION_INBUNDLE:"UPDATE_SELECTION_INBUNDLE",HIDE_CONTENT:"HIDE_CONTENT",HIDE_VIDEO:"HIDE_VIDEO",UPDATE_VIDEO_STATE:"UPDATE_VIDEO_STATE"}),rc=(Object.freeze({INLINE:"inline",TILE:"tile",SHOW_ONPAGE:"showonpage"}),Object.freeze({line1Key:"line1",line2Key:"line2",message1Key:"msg.0",message2Key:"msg.1",message3Key:"msg.2",message4Key:"msg.3",fontKey:"f"})),nc=Object.freeze({TEXT:"text",EMOJI:"select",EMOJI_TEXT:"text+select",MULTI_SELECT:"multiselect"}),sc=e=>"emoji"===e||"char1"===e,lc=e=>(e?e.filter((e=>!K().isEmpty(e)&&e.messages&&e.messages.length>0)):[]).length>0,oc=(e,t)=>K().isEmpty(t)?e:e.map((e=>e?[...e].map((e=>{const a=t.find((t=>t.value===e));return a?` ${a.a11yText} `:e})).join(""):e)),ic=e=>e.every((e=>e?.engravedLines?.every((e=>!e.value&&!e.font)))),cc=(e,t="default",a,r=[])=>{const n={...e},{engravingDetails:s,slotName:l}=n,o=K().get(l,"engravingData.fonts.items",[]),{engravingPageData:i,engravingVideo:c,baseProduct:d}=s,m=K().get(c,"src");if(!i||!i.engravingMessageBox)return{};const{bundleQuantity:u=0,engravingMessageBox:p}=i;n.isBundleEngraving=u>0,n.isMultiFontEngraving=o.length>0;const g=(({bundleQuantity:e=1,bundles:t=[]})=>Array(e).fill({}).map(((e,a)=>({...e,...t[a]?t[a]:{},key:a}))))(i),y=[];r.forEach((e=>{const{key:t,messages:a=[],font:r=""}=e;u>0?a.forEach(((e,a)=>{K().set(y,`${a}.engravedLines.${t}`,{value:e||"",font:r})})):a.forEach(((e,t)=>{K().set(y,`0.engravedLines.${t}`,{value:e||"",font:r})}))})),y.length>0&&(i.engravedItems=y),n.savedSelection=[],i.bundles=g.map((e=>{const{key:a,bundleDisplayValue:r}=e,s=K().cloneDeep(p),l=((e,t)=>K().get(e,`${t}.engravedLines`,[]).map((({value:e})=>e)))(i.engravedItems,a);let c=[...l];const d=((e=[],t)=>{const a=K().uniqBy(K().get(e,`${t}.engravedLines`,[]),"font"),{font:r=""}=a[0]||{};return r})(i.engravedItems,a),m=((e,t)=>{const a=K().find(e,(e=>e.value.fontName===t));return K().get(a,"value.fontFamily")||""})(o,d),u=K().get(s,"inputTypes.sections[0].fields",[]);n.savedSelection[a]={key:a,bundleDisplayValue:r,messages:l,font:d,fontFamily:m,messageLines:u.length,errors:null},s.lines=u.map(((e,t)=>(K().set(e,"0.value",sc(d)?"":l[t]),{...e[0]}))),s.selectedEmoji=sc(d)?l[0]:"";const g=((e,t)=>e.map(((e,a)=>({fontIdx:a,open:t?e.value.fontName===t:0===a,...e.value}))))(o,d),y=A().isHandheldPhone?35:40;return s.emojis={},g.forEach((e=>{const{fontDisplayType:a,fontLabel:r="Emoji",defaultValue:n}=e,o=r,i="text"!==a?[...n]:[],d=Math.ceil(i.length/y),m=Array(d).fill({}).map(((e,a)=>({legend:d>1?`${o} ${a+1}`:o,key:`${t}_selectedEmoji`,group:a,options:i.slice(a*y,a*y+y)})));s.emojis[e.fontName]=m,"text"!==a&&(c=oc(l,n))})),n.savedSelection[a].messagesA11y=c,s.groupKey=t,i[`engravingMessageBox${a}`]={...s},i[`fonts${a}`]=g,e})),n.selection=Object.assign([],n.savedSelection);const h=K().get(l,"engravingData.additionalData.namedAssets",K().get(l,"data.map.namedAssets",{}));return n.slotName={...h},{data:n,showVideo:!!m&&(K().isEmpty(i.engravedItems)||ic(i.engravedItems)),metricsConfig:{...a,baseProduct:d}}},dc=(e,t)=>{switch(t.type){case ac.SET_PART:return{...e,overlayPart:t.payload};case ac.SET_DATA:{const{engravingData:a,id:r,metricsConfig:n}=t.payload;return{...e,...cc(a,r,n)}}case ac.OPEN_OVERLAY:return{...e,overlayVisible:!0,showContent:!0,loadOverlay:!0};case ac.CLOSE_OVERLAY:return{...e,overlayVisible:!1};case ac.FETCH_META_START:return{...e,isFetching:!0,isFetched:!1,error:null};case ac.FETCH_META_ERROR:return{...e,isFetching:!1,isFetched:!0,error:t.error,data:{}};case ac.FETCH_META_SUCCESS:return{...e,isFetching:!1,isFetched:!0,error:null,...t.payload};case ac.UPDATE_SELECTION_DATA:{const{key:a,...r}=t.payload,n=((e,{key:t,isEmojiFont:a,fieldVals:r})=>{const n=K().cloneDeep(e);return a?K().set(n,`engravingPageData.engravingMessageBox${t}.selectedEmoji`,r):Object.keys(r).forEach(((e,a)=>{K().set(n,`engravingPageData.engravingMessageBox${t}.lines[${a}].value`,r[e])})),n})(e.data.engravingDetails,t.payload),s=K().get(e,"data.selection",[]).map((e=>e.key===a?{...e,...K().omit(r,["fieldVals","isEmojiFont"])}:{...e}));return{...e,data:{...e.data,selection:s,engravingDetails:n}}}case ac.UPDATE_SELECTION_INBUNDLE:{const t=(({engravingDetails:e,savedSelection:t=[]})=>{if(K().isEmpty(e))return{};const a=K().cloneDeep(e);return a.engravingPageData.bundles.forEach((({key:e})=>{const r=K().get(a,`engravingPageData.engravingMessageBox${e}.lines`,[]);if(K().isEmpty(t))K().set(a,`engravingPageData.engravingMessageBox${e}.selectedEmoji`,""),r.forEach(((t,r)=>{K().set(a,`engravingPageData.engravingMessageBox${e}.lines[${r}].value`,"")}));else{const n=K().get(t,`${e}.font`,""),s=K().get(t,`${e}.messages`,[]);sc(n)?(K().set(a,`engravingPageData.engravingMessageBox${e}.selectedEmoji`,s[0]),r.forEach(((t,r)=>{K().set(a,`engravingPageData.engravingMessageBox${e}.lines[${r}].value`,"")}))):(r.forEach(((t,r)=>{K().set(a,`engravingPageData.engravingMessageBox${e}.lines[${r}].value`,s[r])})),K().set(a,`engravingPageData.engravingMessageBox${e}.selectedEmoji`,""))}})),a})(e.data);return{...e,data:{...e.data,engravingDetails:t}}}case ac.SAVE_SELECTION:return{...e,data:{...e.data,savedSelection:t.payload}};case ac.CLEAR_SELECTION:{const t=K().cloneDeep(K().get(e,"data.savedSelection",[]));return{...e,data:{...e.data,selection:t}}}case ac.REMOVE_SELECTION:return{...e,data:{...e.data,selection:t.payload,savedSelection:t.payload}};case ac.HIDE_CONTENT:return{...e,showContent:!1};case ac.HIDE_VIDEO:return{...e,showVideo:!1};case ac.UPDATE_VIDEO_STATE:{const a=K().get(e,"data.engravingDetails.engravingVideo.src");return{...e,showVideo:!!a&&!t.payload}}default:return e}};const mc=class{constructor({session:e=!1,expires:t,expiryInMs:a}){this.wantSession=e,this.expires=t,this.expiryInMs=a,this.isSupported=this.isSupported()}isSupported(){try{const e=this.wantSession?window.sessionStorage:window.localStorage;if(!e)return!1;e.setItem("T3sT3iNg","123"),e.removeItem("T3sT3iNg")}catch(e){return!1}return!0}getFutureDate(){const e=new Date,t=this.expiryInMs?1:864e5,a="number"==typeof this.expires?this.expires:parseInt(this.expires,10);return e.getTime()+a*t}keys(){return this.wantSession?Object.keys(sessionStorage):Object.keys(localStorage)}get(e){if(!this.isSupported)return null;if(this.wantSession){try{const t=new Date,a=JSON.parse(sessionStorage.getItem(e));if(a.timestamp>t.getTime())return a.value;sessionStorage.removeItem(e)}catch(t){sessionStorage.removeItem(e)}return null}return localStorage.getItem(e)}set(e,t){if(this.isSupported)if(this.wantSession){const a=JSON.stringify({value:t,timestamp:this.getFutureDate()});sessionStorage.setItem(e,a)}else localStorage.setItem(e,t)}remove(e){this.isSupported&&(this.wantSession?sessionStorage.removeItem(e):localStorage.removeItem(e))}};window.apple=window.apple||{};const uc=["product","step","add","remove","msg.0","msg.1","msg.2","msg.3","f.0","f.1","f.2","f.3","acc_msg.0","acc_msg.1","not-engraved","acc-not-engraved","msg","skipAttach","cppart","purchaseOption"];const pc=class{constructor(e,t={}){this.defaultOptions=t,this.keyData={version:this.defaultOptions.version||K().get(window,"apple.buyFlowVersionId","v9"),path:this.defaultOptions.path||K().get(window,"apple.buyFlowPath",window.location.pathname),step:this.defaultOptions.step||this.getStep(),input:""},this.createKey=(({version:e,path:t,step:a})=>r=>`${e}--${t}--${a}--${r}`)(this.keyData),this.createKeyWithStep=(({version:e,path:t})=>(a,r)=>`${e}--${t}--${a}--${r}`)(this.keyData),this.sessionKey=(({version:e,path:t})=>`${e}--${t}`)(this.keyData),this.storage=new mc(e)}set(e,t){this.storage.set(this.createKey(e),t)}get(e){return this.storage.get(this.createKey(e))}remove(e){this.storage.remove(this.createKey(e))}setEntryForStep(e,t,a){this.storage.set(this.createKeyWithStep(e,t),a)}getEntryForStep(e,t){return this.storage.get(this.createKeyWithStep(e,t))}removeEntryForStep(e,t){this.storage.remove(this.createKeyWithStep(e,t))}getEntries({pathSelector:e,excludePath:t}){const a=new RegExp(`${this.keyData.path}--`),r=new RegExp(e),n=a.test(e);return this.storage.keys().reduce(((e,s)=>{const l=r.test(s),o=a.test(s);if(n?l:l&&o){e[t?s.slice(s.lastIndexOf("--")+2):s]=this.storage.get(s)}return e}),{})}removeEntries({pathSelector:e=this.getStep()}){Object.keys(this.getEntries({pathSelector:e,excludePath:!1})).forEach((e=>this.storage.remove(e)))}getEntriesForStep({step:e=this.getStep(),excludePath:t}){return this.getEntries({pathSelector:e,excludePath:t})}removeEntriesForStep({step:e=this.getStep()}){this.removeEntries({pathSelector:e})}getEntriesForSession({excludePath:e}){return this.getEntries({pathSelector:this.sessionKey,excludePath:e})}removeEntriesForSession(){this.removeEntries({pathSelector:this.sessionKey})}setValues(e,t=(()=>!0)){Object.keys(e).forEach((a=>{t(a)&&this.set(a,e[a])}))}getStep(e="select"){if(this.defaultOptions.step)return this.defaultOptions.step;const t=new URLSearchParams(window.location.search.slice(1)).get("step")||e,a=document.querySelector('input[name="step"]');return a&&a.value||t}setBuyflowComplete(e){this.storage.set(this.createKeyWithStep("buyFlow","complete"),e)}getBuyflowComplete(){return this.storage.get(this.createKeyWithStep("buyFlow","complete"))}removeBuyflowComplete(){this.storage.remove(this.createKeyWithStep("buyFlow","complete"))}removeAllFromSessionComplete(e){const t=K().get(window,"apple.buyFlowFirstStep"),a=K().get(window,"apple.buyFlowIndependentStep"),r=this.getStep(),n=document.querySelector('input[name="bfe"]');!t&&!a&&r!==e||n||this.removeEntriesForSession()}getHiddenInputsFromQueryString(){const e={};return new URLSearchParams(window.location.search.slice(1)).forEach(((t,a)=>{"none"!==t&&"true"!==t&&(e[a]=t)})),e}getHiddenInputs(e={}){const{allowlist:t=[],appendToDefaultList:a=!1,noFilter:r=!1}=e;let n={};if(this.storage.isSupported||(n={...n,lsd:!0,...this.getHiddenInputsFromQueryString()}),n={...n,...this.getEntriesForSession({excludePath:!0})},r)return n;const s=a?K().union(uc,t):uc;return K().pickBy(n,((e,t)=>s.includes(t)))}persist(e,t,a){e&&t&&Object.keys(t).forEach((r=>this.addHiddenInput(e,r,t[r],a)))}setSubmitButtonValue(e){const t=e.querySelector('button[type="submit"]');t&&this.addHiddenInput(e,t.getAttribute("name"),t.getAttribute("value"))}addHiddenInput(e,t,a,r){const n=e.querySelector(`input[name="${t}"]`);if(n)r&&n.setAttribute("value",a);else{const r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",t),r.setAttribute("value",a),e.appendChild(r)}}},gc=K().get(window,"asBuyFlow.storageConfig.genericPath",""),yc=`${K().get(window,"apple.buyFlowPath",window.location.pathname)}/generic`,hc=K().get(window,"apple.version",""),Ec=K().get(window,"apple.storageConfig.path",""),vc=(new pc({session:!0,expires:window.apple.buyFlowExpiry||36e5,expiryInMs:!0,hash:!0},{version:hc,path:Ec||gc||yc,step:"generic"}),new pc({session:!0,expires:K().get(window,"apple.buyFlowExpiry",36e5),expiryInMs:!0})),bc=e=>{const t=e||vc.getEntriesForStep({excludePath:!0}),{engravedPart:a,engravingOption:r}=t;r&&(vc.remove("engravingOption"),vc.remove("productToEngrave"),a&&(vc.remove("engravedPart"),Object.keys(t).filter((e=>0===e.indexOf("msg.")||0===e.indexOf("f."))).forEach((e=>{vc.remove(e)}))))},fc=(e=[],t)=>{e.forEach((({key:e=0,font:a="",messages:r=[],messageLines:n=0})=>{if(!t&&r.length)a&&vc.set(`f.${e}`,a),r.forEach(((t,a)=>{vc.set(`msg.${e+a}`,t)}));else{vc.remove(`f.${e}`);for(let t=0;t<n;t+=1)vc.remove(`msg.${e+t}`)}}))},wc=({engravedData:e,engravingOption:t})=>{const{isEngraved:a,part:r,engravedPart:n,selection:s}=e;a?(vc.set("engravedPart",n),vc.set("productToEngrave",r),fc(s)):(vc.remove("engravedPart"),vc.remove("productToEngrave"),fc(s,!0)),vc.set("engravingOption",t)},Nc=(e={},t,a,r)=>{if(window.asMetrics){const{baseProduct:n,pageName:s,disableFireMetrics:l=!1}=e,o=K().get(window,"s.pageName",""),i=" engraving ",c=` ${s} - ${n}`;let d=null;const m={eVar5:[o," ",c,i," finish engraving"].join("|")};if(t)d="typeface | bundle";else{const e=K().get(a,"0.font");if(e)if("mixed"===e){const{hasEmoji:e,hasText:t}=((e,t)=>{let a=!1,r=!1;const n=K().get(e,"fonts0",[]).find((e=>"mixed"===e.fontName)),s=K().get(n,"defaultValue",[]).reduce(((e,t)=>e+t.value),""),l=K().get(t,"0.messages",[]).join("");return K().some(l,(e=>(s.includes(e)?a=!0:r=!0,a&&r))),{hasEmoji:a,hasText:r}})(r,a);d=e&&t?"typeface | mixed":e?"typeface | emoji":t?"typeface | text":""}else d=sc(e)?"typeface | emoji":"typeface | text";else d="text"}if(!l){const e=K().get(window.asMetrics,"sendUserInteraction",(()=>""));d&&(m.eVar6=[o," ",c,i,` ${d}`].join("|")),e({name:"metrics",data:m})}return{engravedType:d}}return{}},Sc=(e={},t)=>{const a=K().get(e,"disableFireMetrics",!1);if(window.asMetrics&&t&&("no engraving"!==t||!a)){const a=K().get(window,"s.pageName",""),{baseProduct:r,pageName:n}=e;window.asMetrics.fireMicroEvent({eVar:"eVar5",page:a,part:"engraving",feature:`${n} - ${r}`,action:t})}},Cc=({bootstrap:e,part:t,id:a,defaultEngravingOption:r,disableStorage:n,engravingData:s,storageData:o,removeEngraving:d,resetEngraving:m,onCancel:u=(()=>{}),onChange:p=(()=>{})})=>{if(!e)return{};const{metaUrl:g,assets:y,additionalParam:h,engravingSelectorKey:E,metricsConfig:v={},collapseAddEngraving:b=!0}=e,[f,w]=l().useReducer(dc,{overlayVisible:!1,loadOverlay:!1,showContent:!1,showVideo:!1,overlayPart:"",data:{},assets:y}),[N,S]=l().useState(!!r),[C,T]=l().useState(r),[L,k]=l().useState(0),I=l().useRef(null),A=l().useRef(null),P=l().useRef(!1),D=l().useRef(!!r),O=l().useRef(!1),{ref:x}=tc(),R=Xs(t);l().useEffect((()=>{if(t){const e=o||(n?{}:(()=>{const e=vc.getEntriesForStep({excludePath:!0}),t=[],{productToEngrave:a,engravedPart:r,engravingOption:n}=e;if(r){const a=[],r={key:0};Object.keys(e).filter((e=>0===e.indexOf("msg.")||0===e.indexOf("f."))).forEach((t=>{const[n,s]=t.split("."),l=e[t],o=Number(s);"msg"===n?a[o]=l:r.font=l})),t.push({...r,messages:a,messageLines:a.length})}return{selection:t,engravedPart:r,engravingOption:n,productToEngrave:a}})());w({type:ac.SET_PART,payload:t}),(({metaUrl:e,part:t,additionalParam:a,id:r,storageValue:n,assets:s,metricsConfig:l})=>o=>{const c=i("reducer/loadEngravingData"),d=on(e,{product:t,...a}),m=K().get(s,"errorMessage","");o({type:ac.FETCH_META_START});const u=wt(d);return u.then((e=>{const{engravingDetails:a,errorMessage:s}=K().get(e,"body",{});if(a&&!s){const s=a.variantEngravable||n.productToEngrave===t?n.selection:[];o({type:ac.FETCH_META_SUCCESS,payload:cc(e.body,r,l,s)})}else o({type:ac.FETCH_META_ERROR,error:{isResponseError:!0,message:s||m}})})).catch((e=>{c.error(e),o({type:ac.FETCH_META_ERROR,error:{isNetworkError:!0,errorInfo:e,message:m}})})),u})({metaUrl:g,part:t,additionalParam:h,id:a,storageValue:e,assets:y,metricsConfig:v})(w).then((a=>{n&&K().isEmpty(e)?(S(!1),T(null),D.current=!1):((e,a)=>{const r=K().get(e,"body.engravingDetails",{}),s=K().get(r,"engravingPageData.bundleQuantity",0),l=!K().isEmpty(a.selection),o=r.variantEngravable&&(l||"noEngraving"===C);if(a.productToEngrave===t||o){if(S(!!a.engravingOption),T(a.engravingOption),D.current=l,r.variantEngravable){const e={engravedData:{selection:a.selection,isEngraved:l,isBundleEngraving:s>0,part:t,engravedPart:l?r.productEngrave:null,variantEngravable:r.variantEngravable},engravingOption:a.engravingOption,param:E?{[E]:!0}:{},partChange:!0};n||wc(e),p(e)}}else R&&R!==t?(bc(),S(!1),T(null),D.current=!1):a.engravingOption&&T(a.engravingOption)})(a,e)}))}}),[t]),l().useEffect((()=>{s&&w({type:ac.SET_DATA,payload:{engravingData:s,id:a,metricsConfig:v}})}),[s]),l().useEffect((()=>{lc(f.data.savedSelection)&&(S(!0),T("addEngraving"))}),[f.data.savedSelection]),l().useEffect((()=>{if(d||m){const e=m?null:r,t=K().get(window,"asMetrics.isBFEMetricsEnabled",!1);S(!!e),T(e);const a=K().cloneDeep(K().get(f,"data.selection",[])),s=K().get(f,"data.engravingDetails.product"),l=K().get(f,"data.isBundleEngraving",!1),o=a.map((e=>K().omit(e,["messages","messagesA11y","font","fontFamily"])));D.current&&!t&&Sc(f.metricsConfig,"remove engraving"),D.current=!!e,w({type:ac.REMOVE_SELECTION,payload:o}),w({type:ac.UPDATE_VIDEO_STATE,payload:!!e});const i={engravedData:{selection:o,isEngraved:!1,isBundleEngraving:l,part:s,engravedPart:null},engravingOption:e,param:{}};n||bc(),m||p(i)}}),[d,m,r]);const F=()=>{w({type:ac.HIDE_CONTENT}),w({type:ac.UPDATE_VIDEO_STATE,payload:D.current}),P.current&&w({type:ac.CLEAR_SELECTION})},M=e=>{const t=i("useEngraving/validateEngravingMsg"),{bundleKey:a,bundleDisplayValue:r="",fields:n=[],fieldVals:s,font:l="",fontIdx:o=0,fontFamily:c="",emojiRemoved:d}=e,{engravingValidationUrl:m,product:u}=K().get(f,"data.engravingDetails",{}),p={};let g={};const y=l?{[rc.fontKey]:l}:{},h=sc(l),E={key:a,bundleDisplayValue:r,font:l,fontFamily:c,fieldVals:s,isEmojiFont:h};if(h){const e=K().get(rc,"message1Key","");g[e]=s}else g=n.reduce(((e,t,a)=>{const r=K().get(rc,`message${a+1}Key`,""),n=K().trim(s[t.name]);return e[r]=n,e}),{});const v=Object.keys(g).map((e=>g[e]));if(v.filter((e=>e&&""!==e)).length>0){const e=on(m,{product:u,...g,...y});wt(e).then((e=>{const{content:t}=e.body;if(t.hasErrors)Object.keys(t.errors).forEach((e=>{p[rc[`line${parseInt(e,10)+1}Key`]]=t.errors[e]})),w({type:ac.UPDATE_SELECTION_DATA,payload:{...E,errors:p}});else{const e=K().get(f,`data.engravingDetails.engravingPageData.fonts${a}.${o}.defaultValue`,[]),t=oc(v,e);w({type:ac.UPDATE_SELECTION_DATA,payload:{...E,messages:v,messagesA11y:t,errors:null}})}})).catch((e=>{t.error(e),w({type:ac.UPDATE_SELECTION_DATA,payload:{...E,errors:null,hasError:!0}})}))}else w({type:ac.UPDATE_SELECTION_DATA,payload:{...E,font:l,fontFamily:c,messages:[],messagesA11y:[],errors:null}});d&&A.current&&setTimeout((()=>A.current.focus()),200)},B=K().debounce((e=>{M(e)}),200);return{...f,focusRef:I,videoRef:x,saveButtonRef:A,selectedOpt:C,completed:N,handleAddEngravingKeyDown:()=>{O.current=!0},handleEngravingChange:e=>{const t=K().cloneDeep(K().get(f,"data.selection",[])),{product:a,productEngrave:r,engravingPageData:s,variantEngravable:l}=K().get(f,"data.engravingDetails",{}),o=K().get(f,"data.isBundleEngraving",!1);let i={},c=!1;if(e)c=lc(t),c?i=Nc(f.metricsConfig,o,t,s):Sc(f.metricsConfig,"no engraving"),w({type:ac.SAVE_SELECTION,payload:t}),w({type:ac.CLOSE_OVERLAY,payload:!1}),setTimeout((()=>F()),400);else{if(!b){const e=t.map((e=>K().omit(e,["messages","font","fontFamily"])));w({type:ac.REMOVE_SELECTION,payload:e})}Sc(f.metricsConfig,"no engraving")}const d=c?"addEngraving":"noEngraving";S(!0),T(d),D.current=c;const m={engravedData:{selection:t,isEngraved:c,isBundleEngraving:o,part:a,engravedPart:c?r:null,variantEngravable:l,metricsData:i},engravingOption:d,param:E?{[E]:!0}:{}};n||wc(m),p(m),I.current&&b&&setTimeout((()=>I.current.focus()),200)},handleOpenOverlay:(e,t=0,a)=>{(!a||O.current||a.keyCode!==c.Return&&a.keyCode!==c.Space)&&(O.current=!1,Sc(f.metricsConfig,e),P.current=!1,k(t),w({type:ac.UPDATE_SELECTION_INBUNDLE}),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&w({type:ac.HIDE_VIDEO}),w({type:ac.OPEN_OVERLAY}))},handleCloseOverlay:()=>{Sc(f.metricsConfig,"close engraving"),P.current=!0,w({type:ac.CLOSE_OVERLAY}),setTimeout((()=>F()),400)},removeEngrave:e=>{const t=K().cloneDeep(K().get(f,"data.selection",[])),{product:a,productEngrave:r}=K().get(f,"data.engravingDetails",{}),s=K().get(f,"data.isBundleEngraving",!1),l=t.map((t=>t.key===e?K().omit(t,["messages","font","fontFamily"]):t)),o=lc(l),i=o?"addEngraving":"noEngraving";s&&(S(!0),T(i)),D.current=o;K().get(window,"asMetrics.isBFEMetricsEnabled",!1)||Sc(f.metricsConfig,"remove engraving"),w({type:ac.REMOVE_SELECTION,payload:l});const c={engravedData:{selection:l,isEngraved:o,isBundleEngraving:s,part:a,engravedPart:o?r:null},engravingOption:i,param:E?{[E]:!0}:{}};n||wc(c),p(c),I.current&&setTimeout((()=>I.current.focus()),200)},cancelEngrave:()=>{K().get(window,"asMetrics.isBFEMetricsEnabled",!1)||Sc(f.metricsConfig,"cancel engraving"),P.current=!0,w({type:ac.CLOSE_OVERLAY}),setTimeout((()=>F()),400),u()},onOverlayHidden:F,validateEngravingMsg:M,onAddingMessage:B,selectedBundleKey:L,onVideoEnded:()=>{w({type:ac.HIDE_VIDEO})}}},Tc=l().createContext({}),Lc=()=>{const e=l().useContext(Tc);if(!e)throw new Error("Gallery compound components cannot be rendered outside the Gallery component");return e},kc=({onClick:e=(()=>{}),children:t,disabled:a,passFocusOnDisabled:r=!0,hideFromVOWhenDisabled:n=!0,classes:s={},...o})=>{const{target:i,handlePrev:c,hasPrev:d,distFromStart:m,isMoving:u,nextButtonRef:p,prevButtonRef:g,a11y:y}=Lc(),h=l().useRef(!1),E=a||!d;return l().useEffect((()=>{!d&&h.current&&r&&p.current&&p.current.focus(),h.current=!1}),[d]),l().createElement("button",ur({type:"button",className:qa()(s.root,{[s.disabled||""]:E}),ref:g,onClick:u?void 0:t=>{c(),e(t,i-1),m<=1&&(h.current=!0)},disabled:E,"aria-hidden":n&&E,"aria-label":K().get(y,"previous","Previous")},o),t)},Ic=({onClick:e=(()=>{}),children:t,disabled:a,passFocusOnDisabled:r=!0,hideFromVOWhenDisabled:n=!0,classes:s={},...o})=>{const{target:i,handleNext:c,hasNext:d,distFromEnd:m,isMoving:u,nextButtonRef:p,prevButtonRef:g,a11y:y}=Lc(),h=l().useRef(!1),E=a||!d;return l().useEffect((()=>{!d&&h.current&&r&&g.current&&g.current.focus(),h.current=!1}),[d]),l().createElement("button",ur({type:"button",className:qa()(s.root,{[s.disabled||""]:E}),ref:p,onClick:u?void 0:t=>{c(),e(t,i+1),m<=1&&(h.current=!0)},disabled:E,"aria-hidden":n&&E,"aria-label":K().get(y,"next","Next")},o),t)},Ac=({items:e,renderDot:t=(e=>e),getButtonProps:a=(()=>({})),classes:r={},children:n,...s})=>{const{id:o,target:i,handleChange:d,handleNext:m,handlePrev:u,hasNext:p,hasPrev:g,isRTL:y,isMoving:h,registerTabList:E,a11y:v}=Lc();l().useLayoutEffect((()=>(E(!0),()=>{E(!1)})),[]);const b=l().useRef([]),f=e=>t=>{b.current&&(b.current[e]=t)},w=e=>{const t=b.current?b.current[e]:null;t&&t.focus()};return l().createElement("ul",ur({className:qa()(r.root),role:"tablist"},s),e.map(((n,s)=>{const E=t=>{t.preventDefault(),g&&!h&&(u(),w((s-1)%e.length))},b=t=>{t.preventDefault(),p&&!h&&(m(),w((s+1)%e.length))},N=i===s,S=K().get(v,`items[${s}]`,`Item ${s+1}`);return l().createElement("li",{key:s,role:"presentation",className:qa()(r.item)},l().createElement("button",ur({id:`${o}-tab-item-${s}`,ref:f(s),type:"button",role:"tab","aria-controls":`${o}-gallery-item-${s}`,"aria-selected":N,"aria-label":S,tabIndex:N?0:-1,onClick:()=>{h||d(s)},onKeyDown:e=>{switch(e.keyCode){case c.ArrowUp:E(e);break;case c.ArrowLeft:y?b(e):E(e);break;case c.ArrowDown:b(e);break;case c.ArrowRight:y?E(e):b(e)}},className:qa()(r.button,{[r.active||""]:N})},a(n,s)),t(n,s)))})),n)},Pc="Left",Dc="Right",Oc="Up",xc="Down",Rc={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},Fc={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},Mc="mousemove",Bc="mouseup",_c="touchend",$c="touchmove",Uc="touchstart";function Kc(e,t){if(0===t)return e;const a=Math.PI/180*t;return[e[0]*Math.cos(a)+e[1]*Math.sin(a),e[1]*Math.cos(a)-e[0]*Math.sin(a)]}function Vc(e,t){const a=t=>{const a="touches"in t;a&&t.touches.length>1||e(((e,n)=>{n.trackMouse&&!a&&(document.addEventListener(Mc,r),document.addEventListener(Bc,s));const{clientX:l,clientY:o}=a?t.touches[0]:t,i=Kc([l,o],n.rotationAngle);return n.onTouchStartOrOnMouseDown&&n.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},e),Fc),{initial:i.slice(),xy:i,start:t.timeStamp||0})}))},r=t=>{e(((e,a)=>{const r="touches"in t;if(r&&t.touches.length>1)return e;if(t.timeStamp-e.start>a.swipeDuration)return e.swiping?Object.assign(Object.assign({},e),{swiping:!1}):e;const{clientX:n,clientY:s}=r?t.touches[0]:t,[l,o]=Kc([n,s],a.rotationAngle),i=l-e.xy[0],c=o-e.xy[1],d=Math.abs(i),m=Math.abs(c),u=(t.timeStamp||0)-e.start,p=Math.sqrt(d*d+m*m)/(u||1),g=[i/(u||1),c/(u||1)],y=function(e,t,a,r){return e>t?a>0?Dc:Pc:r>0?xc:Oc}(d,m,i,c),h="number"==typeof a.delta?a.delta:a.delta[y.toLowerCase()]||Rc.delta;if(d<h&&m<h&&!e.swiping)return e;const E={absX:d,absY:m,deltaX:i,deltaY:c,dir:y,event:t,first:e.first,initial:e.initial,velocity:p,vxvy:g};E.first&&a.onSwipeStart&&a.onSwipeStart(E),a.onSwiping&&a.onSwiping(E);let v=!1;return(a.onSwiping||a.onSwiped||a[`onSwiped${y}`])&&(v=!0),v&&a.preventScrollOnSwipe&&a.trackTouch&&t.cancelable&&t.preventDefault(),Object.assign(Object.assign({},e),{first:!1,eventData:E,swiping:!0})}))},n=t=>{e(((e,a)=>{let r;if(e.swiping&&e.eventData){if(t.timeStamp-e.start<a.swipeDuration){r=Object.assign(Object.assign({},e.eventData),{event:t}),a.onSwiped&&a.onSwiped(r);const n=a[`onSwiped${r.dir}`];n&&n(r)}}else a.onTap&&a.onTap({event:t});return a.onTouchEndOrOnMouseUp&&a.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},e),Fc),{eventData:r})}))},s=e=>{document.removeEventListener(Mc,r),document.removeEventListener(Bc,s),n(e)},l=(e,t)=>{let s=()=>{};if(e&&e.addEventListener){const l=Object.assign(Object.assign({},Rc.touchEventOptions),t.touchEventOptions),o=[[Uc,a,l],[$c,r,Object.assign(Object.assign({},l),t.preventScrollOnSwipe?{passive:!1}:{})],[_c,n,l]];o.forEach((([t,a,r])=>e.addEventListener(t,a,r))),s=()=>o.forEach((([t,a])=>e.removeEventListener(t,a)))}return s},o={ref:t=>{null!==t&&e(((e,a)=>{if(e.el===t)return e;const r={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),r.cleanUpTouch=void 0),a.trackTouch&&t&&(r.cleanUpTouch=l(t,a)),Object.assign(Object.assign(Object.assign({},e),{el:t}),r)}))}};return t.trackMouse&&(o.onMouseDown=a),[o,l]}function Hc(e){const{trackMouse:t}=e,a=s.useRef(Object.assign({},Fc)),r=s.useRef(Object.assign({},Rc)),n=s.useRef(Object.assign({},r.current));let l;for(l in n.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},Rc),e),Rc)void 0===r.current[l]&&(r.current[l]=Rc[l]);const[o,i]=s.useMemo((()=>Vc((e=>a.current=e(a.current,r.current)),{trackMouse:t})),[t]);return a.current=function(e,t,a,r){return t.trackTouch&&e.el?e.cleanUpTouch?t.preventScrollOnSwipe!==a.preventScrollOnSwipe||t.touchEventOptions.passive!==a.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)}):(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0}))}(a.current,r.current,n.current,i),o}const jc=(e,t)=>{const[a,r]=l().useState(Boolean(e)),n=l().useRef(null),s=l().useRef(null),o=()=>{n.current&&(window.clearInterval(n.current),n.current=null)},i=()=>{s.current&&(window.clearTimeout(s.current),s.current=null)},c=l().useRef(t);c.current=t,l().useEffect((()=>{r(Boolean(e))}),[e]),l().useEffect((()=>{if(e&&a&&!n.current){const t=K().get(e,"transitionDelay",5e3),a=K().get(e,"step",1);n.current=window.setInterval((()=>{c.current(a)}),t)}return e&&a||o(),()=>{o(),i()}}),[e,a]);const d=()=>{a&&e&&(i(),r(!1))},m=()=>{if(!a&&e){const t=K().get(e,"restartDelay",5e3);s.current||(s.current=window.setTimeout((()=>{r(!0),s.current=null}),t))}};return{pauseAutoScroll:d,resumeAutoScroll:m,autoScrollHandlers:e?{onMouseEnter:d,onMouseLeave:e=>{e.currentTarget.contains(document.activeElement)||m()},onFocus:d,onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||m()}}:{}}},Gc=Object.freeze({GOTO:"goto",COMPLETED:"completed",SWIPED:"swiped",DRAG:"drag"}),Wc=(e,t)=>{switch(t.type){case Gc.GOTO:return{...e,target:t.payload.target};case Gc.COMPLETED:return{...e,swiped:void 0,active:t.payload.active};case Gc.DRAG:return{...e,isDragging:t.payload};case Gc.SWIPED:return{...e,swiped:!0};default:return e}},qc=(e,t,a,r)=>{const n=(s=t.current)?s.offsetWidth/3:0;var s;Math.abs(e.deltaX)>=n&&r(a)},Yc=(e,t)=>{const a=e%t;return a<0?t+a:a},zc=(e,t)=>"smooth"===t?`transform ${e}ms ease`:`transform ${e}ms cubic-bezier(0.68, -0.55, 0.265, 1.55)`,Xc=(e,t,a,r,n,s,l,o)=>{const i=Math.random()/100,c={transform:"translateX(0px)",width:100*Math.floor(t.length/a)+"%",insetInlineStart:`-${100*n/a}%`,transition:"none"};if(r){const e=Math.abs(s-n),r=100/a*((e>t.length?1:-1)*Math.sign(s-n))*e/Math.floor(t.length/a);return{...c,transition:zc(l,"smooth"),transform:`translateX(calc(${o?-1:1} * ${r+i}%))`}}return c},Jc=({id:e,items:t,index:a,defaultIndex:r=0,onChange:n=(()=>{}),infinite:s,radius:o,fade:i=!1,itemsInView:c=1,transitionDuration:d=400,autoScroll:m,swipableProps:u={},onSwiped:p=(()=>{}),a11y:g={label:"Gallery",previous:"Previous",next:"Next",items:[]},dir:y,...h})=>{const E=l().useId(),v=e||E,b=l().useMemo((()=>"rtl"===y||"rtl"===Ja()),[y]),{current:f}=l().useRef("number"==typeof a),w=l().useRef(null),N=l().useRef(null),S=l().useRef(null),C=l().useRef(null),[T,L]=l().useState(!1),[k,I]=l().useReducer(Wc,{isDragging:!1,target:f?a:r,active:f?a:r}),A=l().useRef(f?a:r),P=l().useRef(f?a:r),[D,O]=[k.active,f?a:k.target];l().useEffect((()=>{const e=setTimeout((()=>{I({type:Gc.COMPLETED,payload:{active:O}}),A.current=O}),d);return()=>clearTimeout(e)}),[f,O,d]);const x=(e={})=>{const a=(r=t.length,(k.active-1+r)%r);var r;P.current=k.active-1,f||I({type:Gc.GOTO,payload:{target:a}}),e.swiped&&I({type:Gc.SWIPED}),n(a)},R=(e={})=>{const a=(r=t.length,(k.active+1)%r);var r;P.current=k.active+1,f||I({type:Gc.GOTO,payload:{target:a}}),e.swiped&&I({type:Gc.SWIPED}),n(a)},F=e=>{e>0?R({swiped:!0}):x({swiped:!0})},{pauseAutoScroll:M,resumeAutoScroll:B,autoScrollHandlers:_}=jc(m,(e=>{const a=s?D+e:Yc(D+e,t.length);P.current=a,f||I({type:Gc.GOTO,payload:{target:a}}),n(a,"autoScroll")})),$=s||O<t.length-1,U=s||O>0,K=s?1/0:O-0,V=s?1/0:t.length-1-O,H=l().useRef(),j=e=>{$&&(qc(e,w,1,F),p("left",Yc(O+1,t.length)))},G=e=>{U&&(qc(e,w,-1,F),p("right",Yc(O-1,t.length)))},W=Hc({onSwiping(e){if(D===O&&("Left"===e.dir||"Right"===e.dir)){e.event.preventDefault();let t=e.deltaX;if("Left"===e.dir&&!$||"Right"===e.dir&&!U){const a=Math.abs(e.deltaX),r=a-a*a/(2*w.current.offsetWidth);t=Math.sign(e.deltaX)*r}N.current&&(N.current.style.transform=`translateX(${t}px)`,N.current.style.transition="none",k.isDragging||(I({type:Gc.DRAG,payload:!0}),M()))}},onSwiped(){N.current&&(N.current.style.transform="translateX(0px)",N.current.style.transition=zc(d,"elastic"),window.clearTimeout(H.current),H.current=window.setTimeout((()=>{I({type:Gc.DRAG,payload:!1}),B()}),d))},onSwipedLeft:b?G:j,onSwipedRight:b?j:G,offset:0,touchEventOptions:{passive:!1},...u}),{isMoving:q,pageStart:Y,pageEnd:z,activeOffset:X,targetOffset:J}=(({active:e,target:t,items:a,radius:r,infinite:n,actualActiveIndex:s,actualTargetIndex:l})=>{const o=e!==t,i=a.length,c=Math.floor(i/2),d=Math.min(r||i,n?c:i),m=e-d,u=e+d,p=n?m:Math.max(m,0),g=n?u:Math.min(u,i-1),y=n?Yc(e-t,i):0,h=n?Yc(t-e,i):0;let E=y<h?-y:h;return y===h&&(E=Math.sign(l-s)*y),{isMoving:o,pageStart:p,pageEnd:g,activeOffset:n?d:e-p,targetOffset:n?d+E:t-p}})({active:D,target:O,items:t,radius:o,infinite:s,actualActiveIndex:A.current,actualTargetIndex:P.current}),Z=i&&!k.swiped||o&&Math.abs(O-D)>o,Q=q&&Z,ee=Q?[{content:t[Yc(D,t.length)],index:Yc(D,t.length)},{content:t[Yc(O,t.length)],index:Yc(O,t.length)}]:((e,t,a)=>{const r=[];for(let n=t;n<=a;n+=1){const t=Yc(n,e.length);r.push({content:e[t],index:t})}return r})(t,Y,z);return{id:v,pages:ee,active:Yc(D,t.length),target:Yc(O,t.length),swipeableHandlers:W,autoScrollHandlers:_,style:Q?{width:"200%"}:Xc(0,ee,c,q,X,J,d,b),hasNext:$,hasPrev:U,distFromStart:K,distFromEnd:V,isMoving:q,isFading:Q,isDragging:k.isDragging,handleChange:e=>{P.current=e,f||I({type:Gc.GOTO,payload:{target:e}}),n(e)},handlePrev:x,handleNext:R,isRTL:b,isTabList:T,registerTabList:L,rootRef:w,scrollerRef:e=>{W.ref(e),N.current=e},prevButtonRef:S,nextButtonRef:C,a11y:g,wrapperAttrs:h}},Zc=({renderItem:e=(e=>e),classes:t={},childrenBefore:a,children:r,...n})=>{const s=Jc(n),{id:o,active:i,target:c,pages:d,swipeableHandlers:m,autoScrollHandlers:u,style:p,isMoving:g,isFading:y,isDragging:h,rootRef:E,scrollerRef:v,a11y:b,wrapperAttrs:f}=s,w=d.length>1?{role:"group","aria-label":K().get(b,"label","Gallery")}:{};return l().createElement("div",ur({className:t.root},w,f,u),l().createElement(Tc.Provider,{value:s},a,l().createElement("div",{id:o,className:t.gallery,"data-core-gallery":!0,"data-core-gallery-fade":y,ref:E},l().createElement("div",ur({"data-core-gallery-scroller":!0,className:t.scroller,style:p},m,{ref:v}),d.map((({content:t,index:a},r)=>e(t,a,{isActive:a===i,isTarget:a===c,isMoving:g,isDragging:h,pageIndex:r}))))),r))},Qc=({index:e,children:t,addDisabled:a=!0,...r})=>{const{id:n,target:s,isTabList:o,a11y:i}=Lc(),c=ps(a&&s!==e),d=`${n}-gallery-item-${e}`,m={role:"tabpanel","aria-label":K().get(i,`items[${e}]`,`Item ${e+1}`)};return l().createElement("div",ur({id:d,"data-core-gallery-item":!0,"aria-hidden":s!==e,ref:c},o?m:{},r),t)},ed=({className:e,...t})=>l().createElement(Qc,ur({className:qa()(e,"rc-inline-gallery-item")},t)),td='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">\n<path d="M21.559,12.062 L15.618,17.984 L21.5221,23.944 C22.105,24.533 22.1021,25.482 21.5131,26.065 C21.2211,26.355 20.8391,26.4999987 20.4571,26.4999987 C20.0711,26.4999987 19.6851,26.352 19.3921,26.056 L12.4351,19.034 C11.8531,18.446 11.8551,17.4999987 12.4411,16.916 L19.4411,9.938 C20.0261,9.353 20.9781,9.354 21.5621,9.941 C22.1471,10.528 22.1451,11.478 21.5591,12.062 L21.559,12.062 Z" />\n</svg>',ad='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">\n<path d="M23.5587,16.916 C24.1447,17.4999987 24.1467,18.446 23.5647,19.034 L16.6077,26.056 C16.3147,26.352 15.9287,26.4999987 15.5427,26.4999987 C15.1607,26.4999987 14.7787,26.355 14.4867,26.065 C13.8977,25.482 13.8947,24.533 14.4777,23.944 L20.3818,17.984 L14.4408,12.062 C13.8548,11.478 13.8528,10.5279 14.4378,9.941 C15.0218,9.354 15.9738,9.353 16.5588,9.938 L23.5588,16.916 L23.5587,16.916 Z" />\n</svg>',rd=({elevated:e,hover:t,supernav:a,dir:r,visuallyHidden:n,hideWhenDisabled:s=!0,previousProps:o={},nextProps:i={},classes:c={}})=>{const d=l().useMemo((()=>"rtl"===r||"rtl"===document?.documentElement?.getAttribute("dir")),[r]);return l().createElement("div",{className:qa()(c.root,"rc-gallery-paddlenav","paddlenav","paddlenav-alpha",{"paddlenav-elevated":e,"paddlenav-super":a,"with-paddlenav-onhover":t,"with-paddlenav-visuallyhidden":n})},l().createElement(kc,ur({classes:{root:qa()(c.previous,"paddlenav-arrow","paddlenav-arrow-previous"),disabled:qa()({visuallyhidden:s})},"data-autom":"paddlenav-previous"},Ya(d?ad:td),o)),l().createElement(Ic,ur({classes:{root:qa()(c.next,"paddlenav-arrow","paddlenav-arrow-next"),disabled:qa()({visuallyhidden:s})},"data-autom":"paddlenav-next"},Ya(d?td:ad),i)))},nd={HEADLINE_STANDALONE:"typography-headline-standalone",HEADLINE_SUPER:"typography-headline-super",HEADLINE_ELEVATED:"typography-headline-elevated",HEADLINE:"typography-headline",HEADLINE_REDUCED:"typography-headline-reduced",QUOTE:"typography-quote",QUOTE_REDUCED:"typography-quote-reduced",CALLOUT:"typography-callout",MANIFESTO:"typography-manifesto",EYEBROW_SUPER:"typography-eyebrow-super",EYEBROW_ELEVATED:"typography-eyebrow-elevated",EYEBROW:"typography-eyebrow",EYEBROW_REDUCED:"typography-eyebrow-reduced",LABEL:"typography-label",INTRO_ELEVATED:"typography-intro-elevated",INTRO:"typography-intro",TOUT:"typography-tout",BODY:"typography-body",BODY_TIGHT:"typography-body-tight",BODY_REDUCED:"typography-body-reduced",BODY_REDUCED_TIGHT:"typography-body-reduced-tight",CAPTION:"typography-caption"},sd=({renderDot:e=(()=>{}),classes:t={},...a},r)=>l().createElement("div",{className:qa()(t.root,"rc-gallery-dotnav","dotnav"),ref:r},l().createElement(Ac,ur({classes:{root:qa()("dotnav-items"),item:qa()(t.dot,"dotnav-item"),button:qa()("rc-gallery-dotnav-button","dotnav-link",nd.BODY),active:qa()(t.active,"current")},renderDot:e},a))),ld=l().forwardRef(sd),od=window.asMetrics,id=(e,t)=>({items:e.map(((e,a)=>`${t.item} ${a+1}`)),previous:t.previous,next:t.next}),cd=({items:e,dotnav:t,dotnavProps:a={},paddlenav:r,paddlenavProps:n={},metrics:s,peek:o,onChange:i=(()=>{}),classes:c={},a11y:d,dir:m,...u})=>{const{viewport:p,assets:g}=z(),y={...id(e,g),...d},h=r||"small"!==p&&!1!==r&&e.length>1,E=t||!1!==t,{root:v,image:b,...f}=c;return l().createElement(Zc,ur({items:e,classes:{root:qa()("rc-inline-gallery",v,{"rc-inline-gallery-peek":o,"rc-inline-gallery-autoscroll":u.autoScroll}),...f},onChange:(t,a)=>{i(t),s&&"autoScroll"!==a&&((e,t,a)=>{od&&od.gallery&&od.gallery.view&&window.asMetrics.gallery.view({area:e.slot||"",name:e.part||"",current:t+1,total:a,legacy:!0})})(s,t,e.length)},renderItem:(e,t)=>l().createElement(ed,{key:t,index:t},l().createElement(Fl,{className:qa()("rc-inline-gallery-image",b),data:e})),childrenBefore:E&&l().createElement(ld,ur({items:e,getButtonProps:(e,t)=>({"data-autom":`gallery-dot-nav-${t}`})},a)),a11y:y,dir:m},u),h&&l().createElement(rd,ur({elevated:!0,dir:m},n)))},dd=l().createContext({}),md=()=>{const e=l().useContext(dd);if(!e)throw new Error("Tabs compound components cannot be rendered outside the Tabs component");return e},ud=({rootTag:e="div",index:t,defaultIndex:a=0,handleChange:r=(()=>{}),count:n=1,id:o,children:i,...c})=>{const d=l().useId(),m=o||d,u=(0,s.useRef)(!1),{current:p}=(0,s.useRef)(void 0!==t),[g,y]=(0,s.useState)(a),[h,E]=(0,s.useState)(!1),[v,b]=(0,s.useState)(""),f={isControlled:p,uid:m,doFocus:u,count:n,selectedIndex:p?t:g,handleSelect:e=>{u.current=!0,p||y(e),r(e)},height:v,adjustHeight:(e,t)=>{const a=e?e.getBoundingClientRect().height:"";"onEnter"===t?E(!0):"onEntering"===t?b(`${a}px`):"onEntered"===t&&setTimeout((()=>E(!1)),50)}};return l().createElement(e,ur({"data-core-tabs":"","data-core-tabs-transition-done":h?void 0:"",id:m},c),l().createElement(dd.Provider,{value:f},i))},pd=({rootTag:e="div",children:t,...a})=>l().createElement(e,ur({"data-core-tabs-tablist":"",role:"tablist"},a),t),gd=l().forwardRef((({index:e,onClick:t=(()=>{}),onKeyDown:a=(()=>{}),children:r,dir:n,...o},i)=>{const{selectedIndex:d,uid:m,doFocus:u,handleSelect:p,count:g}=md(),y=l().useMemo((()=>"rtl"===n||"rtl"===Ja()),[n]),h=(0,s.useRef)(null),E=za(h,i),v=d===e;(0,s.useEffect)((()=>{v&&h.current&&u.current&&(u.current=!1,h.current.focus())}),[v,u]);return l().createElement("button",ur({type:"button","data-core-tabs-tab":"","data-core-tabs-tab-selected":v?"":void 0,role:"tab",id:`tab-${m}-${e}`,tabIndex:v?0:-1,"aria-selected":v,"aria-controls":`panel-${m}-${e}`,onClick:a=>{p(e),t(a)},onKeyDown:t=>{((e,t,a,r,n)=>{let s,l,o;const i=a-1;switch(l=t>0?t-1:i,s=t<i?t+1:0,e.keyCode){case c.ArrowRight:return e.preventDefault(),o=n?l:s,r(o);case c.ArrowLeft:return e.preventDefault(),o=n?s:l,r(o);default:;}})(t,e,g,p,y),a(t)},ref:E},o),r)}));gd.displayName="Tab";const yd=({rootTag:e="div",children:t,...a})=>{const{height:r}=md();return l().createElement(e,ur({"data-core-tabs-panels":"",style:{height:r}},a),t)},hd=({index:e,onEnter:t=K().noop,onEntering:a=K().noop,onEntered:r=K().noop,children:n,...s})=>{const{uid:o,selectedIndex:i,adjustHeight:c}=md(),d=i===e;return l().createElement(Wr,ur({"data-core-tabs-panel":"","data-core-tabs-panel-selected":d?"":void 0,in:d,id:`panel-${o}-${e}`,role:"tabpanel","aria-labelledby":`tab-${o}-${e}`,onEnter:e=>{c(e,"onEnter"),t(e)},onEntering:e=>{c(e,"onEntering"),a(e)},onEntered:e=>{c(e,"onEntered"),r(e)},appear:!0},s),n)},Ed=({items:e,keys:t=[],attrs:a=[],classes:r={root:"",items:"",item:"",link:""},className:n,...s})=>{const{selectedIndex:o}=md();return l().createElement("div",{className:qa()("tabnav",n,r.root)},l().createElement(pd,ur({rootTag:"ul",className:qa()("tabnav-items",r.items)},s),e.map(((e,n)=>{const s=K().get(a,`[${n}]`,{});return l().createElement("li",{className:qa()("tabnav-item",r.item),role:"none",key:t[n]||e},l().createElement(gd,ur({index:n,className:qa()("tabnav-link",r.link,{current:o===n})},s),e))}))))},vd="base",bd="pill",fd={[bd]:{itemClass:"rc-tabpills-item",buttonClass:"button rc-tabpills-button",selectedClass:"rc-tabpills-selected",containerClass:"rc-tabpills-container",compactClass:"rc-tabpills-container-compact"},[vd]:{itemClass:"as-buttongroup-item",buttonClass:"as-buttongroup-button",selectedClass:"as-buttongroup-selected",containerClass:"as-buttongroup",compactClass:"as-buttongroup-compact"}},wd=({items:e,attrs:t=[],view:a=vd,compact:r,classes:n={root:"",item:"",button:""},className:s,prevChildItems:o,nextChildItems:i,...c})=>{const{selectedIndex:d}=md(),{itemClass:m,buttonClass:u,selectedClass:p,containerClass:g,compactClass:y}=fd[a];return l().createElement(pd,ur({rootTag:"ul",className:qa()(g,{[y]:r},s,n.root)},c),e.map(((e,a)=>{const r=K().get(t,`[${a}]`,{});return l().createElement("li",{className:qa()(m,n.item),role:"presentation",key:e},o&&K().get(o,`[${a}]`),l().createElement(gd,ur({index:a,className:qa()(u,{[p]:d===a},n.button)},r),e),i&&K().get(i,`[${a}]`))})))},Nd=ud,Sd=l().createContext({}),Cd=()=>{const e=l().useContext(Sd);if(!e)throw new Error("Scroller compound components cannot be rendered outside the Scroller component");return e},Td=(e,t,a,r)=>{if(!e.current)return{};const n=e.current,s=n.scrollLeft,l=n.offsetWidth,o=n.scrollWidth-l,i=n.children[0],c=Array.from(i.children).map((e=>{const t=((e,t)=>{if(t&&e._cachedComputedStyle)return e._cachedComputedStyle;const a=window.getComputedStyle(e);return e._cachedComputedStyle=a,a})(e,a),n=t.scrollSnapAlign||"",s=t.scrollSnapCoordinate||"",o=e.offsetLeft+e.offsetWidth-l;return 0===n.indexOf("end")||0===s.indexOf("100%")?r?-1*e.offsetLeft:o:0===n.indexOf("center")||0===s.indexOf("50%")?(r?-1:1)*(e.offsetLeft+e.offsetWidth/2-l/2):r?-1*o:e.offsetLeft})).filter((e=>e<o));c.push(o);const d=c.map(((e,t)=>({x:e,i:t,d:Math.abs(e-(r?-1:1)*s)}))),m=d.reduce(((e,t)=>t.d<e.d?t:e),d[0]),u=d.length,p=void 0!==t?t:m.i,g=Math.min(Math.max(p,0),u-1),y=d[g].x>0?d[g].x:0;return{index:g,newX:(r?-1:1)*y,count:u,deltaX:(r?-1:1)*s-y,scrollX:s,maxX:o}},Ld=(e,t)=>{let a,r;switch(t.type){case"SCROLL_INDEX":return a=Td(t.scrollerRef,t.targetIndex,t.cacheComputedStyle,t.isRTL),t.handleChange&&e.index!==a.index&&t.handleChange(a.index),{...e,index:a.index};case"SCROLL_TO":return a=Td(t.scrollerRef,t.targetIndex,t.cacheComputedStyle,t.isRTL),t.handleChange&&e.index!==a.index&&t.handleChange(a.index),{...e,...a};case"SCROLL_UPDATE":return a=Td(t.scrollerRef,e.index,t.cacheComputedStyle,t.isRTL),r=t.scrollerRef.current,r&&(r.style.overflowX="hidden",r.scrollLeft=a.newX,r.style.overflowX="scroll"),{...e,...a,deltaX:null};case"SCROLL_END":return e.deltaX||e.fixScroll?(r=t.scrollerRef.current,r&&(r.scrollLeft=e.newX),{...e,fixScroll:/transitionEnd$/i.test(t.eventType),deltaX:null}):e;case"MOUSE_DOWN":return{...e,mouseDown:!0};case"MOUSE_UP":return{...e,mouseDown:!1};default:return e}},kd=({index:e=0,handleChange:t,updateIndexWhileScrolling:a=!0,cacheComputedStyle:r=!0,dir:n})=>{const{touch:l}=A(),[o,i]=(0,s.useReducer)(Ld,{mouseDown:!1}),{count:c,fixScroll:d}=o,m=(0,s.useRef)(null),u=(0,s.useRef)(null),p=(0,s.useRef)(!1),g=(0,s.useRef)(0),y=(0,s.useRef)(0),h=(0,s.useRef)(0),E=(0,s.useMemo)((()=>"rtl"===n||"rtl"===Ja()),[n]);(0,s.useLayoutEffect)((()=>{c||i({type:"SCROLL_TO",scrollerRef:m,handleChange:t,targetIndex:e,cacheComputedStyle:r,isRTL:E})}),[]),(0,s.useLayoutEffect)((()=>{d&&i({type:"SCROLL_END",scrollerRef:m})}),[d]),(0,s.useEffect)((()=>{e!==o.index&&i({type:"SCROLL_TO",scrollerRef:m,handleChange:null,targetIndex:e,cacheComputedStyle:r,isRTL:E})}),[e]),(0,s.useEffect)((()=>{y.current=o.maxX}),[o.maxX]);const v=()=>{p.current=!0,setTimeout((()=>{i({type:"SCROLL_UPDATE",scrollerRef:m}),p.current=!1}),100)},b=V(v,300);$("orientationchange",v),$("resize",(()=>{l||b()}));const f=()=>{p.current||i({type:"SCROLL_INDEX",scrollerRef:m,handleChange:t,cacheComputedStyle:r,isRTL:E})},w=V(f,100);return{state:o,scrollerRef:m,scrollerPlatterRef:u,handleScroll:a?f:w,handleScrollUpdate:v,handleTransition:e=>{e.target===u.current&&i({type:"SCROLL_END",scrollerRef:m,eventType:e&&e.type})},slideTo:e=>{o.deltaX||i({type:"SCROLL_TO",scrollerRef:m,handleChange:t,targetIndex:e,cacheComputedStyle:r,isRTL:E})},handleMouseDown:e=>{const t=m.current;o.deltaX||p.current||!t||(i({type:"MOUSE_DOWN"}),g.current=e.pageX-t.offsetLeft,h.current=t.scrollLeft)},handleMouseUp:()=>{p.current||(i({type:"SCROLL_TO",scrollerRef:m,handleChange:t,cacheComputedStyle:r,isRTL:E}),setTimeout((()=>{i({type:"MOUSE_UP"})}),500))},handleMouseMove:e=>{const t=m.current;if(!p.current&&!o.deltaX&&o.mouseDown&&t){e.preventDefault();const a=1.25*(e.pageX-t.offsetLeft-g.current);t.scrollLeft=h.current-a}},handleMouseWheel:e=>{const t=m.current;if(!t)return;const a=t.scrollLeft,{deltaX:r}=e,n=(a+r)*(E?-1:1);("hidden"===t.style.overflowX||n<0||n>y.current)&&e.preventDefault()},isRTL:E}},Id=({index:e,defaultIndex:t=0,dragEnabled:a=!1,preventNavigation:r=!1,customSnap:n=!1,snapDelay:o=150,updateIndexWhileScrolling:i,cacheComputedStyle:c,handleChange:d=(()=>{}),dir:m,children:u})=>{const{current:p}=(0,s.useRef)(void 0!==e),[g,y]=(0,s.useState)(t),h=kd({index:p?e:g,handleChange:e=>p?setTimeout((()=>d(e)),10):y(e),updateIndexWhileScrolling:i,cacheComputedStyle:c,dir:m});return l().createElement(Sd.Provider,{value:{...h,preventNavigation:r,customSnap:n,snapDelay:o,dragEnabled:a}},u)},Ad=({platterAttrs:e={},scrollerItemAttrs:t,children:a,updateOnWidthChange:r,...n})=>{const{state:o,scrollerRef:i,scrollerPlatterRef:c,handleScroll:d,handleScrollUpdate:m,handleTransition:u,preventNavigation:p,customSnap:g,snapDelay:y,slideTo:h,dragEnabled:E,handleMouseDown:v,handleMouseUp:b,handleMouseMove:f,handleMouseWheel:w,isRTL:N}=Cd(),S=(0,s.useRef)(0),C=V((()=>h()),y),{touch:T,os:L}=A(),k={"data-core-scroller":"","data-core-scroller-customsnap":g||o.mouseDown?"":void 0,onScroll:o.deltaX?void 0:()=>{d(),g&&C()},onTransitionEnd:u,style:{overflowX:o.deltaX&&!o.mouseDown?"hidden":"scroll",scrollSnapType:o.deltaX?"unset":void 0},onMouseDown:E?v:void 0,onMouseUp:E?b:void 0,onMouseLeave:E?b:void 0,onMouseMove:E?f:void 0},I=Math.random()/10,P={ref:c,"data-core-scroller-platter":"","data-core-scroller-transition":o.deltaX?"":void 0,style:o.deltaX?{transform:`translate(${(N?-1*o.deltaX:o.deltaX)+I}px)`}:{},...e};return(0,s.useEffect)((()=>{const e=e=>w(e),{current:t}=i,a=p&&"macosx"===L&&!T;return t&&a&&t.addEventListener("wheel",e,{passive:!1}),()=>{t&&a&&t.removeEventListener("wheel",e)}}),[]),(0,s.useEffect)((()=>{if(r&&i.current){const{scrollWidth:e}=i.current;S.current&&S.current!==e&&m(),S.current=e}}),[a]),l().createElement("div",ur({ref:i},k,n),l().createElement("div",P,l().Children.map(a,(e=>l().createElement("div",ur({"data-core-scroller-item":""},t),e)))))},Pd=({inputId:e,classes:t={},children:a,...r})=>l().createElement("label",ur({htmlFor:e,className:qa()("form-selector-label",t.root)},r),a),Dd=({id:e,name:t,value:a,className:r,classes:n={},children:s,render:o,circle:i,tall:c,tag:d="li",tagAttrs:m,withAriaLabeledBy:u=!1,disabled:p,nonEditable:g,...y},h)=>{const E=l().useId(),v=e||E,b=u?`${v}_label`:void 0;return l().createElement(d,ur({className:qa()(r,"form-selector",n.root,{"form-selector-circle":i,"form-selector-tall":c,"form-selector-non-editable":g})},m),l().createElement("input",ur({className:qa()("form-selector-input",n.input),name:t,id:v,type:"radio",value:a,"aria-labelledby":b,ref:h,disabled:p||g},y)),"function"==typeof o?o({inputId:v,SelectorLabel:e=>l().createElement(Pd,ur({inputId:v,id:b},e))}):l().createElement(Pd,{id:b,classes:{root:n.label},inputId:v},s))},Od=l().forwardRef(Dd),xd=({id:e,className:t,children:a,withGutters:r=!1,tag:n="ul",...s})=>l().createElement(n,ur({id:e,className:qa()(t,r?"form-selector-group-withgutters":"form-selector-group")},s),a),Rd=(e,t)=>({onChange:a=>{t||e(a.target.value,a)},onClick:a=>{const r=document.documentElement.classList.contains(P);t&&!r&&e(a.target.value,a)},onKeyUp:a=>{const r=a.keyCode===c.Return||a.keyCode===c.Space;t&&r&&e(a.target.value,a)}}),Fd=({items:e,groupKey:t,groupLabel:a,id:r,dotNavFocus:n})=>{const{state:s,slideTo:o}=Cd(),i=l().useRef([]),d=e=>t=>{i.current&&(i.current[e]=t)},m=e=>{const t=i.current?i.current[e]:null;t&&t.focus()};return l().useEffect((()=>{if(n){const e=i.current?i.current[s.index]:null;e&&e.focus()}}),[n]),e.length>1?l().createElement("div",{className:"rf-engraving-dotnav dotnav"},l().createElement("ul",{role:"tablist",className:"dotnav-items"},e.map(((e,n)=>{const i=s.index===n;return l().createElement("li",{className:"dotnav-item",role:"presentation",key:`dotnav_${t}_${e.group}`},l().createElement("button",{ref:d(n),type:"button",role:"tab","data-core-scroller-current":i?"":void 0,className:qa()("dotnav-link",{current:i}),"aria-controls":`${r}-tab-item-${n}`,"aria-label":`${a} ${n+1}`,"aria-selected":i,tabIndex:i?0:-1,"data-autom":`scrollerButton${n}`,"data-trigger-id":`engraving-emoji-scroller-${n}`,onClick:()=>{o(n)},onKeyDown:e=>{switch(e.keyCode){case c.ArrowUp:case c.ArrowLeft:e.preventDefault(),s.deltaX||(o(n-1),m(n-1));break;case c.ArrowDown:case c.ArrowRight:e.preventDefault(),s.deltaX||(o(n+1),m(n+1))}}}))})))):""},Md=({bundleKey:e,groupKey:t,items:a,defaultIndex:r=0,fontIdx:n=0,selected:s="",groupLabel:o,dotNavFocus:i=!1,onHandleChange:c=(()=>{})})=>{const d=l().useId(),[m,u]=l().useState(r),p=`${t}_${e}_${n}`;return l().createElement("div",{className:"rf-engraving-scroller"},l().createElement(Id,{index:m,"aria-label":o,handleChange:u},l().createElement(Fd,{items:a,groupKey:t,groupLabel:o,id:d,dotNavFocus:i}),l().createElement("div",{className:"rf-engraving-scroller-crop"},l().createElement(Ad,{className:"rf-engraving-scroller-item",platterAttrs:{className:"rf-engraving-scroller-platter"}},a.map(((e,a)=>{const{group:r,options:n=[]}=e,i=a===m,u=n.length-1;return l().createElement("div",{key:`${t}_${r}`,id:`${d}-tab-item-${a}`,className:"rf-engraving-scroller-itemcontent",role:"tabpanel","data-autom":`engravingEmojis${r}`,"aria-label":i?`${o} ${a+1}`:void 0,"aria-hidden":!i||void 0},l().createElement(xd,{withGutters:!0,className:"row row-logical",role:"list"},n.map((({value:e,a11yText:t},a)=>l().createElement(Od,ur({name:`${p}_${r}`,value:e,key:`${p}_${r}_${e}`,checked:s===e,tagAttrs:{role:"listitem","data-option-index":`${p}_${r}_${a}`},className:"form-selector-singlecolumn column",role:"button"},Rd((e=>c(e)),!0),{onKeyDown:u>0&&(0===a||a===u)?()=>(({idx:e,group:t,length:a})=>{const r=0===e?a:0,n=document.querySelector(`[data-option-index="${p}_${t}_${r}"] input`);n&&n.focus()})({idx:a,group:r,length:u}):void 0,tabIndex:i?0:-1,"aria-hidden":!i||void 0,"aria-label":t,"data-trigger-id":`engraving-emoji-${e}`}),l().createElement("span",{"aria-hidden":"true",translate:"no"},e))))))}))))))},Bd=({bundleKey:e,bundleDisplayValue:t,engravingPageData:a,slotName:r,selection:n,font:s,fontIdx:o,fontDisplayType:i,onAddingMessage:c})=>{const{errors:d,hasError:m=!1}=n,{removeEmojiButton:u,emojiDisclaimer:p,emojiGroupLabel:g,loremLabel:y,errorMsg:h}=r,E=K().get(a,`engravingMessageBox${e}`,{}),{emojis:v={},selectedEmoji:b="",groupKey:f}=E,w=K().get(v,s,[]),[N,S]=l().useState(b),C=i===nc.MULTI_SELECT,T=K().get(d,"line1",""),L=d?T:m?h:"",{group:k=0}=i===nc.EMOJI&&K().find(w,(e=>e.options.filter((e=>e.value===N)).length>0))||{};return l().createElement("div",{className:"form-element"},l().createElement("div",{className:qa()(`rf-engraving-${s}`,{"rf-engraving-emoji-multiselect":C}),id:`rf-engraving-emoji-${f}`},l().createElement(Md,{bundleKey:e,groupKey:f,items:w,defaultIndex:k,fontIdx:o,selected:C?"":N,groupLabel:C?y:g,onHandleChange:a=>{const r=C?N.concat(a):a;S(r),c({bundleKey:e,bundleDisplayValue:t,font:s,fontIdx:o,fields:w,fieldVals:r})}}),l().createElement("div",{className:`rf-engraving-remove ${nd.BODY}`},l().createElement(Wr,{in:!!N,role:"tabpanel"},l().createElement("button",{type:"button",onClick:()=>(S(""),void c({bundleKey:e,bundleDisplayValue:t,font:s,fontIdx:o,fields:w,fieldVals:"",emojiRemoved:!0})),className:"as-buttonlink"},u))),l().createElement("div",{className:qa()({"is-error":!!L})},l().createElement(po,{error:L,errorAttrs:{"data-autom":"engraveValidationMsg"},"aria-live":"polite"})),p&&l().createElement("div",{className:"rf-engraving-emojidisclaimer"},l().createElement("p",Ya(p)))))},_d=Object.freeze({SET_FIELD_VALUE:"SET_FIELD_VALUE",SET_FIELD_TOUCHED:"SET_FIELD_TOUCHED",SET_FIELD_ERROR:"SET_FIELD_ERROR",SET_ERRORS:"SET_ERRORS",SET_TOUCHED:"SET_TOUCHED",SET_VALUES:"SET_VALUES",SET_STATUS:"SET_STATUS",SET_ISSUBMITTING:"SET_ISSUBMITTING",SET_ISVALIDATING:"SET_ISVALIDATING",SUBMIT_ATTEMPT:"SUBMIT_ATTEMPT",SUBMIT_FAILURE:"SUBMIT_FAILURE",SUBMIT_SUCCESS:"SUBMIT_SUCCESS",RESET:"RESET",RESET_FIELD:"RESET_FIELD"}),$d=(e,t)=>K().get(e,t),Ud=(e,t,a)=>{const r=K().clone(e);return K().set(r,t,a),r},Kd=(e,t)=>{const a=K().clone(e);return K().unset(a,t),a},Vd=e=>{const t=l().useRef(e);return l().useLayoutEffect((()=>{t.current=e})),l().useCallback(((...e)=>t.current.apply(void 0,e)),[])},Hd=(e,t)=>{let a={};return Object.keys(e).forEach((r=>{const n=e[r];if(Array.isArray(n))if(!Array.isArray(n)||(s=n)&&Array.isArray(s)&&s.reduce(((e,t)=>e&&"type"in t),!0)){const e=$d(t,r),s=n?((e,t)=>t.reduce(((t,a)=>{if(t)return t;if("required"===a.type.toLowerCase())return e?t:a.message;if("regex"===a.type.toLowerCase())return a.regEx&&e?a.regEx.reduce(((t,a)=>Boolean(e.match(a))||t),!1)?t:a.message:t;if("invalid-regex"===a.type.toLowerCase())return a.regEx&&e?a.regEx.reduce(((t,a)=>!e.match(a)&&t),!0)?t:a.message:t;if("maxlength"===a.type.toLowerCase()){const r=K().get(a,"restrictions.maxLength");return r&&e?e.length<=r?t:a.message:t}if("maxlines"===a.type.toLowerCase()){const r=K().get(a,"restrictions.maxLines");return r&&e?e.split("\n").length<=r?t:a.message:t}if("range"===a.type.toLowerCase()){const r=K().get(a,"restrictions.maxVal"),n=K().get(a,"restrictions.minVal");if(!r||!n||!e)return t;const s=parseFloat(e.replace(/,/g,""));return s>=n&&s<=r?t:a.message}return console.warn(`WARNING: useForm validation rule type '${a.type}' is not supported`),t}),""))(e,n):"";s&&(a=Ud(a,r,s))}else{const e=[];n.forEach(((a,n)=>{const s=Hd({field:a},{field:t[r]&&t[r][n]});s.field&&(e[n]=s.field)})),Object.keys(e).length>0&&(a=Ud(a,r,e))}else{const e=Hd(n,t[r]);Object.keys(e).length>0&&(a=Ud(a,r,e))}var s})),a},jd=function(e,t){switch(t.type){case _d.SET_FIELD_VALUE:return{...e,values:Ud(e.values,t.payload.field,t.payload.value)};case _d.SET_FIELD_TOUCHED:return{...e,touched:Ud(e.touched,t.payload.field,t.payload.value)};case _d.SET_FIELD_ERROR:return{...e,errors:Ud(e.errors,t.payload.field,t.payload.value)};case _d.SET_VALUES:return{...e,values:t.payload};case _d.SET_TOUCHED:return{...e,touched:t.payload};case _d.SET_ERRORS:return{...e,errors:t.payload};case _d.SUBMIT_ATTEMPT:return{...e,isSubmitting:!0,touched:Object.keys(e.values).reduce(((e,t)=>(e[t]=!0,e)),{})};case _d.SUBMIT_FAILURE:return{...e,isSubmitting:!1,submitError:t.payload};case _d.SUBMIT_SUCCESS:return{...e,isSubmitting:!1};case _d.RESET:return{values:t.payload,errors:{},touched:{}};case _d.RESET_FIELD:return{...e,values:Ud(e.values,t.payload.field,t.payload.value),errors:Kd(e.errors,t.payload.field),touched:Kd(e.touched,t.payload.field)};case _d.SET_ISSUBMITTING:return{...e,isSubmitting:t.payload};case _d.SET_ISVALIDATING:return{...e,isValidating:t.payload};case _d.SET_STATUS:return{...e,status:t.payload};default:return e}},Gd=function({initialStatus:e,initialValues:t={},initialErrors:a={},initialTouched:r={},validate:n,validationSchema:s,validateOnChange:o=!0,validateOnBlur:i=!0,focusOnFailedSubmit:c=!0,onSubmit:d=(()=>{})}){const[m,u]=l().useReducer(jd,{status:e,values:t,errors:a,touched:r}),p=l().useRef({}),g=l().useCallback((e=>new Promise(((t,a)=>{const r=n?n(e):{};var s;r?null!==(s=r)&&"object"==typeof s&&"function"==typeof s.then?r.then((e=>t(e||{}))).catch((e=>a(e))):t(r):t({})}))),[n]),y=l().useCallback((e=>new Promise((t=>{const a=s?Hd(s,e):{};t(a||{})}))),[s]),h=l().useCallback((e=>Promise.all([g(e),y(e)]).then((([e,t])=>K().merge(e,t)))),[g,y]),E=l().useCallback((e=>{u({type:_d.SET_ISVALIDATING,payload:!0}),h(e).then((e=>{u({type:_d.SET_ERRORS,payload:e}),u({type:_d.SET_ISVALIDATING,payload:!1})}))}),[h]),v=l().useCallback((e=>{u({type:_d.SET_VALUES,payload:e})}),[]),b=l().useCallback((e=>{u({type:_d.SET_TOUCHED,payload:e})}),[]),f=l().useCallback((e=>{u({type:_d.SET_ERRORS,payload:e})}),[]),w=Vd(((e,t)=>{o&&E(Ud(m.values,e,t)),u({type:_d.SET_FIELD_VALUE,payload:{field:e,value:t}})})),N=Vd(((e,t)=>{u({type:_d.SET_FIELD_TOUCHED,payload:{field:e,value:t}}),i&&E(m.values)})),S=l().useCallback(((e,t)=>{u({type:_d.SET_FIELD_ERROR,payload:{field:e,value:t}})}),[]),C=Vd((e=>{u({type:_d.SET_ISVALIDATING,payload:!0}),h(m.values).then((t=>{u({type:_d.SET_FIELD_ERROR,payload:{field:e,error:t[e]}}),u({type:_d.SET_ISVALIDATING,payload:!1})}))})),T=Vd((()=>{u({type:_d.SET_ISVALIDATING,payload:!0}),h(m.values).then((e=>{u({type:_d.SET_ERRORS,payload:e}),u({type:_d.SET_ISVALIDATING,payload:!1})}))})),L=l().useCallback((e=>{u({type:_d.RESET_FIELD,payload:{field:e,value:$d(t,e)}})}),[t]),k=l().useCallback((()=>{u({type:_d.RESET,payload:t})}),[t]),I=l().useCallback((e=>{u({type:_d.SET_ISSUBMITTING,payload:e})}),[]),A=l().useCallback((e=>{u({type:_d.SET_ISVALIDATING,payload:e})}),[]),P=l().useCallback((e=>{u({type:_d.SET_STATUS,payload:e})}),[]),D={setValues:v,setTouched:b,setErrors:f,setFieldValue:w,setFieldError:S,setFieldTouched:N,setIsSubmitting:I,setIsValidating:A,setStatus:P,resetField:L,resetForm:k},O=Vd((()=>{u({type:_d.SUBMIT_ATTEMPT}),h(m.values).then((e=>{if(Object.keys(e).length)u({type:_d.SET_ERRORS,payload:e}),u({type:_d.SUBMIT_FAILURE}),c&&(e=>{const t=Object.keys(e)[0];if(!t||!p.current)return;const a=p.current[t];a&&a.focus()})(e);else try{d(m.values,D),u({type:_d.SUBMIT_SUCCESS})}catch(e){u({type:_d.SUBMIT_FAILURE,payload:e})}}))})),x=l().useCallback((e=>{e.persist();const t=e.target,a="checkbox"===t.type?t.checked:t.value;w(t.name,a)}),[w]),R=l().useCallback((e=>{const t=e.target;N(t.name,!0)}),[N]),F=Vd((e=>{e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),O()})),M=l().useMemo((()=>!K().isEqual(m.values,t)),[m.values,t]),B=0===Object.keys(m.errors).length;return{values:m.values,errors:m.errors,touched:m.touched,isSubmitting:m.isSubmitting,isValidating:m.isValidating,status:m.status,submitError:m.submitError,isValid:B,isDirty:M,handleChange:x,handleBlur:R,handleSubmit:F,fieldProps:e=>({name:e,value:m.values[e],onChange:x,onBlur:R}),setValues:v,setErrors:f,setTouched:b,setFieldValue:w,setFieldError:S,setFieldTouched:N,validateField:C,validateForm:T,resetField:L,resetForm:k,submitForm:O,setIsSubmitting:I,setIsValidating:A,setStatus:P,fieldRegistryRef:p,registerFieldRef:e=>{e&&e.name&&p.current&&(p.current[e.name]=e)}}},Wd=document.documentElement.lang||"en-US",qd=({bundleKey:e,bundleDisplayValue:t,engravingPageData:a,slotName:r,selection:n,font:s,fontIdx:o=0,fontFamily:i,showEmojiPicker:c=!1,onAddingMessage:d,disabled:m=!1,disclaimerId:u="",clearField:p})=>{const{errors:g,hasError:y=!1}=n,{assets:h}=z(),E=K().get(n,"messagesA11y",[]),{errorMsg:v,textEmojiGroupLabel:b,regionalLangMessage:f="",addedA11yText:w="",skipUpperCaseGEOS:N="th-TH,zh-CN,ko-KR,ja-JP,en-IN,zh-HK"}=r,S=N.split(","),C=K().get(r,"labelArray.items"),T=K().get(a,"bundles",[]),L=K().get(a,`engravingMessageBox${e}.lines`,[]),k=K().get(L,"0.name",""),I=K().get(a,`engravingMessageBox${e}.groupKey`),A=K().get(a,`engravingMessageBox${e}.emojis.${s}`,[]),P=K().get(a,`fonts${e}.${o}.defaultValue`,[]),D=f?"engraving-regionallang-disclaimer":"",{initialValues:O}=l().useMemo((()=>(e=>({initialValues:K().reduce(e,((e,t,a)=>(e[`line${a+1}`]=t,e)),{})}))(sc(n.font)?[]:n.messages)),[n.font,n.messages]),{values:x,setFieldValue:R}=Gd({initialValues:O}),F=l().useRef({}),[M,B]=hr({resetDelay:4e3}),[_,$]=l().useState(k),U=L.length>1,V=K().get(a,"engravingMessageBox.engravingInUpperCaseOnly"),H=U&&c,[j,G]=l().useState(!1),W=a=>{a.persist();const r=a.target,{name:n,value:l}=r;let c=l;V?S.indexOf(Wd)<0?c=((e,t)=>{const a=e.selectionStart,r=e.selectionEnd,n=e.value.toLocaleUpperCase(Wd);if(t(e.name,n),n){const t=n.length;window.setTimeout((()=>{e.setSelectionRange(a+t,r)}),0)}return n})(r,R):(R(n,l),c=l.toLocaleUpperCase(Wd)):R(n,l);const m={...x,[n]:c};d({bundleKey:e,bundleDisplayValue:t,font:s,fontIdx:o,fontFamily:i,fields:L,fieldVals:m})},q=e=>{const{name:t,value:a}=e.target,r=K().get(F,`current.${t}`);if(13===e.keyCode&&(e.preventDefault(),$(t),G(!0),a)){const e=a.length;r.setSelectionRange(e,e)}};return l().useEffect((()=>{p&&L.forEach((e=>R(e.name,"")))}),[p]),l().createElement("div",{className:"rf-engraving-messagebox"},l().createElement("div",{className:qa()({"rf-engraving-singleline":!U&&!c,"rf-engraving-multilines":U,"rf-engraving-mixedtext":c,"rf-engraving-form-error":g,[`rf-engraving-${i}`]:!!i})},L.map(((a,r)=>{const{name:n,label:p}=a,y=T.length>1?K().get(C,`${e}.value`,p):p,v=x[n]?"":`${u} ${D}`;return l().createElement("div",{className:"field-wrapper",key:`${n}_${o}`,"data-autom":`Engrave-labelLine${r+1}`},l().createElement(ri,{name:n,label:y,autoComplete:"off",error:g?g[n]:"",value:x[n]||"",onChange:W,onFocus:()=>{H&&j?G(!1):$(n)},onKeyDown:H?q:void 0,onReset:()=>(a=>{R(a,"");const r={...x,[a]:""},n=K().get(F,`current.${a}`);d({bundleKey:e,bundleDisplayValue:t,font:s,fontIdx:o,fontFamily:i,fields:L,fieldVals:r}),n&&n.focus()})(n),resetAttrs:{"aria-label":U?`${h.reset} ${p}`:h.reset,"data-autom":U?`removeEngrave${r+1}`:"removeEngrave","data-trigger-id":U?`remove-engrave${r+1}`:"remove-engrave"},errorAttrs:{"data-autom":U?`engraveValidationMsg${r+1}`:"engraveValidationMsg"},"aria-describedby":`${v} engraving-message-${n}`,"data-autom":`Engrave${n}`,disabled:m,ref:e=>{F.current[n]=e}}),_===n&&M?l().createElement(yr,{message:`${y} ${M} ${w}`}):null,c&&l().createElement("div",{id:`engraving-message-${n}`,className:"visuallyhidden","aria-hidden":"true"},E[r]?l().createElement("span",null,y):null,l().createElement("span",null,E[r]||"")))})),l().createElement("div",{className:qa()({"is-error":y})},l().createElement(po,{error:y?v:"",errorAttrs:{"data-autom":"engraveValidationMsg"},"aria-live":"polite"})),c&&l().createElement("div",{className:`rf-engraving-${s}`},l().createElement(Md,{bundleKey:e,groupKey:I,items:A,groupLabel:b,fontIdx:o,dotNavFocus:j,onHandleChange:a=>{const r=_,n=K().get(x,r,""),l=K().get(F,`current.${r}`),c=l.selectionStart;let m=n?n.substring(0,c)+a+n.substring(c):a;if(a&&!j){const e=a.length;window.setTimeout((()=>{l.setSelectionRange(c+e,c+e),l.focus()}),0)}R(r,m),V&&S.indexOf(Wd)>=0&&(m=m.toLocaleUpperCase(Wd));const u={...x,[r]:m};d({bundleKey:e,bundleDisplayValue:t,font:s,fontIdx:o,fontFamily:i,fields:L,fieldVals:u}),B(((e,t)=>{if(!K().isEmpty(t)){const a=t.find((t=>t.value===e));return a?a.a11yText:e}return e})(a,P))}}))))},Yd=({bundleKey:e,bundleDisplayValue:t="",engravingPageData:a,slotName:r={},selection:n,selectedTab:s,onTabChange:o,validateEngravingMsg:i,onAddingMessage:c,disabled:d=!1,disclaimerId:m=""})=>{const{fontChoiceLegendA11yText:u,fontChoiceA11yText:p,emojiChoiceA11yText:g,regionalLangMessage:y="",engravingFooterDisclaimer:h=""}=r,E=K().get(a,`fonts${e}`,[]),v=K().get(a,`engravingMessageBox${e}`,{}),{lines:b=[],selectedEmoji:f="",emojis:w={}}=v,N=E.length>1,S=`${u} ${an(t)}`,{font:C=""}=n,{fontIdx:T=0,fontName:L="",fontDisplayType:k,fontFamily:I=""}=E[s]||{},A=!!E.find((e=>e.fontDisplayType===nc.EMOJI_TEXT)),P=!(!N&&!A)&&Object.keys(w).some((e=>w[e].length>1)),D={bundleKey:e,bundleDisplayValue:t,engravingPageData:a,slotName:r,selection:n,onAddingMessage:c,font:C,disabled:d,disclaimerId:m};return l().createElement(l().Fragment,null,l().createElement("div",{className:qa()("rf-engraving-form",{"rf-engraving-form-withtab":N,"rf-engraving-form-textandemoji":A,"rf-engraving-form-withdots":P})},N&&l().createElement(l().Fragment,null,l().createElement("fieldset",{disabled:d},l().createElement("legend",{className:"visuallyhidden"},S),l().createElement(Nd,{className:"rf-engraving-tabs",handleChange:a=>(({fontName:a,fontFamily:r},n)=>{let s="";o(n),s=sc(a)?f:b.reduce(((e,t)=>(e[t.name]=t.value,e)),{}),i({bundleKey:e,bundleDisplayValue:t,fields:b,font:a,fontIdx:T,fontFamily:r,fieldVals:s})})(E[a],a),defaultIndex:T,count:E.length},l().createElement(Ed,{classes:{root:"rf-engraving-tabnav",item:"rf-engraving-tabnav-item",link:"rf-engraving-tabnav-link"},keys:E.map((e=>e.fontName)),items:E.map((e=>l().createElement(l().Fragment,null,e.fontLabel,l().createElement("span",{className:"visuallyhidden"},sc(e.fontName)?g:p))))}),l().createElement(yd,{className:qa()("rf-engraving-tabpanels")},E.map((e=>l().createElement(hd,{index:e.fontIdx,key:e.fontName,className:"rf-engraving-tabpanel"},e.fontDisplayType===nc.EMOJI||e.fontDisplayType===nc.MULTI_SELECT?l().createElement(Bd,ur({},D,{font:e.fontName,fontIdx:e.fontIdx,fontFamily:e.fontFamily,fontDisplayType:e.fontDisplayType})):l().createElement(qd,ur({},D,{font:e.fontName,fontIdx:e.fontIdx,fontFamily:e.fontFamily,showEmojiPicker:e.fontDisplayType===nc.EMOJI_TEXT}))))))))),!N&&l().createElement(qd,ur({},D,{font:L,fontFamily:I,fontIdx:T,showEmojiPicker:k===nc.EMOJI_TEXT}))),y&&l().createElement("div",ur({id:"engraving-regionallang-disclaimer",className:`rf-engraving-regionallang-disclaimer ${nd.CAPTION}`},Ya(y))),h&&l().createElement("div",ur({className:`rf-engraving-footer-disclaimer ${nd.CAPTION}`},Ya(h))))},zd=l().forwardRef((({bundleKey:e,bundleDisplayValue:t,engravingPageData:a,slotName:r,selection:n={},selectedTab:s,showVideo:o,additionalParam:i},c)=>{const d={},m=K().get(a,"dynamicImage",{}),u=K().get(a,`fonts${e}`,[]),p=u.length?u[s]:"",g=K().cloneDeep(m),y=K().get(g,"srcSet.src"),h={},E=K().get(g,"alt"),v=K().get(g,"defaultAXMessagePartial","");g.alt=dn(E,{message:v});let b=n.messages&&n.messages[0]||"",f=n.messages&&n.messages[1]||"";const w=n.messagesA11y&&n.messagesA11y[0]||"",N=n.messagesA11y&&n.messagesA11y[1]||"";d.th=b,d.tl=f;const S=K().get(r,"defaultValueArray.items"),C=K().get(r,"defaultValue",""),T=sc(p.fontName),L=K().get(r,"transparentBg",!1);""===b&&""===f?(b=K().get(S,"0.value")||C,f=K().get(S,"1.value")||"",T||(d.th=b,d.tl=f)):g.alt=dn(E,{message:`${w} ${N}`});const k=n.font?n.font:p.fontName,I=k?{f:k,...i}:{...i};if(y&&g){const e=on(y,{...d,...I});h.src=e}const{scaleParams1x:A,scaleParams2x:P}=((e={},t,a)=>{const{scaleParams1:r,scaleParams2:n}=e;return{scaleParams1x:r?rn({...nn(r),...t,...a}):null,scaleParams2x:n?rn({...nn(n),...t,...a}):null}})(g.srcSet,d,I);A&&(h.scaleParams1=A),P&&(h.scaleParams2=P);const D=K().get(h,"src",""),{src1x:O,src2x:x}=l().useMemo((()=>(e=>{if(!e||!e.src)return{};const[t,a]=e.src.split("?"),r=a?nn(a):{};return{src1x:e.scaleParams2?on(t,r):on(t,nn(e.scaleParams1||"")),src2x:e.scaleParams1?on(t,r):on(t,nn(e.scaleParams2||""))}})(h)),[D]),R=x||O;return l().createElement("div",{className:qa()("rf-engraving-image-wrapper",{"rf-engraving-transparent-wrapper":L}),ref:c},l().createElement("div",ur({className:"rf-engraving-displayvalue"},Ya(t))),g&&R&&l().createElement("img",{width:g.width,height:g.height,alt:g.alt||"",src:R,className:qa()("rf-engraving-image",{"rf-engraving-image-hidden":o}),"data-autom":"preview-image"}))}));zd.displayName="ImageView";const Xd=({data:e,onVideoEnded:t,showVideo:a,videoRef:r,slotName:n})=>{const{alt:s,...o}=e,i={autoPlay:!0,muted:!0,playsInline:!0,"aria-hidden":!0,title:s,...K().omit(o,["poster","format"])},c=K().get(n,"transitionDuration",700);return l().createElement(Wr,{in:a,timeout:c,className:"rf-engraving-media-wrapper"},l().createElement(Zi,ur({ref:r,className:"rf-engraving-media"},i,{onEnded:t,onStalled:t,onError:t,onContextMenu:e=>e.preventDefault()})))},Jd=({isSaving:e,showVideo:t,saveButtonRef:a,slotName:r,saveEngrave:n,cancelEngrave:s,selection:o})=>{const i=K().get(r,"saveButton","Save"),c=K().get(r,"cancelButton","Cancel"),d=(o?o.filter((e=>!!e.errors||e.hasError)):[]).length>0;return l().createElement("div",{className:"rf-engraving-actions"},l().createElement("div",{className:"rf-engraving-save"},l().createElement("button",ur({type:"button",className:qa()("button","button-super","button-block",{"as-button-isloading":e}),ref:a,disabled:d||e||t,"data-autom":"engraving-save","data-trigger-id":"engraving-save",onClick:()=>n(!0)},Ya(i)))),l().createElement("div",{className:"rf-engraving-cancel"},l().createElement("button",ur({type:"button",className:"as-buttonlink",disabled:e,"data-autom":"engraving-cancel","data-trigger-id":"engraving-cancel",onClick:()=>s()},Ya(c)))))},Zd=({ariaLabel:e})=>{const t=l().useRef(null),a=l().useRef(null);return l().useEffect((()=>(a.current=document.activeElement,t.current&&t.current.focus(),()=>{a.current&&a.current.focus()})),[]),l().createElement("div",{className:"column large-12 small-12 rf-engraving-overlay-spinner"},l().createElement("div",{ref:t,role:"img",tabIndex:-1,className:"waitindicator waitindicator40-blue","aria-label":e}))},Qd=({bundleProps:e,videoProps:t={}})=>{const{data:a,showVideo:r}=t,n=K().get(a,"src"),s=K().get(e,"selection.font",""),o=K().get(e,`engravingPageData.fonts${e.bundleKey}`,[]),i=s?K().findIndex(o,{fontName:s}):0;return l().createElement("div",{className:qa()({"rf-engraving-media-content":!!n})},l().createElement(zd,ur({},e,{selectedTab:i,showVideo:r})),n&&l().createElement(Xd,t))},em=({bundleProps:e,bundleItem:t=!1,videoProps:a={},validateEngravingMsg:r,onAddingMessage:n,disabled:s=!1,disclaimerId:o=""})=>{const{showVideo:i}=a,c=K().get(e,"selection.font",""),d=K().get(e,`engravingPageData.fonts${e.bundleKey}`,[]),m=c?K().findIndex(d,{fontName:c}):0,[u,p]=l().useState(m),g=K().get(d,`${u}.fontDisplayType`,"");return l().createElement(gs,{disabled:i,className:qa()("rf-engraving-content",{"rf-engraving-content-disabled":i,"rf-engraving-content-emojitext":g===nc.EMOJI_TEXT,"rf-engraving-content-hide":t&&s})},l().createElement(Yd,ur({},e,{validateEngravingMsg:r,onAddingMessage:n,selectedTab:u,onTabChange:p,disabled:s||i,disclaimerId:o})))},tm=({bundleProps:e,videoProps:t={},validateEngravingMsg:a,onAddingMessage:r,disabled:n=!1,disclaimerId:s=""})=>l().createElement(l().Fragment,null,l().createElement(Qd,{bundleProps:e,videoProps:t}),l().createElement(em,{bundleProps:e,videoProps:t,validateEngravingMsg:a,onAddingMessage:r,disabled:n,disclaimerId:s})),am=({engravingPageData:e,slotName:t,selection:a,validateEngravingMsg:r,onAddingMessage:n,selectedBundleKey:s,disclaimerId:o=""})=>{const i=K().get(e,"bundles",[]),[c,d]=l().useState(s),{viewport:m}=z(),u="small"===m,[p,g]=hr();return l().createElement(l().Fragment,null,l().createElement("div",{className:qa()("with-paddlenav",{"rf-engraving-bundle-oneitem":1===i.length})},l().createElement(yr,{message:p}),l().createElement(cd,{items:i,dotnav:!1,defaultIndex:c,onChange:e=>{d(e),g(K().get(i,`${e}.overlayBundleDisplayValue`,""))},paddlenav:!u,paddlenavProps:{compact:!1},swipableProps:{trackTouch:!0},classes:{root:"rf-engraving-bundle-gallery",gallery:"rf-engraving-bundle",scroller:"rf-engraving-bundle-scroller"},renderItem:(s,o)=>{const{key:i=0,overlayBundleDisplayValue:d=""}=s,m=i===c,u={bundleKey:i,bundleDisplayValue:d,selection:a[i],engravingPageData:e,slotName:t};return l().createElement(ed,{key:o,index:o,className:qa()("rf-engraving-bundle-item",{"rf-engraving-bundle-selecteditem":m,"rf-engraving-bundle-nonselecteditem":!m})},l().createElement("div",{className:"rf-engraving-bundle-box"},l().createElement(Qd,{bundleProps:u,validateEngravingMsg:r,onAddingMessage:n,disabled:!m})))},a11y:{label:t.engravingA11yText,items:i.map((e=>e.bundleDisplayValue))}})),i.map((s=>{const{key:i=0,bundleDisplayValue:d}=s,m=i===c,u={bundleKey:i,bundleDisplayValue:d,selection:a[i],engravingPageData:e,slotName:t};return l().createElement(em,{key:i,bundleProps:u,validateEngravingMsg:r,onAddingMessage:n,disabled:!m,disclaimerId:o,bundleItem:!0})})))},rm=e=>{const{visible:t,showContent:a,showVideo:r,videoRef:n,saveButtonRef:s,onClose:o,data:i,isFetching:c,error:d,saveEngrave:m,cancelEngrave:u,validateEngravingMsg:p,onAddingMessage:g,onVideoEnded:y,selectedBundleKey:h,additionalParam:E}=e,v=l().useId(),{isSaving:b,slotName:f,selection:w,isBundleEngraving:N}=i,{engravingPageData:S,engravingVideo:C}=K().get(i,"engravingDetails",{}),T=K().get(S,"bundles",[]),{engravingHeader:L,engravingDisclaimer:k="",keyboardHintText:I=""}=f||{},{key:A=0,bundleDisplayValue:D=""}=T[0]||{},O=K().get(S,`engravingMessageBox${A}.lines`,{}),x=!!K().get(S,`fonts${A}`,[]).find((e=>e.fontDisplayType===nc.EMOJI_TEXT)),R=document.documentElement.classList.contains(P),F=O.length>1&&x,M={bundleKey:A,bundleDisplayValue:D,selection:w?w[A]:{},engravingPageData:S,slotName:f,additionalParam:E},B={data:C,videoRef:n,showVideo:r,onVideoEnded:y,slotName:f},_=l().useRef(null);return l().createElement(is,{visible:t,classes:{root:qa()("rf-engraving-overlay",{"rf-engraving-overlay-bundle":N}),content:"rf-engraving-overlay-content"},noPadding:!0,fixedWidth:!0,ariaLabel:"rf-engraving-overlay-label","data-autom":"Engrave-overlay",onClose:()=>o(),onEntered:()=>{_.current.scrollTop>0&&(_.current.scrollTop=0)},ref:_,appear:!0},K().isEmpty(d)?l().createElement("div",{className:"rf-engraving-overlay-contentsection"},c?l().createElement(Zd,{ariaLabel:"loading"}):l().createElement(l().Fragment,null,l().createElement("h2",ur({className:`rf-engraving-overlay-header ${nd.HEADLINE}`,id:"rf-engraving-overlay-label","data-autom":"engraving-overlay-header"},Ya(L))),k&&l().createElement("div",{className:"rf-engraving-textdisclaimer"},l().createElement("p",{id:`${v}-engraving-disclaimer`,className:`rf-engraving-disclaimer ${nd.BODY}`,"data-autom":"engraving-disclaimer"},l().createElement("span",Ya(k)),F?l().createElement("span",ur({className:qa()({visuallyhidden:!R})},Ya(I))):null)),a&&l().createElement("div",{className:"rf-engraving-selecteditem"},N?l().createElement(am,{engravingPageData:S,slotName:f,selection:w,validateEngravingMsg:p,onAddingMessage:g,selectedBundleKey:h,disclaimerId:`${v}-engraving-disclaimer`}):l().createElement(tm,{bundleProps:M,videoProps:B,validateEngravingMsg:p,onAddingMessage:g,disclaimerId:`${v}-engraving-disclaimer`})),l().createElement(Jd,{isSaving:b,showVideo:r,saveButtonRef:s,slotName:f,selection:w,saveEngrave:m,cancelEngrave:u}))):l().createElement("div",{className:"rf-engraving-overlay-contentsection"},l().createElement("div",ur({className:`rf-engraving-overlay-error ${nd.HEADLINE}`},Ya(d.message)))))},nm=({isEngraved:e,isBundle:t,engravingSubtitle:a,engravingEditMessage:r,engravingPrice:n,engravingLines:s,isEditable:o,addButton:i,editButton:c,removeButton:d})=>{const m=!t&&o&&e,u=o&&!e,p=!t&&d,{assets:g,viewport:y}=z(),h=e?g.yourEngraving:g.engraving,E="small"===y;return l().createElement("div",{className:"rs-iteminfo-child"},l().createElement("div",{className:"row rs-iteminfo-child-content rs-iteminfo-child-engraving"},l().createElement("div",{className:"column large-12 as-icondetails"},l().createElement("div",ur({className:"as-icondetails-icon as-svgicon-container"},Ya('<svg viewBox="0 0 25 25" class="as-svgicon as-svgicon-engraving as-svgicon-reduced as-svgicon-engravingreduced" role="img" aria-hidden="true" width="25px" height="25px"><path fill="none" d="M0 0h25v25H0z"/><path d="M12.5 22.05a9.55 9.55 0 1 1 9.55-9.55 9.561 9.561 0 0 1-9.55 9.55Zm0-18a8.45 8.45 0 1 0 8.45 8.45 8.46 8.46 0 0 0-8.45-8.45Z"/><path d="M16.5 15h-8a.5.5 0 0 1 0-1h8a.5.5 0 0 1 0 1ZM18 11H7a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1Z"/></svg>'))),l().createElement("div",{className:"as-icondetails-detail rs-iteminfo-icondetails-detail"},l().createElement("div",{className:"rs-iteminfo-child-wrapper"},l().createElement("p",{className:"rs-iteminfo-child-title"},l().createElement("span",{className:"rs-iteminfo-child-titletext"},h)),!e&&a&&l().createElement("p",ur({className:"rs-iteminfo-child-tagline"},Ya(a))),e&&l().createElement("div",{className:qa()("rs-iteminfo-child-tagline",{"rs-iteminfo-engraving-with-message":!t&&r})},s),m&&l().createElement("div",{className:"rs-iteminfo-child-divider"},c),e&&r&&l().createElement("div",{className:qa()({"rs-iteminfo-child-tagline":E},{"rs-iteminfo-child-divider":!E})},l().createElement("div",ur({className:"rs-iteminfo-engraving-edit-message"},Ya(r))),!E&&p&&l().createElement("div",{className:"rs-engraving-removebutton"},d)),E&&p&&l().createElement("div",{className:"rs-iteminfo-child-divider"},d),l().createElement("div",{className:"rs-iteminfo-child-actions"},e&&l().createElement("p",{className:"rs-iteminfo-child-price"},n),u&&i))))))},sm=()=>{const{assets:e}=z();return(0,pr.createPortal)(l().createElement("div",{className:"rs-engravingedit-spinner"},l().createElement("div",{role:"img",className:"waitindicator waitindicator40-gray","aria-label":e.processing})),document.getElementById("portal")||document.body)},lm=({label:e,allyText:t,url:a,onClick:r=K().noop,sendOmniEvent:n=K().noop,className:s,...o})=>{const i=qa()("as-buttonlink",s);if(a)return l().createElement("a",ur({className:i,href:a},o),l().createElement("span",{"aria-hidden":"true"},e),l().createElement("span",{className:"visuallyhidden"},t));return l().createElement("button",ur({type:"button",className:i,"aria-label":t,onClick:()=>{r(),n()}},o),e)},om=({isBundle:e,isEditable:t,isRemovableOnly:a,isEngravingImage:r,lines:n=[],addActionProps:s,editActionProps:o,removeActionProps:i,handleOpenOverlay:c,removeEngrave:d,messagesA11yText:m})=>{const u=Boolean(n.length),p=Boolean(m.length),{assets:g}=z();return u?e?l().createElement("div",{className:"rs-iteminfo-child-tagline"},n.map((({product:e,font:n,value:u,alt:y,accessibilityText:h,type:E},v)=>{const b=qa()("row","small-12","rs-engraving-container-bundle",{"large-6":t,"large-12":!t}),f=qa()({"rs-engraving-font-mixed":Boolean(n&&u),[`rs-engraving-font-${n}`]:Boolean(n&&u)}),w=()=>d(v),N=E&&-1!==E.indexOf("image"),S={...s,allyText:`${g.addEngravingA11y} ${e}`};return l().createElement("div",{key:`engraving-line-${e}-${u}-${n}`,className:b},l().createElement("div",{className:qa()("column",{"large-6 small-7 rs-engraving-message":!r},{"rs-engraving-image-container":r})},e,u&&(N?l().createElement("img",{className:"rs-engraving-image",src:u,alt:h||y}):l().createElement("span",{className:f,"aria-label":m[v],role:p?"img":null},u))),t&&l().createElement("div",{className:"column large-6 small-5 rs-engraving-addbutton"},u?l().createElement(l().Fragment,null,l().createElement(lm,ur({},o,{onClick:()=>c("edit engraving",v)})),l().createElement("span",{className:"rs-iteminfo-child-divider"}),l().createElement(lm,ur({},i,{onClick:w}))):l().createElement(lm,ur({},S,{onClick:()=>c("add free engraving",v)}))),a&&u&&l().createElement("div",{className:"rs-engraving-removebutton"},l().createElement(lm,ur({},i,{onClick:w}))))}))):l().createElement("div",{className:"rs-iteminfo-child-tagline"},l().createElement("div",{className:"row"},l().createElement("div",{className:"column"},n.map((({font:e,value:t,alt:a,accessibilityText:n,type:s},o)=>{const i=qa()({"rs-engraving-font-mixed":Boolean(e&&t)}),c=s&&-1!==s.indexOf("image");return t&&l().createElement("div",{key:`engraving-line-${t}-${e}-${o}`,className:qa()({"rs-engraving-message":!r},{"rs-engraving-image-container":r})},c?l().createElement("img",{className:"rs-engraving-image",src:t,alt:n||a}):l().createElement("span",{className:i,"data-autom":"bag-engraving-text-message","aria-label":m[o],role:p?"img":null},t))}))))):null},im=i("rs-checkout/engraving"),cm=()=>{const{viewReady:e,acShowInstallment:t}=zs(),{modKey:a,isEditable:r,isFulfillment:n}=ul(),[o]=Ba(a,"name"),i=Ra(`${a}.engraving`),{lines:c=[],isBundle:d,price:m,isOverlay:u,isEngravingImage:p,engravingSubtitle:g,engravingEditMessage:y}=i.data,{editable:h}=i.properties,E=Boolean(c.length),v=r||E,b=r&&!1!==u,f=!u&&r&&p&&!1!==h,w=`${a}.engraving.cartItemEngravingOverlay`,N=Ra(w),{isLoadingSubmit:S,isLoadingFault:C}=N.properties,T=Ka(w,"successResponse"),L=Ka(w,"invalidItemResponse"),k=Ua(),I=e=>{k({type:De,modKey:w,key:"isLoadingSubmit",value:e})},A={...N.data.bootstrap,metricsConfig:{pageName:"Bag"}},[P,D]=(0,s.useState)(null);(0,s.useEffect)((()=>{!C&&N.data.engravingDetails&&D({engravingDetails:N.data.engravingDetails,slotName:N.data.slotName})}),[C]);const O=Cc({id:i.data.id,bootstrap:A,engravingData:P,onChange:e=>{I(!0);const t=K().get(N.data,"bootstrap.saveEngravingUrl",""),a=K().get(e,"engravedData",{}),r=K().get(e,"engravedData.selection",[]).reduce(((e,t,r)=>{const n=K().get(t,"font",""),s=K().get(t,"messages",[]),l=a.isBundleEngraving||n;if(a.isBundleEngraving)e[`msg.${r}`]=s;else for(let a=0;a<t.messageLines;a+=1)e[`msg.${a}`]=K().trim(s[a]);return l&&(e[`f.${r}`]=n),e}),{}),n=on(t,{...r});wt(n).then((e=>{e.body.success?(T.setValue(!0),T.runSetEvents()):(L.setValue(!0),L.runSetEvents())})).catch((e=>{im.error(e),I(!1)}))}}),{overlayVisible:x,loadOverlay:R,showContent:F,showVideo:M,saveButtonRef:B,videoRef:_,data:$,error:U,handleCloseOverlay:V,validateEngravingMsg:H,onAddingMessage:j,handleEngravingChange:G,cancelEngrave:W,onOverlayHidden:q,selectedBundleKey:Y,onVideoEnded:X,handleOpenOverlay:J,removeEngrave:Z}=O,{assets:Q}=z(),{savedSelection:ee=[]}=$;let te=[];te=ee.map((({messagesA11y:e})=>e)).reduce(((e,t)=>e.concat(t)),[]);const ae={label:d&&c.length?Q.addEngraving:Q.add,url:u?i.data.url:"","data-value":"add","data-autom":"bag-engraving-add","data-prop37":i.data.addProp37},re={label:Q.edit,allyText:`${Q.engravingEditA11y} ${o}`,url:u?i.data.url:"","data-value":"edit","data-autom":"bag-engraving-edit","data-prop37":i.data.editProp37},ne={label:Q.remove,allyText:dn(Q.removeEngravingA11y,{productName:o}),"data-value":"remove","data-autom":"bag-engraving-remove","data-prop37":i.data.removeProp37},se=`${Q.addEngravingA11y} ${o}`;return l().createElement(l().Fragment,null,S&&l().createElement(sm,null),v&&l().createElement(nm,{isEngraved:E,isBundle:d,engravingSubtitle:g,engravingEditMessage:y,engravingPrice:!n&&m,isEditable:b,addButton:l().createElement(lm,ur({},ae,{className:"rs-iteminfo-child-actions-button",onClick:()=>J("add free engraving"),allyText:se})),editButton:l().createElement(lm,ur({},re,{onClick:()=>J("edit engraving")})),removeButton:f&&l().createElement(lm,ur({},ne,{onClick:()=>{Z(0)}})),engravingLines:l().createElement(om,{isBundle:d,isEditable:b,isRemovableOnly:f,isEngravingImage:p,lines:c,addActionProps:ae,editActionProps:re,removeActionProps:ne,handleOpenOverlay:J,removeEngrave:Z,messagesA11yText:te})}),R&&l().createElement(rm,{visible:x,showContent:F,data:$,error:U,videoRef:_,showVideo:!E&&M,saveButtonRef:B,onClose:V,validateEngravingMsg:H,onAddingMessage:j,onVideoEnded:X,saveEngrave:G,cancelEngrave:W,onOverlayHidden:q,selectedBundleKey:Y}))},dm=l().memo(cm),mm=({id:e,name:t,error:a,errorA11y:r,errorAttrs:n={},classes:s={},checked:o,className:i,label:c,children:d,"aria-describedby":m="",...u},p)=>{const g=qa()([s.root,{"is-error":a}]),y=qa()(["form-checkbox",s.wrapper]),h=l().useId(),E=e||h;return l().createElement("div",{className:g},l().createElement("div",{className:y},l().createElement("input",ur({type:"checkbox",id:E,name:t,checked:o,className:qa()(["form-checkbox-input",i]),"aria-labelledby":`${E}_label`,"aria-describedby":a?`${E}_error ${m}`:m||void 0,"aria-invalid":Boolean(a),ref:p},u)),l().createElement("label",{className:"form-label",htmlFor:E,id:`${E}_label`},l().createElement("span",{"aria-hidden":"true",className:"form-checkbox-indicator"}),d||c),a&&l().createElement(po,{id:`${E}_error`,className:s.error,error:a,errorA11y:r,errorAttrs:n})))},um=l().forwardRef(mm),pm=({label:e,labelA11y:t,checkboxProps:a,description:r})=>l().createElement("div",{className:"rs-iteminfo-child rs-iteminfo-isgiftitem"},l().createElement("div",{className:"rs-iteminfo-child-content"},l().createElement(um,a,l().createElement("span",{"aria-hidden":"true",className:"rs-iteminfo-isgiftitem-label"},e),l().createElement("span",{className:"visuallyhidden"},t)),r&&l().createElement("p",ur({className:"rs-iteminfo-isgiftitem-content as-icondetails-detail"},Ya(r))))),gm=()=>{const{modKey:e}=ul(),[t]=Ma(e),{showIntentToGift:a,intentToGiftText:r,name:n,intentToGiftDesc:s}=t,{assets:o}=z(),i=r||o.giftItemLabel,c=dn(o.isIntentToGiftA11y,{name:n}),d=Ga(e,"isIntentToGift");return a&&l().createElement(pm,{label:i,labelA11y:c,checkboxProps:d.props,description:s})},ym=l().memo(gm),hm="_editing",Em="add",vm="remove",bm="edit";var fm,wm=new Uint8Array(16);function Nm(){if(!fm&&!(fm="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fm(wm)}const Sm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const Cm=function(e){return"string"==typeof e&&Sm.test(e)};for(var Tm=[],Lm=0;Lm<256;++Lm)Tm.push((Lm+256).toString(16).substr(1));const km=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(Tm[e[t+0]]+Tm[e[t+1]]+Tm[e[t+2]]+Tm[e[t+3]]+"-"+Tm[e[t+4]]+Tm[e[t+5]]+"-"+Tm[e[t+6]]+Tm[e[t+7]]+"-"+Tm[e[t+8]]+Tm[e[t+9]]+"-"+Tm[e[t+10]]+Tm[e[t+11]]+Tm[e[t+12]]+Tm[e[t+13]]+Tm[e[t+14]]+Tm[e[t+15]]).toLowerCase();if(!Cm(a))throw TypeError("Stringified UUID is invalid");return a};var Im,Am,Pm=0,Dm=0;const Om=function(e,t,a){var r=t&&a||0,n=t||new Array(16),s=(e=e||{}).node||Im,l=void 0!==e.clockseq?e.clockseq:Am;if(null==s||null==l){var o=e.random||(e.rng||Nm)();null==s&&(s=Im=[1|o[0],o[1],o[2],o[3],o[4],o[5]]),null==l&&(l=Am=16383&(o[6]<<8|o[7]))}var i=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:Dm+1,d=i-Pm+(c-Dm)/1e4;if(d<0&&void 0===e.clockseq&&(l=l+1&16383),(d<0||i>Pm)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Pm=i,Dm=c,Am=l;var m=(1e4*(268435455&(i+=122192928e5))+c)%4294967296;n[r++]=m>>>24&255,n[r++]=m>>>16&255,n[r++]=m>>>8&255,n[r++]=255&m;var u=i/4294967296*1e4&268435455;n[r++]=u>>>8&255,n[r++]=255&u,n[r++]=u>>>24&15|16,n[r++]=u>>>16&255,n[r++]=l>>>8|128,n[r++]=255&l;for(var p=0;p<6;++p)n[r+p]=s[p];return t||km(n)},xm=({title:e,price:t,messages:a=[],actionType:r,actionLabel:n,actionA11y:s,actionBtnProps:o,installmentDetails:i})=>{const c=Boolean(a.length),d=Array.isArray(i)&&t,m=!d&&t,u=r===bm,p=r===Em||r===vm;return l().createElement("div",{className:"rs-iteminfo-child"},l().createElement("div",{className:"row rs-iteminfo-child-content"},l().createElement("div",{className:"column as-icondetails large-12"},l().createElement("div",ur({className:"as-icondetails-icon as-svgicon-container"},Ya('<svg viewBox="0 0 25 25" class="as-svgicon as-svgicon-gift as-svgicon-reduced as-svgicon-giftreduced" role="img" aria-hidden="true" width="25px" height="25px"><path fill="none" d="M0 0h25v25H0z"/><path d="M17.5 4h-10A3.5 3.5 0 0 0 4 7.5v10A3.5 3.5 0 0 0 7.5 21h10a3.5 3.5 0 0 0 3.5-3.5v-10A3.5 3.5 0 0 0 17.5 4Zm-10 1H12v4.414A5.537 5.537 0 0 0 10.973 7.6 2.556 2.556 0 0 0 9.1 6.869a2.5 2.5 0 0 0-1.814.794 2.614 2.614 0 0 0 .2 3.684A3.954 3.954 0 0 0 8.671 12H5V7.5A2.5 2.5 0 0 1 7.5 5Zm4.271 6.846a11.361 11.361 0 0 1-3.6-1.231 1.613 1.613 0 0 1-.146-2.271 1.5 1.5 0 0 1 1.094-.476h.021a1.7 1.7 0 0 1 1.158.464 11.4 11.4 0 0 1 1.472 3.514ZM5 17.5V13h6.64c-.653 1.149-2.117 3.2-4.4 3.568a.5.5 0 1 0 .158.987A7.165 7.165 0 0 0 12 14.318V20H7.5A2.5 2.5 0 0 1 5 17.5ZM17.5 20H13v-5.7a7.053 7.053 0 0 0 4.6 3.259.542.542 0 0 0 .074.005.5.5 0 0 0 .072-.995c-2.194-.325-3.632-2.253-4.377-3.567H20v4.5A2.5 2.5 0 0 1 17.5 20Zm2.5-8h-3.735a4.1 4.1 0 0 0 1.251-.678 2.614 2.614 0 0 0 .2-3.684 2.5 2.5 0 0 0-1.816-.793 2.634 2.634 0 0 0-1.872.732A5.537 5.537 0 0 0 13 9.389V5h4.5A2.5 2.5 0 0 1 20 7.5Zm-6.77-.179a11.405 11.405 0 0 1 1.479-3.513 1.694 1.694 0 0 1 1.158-.464h.021a1.5 1.5 0 0 1 1.094.476 1.613 1.613 0 0 1-.146 2.271 11.366 11.366 0 0 1-3.606 1.23Z"/></svg>'))),l().createElement("div",{className:"as-icondetails-detail rs-iteminfo-child-details"},l().createElement("div",null,l().createElement("div",{className:"rs-iteminfo-child-title small-12 large-9"},l().createElement("span",{className:"rs-iteminfo-child-titletext"},e),u&&l().createElement("div",{className:"rs-iteminfo-child-divider"},l().createElement("button",ur({type:"button",className:"as-buttonlink","aria-label":s},o),n))),l().createElement("div",{className:qa()("rs-iteminfo-child-actions",{"column small-4 large-3":!m})},t&&l().createElement("p",{className:"rs-iteminfo-child-price"},t),m&&l().createElement("div",ur({className:"rs-iteminfo-price-details"},Ya(i))),p&&l().createElement("button",ur({type:"button",className:"rs-iteminfo-child-actions-button as-buttonlink","aria-label":s},o),n)),c&&l().createElement("p",{className:"rs-iteminfo-child-tagline rs-iteminfo-gifting-msg"},a.map((e=>l().createElement("span",{key:Om(),className:"rs-iteminfo-gift-message-line","data-autom":"bag-gift-message-text"},e,l().createElement("br",null))))),d&&l().createElement("div",{className:"rs-iteminfo-installmentdetails"},i.map((({label:e,value:t})=>l().createElement(pl,{key:`giftinginstallments-${e}-${t}`,name:"iteminfochildpricedetails",label:e,value:t})))))))))},Rm=({visible:e,setVisible:t,id:a,messages:r,hasGiftPackageOption:n,saveBtnProps:s,onEntered:o,onExited:i,children:c})=>{const{viewport:d,assets:m,fragments:u}=z(),p="small"===d,g=n?m.giftOverlayPkgHeader:m.giftOverlayMsgHeader;return l().createElement(is,{className:"rs-gifting-overlay",ariaLabel:`${a}-overlayHeading`,visible:e,onClose:()=>t(!1),isFullscreen:p,onEntered:o,onExited:i,disableFocusOut:!0,fixedWidth:!0,mountOnEnter:!0,unmountOnExit:!0},l().createElement("h2",{id:`${a}-overlayHeading`,className:"rs-gifting-overlay-header"},g),n&&l().createElement("div",null,l().createElement("div",ur({className:"rs-gifting-overlay-image"},Ya(u.giftPackageImage))),l().createElement("p",{"aria-hidden":"true",className:"rs-gifting-overlay-image-caption"},m.giftingOverlayImageCaption)),l().createElement("div",{className:"rs-gifting-overlay-section"},r,l().createElement("fieldset",null,l().createElement("legend",{className:"rs-gifting-overlay-option-label"},m.giftOverlayLabel),l().createElement("div",{className:"form-selector-group"},c)),l().createElement("div",{className:"rs-gifting-overlay-save"},l().createElement(ds,ur({},s,{"data-autom":"bag-giftoptions-save-button"}),m.save)),l().createElement("div",{className:"rs-gifting-overlay-cancel"},l().createElement("button",{type:"button",className:"as-buttonlink","data-autom":"bag-giftoptions-cancel-button",onClick:()=>t(!1)},m.cancel))))},Fm=({onChange:e,name:t,checked:a,value:r,label:n,price:o,messageInputProps:i,packageInputProps:c})=>{const{assets:d}=z(),m=`bag-giftoptions-${r}`;let u={};"message"===r?(u={...i},u.label=d.giftOverlayYourMessage):"package"===r&&(u={...c},u.label=d.overlayYourMessageOptional);const p="message"===r||"package"===r,g=(0,s.useRef)("");return l().createElement(l().Fragment,null,l().createElement(Od,{tag:"div",name:t,tagAttrs:{"data-autom":m},"data-autom":`${m}-radio`,onChange:e,value:r,checked:a},l().createElement("span",{className:"row"},l().createElement("span",{className:"form-selector-left-col form-selector-title column large-6"},n),o&&l().createElement("span",{className:"form-selector-right-col column large-6"},o))),p&&l().createElement(Yr,{in:a,onExit:()=>{g.current=u.error},onExited:()=>{g.current=""}},l().createElement("div",null,l().createElement("span",{className:"rs-gift-option-input-message"},d.giftOverlayInputLabel),l().createElement("div",null,l().createElement(Vi,ur({},u,{error:g.current||u.error}))))))},Mm=({showOverlayBtnRef:e})=>{const{assets:t}=z(),{modKey:a,announceMessage:r}=ul(),n=`${a}.gifting`,[o]=Ma(n),{id:i,hasGiftMessageOption:c,hasGiftPackageOption:d,was:m={}}=o,[u,p]=Ba(n,hm,!1),g=Ka(n,"gift-options"),y=g.value,h=m["gift-options"],E=nr(n,"editMsgTxt"),v=nr(n,"editPkgTxt"),b=(o.giftOptionsAcc||[]).filter((({value:e})=>"none"===e||"message"===e&&c||"package"===e&&d)),f=e=>{const t=e.target.value;g.setValue(t),"message"===t?E.binding.setValue(v.binding.value):"package"===t&&v.binding.setValue(E.binding.value),E.binding.clearMessages()},w={...E.props,required:!E.binding.properties.optional,"aria-required":!E.binding.properties.optional,"aria-invalid":Boolean(E.props.error),"data-autom":`bag-giftoptions-${y}text`},N={...v.props,required:!v.binding.properties.optional,"aria-required":!v.binding.properties.optional,"aria-invalid":Boolean(v.props.error),"data-autom":`bag-giftoptions-${y}text`},S=(({giftingData:e,assets:t})=>{const{message:a,isMessageOnCard:r}=e,n="none"!==e["gift-options"]&&Boolean(a);return r?n?t.saveGiftCardOptMsgA11y:t.saveGiftCardOptA11y:r?t.saveGiftOptMsgA11y:t.saveGiftOptA11y})({giftingData:o,assets:t}),C=ja(n,"save"),T=C.binding.properties.isLoadingSubmit,L=Xs(T),k={...C.props,"aria-label":`${t.save} ${S}`,disabled:T,isLoading:T,onClick:e=>{C.props.onClick(e),r(t.processing),"none"===y&&"none"===h&&p(!1)}},[I,A]=_a(n),P=(0,s.useRef)(),D=Boolean(I.length),O=l().createElement(Qs,{messages:I,lastUpdated:A,ref:P});return(0,s.useEffect)((()=>{if(L&&!T){const e=D?"":t.giftMessageUpdateSuccessAlly;r(e)}}),[T,L,D]),l().createElement(Rm,{visible:u,setVisible:p,id:i,messages:O,hasGiftPackageOption:d,saveBtnProps:k,onEntered:()=>{I.length&&P.current&&P.current.focus()},onExited:()=>{e.current&&e.current.focus(),"message"===y&&g.setValue("none")}},b.map((({value:e,label:t,price:a})=>l().createElement(Fm,{key:`gift-option-${e}`,name:`giftOptionsAcc-${n}`,onChange:f,checked:e===y,value:e,label:t,price:a,messageInputProps:w,packageInputProps:N}))))},Bm=l().memo(Mm),_m=()=>{const{assets:e,fragments:t}=z(),{viewReady:a,acShowInstallment:r}=zs(),n=a&&r,{modKey:o,isEditable:i,isFulfillment:c}=ul(),d=`${o}.gifting`,[m]=Ma(d),{id:u,hasGiftMessage:p,hasGiftPackage:g,message:y,messageLines:h,installmentDetails:E}=m,[,v]=Ba(d,hm,!1),b=(({giftingData:e,assets:t})=>{const{hasGiftPackageOption:a,hasGiftMessage:r,isMessageOnCard:n,hasGiftPackage:s,message:l}=e;return r?n?t.giftMsgOnCard:t.giftMsgLabel:s?l?t.giftPkgMsgLabel:t.giftPkgLabel:a?t.addGifting:t.addGiftingMsg})({giftingData:m,assets:e}),f=g?m.price:"",w=y?h:[],N=i&&!1!==m._editable,S=()=>(({hasGiftMessage:e,hasGiftPackage:t})=>{let a="add gift message or gift wrap";e?a="edit gift message":t&&(a="edit gift wrap"),Nl({name:"metrics",data:{hier1:"aos:bag",channel:"aos:bag",prop3:`modal open|gifting|${a} gifting`}})})({hasGiftPackage:g,hasGiftMessage:p}),C=(0,s.useRef)(),T=(({isGiftingEditable:e,giftingData:t})=>{const{hasGifting:a,hasGiftMessage:r,canEditMsg:n,hasGiftPackage:s,canEditPkg:l}=t;if(e){if(!a)return Em;if(r&&!n||s&&!l)return vm;if(r&&n||s&&l)return bm}return""})({isGiftingEditable:N,giftingData:m}),L=(({actionType:e,assets:t})=>{switch(e){case Em:return t.add;case vm:return t.remove;case bm:return t.edit;default:return""}})({actionType:T,assets:e}),k=(({actionType:e,giftingData:t,assets:a,fragments:r})=>{const{hasGiftPackageOption:n,hasGiftMessage:s,isMessageOnCard:l,hasGiftPackage:o,message:i}=t;switch(e){case Em:return dn(n?r.addGiftingA11y:r.addGiftingMsgA11y,t);case vm:return a.removeGiftingMsgA11y;case bm:return s?dn(l?r.editGiftMsgOnCardA11y:r.editGiftMsgA11y,t):o?dn(i?r.editGiftPkgMsgA11y:r.editGiftPkgA11y,t):"";default:return""}})({actionType:T,giftingData:m,assets:e,fragments:t}),I=(({actionType:e,giftingData:t})=>{const{hasGiftPackage:a}=t;switch(e){case Em:return"bag-gifting-add";case bm:return a?"bag-giftpackage-edit":"bag-giftmessage-edit";default:return""}})({actionType:T,giftingData:m}),A=(({actionType:e})=>{switch(e){case Em:return"show-giftOptions";case vm:return"remove";case bm:return"show-edit";default:return""}})({actionType:T}),P=ja(d,A),D={...P.props,"data-autom":I};return(T===Em||T===bm)&&(D.id=`${u}-show-giftOptions`,D.ref=C,D.onClick=e=>{P.props.onClick(e),v(!0),n&&S()}),l().createElement(l().Fragment,null,l().createElement(xm,{title:b,price:!c&&f,messages:w,setOverlayVisible:v,actionType:T,actionLabel:L,actionA11y:k,actionBtnProps:D,installmentDetails:E}),l().createElement(Bm,{showOverlayBtnRef:C}))},$m=l().memo(_m),Um="postal_code",Km="province_selector",Vm="drawer",Hm="overlay",jm="cold",Gm="warm",Wm=e=>{const[t]=Ma(e),{isDeliveryOptionDrawerEnabled:a=!1,deliveryOptionsRetrieverOverlay:r=!1,isDefaultDeliveryOptionEnabled:n=!1,deliveryOptionsRetriever:s="",deliveryLocationLinkText:l="",showCaseText:o=""}=t;let i=`${e}.address.provinceCityDistrictTabs`;const c=`${e}.address.provinceCityDistrictTabsForCheckout`,d=`${e}.address`,m=`${e}.address.deliveryWarmingSubLayout`,u=`${e}.address.deliveryLocationSelection`,p=0===e.indexOf("checkout.fulfillment"),g=Fa(`${e}.address.localitySearchTypeAhead`),y=Fa(`${e}.address.localitySearchTypeAheadWithGeoLocation`),h=g||y;Fa(c)&&(i=c);const[E]=Ma(d),[v]=Ma(i),[b]=Ma(m),[f]=Ma(u),{state:w,props:N}=Ha(i,"provinceCityDistrict"),S={isDeliveryOptionDrawerEnabled:a,deliveryOptionsRetrieverOverlay:r,isDefaultDeliveryOptionEnabled:n,deliveryOptionsRetriever:s,deliveryLocationLinkText:l,showCaseText:o,hasSearchTypeAhead:h},C={linkText:"",provinceCityDistrict:"",label:"",error:"",ref:null},T=Fa(i);let L=Um;r?L=Hm:a||h?L=Vm:T&&(L=Km);let k="";switch(L){case Um:k=K().get(E,"was.postalCode","");break;case Km:{const e=K().get(v,"layout.0.fields",[]).reduce(((e,t)=>{const a=t.find((e=>"provinceCityDistrict"===e.name));return a?a.label:e}),"");C.linkText=v.linkText||"",C.provinceCityDistrict=v.provinceCityDistrict||"",C.label=e,C.error=w.error,C.ref=N.ref,v.provinceCityDistrict&&(k=v.provinceCityDistrict);break}case Hm:case Vm:l&&(k=l)}let I=!1;switch(L){case Um:I=E.showGeoLocationDisclaimer||!1;break;case Km:I=v.showGeoLocationDisclaimer||!1;break;case Hm:I=f.showGeoLocationDisclaimer||!1;break;case Vm:I=b.showGeoLocationDisclaimer||E.showGeoLocationDisclaimer||!1}const A=k?Gm:jm;let P=d;L===Km?P=i:L!==Hm&&L!==Vm||(P=e);let D=al;L===Km?D="provinceCityDistrictTabs":L!==Hm&&L!==Vm||(D="deliveryOptionsRetriever"),h&&p&&(D=al);const[O,x]=Ba(P,D,!1);return{parentModKey:e,addressModKey:d,current:k,state:A,type:L,isEditing:O,setIsEditing:x,showGeoLocationDisclaimer:I,deliveryOptions:S,provSelectData:C}},qm=({editLocation:e,deliveryData:t,hasDeliveryOptions:a})=>{if(!a)return!1;const{isElectronic:r}=t,{isDefaultDeliveryOptionEnabled:n}=e.deliveryOptions,s=e.state===jm;if(r)return!1;const l=e.type===Vm,o=e.type===Km;if(l||o)return!1;if(e.type===Um&&!s)return!1;return!(e.type===Hm&&(!s||n))},Ym=({editLocation:e,assets:t})=>{const{type:a,state:r,deliveryOptions:n,provSelectData:s}=e,{isDefaultDeliveryOptionEnabled:l}=n,o=r===Gm;switch(a){case Um:return o?t.warmDeliveryLabel:t.coldDeliveryTitle;case Vm:return o?t.warmDeliveryOptionsLabel:t.coldDeliveryOptionsLabel;case Hm:return o||l?t.warmDeliveryLabel:t.coldDeliveryTitle;case Km:return s.label;default:return""}},zm=({editLocation:e,assets:t})=>{const{type:a,state:r,current:n,provSelectData:s,deliveryOptions:l}=e,o=r===Gm;switch(a){case Um:return n||t.taxZipCode;case Vm:case Hm:return l.deliveryLocationLinkText||l.showCaseText;case Km:return o?s.provinceCityDistrict:s.linkText;default:return""}},Xm=({editLocation:e,assets:t,productName:a})=>{const{type:r,state:n}=e,s=n===Gm;switch(r){case Um:return s?dn(t.wasPostalCodeA11y,{productName:a}):"";case Vm:case Hm:return s?t.deliveryLocationLinkTextA11y:t.deliveryOptionCityTownTextA11y;default:return""}},Jm=({editLocation:e})=>{const{type:t,state:a}=e,r=a===Gm;switch(t){case Um:return r?"bag-zipcode-edit":"bag-zipcode-edit-cold";case Km:return r?"bag-province-edit":"bag-province-edit-cold";case Vm:return r?"bag-prefecture-edit":"bag-prefecture-edit-cold";case Hm:return r?"bag-location-edit":"bag-location-edit-cold";default:return""}},Zm=({callout:e,hasDelivery:t,hasPickup:a,showPickupFirst:r,children:n})=>{const s=qa()("rs-item-fulfillment","rs-iteminfo-child",{"rs-has-delivery":t,"rs-has-pickup":a,"rs-show-pickup-first":r});return l().createElement("div",{className:s},e,l().createElement("div",{className:"rs-item-fulfillment-columns"},n))},Qm=({title:e,editBtn:t,children:a})=>l().createElement("div",{className:"rs-item-fulfillment-callout"},l().createElement("div",{className:"rs-fulfillment-callout-title"},l().createElement("span",{className:"rs-fulfillment-callout-title-text"},e)," ",t),a),eu=({showBtn:e,isEditing:t,wasEditing:a=!1,setIsEditing:r,showChevron:n,showDagger:o,label:i,btnRef:c,...d})=>{const{assets:m}=z(),u=(0,s.useRef)(),p=c||u;if((0,s.useEffect)((()=>{e&&p.current&&a&&p.current.focus()}),[p,e,t,a]),!e)return null;const g=qa()("rs-edit-location-button","as-buttonlink",{"as-buttonlink-inline":!n,icon:n,"icon-after":n,"icon-chevrondown":n&&!t,"icon-chevronup":n&&t});return l().createElement("button",ur({type:"button",className:g,"aria-expanded":n&&t,onClick:()=>r(!t),ref:p},d),i,o&&m.geoLocationDagger)},tu=({applyButton:e,textField:t,inputRef:a,...r})=>l().createElement(ri,ur({ref:a},t.props,r),l().createElement("button",ur({type:"button",className:"rf-inlineeditor-apply form-textbox-button"},e.props),e.loading?l().createElement(l().Fragment,null,l().createElement("div",{role:"img",className:"rf-inlineeditor-loading waitindicator waitindicator16-gray"}),l().createElement(wr,{isPending:e.loading,messages:{pending:e.processingText}})):l().createElement("span",null,e.label))),au=["bottom","height","left","right","top","width"],ru=new Map;let nu=0;const su=()=>{const e=[];ru.forEach(((t,a)=>{const r=a.getBoundingClientRect();((e={},t={})=>au.some((a=>e[a]!==t[a])))(r,t.rect)&&e.push({...t,rect:r})})),e.forEach((e=>{e.callbacks.forEach((t=>t(e.rect)))})),nu=window.requestAnimationFrame(su)};function lu(e,t){const a=t?.observe??!0,r=t?.onChange,[n,l]=s.useState(e.current),o=s.useRef(!1),i=s.useRef(!1),[c,d]=s.useState(null),m=s.useRef(r);return s.useLayoutEffect((()=>{m.current=r,e.current!==n&&l(e.current)})),s.useLayoutEffect((()=>{n&&!o.current&&(o.current=!0,d(n.getBoundingClientRect()))}),[n]),s.useLayoutEffect((()=>{if(!a)return()=>{};let t=n;if(i.current||(i.current=!0,t=e.current),!t)return()=>{};const r=(s=t,l=e=>{m.current&&m.current(e),d(e)},{observe(){const e=0===ru.size;if(ru.has(s)){const e=ru.get(s);e&&e.callbacks.push(l)}else ru.set(s,{rect:void 0,hasRectChanged:!1,callbacks:[l]});e&&su()},unobserve(){const e=ru.get(s);if(e){const t=e.callbacks.indexOf(l);t>=0&&e.callbacks.splice(t,1),e.callbacks.length||ru.delete(s),ru.size||cancelAnimationFrame(nu)}}});var s,l;return r.observe(),()=>{r.unobserve()}}),[a,n,e]),c}const ou=(e,t)=>{if(!t.current)return;const a=t.current,r=a?a.querySelector(`[data-option-index="${e}"]`):null;if(a&&r&&a.scrollHeight>a.clientHeight){const e=r,t=a.clientHeight+a.scrollTop,n=e.offsetTop+e.offsetHeight;n>t?a.scrollTop=n-a.clientHeight:e.offsetTop<a.scrollTop&&(a.scrollTop=e.offsetTop)}},iu=({id:e,className:t,value:a,options:r,onChange:n=(()=>{}),onFocus:s=(()=>{}),onBlur:o=(()=>{}),onKeyDown:i=(()=>{}),onSelection:d=(()=>{}),onHover:m=(()=>{}),getOptionValue:u=(e=>e),getOptionDisabled:p=(()=>!1),getPosition:g,renderInput:y=(e=>l().createElement("input",e)),renderOption:h=(e=>e),selectFirst:E=!1,selectOnHover:v=!1,closeOnSelection:b=!0,classes:f={},optionsHeader:w,wrapperAttrs:N,...S},C)=>{const[T,L]=l().useState(!1),[k,I]=l().useState(-1),A=l().useRef(null),P=l().useRef(null),D=l().useRef(null),O=lu(D,{observe:T}),x=za(D,C),R=()=>{L(!1),I(-1)},F=e=>d(u(r[e]),e),M=e=>{-1!==k&&e.preventDefault();const t=(e=>{if(e===r.length-1)return e;let t=e,a=!1;for(;!a&&t<r.length-1;)t+=1,a=!p(r[t]);return a?t:e})(k);I(t),ou(t,P),m(u(r[t]),t),T||L(!0),v&&F(t)},B=e=>{-1!==k&&e.preventDefault();const t=(e=>{if(-1===e)return e;if(0===e)return-1;let t=e,a=!1;for(;!a&&t>0;)t-=1,a=!p(r[t]);return a?t:-1})(k);I(t),ou(t,P),m(u(r[t]),t),T||L(!0),v&&F(t)},_=l().useId(),$=e||_,U=`${$}_listbox`,K=k>=0?`${U}_option_${k}`:void 0,V=Boolean(T&&r.length),H=g?g(O):(e=>{if(!e)return{};const{width:t,right:a}=e;return{width:t,left:`${a-t+window.pageXOffset}px`}})(O);return l().createElement("div",ur({ref:A,"data-core-autocomplete":!0,className:qa()(t,f.root)},N),y({id:$,value:a,role:"combobox","aria-autocomplete":"list","aria-expanded":V,...S,"aria-owns":U,"aria-activedescendant":K,ref:x,onChange:e=>{T||L(!0),n(e),E&&I(0)},onFocus:e=>{L(!0),I(-1),s(e)},onBlur:e=>{requestAnimationFrame((()=>{document.activeElement!==A.current&&document.activeElement!==D.current&&P.current&&!P.current.contains(document.activeElement)&&(R(),o(e))}))},onKeyDown:e=>{switch(e.keyCode){case c.ArrowUp:B(e);break;case c.ArrowDown:M(e);break;case c.Home:e.preventDefault(),I(0),ou(0,P),m(u(r[0]),0),T||L(!0),v&&F(0);break;case c.End:e.preventDefault(),(()=>{const e=r.length-1;I(e),ou(e,P),m(u(r[e]),e),T||L(!0),v&&F(e)})();break;case c.Return:(e=>{const t=r[k],a=p(t);t&&!a&&T&&(e.preventDefault(),F(k),b&&R())})(e);break;case c.Esc:T&&e.stopPropagation(),R()}i(e)}}),l().createElement("div",{"data-core-autocomplete-popover":!0,"data-core-autocomplete-popover-show":V,style:H,ref:P,className:qa()(f.popoverWrapper,{[f.popoverWrapperShow||""]:V,[f.popoverWrapperHide||""]:!V})},w,l().createElement("ul",{role:"listbox",id:U,"data-core-autocomplete-options-list":!0,className:qa()(f.optionsList,{[f.optionsListShow||""]:V,[f.optionsListHide||""]:!V}),tabIndex:-1},r.map(((e,t)=>{const a=u(e),r=p(e),n=k===t;return l().createElement("li",{key:a,id:`${U}_option_${t}`,role:"option","data-core-autocomplete-option":!0,className:f.option,"data-option-index":t,onClick:()=>{r||(d(a,t),D.current&&D.current.focus(),b&&R())},onMouseOver:()=>{r||(I(t),m(a,t),v&&d(a,t))},tabIndex:-1,"aria-selected":n,"aria-disabled":r},h(e,n,t))})))))},cu=l().forwardRef(iu),du=({inputRef:e,textField:t,applyButton:a})=>{const[r,n]=l().useState([]),s=i("InlineEditor/InlineEditorAutoComplete");return l().createElement(cu,{classes:{root:"rf-inlineeditor-autocomplete"},value:t.props.value,options:r,onChange:e=>{t.props.onChange&&t.props.onChange(e),fetch(`${t.autoCompleteUrl}?value=${e.target.value}`).then((e=>e.json())).then((e=>K().get(e,"body.matches",[]))).then((e=>n(e))).catch((e=>s.error(e)))},onSelection:e=>{t.setValue(e)},renderInput:r=>(r.ref.current=e.current,l().createElement(tu,ur({applyButton:a,inputRef:e,textField:t},r)))})},mu=e=>{const{visible:t,triggerRef:a,isCollapsible:r,className:n,textField:o,applyButton:i,cancelButton:c,children:d}=e,m=(0,s.useRef)(null),u=o.props.ref||m,{viewport:p}=z(),g="small"===p,y=qa()("rf-inlineeditor",{"rf-inlineeditor-collapsible":r}),h=qa()("rf-inlineeditor-content row",{"form-textbox-widebutton":g&&i.label&&i.label.length>5});return l().createElement(Yr,{in:t,onEntering:()=>{u&&u.current&&(u.current.focus(),u.current.select())},onExited:()=>{a&&a.current&&a.current.focus()},className:n},l().createElement("div",{className:y},l().createElement("div",{className:h},l().createElement("div",{className:"rf-inlineeditor-input column"},o.autoCompleteUrl?l().createElement(du,{inputRef:u,textField:o,applyButton:i}):l().createElement(tu,{applyButton:i,inputRef:u,textField:o})),r&&c&&l().createElement("div",{className:"rf-inlineeditor-cancel-wrapper column"},l().createElement("button",ur({type:"button",className:"rf-inlineeditor-cancel form-textbox-sidebutton"},c.props),c.label))),d))},uu=({modKey:e,isCollapsible:t=!0,visibleKey:a,className:r,triggerRef:n,textField:s,applyButton:o,cancelButton:i={},children:d,isSubmitting:m=!1,disableErrorOnBlur:u=!0,isVisible:p=!1})=>{const{viewport:g}=z(),[y,h]=Ba(e,a),E=nr(e,s.bindName,{disableErrorOnBlur:u}),{props:v}=E,b=ja(e,o.bindName),f=ja(e,i.bindName),{properties:w}=E.binding,N=!w.optional,S="number"===w.subtype&&("small"===g||"medium"===g)?"tel":w.type,{properties:{isLoadingSubmit:C}}=Ra(e),T=E.binding.bindExists,L=Ua(),k={visible:!a||y||p,className:r,triggerRef:n,isCollapsible:t,textField:{autoCompleteUrl:s.autoCompleteUrl,setValue:e=>{h(e)},props:{...E.props,"data-autom":s["data-autom"],label:s.label,type:S||"text",disabled:s.disabled,required:N,"aria-required":N,errorAttrs:s.errorAttrs,onKeyDown:e=>{T&&s.postalCancelBtnRef&&s.postalCancelBtnRef.current&&e.keyCode===c.Esc&&s.postalCancelBtnRef.current.click(),T&&s.postalApplyBtnRef&&s.postalApplyBtnRef.current&&e.keyCode===c.Return&&s.postalApplyBtnRef.current.click(),v.onKeyDown(e)},classes:s.classes}},applyButton:{label:o.label,loading:C||m,processingText:o.processingText,props:{...b.props,disabled:s.disabled||C||!E.props.value,"data-autom":o["data-autom"],"aria-label":o.ally,ref:o.triggerRef,onClick:t=>{L({type:Ee,modKey:e,bindName:s.bindName}),b.props.onClick(t)}}},cancelButton:{label:i.label,props:{...f.props,"data-autom":i["data-autom"],"aria-label":i.ally,ref:i.triggerRef,onClick:()=>{var e;h(!1),i.metrics&&(e=i.metrics,window.asMetrics&&e&&window.asMetrics.fireMicroEvent(e))}}}};return l().createElement(mu,k,d)},pu="checkout",gu=({checkboxProps:e})=>{const{assets:t}=z();return l().createElement("div",{className:"rs-location-consent"},l().createElement(um,e,t.locationConsentMessage))},yu=({isBagApp:e=!1,isCheckoutApp:t=!1})=>{let a="";e?a="shoppingCart.locationConsent":t&&(a="checkout.locationConsent");const r=Fa(a),n={...Ga(a,"locationConsent",{disableFocusSync:!0}).props,id:zr()};return r&&l().createElement(gu,{checkboxProps:n})},hu=l().memo(yu),Eu=({modKey:e,className:t,triggerRef:a,isBagApp:r,isCheckoutApp:n,hideCancel:s,children:o})=>{const{assets:i}=z(),c=l().useRef(),d=l().useRef(),m=n?"checkout-zipcode-input":"bag-zipcode-input",u=n?"checkout-zipcode-apply":"bag-zipcode-apply",p=n?"checkout-zipcode-cancel":"bag-zipcode-cancel",g=n?"checkout-zipcode-error":"bag-zipcode-error",y=qa()("rs-postal-code-editor",t);return l().createElement(uu,{modKey:e,visibleKey:al,className:y,triggerRef:a,isCollapsible:!s,textField:{label:i.zipCodeLabel,bindName:"postalCode","data-autom":m,errorAttrs:{"data-autom":g},postalApplyBtnRef:c,postalCancelBtnRef:d,classes:{input:"form-textbox-number-input"}},applyButton:{label:i.apply,triggerRef:c,ally:i.applyZipCodeA11y,processingText:i.processing,bindName:"calculate","data-autom":u},cancelButton:!s&&{label:i.cancel,triggerRef:d,ally:i.cancelZipCodeA11y,"data-autom":p,metrics:{eVar:vl,feature:"Delivery",action:"CancelZipCode"}}},l().createElement(hu,{isBagApp:r,isCheckoutApp:n}),o)},vu=l().memo(Eu),bu=()=>{const{assets:e}=z(),{modKey:t,editLocation:a}=ul(),r=`${t}.delivery.lineDeliveryOptions.address`,{type:n,isEditing:s,setIsEditing:o}=a,[i]=Ba(t,"productName"),[c]=Ma(r),{showGeoLocationDisclaimer:d}=c,m=n===Hm,u=n===Um,p=!s,[g]=Ma(`${t}.delivery.lineDeliveryOptions`),y=Ym({editLocation:a,deliveryOptionsData:g,assets:e}),h=zm({editLocation:a,assets:e}),E=Xm({editLocation:a,assets:e,productName:i}),v=Jm({editLocation:a}),b=Xs(s),f=l().createElement(eu,{showBtn:p,isEditing:s,wasEditing:b,setIsEditing:o,showDagger:d,label:h,"aria-label":`${h} ${E}`,"data-autom":v,showChevron:!m});return l().createElement(Qm,{title:y,editBtn:f},u&&l().createElement(vu,{modKey:r,isBagApp:!0}))},fu=l().memo(bu),wu=({className:e,children:t,...a})=>{const r=qa()("rf-form-layout-root",e);return l().createElement("div",ur({className:r},a),t)},Nu=(e,t,a)=>{if("sublayout"===a.type)return!0;const{visible:r}=e.getBindingProps(t,a.name);return!1!==r},Su=(e,t)=>`${K().get(e.flat(),"[0].name",t)}`,Cu=(e,t)=>e.getModuleData(t,"addressLookupSelectorOptions")||[],Tu=({isSublayout:e,isFullWidth:t,sections:a,classes:r})=>{const n=e?"":r.layout,s=qa()("rf-form-layout",n,{"rf-form-layout-sublayout":e,"rf-form-layout--fullwidth":t});return l().createElement("div",{className:s},a)},Lu=({header:e,subHeader:t,isSublayout:a,isFullWidth:r,isViewMode:n,headingTag:s})=>{const o=a||r?"large-12":"large-6",i=qa()("column","small-12",o);return l().createElement(l().Fragment,null,n?l().createElement("div",{className:"row"},l().createElement("div",{className:i},l().createElement(s,{className:"rf-form-layout-section-header typography-label"},e),t&&l().createElement("div",{className:"rf-form-layout-section-subheader typography-body"},t))):l().createElement(l().Fragment,null,l().createElement("legend",null,l().createElement(s,{className:"rf-form-layout-section-header typography-label"},e)),l().createElement("div",{className:i},t&&l().createElement("div",{className:"rf-form-layout-section-subheader typography-body"},t))))},ku=({section:e,sectionId:t,sectionHeadingTag:a,rows:r,classes:n,isFullWidth:s,isSublayout:o})=>{const{sectionHeader:i,sectionMessage:c,sectionSubHeader:d=""}=e,m=qa()("rf-form-layout-section",n.section,t);return l().createElement("div",{className:m},i?l().createElement("fieldset",null,l().createElement(Lu,{isFullWidth:s,isSublayout:o,header:i,subHeader:d,headingTag:a,isViewMode:!1}),r,c&&l().createElement("div",{className:"rf-form-layout-section-message as-supplementalinfo large-6 small-12"},l().createElement("p",ur({className:"rf-form-layout-section-message-content"},Ya(c))))):l().createElement(l().Fragment,null,r,c&&l().createElement("div",{className:"rf-form-layout-section-message as-supplementalinfo large-6 small-12"},l().createElement("p",ur({className:"rf-form-layout-section-message-content"},Ya(c))))))},Iu=({message:e,isFullWidth:t,messageId:a})=>{const r=t?"large-12":"large-6",n=qa()("rf-form-layout-row-message column small-12",r);return l().createElement("div",{className:n},l().createElement("div",ur({className:"as-supplementalinfo typography-body-reduced"},Ya(e),{id:a})))},Au=({row:e,isFullWidth:t,isSublayout:a,fields:r,fieldCombinationClass:n,classes:s,message:o,messageId:i})=>{const{viewport:c}=z(),d="small"===c,m=a||t?"large-12":"large-6",u=qa()("rf-form-layout-row",n,s.row),p=qa()("rf-form-layout-row-fields","column","small-12",m,{"form-textbox-sidebyside":!d&&e.length>1});return l().createElement("div",{className:u},l().createElement("div",{className:p},l().createElement("div",{className:"row"},r)),o&&l().createElement(Iu,{isFullWidth:t,message:o,messageId:i}))},Pu=({field:e,textFieldProps:t,hasAction:a,actionComplete:r,actionFieldProps:n,isLoadingAction:s,loadingAriaLabel:o})=>{const i=`${e.actionName}-button-${e.name}`;return l().createElement(ri,t,a&&!r&&(s?l().createElement("div",{role:"img",className:"rf-form-layout-field-spinner waitindicator waitindicator16-gray","aria-label":o}):l().createElement(si,ur({"data-autom":i},n),l().createElement("span",ur({"aria-label":e.actionLabelA11y},Ya(e.actionLabel))))))},Du=({modKey:e,field:t,tooltip:a=null,messageId:r,showUseManualFieldOption:n=!1,handleTypeAheadField:o=(()=>{})})=>{const i=ja(e,t.actionName),{assets:d}=z(),{properties:m}=Ra(e),u=m.isLoadingSubmit,p=i.binding.bindExists,g=!(!t.attributes||!t.attributes.prefix),y=e.includes("localitySearchTypeAhead")&&"searchString"===t.name,h=p&&i.binding.properties.key.toLowerCase().includes("verify"),{binding:E}=Ha(e.replace("addressLookupForPostalCode","fieldList"),"postalCode"),{props:v,binding:b}=nr(e,t.name),f=!b.properties.optional,w=b.properties.autofill,N=!b.properties.valid,S=b.properties.format,C=S&&!K().isEmpty(S),[T,L]=Ba(`${e}.verificationModule`,"isVerified",!1),[k]=Ba(`${e}.verificationModule`,"verifiedValue"),I=p&&T&&N,{name:A,label:P,labelA11y:D,autoCapitalization:O}=t,x=`form-field-${A}`,R=p&&"find"===t.actionName,F={...v,name:A,label:P,labelA11y:D,search:R,required:f,onKeyDown:e=>{!y&&p&&i.props.ref.current&&e.keyCode===c.Return&&i.props.ref.current.click(),v.onKeyDown(e)},onChange:e=>{e.target.value.length>3&&n&&o(),h&&(e.target.value===k?L(!0):L(!1)),v.onChange(e),O&&!C&&b.setValue(e.target?.value?.toString?.().toUpperCase?.())},autoComplete:w,valid:I,validA11y:I&&d.validA11y,"data-autom":x,"aria-required":f,"aria-invalid":!!v.error,errorAttrs:{"data-autom":`${x}-error`},"aria-describedby":r,countryCode:g&&t.attributes?.prefix,classes:t.attributes?.forceDirection?{input:"form-textbox-number-input"}:void 0},M={...i.props,disabled:!(F.value&&N),onClick:e=>{E.bindExists?E.clearMessages():h&&b.clearMessages(),i.props.onClick(e)}},B=Ua(),[_,$]=(0,s.useState)("");e.includes("loanApplicationAddressesContainer")&&"moveInDate"===A&&(F.onFocus=e=>{$(e.target.value),v.onFocus(e)},F.onBlur=t=>{const a=t.target.value;N&&_!==a&&B({type:Ee,modKey:e,bindName:"moveInDate"}),v.onBlur(t)});const U=qa()({"form-tooltip-textbox-wrapper":!!a});return l().createElement("div",{className:U},l().createElement(Pu,{field:t,textFieldProps:F,hasAction:p,actionComplete:I,actionFieldProps:M,isLoadingAction:u,loadingAriaLabel:d.processing}),a)},Ou=({modKey:e,field:t})=>{const a=Aa(),{props:r,binding:n}=lr(e,t.name),s=!n.properties.optional,o=n.properties.autofill,{name:i,label:c}=t,d=`form-field-${i}`,m=((e,t,a)=>e.getModuleData(t,a.options)||[])(a,e,t),u={...r,name:i,label:c,required:s,autoComplete:o,"data-autom":d,"aria-required":s,"aria-invalid":!!r.error};return l().createElement(yo,u,m.map((e=>l().createElement(Eo,{key:`${e.value}-${e.label}`,value:e.value},e.label))))},xu=({modKey:e,field:t,tooltip:a})=>{const{props:r,binding:n}=Ga(e,t.name),s=!n.properties.optional,{name:o}=t,i=`form-field-${o}`,c={...r,name:o,required:s,"data-autom":i,"aria-required":s,"aria-invalid":!!r.error};return l().createElement(um,c,t.label,a)},Ru=({isOpen:e})=>{const t=e?"icon-chevronup":"icon-chevrondown",a=qa()("icon icon-after",t);return l().createElement("span",{className:a,"aria-hidden":"true"})},Fu=({modKey:e,field:t,isPostalCodeLayout:a})=>{const r=Aa(),{props:n,binding:s}=ja(e,t.name),{name:o,labelA11y:i}=t,c={...n,className:"as-buttonlink","data-autom":`form-field-${o}`,"aria-label":i},d=((e,t)=>t&&"enterAddressManually"===e.name)(t,a),m=s.value;d&&(c["aria-expanded"]=m);const u=t.labelDataKey?r.getModuleData(e,t.labelDataKey):t.label;return l().createElement("button",c,u,d&&l().createElement(Ru,{isOpen:m}))},Mu=(e,t)=>{l().useEffect((()=>(e&&t&&window.addEventListener(e,t),()=>{e&&t&&window.removeEventListener(e,t)})),[e,t])},Bu=(e={})=>{const{startValue:t=0,min:a,max:r,wrap:n}=e,[s,o]=l().useState(t),i=0===a||Boolean(a),c=0===r||Boolean(r),d=n&&i&&c;return[s,()=>{const e=s+1;o(c&&e>r?d?a:r:e)},()=>{const e=s-1;o(i&&e<a?d?r:a:e)},e=>{let t=e;i&&e<a&&(t=a),c&&e>r&&(t=r),o(t)}]},_u=(e,t)=>`${`${e}_option`}_${"string"==typeof t?t.trim().toLowerCase().split(" ").join("-"):t}`,$u=(e,t)=>{if(e&&e.children){const a=e.children[t];if(a)return a.querySelector("input")}return null},Uu=({id:e,name:t,value:a,label:r,placeholder:n,error:s,errorA11y:o,errorAttrs:i={},children:c,onChange:d=(()=>{}),onFocus:m=(()=>{}),...u},p)=>{const[g,y]=l().useState(!1),[h,E]=l().useState(!1),[v,b]=l().useState(""),[f,w,N,S]=Bu({startValue:0,min:0,max:c?c.length-1:0,wrap:!1}),C=l().useRef(null),T=l().useRef(null),L=l().useRef(null),k=l().useRef(!1);l().useImperativeHandle(p,(()=>({focus:()=>{L.current&&L.current.focus()},focusAndExpand:(e=!0)=>{e&&(k.current=!0),L.current&&L.current.focus(),y(!0)}})));const I=l().useId(),A=e||I,P=e=>{if(C.current&&!C.current.contains(e.target)){if(k.current)return void(k.current=!1);E(!1),y(!1)}};Mu("click",P),Mu("focusin",P),l().useLayoutEffect((()=>{T.current&&L.current&&b(g?`${T.current.offsetHeight+L.current.offsetHeight}px`:"")}),[L,T,g]),l().useEffect((()=>{if(g&&T.current){const e=$u(T.current,f);e&&e.focus()}}),[f,g]);const D=e=>{d(e),y(!1),L.current&&L.current.focus()},O=e=>{const t=$u(T.current,f);if(g)switch(e.key){case"Enter":e.preventDefault(),t&&t.click();break;case"Tab":case"Escape":e.preventDefault(),y(!1),L.current&&L.current.focus();break;case"ArrowDown":case"ArrowRight":e.preventDefault(),w();break;case"ArrowUp":case"ArrowLeft":e.preventDefault(),N()}};return l().createElement("div",{className:qa()("form-dropdown",{"is-error":s}),ref:C},l().createElement("div",{className:qa()({"form-dropdown-multiline":!0,"is-expanded":g,focused:h})},l().createElement("button",ur({type:"button",id:A,className:qa()("form-dropdown-select",{"form-dropdown-selectnone":!a&&!n}),"aria-haspopup":"listbox","aria-expanded":g,"aria-controls":`${A}_options-container`,"aria-labelledby":`${A}_label`,"aria-describedby":`${A}_error`,onClick:()=>{E(!0),y(!g)},onFocus:e=>{E(!0),m(e)},onKeyDown:e=>{"ArrowDown"!==e.key&&"ArrowUp"!==e.key||(E(!0),y(!0))},style:{height:v},ref:L},u),l().createElement("span",{className:"visuallyhidden"},r),l().createElement("span",{className:"form-dropdown-title"},a||n)),l().createElement("span",{className:"form-dropdown-chevron","aria-hidden":"true"}),l().createElement("span",{className:"form-dropdown-label",id:`${A}_label`,"aria-hidden":"true"},r),l().createElement("div",null,l().createElement("ul",{id:`${A}_options-container`,className:"form-dropdown-options",role:"listbox","aria-label":r,ref:T},c&&l().Children.map(c,((e,r)=>l().cloneElement(e,{name:t,id:_u(A,e.props.value),key:_u(A,e.props.value),checked:e.props.value===a,selected:r===f,onChange:D,onKeyDown:O,mouseEnterHandler:()=>S(r)})))))),s&&l().createElement(po,{id:`${A}_error`,error:s,errorA11y:o,errorAttrs:i}))},Ku=l().forwardRef(Uu),Vu=({className:e,...t})=>l().createElement("span",ur({className:qa()("form-dropdown-option-title",e)},t)),Hu=({id:e,value:t,checked:a,selected:r,mouseEnterHandler:n,children:s,disabled:o=!1,...i},c)=>{const d=qa()(["form-dropdown-option",{checked:a,selected:r}]);return l().createElement("li",{className:d,role:"option",tabIndex:-1,"aria-selected":r,"aria-current":a,"aria-disabled":o,onMouseEnter:n},l().createElement("input",ur({ref:c,type:"radio",id:e,value:t,className:"visuallyhidden",checked:a,disabled:o},i)),l().createElement("label",{htmlFor:e},s,a&&l().createElement("span",{className:qa()(["icon","icon-check"])})))},ju=l().forwardRef(Hu),Gu=({modKey:e,field:t})=>{const a=Aa(),{props:r}=lr(e,t.name,{disableErrorOnBlur:!0}),[n]=Ba(e,"isAutoSelect",!1),{name:s,label:o}=t,i=`form-field-${s}`,c=Cu(a,e),[d,m]=Ba(e,"openMultiLineOptions",!1),u=l().useRef(null);l().useEffect((()=>{d&&u.current&&(u.current.focusAndExpand(!0),m(!1))}),[d,m]);const p={...r,name:s,label:o,"data-autom":i,"aria-invalid":!!r.error,ref:u};return n&&1===c.length&&""===r.value&&r.onChange({target:{value:"0"}}),l().createElement(Ku,p,c.map((e=>l().createElement(ju,{key:e.value,value:e.value},l().createElement(Vu,Ya(e.label))))))},Wu=({id:e,name:t,value:a,checked:r,className:n,label:s,children:o,withAriaLabeledBy:i=!1,...c},d)=>{const m=l().useId(),u=e||m,p=i?`${u}_label`:void 0;return l().createElement("div",{className:"form-radiobutton"},l().createElement("input",ur({ref:d,type:"radio",id:u,name:t,value:a,checked:r,"aria-labelledby":p,className:qa()(["form-radiobutton-input",n])},c)),l().createElement("label",{className:"form-label",htmlFor:u,id:p},l().createElement("span",{className:"form-radiobutton-indicator"}),o||s))},qu=l().forwardRef(Wu),Yu=({modKey:e,field:t})=>{const a=Aa(),{props:r,binding:n}=sr(e,t.name),s=n.value,o=((e,t,a)=>{let r=[];if(!a.options)return r;const n=a.options;return r="string"==typeof n?e.getModuleData(t,a.options)||[]:n,r})(a,e,t),{name:i}=t,c={...r,name:i,"data-autom":`form-field-${i}`};return l().createElement("div",{className:"rf-form-layout-radio-fieldset"},l().createElement("fieldset",{className:"form-label"},l().createElement("legend",null,t.label),l().createElement("div",{className:"rf-form-layout-radio-options"},o.map((e=>{const t=`${i}-${e.value}`;return l().createElement(qu,ur({key:e.value,id:t},c,{value:e.value,checked:e.value===s}),e.label)})))))},zu=l().createContext({}),Xu=()=>l().useContext(zu),Ju=(e,t={})=>{const a=i("province-selector/utils/fetchData"),r=Object.keys(t).length?on(e,t):e;return wt(r).then((e=>K().get(e,"body",{}))).catch((e=>a.error(e)))},Zu=({className:e,...t})=>l().createElement(pd,ur({rootTag:"ul",className:qa()("rc-province-selector-tablist",e)},t)),Qu=l().forwardRef((({index:e,name:t,label:a,className:r,...n},s)=>{const{selection:o}=Xu(),i=o[t]?l().createElement(l().Fragment,null,o[t],l().createElement("span",{className:"visuallyhidden"},a)):a;return l().createElement("li",{role:"presentation"},l().createElement(gd,ur({index:e,className:qa()("rc-province-selector-tab",r),ref:s},n),i))}));Qu.displayName="ProvinceSelectorTab";const ep=({className:e,children:t,...a})=>l().createElement(yd,ur({className:qa()("rc-province-selector-tab-panels",e)},a),t),tp=({index:e,optionsLength:t,classes:a={},children:r,...n})=>{const{isMobile:s,optionsPerColumn:o,optionsHeight:i,mobileColumns:c,desktopColumns:d}=Xu(),m=((e,t,a,r)=>{if(r){const t=Math.ceil(e/r);return Math.round(t*a)||0}const n=e*a,s=t*a;return Math.min(n,s)})(t,o,i,s?c:d),u={height:`${m}px`};return l().createElement(hd,ur({index:e,className:qa()("rc-province-selector-tab-panel",a.root)},n),l().createElement("ol",{className:qa()("rc-province-selector-tab-options",a.list),style:u,role:"list"},r))},ap=l().forwardRef((({name:e,value:t,index:a,className:r,children:n,onClick:s,...o},i)=>{const{selection:d,onSelection:m}=Xu(),u=l().useRef(!1);return l().createElement("li",{role:"listitem",ref:u},l().createElement("button",ur({type:"button",className:qa()("rc-province-selector-option",nd.BODY,r,{"rc-province-selector-option-selected":d[e]===t},`rc-province-selector-option-${e}`),"aria-current":d[e]===t||null,onClick:()=>{m(e,t),s&&s()},onKeyDown:a=>{const r=(()=>{const e=K().get(u,"current.nextSibling");return e?e.querySelector(".rc-province-selector-option"):null})(),n=(()=>{const e=K().get(u,"current.previousSibling");return e?e.querySelector(".rc-province-selector-option"):null})(),s=document.querySelectorAll(`.rc-province-selector-option-${e}`);switch(a.keyCode){case c.Home:a.preventDefault(),s.length&&s[0].focus();break;case c.End:a.preventDefault(),s.length&&s[s.length-1].focus();break;case c.ArrowDown:case c.ArrowRight:r&&r.focus(),a.preventDefault();break;case c.ArrowUp:case c.ArrowLeft:n&&n.focus(),a.preventDefault();break;case c.Space:case c.Return:a.preventDefault(),m(e,t)}},tabIndex:d[e]===t||0===a&&!d[e]?"0":"-1",ref:i},o),n))}));ap.displayName="ProvinceSelectorOption";const rp=l().forwardRef((({activeTab:e,onTabChange:t=(()=>{}),tabs:a=[],selection:r={},onSelection:n=(()=>{}),optionsPerColumn:s=10,optionsHeight:o=62,mobileColumns:i,desktopColumns:c,classes:d={},children:m},u)=>{const{viewport:p}=z(),g="small"===p;return l().createElement(zu.Provider,{value:{selection:r,onSelection:n,isMobile:g,optionsPerColumn:s,optionsHeight:o,mobileColumns:i,desktopColumns:c}},l().createElement("div",{className:qa()("rc-province-selector",d.root),ref:u},l().createElement(ud,{id:"rc-province-selector-tabs",className:qa()("rc-province-selector-tabs",d.tabs),index:e,handleChange:t,count:a.length},m)))}));rp.displayName="ProvinceSelectorTabs";const np=({tabs:e,activeTab:t,onTabChange:a,selection:r,onSelection:n,...s})=>l().createElement(rp,ur({activeTab:t,onTabChange:a,selection:r,onSelection:n,tabs:e},s),l().createElement(Zu,null,e.map(((e,t)=>l().createElement(Qu,{key:e.name,index:t,name:e.name,label:e.label})))),l().createElement(ep,null,e.map(((e,t)=>l().createElement(tp,{key:e.name,index:t,name:e.name,"aria-label":e.label,optionsLength:K().get(e,"options.length",0)},K().get(e,"options",[]).map(((t,a)=>l().createElement(ap,{key:t.value,name:e.name,value:t.value,index:a},t.label)))))))),sp=({addressLookupUrl:e,provinceSelectorTabs:t,onChange:a=(()=>{})})=>{const[r,n]=l().useState(0),[s,o]=l().useState([]),[i,c]=l().useState({}),d=s.filter((e=>e.options&&e.options.length>0));l().useEffect((()=>{Ju(e).then((e=>{return a=e,t.reduce(((e,t)=>{const r=K().get(a,`[${t.name}].data`);return r?[...e,{...t,options:r}]:e}),[]);var a})).then((e=>o(e)))}),[]);return{activeTab:r,setActiveTab:n,tabs:d,selection:i,handleSelection:(r,l)=>{const d=K().find(s,{name:r}),m=K().omit({...i,[r]:l},d.update),u=e=>{if(e.provinceCityDistrict)return a(e.provinceCityDistrict,m),void c(m);const r=(e=>Object.keys(e).reduce(((t,a)=>("object"==typeof e[a]&&(t.options[a]=e[a]),"string"==typeof e[a]&&(t.selection[a]=e[a]),t)),{selection:{},options:{}}))(e),l=(i=t,u=s,p=r.options,g=d.update,i.reduce(((e,t)=>{const a=K().get(p,`[${t.name}].data`),r=K().find(u,{name:t.name});return g.includes(t.name)?a?[...e,{...t,options:a}]:e:a?[...e,{...t,options:a}]:r?[...e,r]:e}),[]));var i,u,p,g;o(l),c({...m,...r.selection}),n(Object.keys(l).length-1);const y=document.querySelectorAll(".rc-province-selector-tab");y.length&&y[y.length-1].focus()};Ju(e,m).then((e=>u(e)))},reset:()=>{n(0),c({}),o((e=>e.slice(0,1)))}}},lp=({isOpen:e,isLoading:t,showAsButtonLink:a,showGeoLocationDagger:r,buttonLinkText:n,buttonLinkLabel:s,value:o,error:i,...c},d)=>{const m=zr(),{assets:u}=z(),{processing:p,geoLocationDagger:g}=u,y=!e&&t,h=qa()("icon icon-after",{"form-dropdown-chevron":!a,"icon-chevrondown":!e,"icon-chevronup":e});if(a){const e=`${m}-error`;return l().createElement("div",{className:qa()({"is-error":i})},l().createElement("span",null,s," "),y&&l().createElement("div",{role:"img",className:"waitindicator waitindicator-inline waitindicator16-gray as-address-accordion","aria-label":p}),l().createElement("button",ur({},c,{ref:d,type:"button",className:"as-buttonlink","aria-describedby":e}),o||n,r&&g,l().createElement("span",{"aria-hidden":"true",className:h})),i&&l().createElement(po,{id:e,error:i,className:"form-layout-ps-buttonlinkerror"}))}return l().createElement(ri,ur({},c,{ref:d,error:i,value:o||"",classes:{root:"form-dropdown",input:"rf-form-layout-ps-input",label:"rf-form-layout-ps-input-label"}}),l().createElement("span",{"aria-hidden":"true",className:h}))},op=l().forwardRef(lp),ip="state",cp="city",dp="district",mp=({isOpen:e,isLoading:t,tabs:a,activeTab:r,selection:n,onTabChange:s,onClose:o,selectorInputProps:i,error:c,onSelection:d,stateTabProps:m,cityTabProps:u,districtTabProps:p,locationConsent:g,showAsButtonLink:y,showGeoLocationDagger:h,buttonLinkText:E,buttonLinkLabel:v,hideInput:b,tabsRef:f,...w})=>{const N=l().useRef(!1);return!N.current&&e&&(N.current=!0),l().createElement("div",{className:"rf-form-layout-ps-container"},!b&&l().createElement(op,ur({error:c,isOpen:e,isLoading:t,showAsButtonLink:y,showGeoLocationDagger:h,buttonLinkText:E,buttonLinkLabel:v},i)),l().createElement(Yr,{in:e,onExited:o},N.current&&l().createElement(l().Fragment,null,g,l().createElement(rp,ur({tabs:a,selection:n,activeTab:r,onTabChange:s,onSelection:d,desktopColumns:4,mobileColumns:2,ref:f},w),l().createElement(Zu,null,a.map(((e,t)=>{let a;switch(e.name){case ip:a=m;break;case cp:a=u;break;case dp:a=p;break;default:a=null}return l().createElement(Qu,ur({index:t,key:e.name,name:e.name,label:e.label},a))}))),l().createElement(ep,null,a.map(((e,t)=>l().createElement(tp,{index:t,key:e.name,name:e.name,"aria-label":e.label,optionsLength:e.options.length},e.options.map(((t,a)=>l().createElement(ap,{key:t.value,name:e.name,value:t.value,index:a},t.label)))))))))))},up=l().createContext({isFullWidth:!1,classes:{},provinceSelectorProps:{},sectionHeadingTag:"h2",displayMapModKey:null}),pp=({isFullWidth:e,classes:t,provinceSelectorProps:a,sectionHeadingTag:r,children:n,displayMapModKey:s=null})=>l().createElement(up.Provider,{value:{isFullWidth:e,classes:t,provinceSelectorProps:a,sectionHeadingTag:r,displayMapModKey:s}},n),gp=()=>l().useContext(up),yp="provinceCityDistrictTabs",hp="tabSelected",Ep=(e,t,a)=>e.getModuleData(t,a.options)||[],vp="linkText",bp=({modKey:e,section:t,field:a})=>{const r=Aa(),n=Ua(),{data:s,properties:o}=Ra(e),i=ja(e,ip),d=ja(e,cp),m=ja(e,dp),u=Ha(e,a.name,{disableErrorOnBlur:!0}),{provinceSelectorProps:p}=gp(),{locationConsent:g,onChange:y}=p,h=o.isLoadingSubmit,{[yp]:E,[hp]:v,[vp]:b,showGeoLocationDisclaimer:f=!1}=s,w=t.fields[1].filter((t=>((e,t,a)=>Ep(e,t,a).length>0&&Nu(e,t,a))(r,e,t))),N=w.map((t=>({name:t.name,label:t.label||t.name,options:Ep(r,e,t)}))),S=N.findIndex((e=>e.name===v)),C={state:i.binding.value,city:d.binding.value,district:m.binding.value},T=u.state.error,{name:L,label:k}=a,I=`form-field-${L}`,A={...u.props,name:L,"data-autom":I,"aria-expanded":E},P=l().useRef(null);l().useEffect((()=>{if(P.current){const e=P.current.querySelectorAll(".rc-province-selector-tab");e.length&&S&&e[S].focus()}}),[v]),mr((()=>{y&&y(u.binding.value)}),[u.binding.value]);const D=e=>{e.keyCode!==c.Space&&e.keyCode!==c.Return||(u.binding.runClickEvents(),A.ref.current&&A.ref.current.focus())},O=!!b;return O||(A.label=k,A.readOnly=!0,A.onKeyDown=D),l().createElement(mp,ur({},p,{isOpen:E,isLoading:h,tabs:N,error:T,activeTab:S,selection:C,selectorInputProps:A,onClose:()=>{const e=u.binding.properties.valid;u.state.setError(e),A.ref.current&&A.ref.current.focus()},onTabChange:t=>{n({type:Pe,modKey:e,key:hp,value:N[t].name})},onSelection:(e,t)=>{switch(e){case ip:i.binding.setValue(t),i.binding.runSetEvents();break;case cp:d.binding.setValue(t),d.binding.runSetEvents();break;case dp:m.binding.setValue(t),m.binding.runSetEvents()}},stateTabProps:i.props,cityTabProps:d.props,districtTabProps:m.props,locationConsent:g,showAsButtonLink:O,showGeoLocationDagger:f,buttonLinkText:b,buttonLinkLabel:k,tabsRef:P}))},fp=({field:e,isOpen:t,error:a,buttonProps:r,optionProps:n,onOverlayClose:s,selectedOption:o,options:i,onSelection:c})=>{const d=`${e.name}-overlay-header`,m=!r.value&&!r.placeholder,u=qa()("form-dropdown",{"is-error":!!a}),p=qa()({"form-dropdown-multiline":!0,"is-expanded":t}),g=qa()("form-dropdown-select",{"form-dropdown-selectnone":m}),y=`${r.id}-error`;return l().createElement("div",{className:"rf-form-layout-overlayselector"},l().createElement("div",{className:u},l().createElement("div",{className:p},l().createElement("button",ur({},r,{className:g,"aria-describedby":y}),l().createElement("span",{className:"visuallyhidden"},r.label),l().createElement("span",{className:"form-dropdown-title"},r.value||r.placeholder)),l().createElement("span",{className:"form-dropdown-chevron","aria-hidden":"true"}),l().createElement("span",{className:"form-dropdown-label","aria-hidden":"true"},r.label)),a&&l().createElement("div",{id:y,className:"form-message-wrapper"},l().createElement("span",{className:"form-message"},a))),l().createElement(is,{isFullscreen:!0,appear:!0,visible:t,onClose:s,ariaLabel:d},l().createElement("fieldset",null,l().createElement("legend",{className:"form-label rf-form-layout-overlayselector-legend"},l().createElement("h2",{id:d},e.label))),l().createElement("ul",{className:"rf-form-layout-overlayselector-list",role:"list"},i.map((e=>l().createElement("li",{className:"rf-form-layout-overlayselector-item",key:e.value,onClick:()=>{c(e)}},l().createElement("input",ur({},n,{type:"radio",className:"form-selector-input",checked:o===e.value,id:e.value,value:e.value})),l().createElement("label",ur({htmlFor:e.value,className:"form-label"},Ya(e.label)))))))))},wp=({modKey:e,field:t})=>{const a=Aa(),[r,n]=Ba(e,"openMultiLineOptions",!1),[s]=Ba(e,"isAutoSelect",!1),[o,i]=l().useState(r),{props:c,binding:d,state:m}=sr(e,t.name),{name:u,label:p}=t,g=`form-field-${u}`,y=Cu(a,e),h={label:p,id:d.properties.key,onClick:()=>i(!0),"data-autom":g},E={...c,name:u},{error:v}=m;return l().useEffect((()=>{r&&(i(!0),n(!1))}),[r,n]),s&&1===y.length&&""===d.value&&c.onChange({target:{value:"0"}}),l().createElement(fp,{field:t,isOpen:o,error:v,options:y,optionProps:E,buttonProps:h,onOverlayClose:()=>{i(!1)},selectedOption:d.value,onSelection:e=>{i(!1),d.setValue(e.value),d.runSetEvents()}})},Np=e=>e?{width:e.width,left:0}:{},Sp=l().forwardRef(((e,t)=>l().createElement(cu,ur({},e,{ref:t,getPosition:Np})))),Cp=({field:e,hasAction:t,actionFieldProps:a,...r},n)=>l().createElement("div",{className:"rf-form-layout-autocomplete"},l().createElement(Sp,ur({ref:n},r,{renderInput:r=>l().createElement(ri,r,t&&l().createElement(si,a,l().createElement("span",ur({"aria-label":e.actionLabelA11y},Ya(e.actionLabel)))))}))),Tp=l().forwardRef(Cp),Lp=({modKey:e,displayMapModKey:t,field:a,tooltip:r=null,showUseManualFieldOption:n=!1,handleTypeAheadField:o=(()=>{})})=>{const i=ja(e,a.actionName),d=ja(t,"updateMap"),m=i.binding.bindExists,{assets:u}=z(),{props:p,binding:g}=dr(e,a.name,{debounce:150}),[y,h]=(0,s.useState)([{}]),E=!g.properties.optional,{options:v}=p;let b={};const{name:f,label:w}=a,N=`form-field-${f}`,S=Ua(),C=e.includes("localitySearchTypeAhead")&&"searchString"===f,[,T]=Ba(e,"typeAheadEnabled"),L=m&&"find"===a.actionName,k=K().get(window,"asMetrics.sendUserInteraction",K().noop);(0,s.useEffect)((()=>{n?h([...v,{city:null,street2:null,street3:null,street:u.useManualEntry,district:null}]):C&&h(v)}),[n,v,u.useManualEntry]),n?b={options:y,className:"rs-street-typeahead-autocomplete-dropdown",getOptionValue:e=>e.street,getOptionDisabled:e=>!e.street,renderOption:e=>l().createElement(l().Fragment,null,l().createElement("p",{className:"form-dropdown-option-title"},e.street&&e.street),e.district&&e.countryCode&&l().createElement("p",{className:"form-dropdown-option-text"},`${e.district} ${e.countryCode}`))}:C&&(b={options:y,className:"rs-locationsearch-autocomplete-dropdown",getOptionValue:e=>e.searchString,renderOption:e=>e.searchString});const I={...p,...b,name:f,label:w,search:L,required:E,onSelection:(t,a)=>{let r="";if(C){const t=p.options[a],r=e.split(".").slice(0,-1).join(".");T(!1),Object.keys(t).map((e=>{e!==f&&S({type:Pe,modKey:r,key:e,value:t[e]})})),S({type:pe,modKey:e,name:"localitySelected"})}t===u.useManualEntry?(r=u.useManualEntry.toLowerCase(),o(u.useManualEntry)):(r=`${a+1}/${Array.isArray(v)&&C?v.length:y.length-1} selected`,p.onSelection(t,a),n&&d.props.onClick()),(e=>{k({name:"metrics",data:{eVar21:`${['D=pageName+"'," |ShippingAddress",e].join("|")}"`}})})(r)},onChange:e=>{e.target.value.length<4&&n&&o(),C&&T(!0),h([]),p.onChange(e)},onKeyDown:e=>{!C&&m&&i.props.ref.current&&e.keyCode===c.Return&&i.props.ref.current.click(),p.onKeyDown(e)},"data-autom":N,"aria-required":E,"aria-invalid":!!p.error},A=qa()({"form-tooltip-textbox-wrapper":!!r});return l().createElement("div",{className:A},l().createElement(Tp,ur({field:a,hasAction:m,actionFieldProps:i.props},I)),r)},kp=l().createContext({isSublayout:!1,isPostalCodeLayout:!1}),Ip=({isSublayout:e,isPostalCodeLayout:t,children:a})=>l().createElement(kp.Provider,{value:{isSublayout:e,isPostalCodeLayout:t}},a),Ap=()=>l().useContext(kp),Pp=({modKey:e,section:t,field:a,messageId:r})=>{const n=Aa(),{isPostalCodeLayout:s}=Ap(),{displayMapModKey:o}=gp(),{viewport:i,assets:c}=z(),d="small"===i,[m,u]=Ba(e,"showUseManualFieldOption",!1),[p,g]=Ba(e,"typeAheadEnabled",!0);if("sublayout"===a.type){const t=`${e}.${a.name}`;if(!n.moduleExists(t))return null;const r="multiLineSelect"===a.component;if(["fieldList","fieldListForBilling","fieldListForInvoice"].includes(a.name)){const a=n.getModuleData(e,"enterAddressManually");return l().createElement(Yr,{in:a},l().createElement(Rp,{isSublayout:!0,modKey:t}))}return l().createElement(Rp,{isSublayout:!0,isPostalCodeLayout:r,modKey:t})}let y=null;a.tooltipContent&&(y=l().createElement(Co,{labelA11y:a.tooltipLabel,after:!0,autoAlign:!0},l().createElement(No,null,a.tooltipLabel),l().createElement(So,Ya(a.tooltipContent))));let h=null;switch(a.type){case"text":{const{typeAheadDataKey:t}=n.getBindingProps(e,a.name),s=(e=null)=>{e===c.useManualEntry&&u(!m),g(!p)};h=!!t&&p?l().createElement(Lp,{modKey:e,field:a,tooltip:y,showUseManualFieldOption:m,handleTypeAheadField:s,displayMapModKey:o}):l().createElement(Du,{modKey:e,field:a,tooltip:y,messageId:r,showUseManualFieldOption:m,handleTypeAheadField:s});break}case"select":h=l().createElement(Ou,{modKey:e,field:a});break;case"checkbox":h=l().createElement(xu,{modKey:e,field:a,tooltip:y});break;case"radio":h=l().createElement(Yu,{modKey:e,field:a});break;case"link":h=l().createElement(Fu,{modKey:e,field:a,isPostalCodeLayout:s});break;case"multiLineSelect":h=d?l().createElement(wp,{modKey:e,field:a}):l().createElement(Gu,{modKey:e,field:a});break;case"tabs":h=l().createElement(bp,{modKey:e,section:t,field:a});break;default:return null}return h},Dp=({modKey:e,row:t,section:a})=>{const r=Aa(),{message:n,messageId:s}=((e,t,a)=>{const r=a.find((a=>{if(a.fieldLevelMessage){const{active:r,visible:n}=e.getBindingProps(t,a.name);return r&&n}return!1}));return r?{message:r.fieldLevelMessage||"",messageId:`${e.getBindingProps(t,r.name).key}-fieldMessage`||""}:{message:"",messageId:""}})(r,e,t),{isFullWidth:o,classes:i}=gp(),{isSublayout:c}=Ap(),d=t.filter((t=>Nu(r,e,t))).length;if(0===d)return null;const m=t.map((t=>{const n=`rf-form-layout-field--${t.name}`,o=`large-${12/d} small-12`,c=qa()("column",o,n),m=qa()("rf-form-layout-field",i.field);return Nu(r,e,t)?l().createElement("div",{key:t.name,className:c},l().createElement("div",{className:m},l().createElement(Pp,{modKey:e,section:a,field:t,messageId:s||""}))):null})),u=t.reduce(((e,t,a)=>0===a?t.name:`${e}-and-${t.name}`),""),p="rf-form-layout-row-combo--"+u;return l().createElement(Au,{row:t,fieldCombinationClass:p,isFullWidth:o,isSublayout:c,message:n||"",messageId:s||"",classes:i,fields:m})},Op=({modKey:e,section:t,sectionId:a})=>{const{isFullWidth:r,classes:n,sectionHeadingTag:s}=gp(),{isSublayout:o}=Ap(),i=t.fields.map((a=>{const r=a.map((e=>e.name)).join("-");return l().createElement(Dp,{key:r,modKey:e,section:t,row:a})}));return l().createElement(ku,{sectionId:a,section:t,sectionHeadingTag:s,rows:i,classes:n,isFullWidth:r,isSublayout:o})},xp=({layout:e,data:t,className:a,sectionHeadingTag:r="h2"})=>{const{isFullWidth:n}=gp();return e&&t?l().createElement("div",{className:qa()("rf-form-layout","rf-form-layout-viewmode",a)},e.map(((e,a)=>{const{sectionHeader:s="",sectionSubHeader:o="",sectionMessage:i=""}=e,c=e.fields,d=Su(c,a);return l().createElement("div",{key:d,className:"rf-form-layout-section"},s&&l().createElement(Lu,{isFullWidth:n,isSublayout:!1,header:s,subHeader:o,headingTag:r,isViewMode:!0}),c.map((e=>{const a=e[0].name;return l().createElement("div",{key:a,className:"rf-form-layout-row"},e.map((e=>{if(!t[e.name])return null;const a=`${t[e.name]}`,r=e.showLabelViewMode?`${e.label}`:"";return l().createElement("span",{key:e.name,className:"rf-form-layout-field-viewmode","data-autom":`form-field-${e.name}`},r&&l().createElement("span",{className:"rf-form-layout-field-label-viewmode"},`${r.trim()}: `),a.trim())})))})),i&&l().createElement("div",{className:"rf-form-layout-section-message as-supplementalinfo large-6 small-12"},l().createElement("p",ur({className:"rf-form-layout-section-message-content"},Ya(i)))))}))):null},Rp=({modKey:e,isSublayout:t=!1,layoutKey:a="layout",isPostalCodeLayout:r=!1})=>{const n=Aa(),{isFullWidth:s,classes:o,sectionHeadingTag:i}=gp(),[c,d]=_a(e),m=Ra(e);if(!m.modExists)return null;const u=((e,t,a)=>e.getModuleData(t,a))(n,e,a);if(!u)return null;if("VIEW"===m.data.mode)return l().createElement(xp,{layout:u,data:m.data,sectionHeadingTag:i});const p=u.map(((t,a)=>{const r=Su(t.fields,a),n=`rf-form-layout-section--${r}`;return l().createElement(Op,{sectionId:n,key:r,modKey:e,section:t})}));return l().createElement(l().Fragment,null,l().createElement(Qs,{messages:c,lastUpdated:d}),l().createElement(Ip,{isSublayout:t,isPostalCodeLayout:r},l().createElement(Tu,{isSublayout:t,isFullWidth:s,sections:p,classes:o})))},Fp=({modKey:e,isFullWidth:t=!1,layoutKey:a="layout",classes:r={},provinceSelectorProps:n={},sectionHeadingTag:s="h2",...o})=>{const i=Fa(`${e}.displayMap`)?`${e}.displayMap`:null;return l().createElement(pp,{isFullWidth:t,classes:r,provinceSelectorProps:n,sectionHeadingTag:s,displayMapModKey:i},l().createElement(wu,o,l().createElement(Rp,{modKey:e,isSublayout:!1,layoutKey:a})))},Mp=({className:e,error:t,children:a})=>{const r=qa()("rs-province-selector",e);return l().createElement("div",{className:r},a,t&&l().createElement("div",{className:"is-error"},l().createElement(po,{error:t,className:"rs-province-selector-error"})))},Bp=({modKey:e,className:t,mobileColumns:a,desktopColumns:r,isBagApp:n=!1,isCheckoutApp:s=!1,hideInput:o=!1,isFullWidth:i=!1,error:c="",onChange:d})=>l().createElement(Mp,{className:t,error:c},l().createElement(Fp,{modKey:e,isFullWidth:i,provinceSelectorProps:{onChange:d,mobileColumns:a,desktopColumns:r,hideInput:o,locationConsent:l().createElement(hu,{isBagApp:n,isCheckoutApp:s})}})),_p=l().memo(Bp),$p=({visible:e,setVisible:t,saveBtnProps:a,headerId:r,children:n})=>{const{viewport:s,assets:o}=z(),i="small"===s,c=()=>{wl({eVar:bl,feature:"DeliveryOptionModel",action:"Cancel"}),t(!1)};return l().createElement(is,{className:"rs-location-overlay",visible:e,onClose:c,isFullscreen:i,fixedWidth:!0,ariaLabel:r},l().createElement("h2",{id:r,className:"rs-location-overlay-header"},o.deliveryOptionRetrieverHeader),n,l().createElement("div",{className:"rs-location-overlay-save"},l().createElement(ds,a,o.apply)),l().createElement("div",{className:"rs-location-overlay-cancel"},l().createElement("button",{type:"button",className:"as-buttonlink",onClick:c},o.cancel)))},Up=({modKey:e,isBagApp:t,isCheckoutApp:a})=>{const{assets:r}=z(),n=Ua(),[o,i]=Ba(e,"deliveryOptionsRetriever",!1),c=ja(e,"Apply"),d=c.binding.properties.isLoadingSubmit,m={...c.props,disabled:d,isLoading:d,"data-autom":"deliveryOptionApply"},u=`${e}.address`,p=Ra(u),{active:g}=p.properties;return(0,s.useEffect)((()=>{o!==g&&n({type:De,modKey:u,key:"active",value:o})}),[o,g]),l().createElement(l().Fragment,null,l().createElement($p,{visible:o,setVisible:i,saveBtnProps:m,headerId:`location-overlay-header-${e}`},l().createElement(Fp,{modKey:`${e}.address`,className:"rs-location-overlay-form",isFullWidth:!0}),l().createElement(hu,{isBagApp:t,isCheckoutApp:a})),l().createElement(wr,{isPending:d,messages:{pending:r.processing}}))},Kp=l().memo(Up),Vp=({modKey:e,className:t,isBagApp:a,isCheckoutApp:r,visibleKey:n,hasSearchTypeAhead:o,hideCancel:i})=>{const{assets:c}=z(),d=qa()("rs-location-drawer",t),m=Ua(),[u,p]=Ba(e,n||"deliveryOptionsRetriever",!1),[g]=Ba(e,"hasPostalCodeField",!1),y=`${e}.address`,h=Ra(y),{active:E}=h.properties,{id:v}=h.data,b=g||o?`#${v} input.form-textbox-input`:`#${v} select.form-dropdown-select`;(0,s.useEffect)((()=>{u!==E&&m({type:De,modKey:y,key:"active",value:u})}),[u,E]);const f=a&&o&&!i;return l().createElement(Yr,{className:d,id:`rs-edit-location-${e}`,in:u,onEntered:()=>{const e=document.querySelector(b);e&&e.focus()}},l().createElement("div",{className:qa()("rs-location-edit",{"rs-location-with-cancel":f})},l().createElement(Fp,{modKey:y,id:v,isFullWidth:!0}),f&&l().createElement("button",{className:"as-buttonlink typography-body",type:"button",onClick:()=>{p(!1)}},c.cancel)),l().createElement(hu,{isBagApp:a,isCheckoutApp:r}))},Hp=l().memo(Vp),jp=({template:e="",children:t})=>{const a=e.toLowerCase().replace(/_/g,"-"),r=a?`rs-${a}`:"",n=qa()("rs-item-shipping rs-item-delivery","as-icondetails",r,{"rs-item-shipping-template":Boolean(e)});return l().createElement("div",{className:n},l().createElement("div",ur({className:"as-icondetails-icon as-svgicon-container"},Ya('<svg class="as-svgicon-rtl-mirrored as-svgicon as-svgicon-boxtruck as-svgicon-tiny as-svgicon-boxtrucktiny" viewBox="0 0 21 21" role="img" aria-hidden="true" width="21px" height="21px"><path fill="none" d="M0 0h21v21H0z"/><path fill="#1d1d1f" d="M19.559 10.274 17.24 7.53A1.688 1.688 0 0 0 15.918 7H15v-.75A2.25 2.25 0 0 0 12.75 4h-8.5A2.25 2.25 0 0 0 2 6.25V13a2.25 2.25 0 0 0 2.25 2.25h.56A2.248 2.248 0 0 0 7 17a2.202 2.202 0 0 0 2.19-2H14a2.214 2.214 0 0 0 2.25 2 2.248 2.248 0 0 0 2.19-1.75h.016A1.4 1.4 0 0 0 20 13.747v-2.363a1.61 1.61 0 0 0-.441-1.11ZM8.142 15.25a1.245 1.245 0 0 1-2.284 0 1.212 1.212 0 0 1 0-1 1.245 1.245 0 0 1 2.284 0 1.212 1.212 0 0 1 0 1ZM9.15 14a2.267 2.267 0 0 0-4.34.25h-.56A1.252 1.252 0 0 1 3 13V6.25A1.251 1.251 0 0 1 4.25 5h8.5A1.251 1.251 0 0 1 14 6.25V14Zm8.242 1.25a1.245 1.245 0 0 1-2.284 0 1.212 1.212 0 0 1 0-1 1.245 1.245 0 0 1 2.284 0 1.212 1.212 0 0 1 0 1ZM19 13.747c0 .334-.084.503-.544.503h-.016A2.245 2.245 0 0 0 15 12.88V8h.918a.681.681 0 0 1 .592.211l2.324 2.752a.617.617 0 0 1 .166.42Z"/></svg>'))),l().createElement("div",{className:"as-icondetails-detail","data-autom":"rs-item-delivery-details"},t))},Gp=({quote:e})=>e?l().createElement("div",{className:"rs-item-electronic-delivery rs-item-delivery"},l().createElement("span",{className:"rs-bag-delivery-egc"},e)):null,Wp="DUDE_APU_N",qp=({template:e,deliveryHeader:t,shippingLabel:a,deliveryToLabel:r,shipMethodQuote:n,showEditBtn:s,editBtn:o,inlineEditor:i})=>{const{assets:c}=z();if(e===Wp){const{dudeDeliversToLabelCondensed:e,dudeDeliversToLabelFull:d=""}=c;let m=r||e;if(s){m=(r||d).split("{loc}").filter((e=>e)).map(((e,t)=>l().createElement(l().Fragment,{key:e},e,0===t&&o)))}return l().createElement(l().Fragment,null,t&&l().createElement("div",{className:"rs-item-shipping-header"},t),l().createElement("div",{className:"rs-item-shipping-summary as-icondetails-label"},a&&l().createElement("span",{className:"rs-item-shipping-label"},a),l().createElement("span",{className:"rs-item-delivers-to"},m)),i,n.map((({date:e,postfix:t,tooltip:a})=>l().createElement("div",{key:`${e}-${t}`,className:"rs-item-shipping-quote-line as-icondetails-value"},t?l().createElement(l().Fragment,null,e," — ",t):e,a&&l().createElement(Co,{className:"rs-item-shipping-tooltip",labelA11y:l().createElement("span",Ya(a)),autoAlign:!0,after:!0},l().createElement("span",Ya(a)))))))}return null},Yp=({shippingLabel:e,shipMethodQuote:t=[],showEditLine:a,editTitle:r,editBtn:n,isPrescription:s,inlineEditor:o})=>{const i=a&&s;return l().createElement("div",{className:qa()({"rs-item-shipping-prescription":s})},l().createElement("div",{className:"rs-item-shipping-label as-icondetails-label"},e," ",i&&n),i&&o,t.map((({date:e,postfix:t})=>l().createElement("div",{key:`${e}-${t}`,className:"rs-item-shipping-detail-line as-icondetails-value"},t?`${e} - ${t}`:e))),a&&!s&&l().createElement("div",{className:"rs-item-shipping-detail-line"},`${r} `,n))},zp=()=>{const{assets:e}=z(),t=(0,s.useRef)(null),{modKey:a,editLocation:r}=ul(),[n]=Ma(a),{name:o}=n,[i]=Ma(`${a}.delivery`),{ships:c={},delivers:d={},pickup:m,isElectronic:u}=i,p=Boolean(m),g=Boolean(i.delivers&&u),y=Boolean(c.templateID),{type:h,isEditing:E,setIsEditing:v,showGeoLocationDisclaimer:b,deliveryOptions:f}=r,w=`${a}.delivery.lineDeliveryOptions`,N=`${a}.delivery.lineDeliveryOptions.address`,S=Fa(`${a}.delivery.lineDeliveryOptions`),C=Xs(E);if(g)return l().createElement(Gp,{quote:d.quote});const T=qm({editLocation:r,deliveryData:i,hasDeliveryOptions:S}),L=h===Hm,k=h===Km,I=h===Vm,A=h===Um&&!T,P=c.showShipLabel?e.deliveryLabel:c.resolvedShipLabel,D=Ym({editLocation:r,assets:e}),O=S&&!T,x=L||k||f.isDeliveryOptionDrawerEnabled,R=x||!x&&!E,F=zm({editLocation:r,assets:e}),M=Xm({editLocation:r,assets:e,productName:o}),B=Jm({editLocation:r}),_=l().createElement(eu,{showBtn:R,isEditing:E,wasEditing:C,setIsEditing:v,showDagger:b,label:F,"aria-label":`${F} ${M}`,"data-autom":B,showChevron:!L,btnRef:t,"aria-controls":`rs-edit-location-${w}`}),$=l().createElement(l().Fragment,null,A&&l().createElement(vu,{triggerRef:t,modKey:N,isBagApp:!0}),I&&l().createElement(Hp,{modKey:w,className:qa()({"as-icondetails-detail":!y}),hasSearchTypeAhead:f.hasSearchTypeAhead,isBagApp:!0}));return l().createElement("div",{className:"rs-delivery-container"},l().createElement(jp,{hasPickup:p,template:c.templateID},y?l().createElement(qp,{template:c.templateID,shippingLabel:P,deliveryToLabel:c.deliveryToLabel,shipMethodQuote:c.shipMethodQuote,deliveryHeader:c.deliveryHeader,showEditBtn:O&&void 0!==E&&!E,editBtn:_,inlineEditor:$}):l().createElement(Yp,{shippingLabel:P,shipMethodQuote:c.shipMethodQuote,showEditLine:O,isPrescription:c.isPrescription,inlineEditor:$,editTitle:D,editBtn:_})),!y&&!c.isPrescription&&$,k&&l().createElement(_p,{modKey:N,className:"as-icondetails-detail",mobileColumns:2,desktopColumns:2,hideInput:!0,isBagApp:!0,isFullWidth:!0}),L&&l().createElement(Kp,{modKey:w,isBagApp:!0}))},Xp=l().memo(zp),Jp=({template:e,children:t})=>{const a=e.toLowerCase().replace(/_/g,"-"),r=a?`rs-${a}`:"",n=qa()("rs-item-pickup","as-icondetails",r,{"rs-item-shipping-template":Boolean(e)});return l().createElement("div",{className:n},l().createElement("div",ur({className:"as-icondetails-icon as-svgicon-container"},Ya('<svg viewBox="0 0 25 25" class="as-svgicon as-svgicon-applestorepickup as-svgicon-reduced as-svgicon-applestorepickupreduced" role="img" aria-hidden="true" width="25px" height="25px"><path fill="none" d="M0 0h25v25H0z"/><path d="M18.5 5h-1.775a4.231 4.231 0 0 0-8.45 0H6.5A2.5 2.5 0 0 0 4 7.5v11A2.5 2.5 0 0 0 6.5 21h12a2.5 2.5 0 0 0 2.5-2.5v-11A2.5 2.5 0 0 0 18.5 5Zm-6-3a3.245 3.245 0 0 1 3.225 3h-6.45A3.245 3.245 0 0 1 12.5 2ZM20 18.5a1.5 1.5 0 0 1-1.5 1.5h-12A1.5 1.5 0 0 1 5 18.5v-11A1.5 1.5 0 0 1 6.5 6h12A1.5 1.5 0 0 1 20 7.5Z"/><path d="M14.4 12.448a1.592 1.592 0 0 1 .738-1.328 1.607 1.607 0 0 0-1.37-.687c-.52 0-.941.317-1.22.317s-.663-.3-1.129-.3a1.861 1.861 0 0 0-1.739 2.068 4.32 4.32 0 0 0 .723 2.3c.346.491.648.883 1.084.883s.617-.287 1.144-.287c.55 0 .663.279 1.137.279s.791-.43 1.084-.853a3.24 3.24 0 0 0 .474-.989 1.516 1.516 0 0 1-.926-1.403ZM12.583 10.357a1.346 1.346 0 0 0 .941-.5 1.594 1.594 0 0 0 .361-.974.731.731 0 0 0-.008-.136 1.5 1.5 0 0 0-1.016.528 1.547 1.547 0 0 0-.384.943c0 .053.008.106.008.128.03.004.06.011.098.011Z"/></svg>'))),l().createElement("div",{className:"as-icondetails-detail","data-autom":"rs-item-delivery-details"},t))},Zp=({pickupLabel:e,pickupDescription:t,pickupQuote:a,removeGiftingBtn:r,storeLocatorBtn:n})=>l().createElement(l().Fragment,null,e&&l().createElement("span",ur({className:"as-icondetails-label"},Ya(e))),t&&l().createElement("span",ur({className:"as-icondetails-value"},Ya(t))),a&&l().createElement("span",ur({className:"as-icondetails-value"},Ya(a))),r&&l().createElement("span",{className:"as-icondetails-value"},r),n&&l().createElement("span",{className:"as-icondetails-value"},n)),Qp="DUDE_APU_N",eg=({template:e,pickupLabel:t,pickupDescription:a,pickupQuote:r,storeName:n,quoteValue:s,isPickupStoreAvailable:o,showStoreLocator:i,storeLocatorBtn:c,isWarmState:d,showLabelInBold:m})=>{if(e===Qp){let e=r;o&&s&&(e=e.replace(s,`<strong>${s}</strong>`));const u=i&&n?e.split(n).filter((e=>e)):[e],p=e.startsWith(n),g=!d||m?`<strong>${t}</strong>`:t;return l().createElement(l().Fragment,null,t&&l().createElement("div",ur({className:"rs-pickup-label"},Ya(g))),a&&l().createElement("div",ur({className:"rs-pickup-description"},Ya(a))),e&&l().createElement("div",{className:"rs-pickup-quote"},u.map(((e,t)=>l().createElement(l().Fragment,{key:e},0===t&&n&&p&&i&&c,l().createElement("span",ur({className:"rs-pickup-quote-piece"},Ya(e))),0===t&&n&&!p&&i&&c)))),!n&&i&&c)}return null},tg=({children:e,...t},a)=>{const{assets:r}=z();return l().createElement("button",ur({},t,{ref:a,type:"button",className:"as-buttonlink","data-autom":"bag-giftmessage-remove","aria-label":`${r.remove} ${r.giftMsgLabel}`}),e)},ag=l().forwardRef(tg),rg=({isLoading:e,children:t,...a},r)=>e?l().createElement("div",{role:"img",className:"waitindicator waitindicator-inline waitindicator16-gray"}):l().createElement("button",ur({},a,{ref:r,type:"button",className:"as-buttonlink as-buttonlink-inline","data-autom":"bag-seemorestores-link"}),t),ng=l().forwardRef(rg),sg=({isOpen:e})=>{const t=e?"icon-chevronup":"icon-chevrondown",a=qa()("icon icon-after",t);return l().createElement("span",{className:a,"aria-hidden":"true"})},lg=({items:e=[]})=>l().createElement("ul",{role:"list",className:"rt-storelocator-store-multipleavailability-list"},e.map((e=>{const t=(e=>qa()({"rt-storelocator-store-availabilityquote":e.availableNowForLine}))(e);return l().createElement("li",{key:e.partId,role:"listitem",className:"row rt-storelocator-store-multipleavailability-item"},l().createElement("div",{className:"column large-7"},e.partName),l().createElement("div",{className:"column large-5 rt-storelocator-store-multipleavailability-quote"},l().createElement("span",{className:t},(e=>e.checkInRequiredMessage?`${e.availabilityQuote} - ${e.checkInRequiredMessage}`:e.availabilityQuote)(e)),e.pickupMethod&&l().createElement("div",Ya(e.pickupMethod))))}))),og=({idx:e,store:t,name:a,onChange:r,distance:n,dataAutom:s,showMarker:o,isSelected:i,pickupInfo:c,isLoadingStoreSelection:d},m)=>{const{storeId:u,storeName:p,storeDisabled:g,availability:y,storeType:h,recommendationLabel:E}=t,{storeAvailability:v,pickupMethod:b="",waitTimeMessage:f="",multiplePickupMethods:w,availableNowForAllLines:N,lineItemAvailability:S=[],sameAvailabilityForAllLineItems:C}=y,T=Boolean(S.length>1&&!C),L=i&&(T||w||f),k=qa()({"rt-storelocator-store-availabilityquote":N}),I=qa()("rt-storelocator-store-marker",{"rt-storelocator-store-marker-apple":"APPLE"===h,"rt-storelocator-store-marker-pup":"PUP"===h});return l().createElement(l().Fragment,null,l().createElement(Od,{ref:m,name:a,value:u,checked:i,disabled:g,onChange:r,"data-autom":s,withAriaLabeledBy:!0},l().createElement("span",{className:"row align-items-center"},l().createElement("span",{className:"column large-6 small-7 rt-storelocator-store-left"},E&&l().createElement("span",{className:"rt-storelocator-store-recommended typography-caption"},E),l().createElement("span",{className:"rt-storelocator-store-location"},o&&l().createElement("span",{className:I},e+1),l().createElement("span",null,l().createElement("span",ur({className:"form-selector-title"},Ya(p))),l().createElement("span",{className:"form-label-small"},n)))),l().createElement("span",{className:"column large-6 small-5 rt-storelocator-store-right"},l().createElement("span",null,l().createElement("span",ur({className:k},Ya(v))),l().createElement("span",ur({className:"form-label-small"},Ya(b))))))),L&&l().createElement("li",{className:"rt-storelocator-store-multipleavailability typography-body-reduced"},l().createElement(Wr,{in:d,exit:!1,unmountOnExit:!0},l().createElement("div",{className:"rt-storelocator-store-multipleavailability-spinner"},l().createElement("div",{className:"waitindicator waitindicator24-gray"}))),l().createElement(Wr,{in:!d},l().createElement(lg,{items:S}),c)))},ig=l().forwardRef(og),cg=(e,t)=>new window.mapkit.Coordinate(e,t),dg=l().createContext(null),mg=(e,t)=>(Date.now()-e)/1e3>=t.maxAge,ug=({apiKey:e="",calculateDistances:t,cacheConfig:a={},children:r})=>{const[n,o]=(0,s.useState)(!1),c={maxAge:900,disableCache:!1,...a},d=(0,s.useRef)({distances:{},coordinates:{}});(0,s.useEffect)((()=>{t&&e&&((e,t=K().noop)=>{if(document.querySelector("script[data-mapkit-loaded]"))return void t(window.mapkit);const a=document.createElement("script");a.type="application/javascript",a.id="mapScript",a.src="https://cdn.apple-mapkit.com/mk/5.x.x/mapkit.core.js",a.setAttribute("crossorigin","anonymous"),a.setAttribute("data-libraries","services,map,annotations"),a.setAttribute("data-initial-token",e),a.setAttribute("data-callback","initMapKit"),window.initMapKit=()=>{a.setAttribute("data-mapkit-loaded","true"),t(window.mapkit),delete window.initMapKit},document.body.appendChild(a)})(e,(()=>{o(!0)}))}),[t,e]);return l().createElement(dg.Provider,{value:{isMapKitInitialized:n,getCoordinates:async e=>{const t=i("react-trans/getCoordinates"),a=d.current.coordinates;if(!c.disableCache){const t=a[e];if(t){if(!mg(t.retrievedAt,c))return t.value;delete a[e]}}try{const t=await(async(e,t={})=>{const a=new window.mapkit.Geocoder;return new Promise(((r,n)=>{a.lookup(e,((e,t)=>e?n(e):r(t)),t)}))})(e),[r]=t.results;let n=null;return r&&(n=r.coordinate,!c.disableCache&&r&&(a[e]={value:n,retrievedAt:Date.now()})),n}catch(e){throw t.error(e),Error(e)}},getStoreDistances:(e,t,a,r)=>{const n=i("react-trans/getStoreDistances"),s={},l=d.current.distances;let o;if(c.disableCache)o=a;else if(l[e]){const t=a.filter((t=>{const a=l[e][t.storeId];return!a||!!mg(a.retrievedAt,c)&&(delete l[e][t.storeId],!0)}));if(0===t.length)return new Promise((t=>t(l[e])));o=t}else o=a;const m=[];K().chunk(o,10).forEach((e=>{const a=e.map((e=>e.coordinates)),r=((e,t,a={})=>{const r=window.mapkit,n=new r.Directions,s=new r.Coordinate(e.latitude,e.longitude),l=t.map((e=>new r.Coordinate(e.latitude,e.longitude)));return new Promise(((e,t)=>{n.eta({origin:s,destinations:l},((a,r)=>a?t(a):e(r)),a)}))})(t,a);m.push(r)}));return Promise.all(m).then((t=>(t.forEach(((t,n)=>{const{etas:o}=t;o.forEach(((t,o)=>{if(t.distance){const i=Date.now(),d=a[o+10*n],m=((e,t)=>"MI"===t?`${(.000621371192*e).toFixed(2)} mi`:`${(e/1e3).toFixed(2)} km`)(t.distance,r),{storeId:u}=d;c.disableCache||(l[e]||(l[e]={}),l[e][u]={value:m,retrievedAt:i}),s[u]={value:m,retrievedAt:i}}}))})),s))).catch((e=>(n.error(e),s)))}}},r)},pg=()=>{const e=l().useContext(dg);if(!e)throw new Error("`useStoreLocator` hook could not access Context. Ensure that it is a child of `<StoreLocatorProvider>`.");return e},gg=({origin:e,stores:t,showMap:a,calculateDistances:r,selectedStoreId:n,distanceUnit:o,maxVisibleStores:c,storeDataAutom:d,selectedStorePickupInfo:m,isSingleStoreCountry:u,isLoadingStoreSelection:p,showAllStoresButtonLabel:g,useFallbackDistances:y,onShowAllStoresClick:h,onStoreSelection:E})=>{const v=i("react-trans/StoreList"),b=(0,s.useRef)(null),[f,w]=(0,s.useState)(null),[N,S]=(0,s.useState)({}),C=(0,s.useRef)(!1),[T,L]=(0,s.useState)(!1),{isMapKitInitialized:k,getCoordinates:I,getStoreDistances:A}=pg(),P=(0,s.useCallback)(I,[]),D=(0,s.useCallback)(A,[]),O=!T&&t.length>c,{assets:x}=z();(0,s.useEffect)((()=>{e&&r&&k&&(C.current=!0,(async()=>{try{const t=await P(e);w(t)}catch(e){v.error(e),w(null)}C.current=!1})())}),[e,r,k,P]),(0,s.useEffect)((()=>{S({}),!C.current&&f&&(async()=>{const a=await D(e,f,t,o);a&&S(a)})()}),[e,f,t,o,D]);const R=(e,t)=>{const{storeId:s,distance:l=""}=e,o=s,i=s===n,c=d;let g="";g=u?K().get(e,"retailAddress.street",""):r?N[e.storeId]?N[e.storeId].value:y?l:"":l;return{key:o,idx:t,name:"store-locator-result",store:e,isSelected:i,dataAutom:c,showMarker:a,isLoadingStoreSelection:p,distance:g,pickupInfo:m,onChange:t=>{E(e,t)}}};return l().createElement("div",{className:"rt-storelocator-store-list"},l().createElement("fieldset",null,l().createElement("legend",{className:"visuallyhidden"},x.selectYourStore),l().createElement(xd,{className:"rt-storelocator-store-group"},t.map(((e,t)=>{if(t>=c)return null;const a=R(e,t);return l().createElement(ig,a)}))),O&&l().createElement("button",{type:"button",className:"as-buttonlink rt-storelocator-store-showmore",onClick:e=>{L(!0),h(e)},"data-autom":"show-more-stores-button"},g," ",l().createElement(sg,{isOpen:!O})),l().createElement(Yr,{in:T,onEnter:()=>{b.current&&b.current.focus()}},l().createElement(xd,{className:"rt-storelocator-store-group"},t.map(((e,t)=>{if(t<c)return null;const a=R(e,t),r=t===c;return l().createElement(ig,ur({ref:r?b:null},a))}))))))},yg=e=>e.getBoundingClientRect().top+window.scrollY,hg=e=>parseInt(window.getComputedStyle(e).getPropertyValue("margin-top"),10),Eg=(e,t,a)=>{if("string"==typeof e){const r=document.querySelector(e);return r?yg(r)-(a?hg(r):0):t}return void 0===e?t:e},vg=(e,t)=>{const a=A(),r=a.iosVersion>0||a.androidVersion>0,n=Boolean(e||t&&r);return!a.positionSticky||n},bg=(e,t,a)=>({"data-core-sticky":"","data-core-sticky-css":t?void 0:"","data-core-sticky-stuck":t&&e?"":void 0,"data-core-sticky-endpin":t&&a?"":void 0}),fg=e=>{const{noCss:t,mobileNoCss:a,minHeight:r,maxHeight:n,onStickyChange:o,children:i,...c}=e,[d,m]=(0,s.useState)({min:0,max:0,scrollTop:0,offsetTop:0}),[u,p]=(0,s.useState)(!1),[g,y]=(0,s.useState)(!1),[h,v]=(0,s.useState)(vg(t,a)),[b,f]=(0,s.useState)({top:h?d.offsetTop:""}),[w,N]=(0,s.useState)(bg(g,h,u)),S=(0,s.useRef)(null),C=(0,s.useRef)(0);(0,s.useEffect)((()=>{v(vg(t,a))}),[t,a]);const T=(0,s.useCallback)((()=>{if(h&&S.current){const e=S.current,t=E.getViewportScrollY(),a=C.current||yg(e)-hg(e);C.current=a;const s=Eg(r,a,!1),l=Eg(n,1/0,!0)-(e=>{const t=window.getComputedStyle(e);return e.offsetHeight+parseInt(t.getPropertyValue("margin-top"),10)+parseInt(t.getPropertyValue("margin-bottom"),10)})(e),o=Math.max(Xa(t,s,l)-a,0);m({min:s,max:l,scrollTop:t,offsetTop:o});const i=t>s&&t<l;y(i);p(!i&&t>l)}}),[n,r,h]);return $("scroll",T),(0,s.useLayoutEffect)((()=>{const e=bg(g,h,u);N(e)}),[g,h,u]),(0,s.useLayoutEffect)((()=>{h&&f(g?{top:""}:{top:d.offsetTop})}),[g,h,d.offsetTop]),mr((()=>{o&&o(g)}),[o,g]),l().createElement("div",ur({},c,w,{ref:S,style:b}),i)},wg=({store:e})=>{const{storeName:t,storeHours:a,specialHours:r,specialHoursLabel:n,phoneNumber:o,personalSetupDetail:i,comparePickupOptionsLink:c,pickupMessages:d,pupAuthorizedLabel:m,pickupMessageHeader:u,pickupMessageSubHeader:p,pickupMessageCommonLabel:g,lockerBoxDetail:y,showTradeInInfo:h,retailAddress:E,availability:v,shippingPayMonthlyInstruction:b}=e,f=e.storeHours.length>0,w=e.specialHours.length>0,{waitTimeMessage:N="",waitTimeMessageHeader:S=""}=v,C=Boolean(S||N),[T,L]=(0,s.useState)(!1),{assets:k,fragments:I,viewport:A}=z(),P="small"===A,D=K().get(window,"chatConfig.chat",null);return l().createElement("div",{className:"rt-storelocator-details typography-body-reduced"},b&&l().createElement("div",{className:"rt-storelocator-details-item rt-storelocator-details-monthly-instruction"},b),l().createElement("h3",{className:"rt-storelocator-details-header typography-body"},t),m&&l().createElement("div",{className:"rt-storelocator-details-item"},m),E&&l().createElement("div",{className:"rt-storelocator-details-address"},l().createElement(xp,{layout:E.layout,data:E})),o&&l().createElement("div",{className:"rt-storelocator-details-item"},o),f&&l().createElement("div",{className:"rt-storelocator-details-item"},a.map((e=>l().createElement("div",{key:e.storeDays,className:"row"},l().createElement("div",{className:"columns large-5"},l().createElement("span",{"aria-label":e.voStoreDays,role:"text"},e.storeDays)),l().createElement("div",{className:"columns large-7 rt-storelocator-details-item-storetimings"},l().createElement("span",null,e.storeTimings)))))),w&&l().createElement("div",{className:"rt-storelocator-details-item"},l().createElement("h4",{className:"rt-storelocator-details-subheader"},n),r.map((e=>l().createElement("div",{key:e.storeHolidayDays,className:"row"},l().createElement("div",{className:"columns large-5"},l().createElement("span",null,e.storeHolidayDays)),l().createElement("div",{className:"columns large-7 rt-storelocator-details-storeholidaytiming"},l().createElement("span",null,e.storeHolidayTiming)))))),i&&l().createElement("div",{className:"rt-storelocator-details-item"},l().createElement("div",Ya(i))),d&&l().createElement("div",{className:"rt-storelocator-details-item"},u&&l().createElement("h4",{className:"rt-storelocator-details-subheader"},u),p&&l().createElement("div",Ya(p)),d.map((e=>l().createElement("div",{key:e.pickupMethod,className:"rt-storelocator-details-subitem"},l().createElement("h4",{className:"rt-storelocator-details-subheader"},e.pickupMethod),l().createElement("p",Ya(e.description)))))),g&&l().createElement("div",{className:"rt-storelocator-details-item"},l().createElement("div",Ya(g))),c&&l().createElement("div",{className:"rt-storelocator-details-item"},l().createElement("div",Ya(c))),C&&l().createElement("div",{className:"rt-storelocator-details-item rt-storelocator-details-waittime"},S&&l().createElement("h3",{className:"rt-storelocator-details-subheader"},S),N&&l().createElement("div",Ya(N))),y&&l().createElement("div",{className:"rt-storelocator-details-item"},l().createElement("div",Ya(y))),h&&l().createElement("div",{className:"rt-storelocator-details-item rt-storelocator-details-instructions"},l().createElement("div",Ya(I.tradeInMessageInstructions)),l().createElement("button",ur({id:"tradein-overlay-button",className:"as-buttonlink",type:"button",onClick:()=>L(!0)},Ya(k.tradeinOverlayLink))),l().createElement(is,{visible:T,onClose:()=>L(!1),isFullscreen:P,ariaLabel:"rs-tradeinoverlay-header",fixedWidth:!0,noPadding:!0},l().createElement("div",Ya(I.smartphoneTradeInOverlayContent)),D&&l().createElement("div",{className:"rs-chatspecialist-wrapper"},l().createElement("div",{className:"as-chat rs-chat rs-chatspecialist"},l().createElement("div",ur({className:"rs-chat-content"},Ya(I.chatSpecialist))))))))},Ng={cameraDistance:300,showsMapTypeControl:!1},Sg="rt-storelocator-map-annotation",Cg="rt-storelocator-map-annotation-selected",Tg="rt-storelocator-map-annotation-apple",Lg="rt-storelocator-map-annotation-pup",kg=(e,t)=>{const{data:a}=t,{idx:r,storeType:n,storeId:s,isSelected:l}=a,o=qa()(Sg,{[Cg]:l,[Tg]:"APPLE"===n,[Lg]:"PUP"===n}),i=document.createElement("div");return i.textContent=r+1,i.className=o,i.setAttribute("data-store-id",s),i},Ig=({stores:e,selectedStore:t,onExpandMapClick:a})=>{const r=zr(),n=(0,s.useRef)(null),o=(0,s.useRef)(null),i=(0,s.useRef)([]),c=`storelocator-map-container-${r}`,{assets:d,viewport:m}=z(),{isMapKitInitialized:u}=pg(),[p,g]=(0,s.useState)(!1),[y,h]=(0,s.useState)(!1),E="small"===m,v=qa()("rt-storelocator-map",{"rt-storelocator-map-expanded":p}),{expandMap:b,collapseMap:f,mapLabelA11y:w}=d;(0,s.useEffect)((()=>(u&&(n.current=((e,t={})=>new window.mapkit.Map(e,t))(c,Ng),h(!0)),()=>{n.current&&n.current.destroy()})),[c,u]),(0,s.useEffect)((()=>{if(y&&n.current){i.current.length>0&&n.current.removeAnnotations(i.current);const a=((e,t,a)=>{const{locationA11y:r=""}=a;return e.map(((e,a)=>{const{coordinates:n,storeType:s,storeId:l,storeName:o}=e;if(n){const e=cg(n.latitude,n.longitude),i=l===t.storeId,c={title:`${r} ${o}`.trim(),data:{idx:a,storeType:s,storeId:l,isSelected:i},animates:!0};return new window.mapkit.Annotation(e,kg,c)}return null})).filter(Boolean)})(e,t,d);i.current=a,n.current.addAnnotations(i.current)}}),[d,y,t,e]),(0,s.useEffect)((()=>{const e=o.current;if(y&&e){const a=e.querySelectorAll(`.${Sg}`);a&&a.forEach((e=>{const{storeId:a}=e.dataset;a===t.storeId?e.classList.add(Cg):e.classList.remove(Cg)}))}}),[y,t.storeId]),(0,s.useEffect)((()=>{if(y&&n.current){const e=t.coordinates;if(e){const t=cg(e.latitude,e.longitude);n.current.center=t,n.current.cameraDistance=Ng.cameraDistance}}}),[y,t.coordinates,t.storeId]);return l().createElement("div",{className:"rt-storelocator-map-container"},!E&&l().createElement("button",{type:"button",className:"as-buttonlink rt-storelocator-map-expand-button typography-body-reduced",onClick:()=>{g((e=>!e)),a(!p)}},p?f:b," ",l().createElement(sg,{isOpen:p})),l().createElement("div",{id:c,ref:o,"aria-label":w,className:v,role:"group"}))},Ag=({stores:e,selectedStore:t,showMap:a,afterDetails:r,beforeDetails:n,shouldStickDetails:s,onExpandMapClick:o})=>{const i=`rt-storelocator-anchor-${zr()}`,c=`#${i}`,d=l().createElement("div",{className:"rt-storelocator-additionalinfo"},n,l().createElement(wg,{store:t}),r,a&&l().createElement(Ig,{stores:e,selectedStore:t,onExpandMapClick:o}));return l().createElement(l().Fragment,null,s?l().createElement(fg,{maxHeight:c},d):d,l().createElement("div",{id:i}))},Pg=(e,t)=>e.find((e=>e.storeId===t))||null,Dg=({stores:e,cacheConfig:t,origin:a="",calculateDistances:r=!1,apiKey:n="",showMap:o=!1,distanceUnit:i="KM",storeDataAutom:c="",beforeDetails:d=null,afterDetails:m=null,selectedStoreId:u="",maxVisibleStores:p=1/0,showAllStoresButtonLabel:g="",selectedStorePickupInfo:y=null,shouldStickDetails:h=!0,isLoadingStoreSelection:E=!1,isSingleStoreCountry:v=!1,onExpandMapClick:b=K().noop,onStoreSelection:f=K().noop,onShowAllStoresClick:w=K().noop,useFallbackDistances:N=!1})=>{const[S,C]=(0,s.useState)((()=>Pg(e,u)));return(0,s.useEffect)((()=>{if(u){const t=Pg(e,u);C(t)}}),[u,e]),l().createElement(ug,{apiKey:n,cacheConfig:t,calculateDistances:r},l().createElement("div",{className:"rt-storelocator","data-autom":"rt-storelocator-searchresult"},l().createElement("div",{className:"row"},l().createElement("div",{className:"column small-12 large-6"},l().createElement(gg,{useFallbackDistances:N,origin:a,stores:e,calculateDistances:r,selectedStoreId:u,distanceUnit:i,maxVisibleStores:p,storeDataAutom:c,selectedStorePickupInfo:y,isSingleStoreCountry:v,beforeDetails:d,afterDetails:m,showMap:o,isLoadingStoreSelection:E,showAllStoresButtonLabel:g,onStoreSelection:f,onShowAllStoresClick:w})),l().createElement("div",{className:"column small-12 large-5"},S&&l().createElement(Ag,{stores:e,selectedStore:S,showMap:o,afterDetails:m,beforeDetails:d,shouldStickDetails:h,onExpandMapClick:b})))))},Og=e=>{const t=(0,s.useRef)([]),a=(0,s.useRef)(""),[r]=Ma(e),[n,l]=Ma(`${e}.searchResults`),o=(0,s.useRef)([]),{mapCoordinates:i,searchInput:c,noOfVisibleStore:d=1/0,showMoreLink:m,distanceUnit:u,mapsEnabled:p,mapApiKey:g,singleStoreCountry:y,isDrivingDistancesEnabled:h,showAllStores:E,useFallbackDistances:v}=r,[b,f]=(0,s.useState)(c),{retailStores:w}=n,N=E?1/0:parseFloat(d);t.current=w,o.current=i,a.current=c;const S=(0,s.useMemo)((()=>(f(a.current),((e=[],t=[])=>e.map((e=>{const a={...e},r=t.find((t=>t.storeNumber===e.storeId));if(r){const{storeType:e}=r;a.storeType=e,a.coordinates={latitude:parseFloat(r.latitude),longitude:parseFloat(r.longitude)}}return a})).sort((e=>e.recommendationLabel?-1:0)))(t.current,o.current))),[l]),C=sr(e,"selectStore");return{origin:b,stores:S,distanceUnit:u,selectedStoreId:C.binding.value,maxVisibleStores:N,apiKey:g,showMap:p,isLoadingStoreSelection:C.binding.properties.isLoadingSubmit,showAllStoresButtonLabel:m,isSingleStoreCountry:y,calculateDistances:h,onStoreSelection:(e,t)=>{C.props.onChange(t)},useFallbackDistances:v}},xg=({hasResults:e,hasProvinceSelector:t,overlayProps:a,searchField:r,messages:n,storeLocator:s,footerContent:o})=>{const{viewport:i,assets:c}=z(),d="small"===i,m=qa()("rs-store-locator-overlay",{"rs-has-results":e,"rs-has-province-selector":t});return l().createElement(is,ur({},a,{className:m,isFullscreen:d,footerContent:o,fixedWidth:!0,noPadding:!0,ariaLabel:"rs-store-locator-title-id"}),l().createElement("div",{className:"rs-store-locator-header"},l().createElement("h2",{id:"rs-store-locator-title-id",className:"rs-store-locator-title"},c.storeLocatorHeader),r),l().createElement("div",{className:"rs-store-locator-wrap"},n,s))},Rg=e=>e?{width:e.width,left:0}:{},Fg=l().forwardRef(((e,t)=>l().createElement(cu,ur({},e,{className:"rf-form-layout-autocomplete",ref:t,getPosition:Rg})))),Mg=(e,t,a)=>{ft(e).then((e=>e.json())).then((e=>K().get(e,"body.matches",[]))).then((e=>{t(e),a(e.length)})).catch((e=>i("store-locator-search/fetchSuggestions").error(e)))},Bg=({isLoading:e,autoCompleteUrl:t,textFieldProps:a,searchBtnProps:r,searchBtnLabel:n,isBagApp:o,isCheckoutApp:i,ariaLiveLabels:d})=>{const{assets:m}=z(),[u,p]=(0,s.useState)([]),[g,y]=(({autoCompleteChoiceAllyTxt:e,autoCompleteChoicesAllyTxt:t})=>{const[a,r]=l().useState(),n=l().useRef();return l().useEffect((()=>{a&&(n.current&&clearTimeout(n.current),n.current=setTimeout((()=>{r()}),400))}),[a]),[a,n=>{1===n&&e&&r(`${n} ${e}`),(0===n||n>1&&t)&&r(`${n} ${t}`),a&&r(null)}]})(d),h=V(Mg,250),E=r.onClick;i&&(a.onBlur=()=>null),r.disabled=r.disabled||""===a.value;const v=n||m.searchStores,b=`checkout-cityState-${v.toLowerCase()}`,f=e?l().createElement("div",{role:"img",className:"rs-store-locator-search-loader  waitindicator waitindicator16-gray"}):l().createElement(si,ur({},r,{"aria-label":m.storeLocatorSearchA11y,"data-autom":b}),v),w=t=>{t.keyCode===c.Esc&&t.stopPropagation();const r=t.keyCode===c.Return,{value:n}=t.target;!e&&n&&r&&E(),a.onKeyDown(t)},N=e=>l().createElement(ri,ur({},e,{label:m.storeLocatorLabel,"data-autom":"bag-storelocator-input",search:!i}),f);if(!t)return l().createElement("div",{className:"rs-store-locator-search"},N({...a,onKeyDown:w}),l().createElement(hu,{isBagApp:o,isCheckoutApp:i}));return l().createElement("div",{className:"rs-store-locator-search"},l().createElement(Fg,ur({},a,{options:u,onChange:e=>{if(a.onChange(e),e.target.value){const a=on(t,{value:e.target.value});h(a,p,y)}},onSelection:t=>{a.onChange({target:{value:t}}),e||E()},onHover:e=>{a.onChange({target:{value:e}})},onKeyDown:w,renderInput:N,selectFirst:!0})),g&&l().createElement(yr,{message:g}),l().createElement(hu,{isBagApp:o,isCheckoutApp:i}))},_g=({submitBtnProps:e})=>{const{assets:t}=z();return l().createElement("div",{className:"rs-store-locator-submit"},l().createElement(ds,ur({},e,{"data-autom":"bag-storelocator-confirmstore"}),t.confirmStore))},$g=({triggerRef:e,triggerClicked:t,setTriggerClicked:a})=>{const{assets:r}=z(),{modKey:n,announceMessage:o}=ul(),i=`${n}.delivery.storeLocator`,[c,d]=_a(i),m=Og(i),[u=[]]=Ba(`${i}.searchResults`,"retailStores"),p=u.length>0,[g]=Ba(`${n}.delivery`,"singleStoreCountry"),[y]=Ma(i),{retailStoreAutoComplete:h=""}=y,E=Fa(`${i}.address.localitySearchTypeAhead`),v=Fa(`${i}.address.localitySearchTypeAheadWithGeoLocation`),b=E||v,[f]=cr(i),w={...f,visible:f.visible&&t,onExited:()=>{f.onExited(),a(!1),o(r.contentLoadedA11y),e.current&&e.current.focus()}},N=nr(i,"searchInput"),S=ja(i,"search"),C=S.binding.properties.isLoadingSubmit,T=N.binding.bindExists&&N.props.error,L=ja(i,"submitStore"),k=!g,I=L.binding.properties.isLoadingSubmit,A={...L.props,isLoading:I,disabled:L.props.disabled||!p||T},P=r.storeResults,D=`${u.length} ${P}`;(0,s.useEffect)((()=>{C&&S.props.ref&&setTimeout((()=>{o(D)}),3e3)}),[C,S.props.ref]);const O=`${i}.address.provinceCityDistrictTabs`,x=Fa(O),[R]=Ba(O,"provinceCityDistrict"),F=Ua(),M=T;(0,s.useEffect)((()=>{x&&w.visible&&(N.binding.setValue(R),R&&F({type:pe,modKey:i,name:"search"}))}),[w.visible,R]);const B={...m,onShowAllStoresClick:()=>{wl({eVar:bl,feature:"Pickup",action:"ShowMoreStores"})},onExpandMapClick:kl};let _;return _=x?l().createElement(_p,{modKey:O,error:M,mobileColumns:2,desktopColumns:4,isBagApp:!0,isFullWidth:!0}):b?l().createElement(Hp,{modKey:i,visibleKey:"_editing",hasSearchTypeAhead:b,isBagApp:!0,hideCancel:!0}):l().createElement(Bg,{isLoading:C,autoCompleteUrl:h,textFieldProps:N.props,searchBtnProps:S.props,ariaLiveLabels:{autoCompleteChoicesAllyTxt:r.multipleSuggestionsLabel,autoCompleteChoiceAllyTxt:r.suggestionLabel},isBagApp:!0}),l().createElement(xg,{hasResults:p,hasProvinceSelector:x,overlayProps:w,searchField:_,messages:l().createElement(Qs,{messages:c,lastUpdated:d}),storeLocator:l().createElement(Dg,B),footerContent:k&&l().createElement(_g,{submitBtnProps:A})})},Ug=l().memo($g),Kg=()=>{const{assets:e}=z(),{acShowInstallment:t}=zs(),{modKey:a}=ul(),[r]=Ma(a),n=`${a}.delivery`,[o]=Ma(n),i=K().get(o,"pickup.pickupLabel",""),c=K().get(o,"pickup.showLabelInBold",!1),d=K().get(o,"pickup.pickupDescription",""),m=K().get(o,"pickup.quote",""),u=K().get(o,"pickup.templateID",""),p=Boolean(u),g=K().get(o,"pickup.dudeAttributeStore",""),y=K().get(o,"pickup.dudeAttributeQuote",""),h=K().get(o,"pickup.isPickupStoreAvailable",!1),E=K().get(o,"pickup.warmStateForPickup",!1),v=K().get(o,"pickup.hasRemoveGiftMessageLink",!1),b=ja(`${a}.delivery.removeGifting`,"remove"),[f,w]=(0,s.useState)(!1),N=K().get(o,"pickup.enableStoreSelectorLink",!1),S=p&&g?g:K().get(o,"pickup.storeSelectorLinkText",""),C=K().get(o,"pickup.storeSelectorLinkTextA11y",""),T=dn(C,{productName:r.name}),L=ja(n,"storeLocatorView"),k={...L.props,isLoading:L.binding.properties.isLoadingSubmit,"aria-label":T,onClick:e=>{L.props.onClick(e),w(!0),t&&Nl({name:"metrics",data:{hier1:"aos:bag",channel:"aos:bag",prop3:"modal open|pickup|show more stores"}})}},I=v&&l().createElement(ag,b.props,e.remove),A=N&&l().createElement(ng,k,S);return l().createElement(l().Fragment,null,l().createElement(Jp,{template:u,pickupLabel:i,pickupQuote:m},p?l().createElement(eg,{template:u,pickupLabel:i,pickupDescription:d,pickupQuote:m,storeName:g,quoteValue:y,isPickupStoreAvailable:h,showStoreLocator:N,storeLocatorBtn:A,isWarmState:E,showLabelInBold:c}):l().createElement(Zp,{pickupLabel:i,pickupDescription:d,pickupQuote:m,removeGiftingBtn:I,storeLocatorBtn:A})),N&&l().createElement(Ug,{triggerRef:k.ref,triggerClicked:f,setTriggerClicked:w}))},Vg=l().memo(Kg),Hg=()=>{const{modKey:e,editLocation:t}=ul(),[a]=Ma(`${e}.delivery`),r=Boolean(a.ships||a.delivers),n=Boolean(a.pickup),o=K().get(a,"ships.leadByPickup",!1),i="true"===o||!0===o,c=Fa(`${e}.delivery.lineDeliveryOptions`),d=qm({editLocation:t,deliveryData:a,hasDeliveryOptions:c}),{templateID:m,deliveryHeader:u,source:p={}}=K().get(a,"ships",{}),{deliveryOrderSortBy:g,fastestShipMethodPriceLabel:y,cutoffFormat:h,eaglePosition:E}=p;return(0,s.useEffect)((()=>{m&&(({eaglePosition:e,...t})=>{Cl({position:e,...t})})({templateId:m,deliveryHeader:u,leadByPickup:o,deliveryOrderSortBy:g,fastestShipMethodPriceLabel:y,cutoffFormat:h,eaglePosition:E})}),[m,u,o,g,y,h,E]),l().createElement(Zm,{callout:d&&l().createElement(fu,null),hasDelivery:r,hasPickup:n,showPickupFirst:i},n&&i&&l().createElement(Vg,null),r&&l().createElement(Xp,null),n&&!i&&l().createElement(Vg,null))},jg=l().memo(Hg),Gg=({message:e})=>l().createElement("div",{className:"rs-iteminfo-child"},l().createElement("span",{className:"rs-iteminfo-child-tagline"},e)),Wg=()=>{const{modKey:e}=ul(),[t]=Ma(e),{isBundlePromoItem:a,displayTagLine:r}=t,n=a?r:"";return n&&l().createElement(Gg,{message:n})},qg=l().memo(Wg),Yg=e=>{if("none"===e.value)return e.value;if(e.values){if(e.values.length>1)return e.displayName;return e.values[0].value}return""},zg=({group:e,optionProps:t,selectedGroup:a,selectedOption:r,onGroupSelection:n})=>{const{displayName:s,groupDescription:o,groupPrice:i,groupSelectorFooter:c}=e,d=s===a,m=e.values&&e.values.length>1,u=Boolean(i),p=Boolean(o),g=m?e.values.sort(((e,t)=>e.sortOrder-t.sortOrder)):[],y=qa()("row","form-selector-list-header",{"rs-changeapplecare-nodesc":!p}),h=qa()("form-selector-title","form-selector-left-col","column",{"large-6":u,"large-12":!u});return l().createElement("div",{className:"rs-changeapplecare-option"},l().createElement(Od,ur({tag:"div"},t,{onChange:a=>{t.onChange(a),n(e)},value:Yg(e),checked:d,name:"change-apple-care",withAriaLabeledBy:!0}),l().createElement("span",{className:y},l().createElement("span",ur({className:h},Ya(s))),u&&l().createElement("span",ur({className:"form-selector-right-col column large-6"},Ya(i)))),p&&l().createElement("div",ur({className:"form-selector-list-content"},Ya(o)))),m&&l().createElement(Yr,{in:d},l().createElement("div",{className:"rs-changeapplecare-overlay-tray"},l().createElement(xd,null,g.map((e=>l().createElement(Od,ur({},t,{key:e.value,value:e.value,checked:e.value===r,name:`change-apple-care-${s}`,withAriaLabeledBy:!0}),l().createElement("span",{className:"row"},l().createElement("span",ur({className:"form-selector-left-col form-selector-title column large-6"},Ya(e.selectorDisplayName))),l().createElement("span",ur({className:"form-selector-right-col column large-6"},Ya(e.price)))))))),l().createElement("div",ur({className:"rs-changeapplecare-overlay-trayfooter typography-caption"},Ya(c))))))},Xg="rs-changeapplecare-overlay-header",Jg=({overlayProps:e,updateButtonProps:t,optionProps:a,selectedGroup:r,onGroupSelection:n,selectedOption:s,originalSelection:o,isUpdating:i,groups:c=[]})=>{const{assets:d}=z(),m=i||!s||o===s;return l().createElement(is,ur({ariaLabel:Xg,className:"rs-changeapplecare-overlay"},e),l().createElement("div",{className:"rs-changeapplecare-overlay-wrap"},l().createElement("h2",{className:"rs-changeapplecare-overlay-header typography-headline-reduced",id:Xg},d.changeACTitle),l().createElement("fieldset",null,l().createElement("legend",{className:"visuallyhidden"},d.changeACTitle),l().createElement(xd,{tag:"div"},c.map((e=>l().createElement(zg,{group:e,key:e.displayName,optionProps:a,selectedGroup:r,onGroupSelection:n,selectedOption:s}))))),l().createElement(ds,ur({},t,{className:"rs-changeapplecare-overlay-update",isLoading:i,disabled:m}),d.changeACUpdate),l().createElement("div",ur({className:"rs-changeapplecare-overlay-footnotes typography-caption"},Ya(d.changeACFooter)))))},Zg=({isFetchingOverlay:e,buttonLabel:t,buttonProps:a,overlayProps:r,updateButtonProps:n,optionProps:s,selectedGroup:o,onGroupSelection:i,selectedOption:c,originalSelection:d,groups:m,isUpdating:u})=>l().createElement("div",{className:"rs-changeapplecare"},e?l().createElement("div",{role:"img",className:"waitindicator waitindicator-inline waitindicator16-gray"}):t&&l().createElement("button",ur({type:"button",className:"as-buttonlink more"},a),t),l().createElement(Jg,{overlayProps:r,updateButtonProps:n,optionProps:s,selectedOption:c,originalSelection:d,selectedGroup:o,onGroupSelection:i,groups:m,isUpdating:u})),Qg="none",ey=({removeClick:e})=>{const{modKey:t}=ul(),[a,r]=(0,s.useState)(""),n=ja(t,"changeAppleCareModal"),[o]=Ba(t,"changeAppleCareLinkText"),i=n.binding.properties.isLoadingSubmit,c=(0,s.useRef)(null),d=`${t}.changeAppleCare`,[m]=cr(d),u=ja(d,"updateAppleCareSelection"),p=sr(d,"appleCarePartNumber"),g=p.binding.value,y={...m,returnFocusRef:n.props.ref,onClose:()=>{r(""),m.onClose()}},[h]=(0,s.useState)(g),{data:E,properties:v}=Ra(d),{appleCareGroups:b=[]}=E,f=b.sort(((e,t)=>e.sortOrder-t.sortOrder)),w=v.isLoadingSubmit,N={...n.props,ref:c,onClick:e=>{(()=>{const e=K().get(window,"s.prop8","");wl({eVar:hl,slot:e,feature:"link | change your AppleCare+ plan",action:""})})(),n.props.onClick(e)}};(0,s.useEffect)((()=>{e&&c.current&&setTimeout((()=>{c.current.focus()}),1e3)}),[e,c]);return(0,s.useEffect)((()=>{f.some((e=>{const{displayName:t}=e;if(g===Qg&&e.value===Qg)return r(t),!0;if(e.values){if(e.values.some((e=>e.value===g)))return r(t),!0}return!1}))}),[g]),l().createElement(Zg,{isFetchingOverlay:i,buttonLabel:o,buttonProps:N,overlayProps:y,updateButtonProps:u.props,optionProps:p.props,selectedGroup:a,onGroupSelection:e=>{if(r(e.displayName),e.values&&e.values.length>1){const[t]=e.values;p.binding.setValue(t.value)}},selectedOption:g,originalSelection:h,groups:f,isUpdating:w})},ty=l().memo(ey),ay=({header:e,message:t})=>l().createElement("div",{className:"rs-changedisclaimer"},l().createElement("div",{className:"rs-changedisclaimer-wrap"},l().createElement("h3",{className:"rs-changedisclaimer-title typography-body"},e),l().createElement("div",ur({className:"rs-changedisclaimer-message typography-body-reduced"},Ya(t))))),ry=()=>{const{modKey:e}=ul(),t=`${e}.changeProductDisclaimer`,[a]=Ba(t,"changesAndAvailabilityHeader"),[r]=Ba(t,"changesAndAvailabilityText");return l().createElement(ay,{header:a,message:r})},ny=l().memo(ry),sy=({showHeader:e=!0,showDetails:t=!0,headerLabel:a,carrierLabel:r,carrierName:n})=>l().createElement("div",{className:"rs-item-bundle"},e&&l().createElement("h3",{className:"rs-item-bundle-header"},a),t&&l().createElement("div",{className:"rs-item-bundle-detail"},l().createElement("span",{className:"rs-item-bundle-detail-label"},r),l().createElement("span",{className:"rs-item-bundle-detail-value"},n))),ly=({downPayment:e,downPaymentTermsUrl:t})=>{const{assets:a}=z();return l().createElement("div",{className:"rs-item-downpayment-message"},l().createElement("div",ur({className:"rs-item-downpayment-message-text"},Ya(dn(a.downPaymentMessage,{downPayment:e})))),l().createElement("button",ur({className:"as-buttonlink",type:"button",onClick:()=>{window.open(t,"termsWin","width=450,height=773,menubar=no,location=no,status=no"),Nl({name:"metrics",data:{evar6:'D=pageName+"|Select|Link|learn more about down payments|Selected"'}})}},Ya(a.downPaymentLinkText))))},oy=e=>{const[t,a]=(0,s.useState)(!1),r=e.showConsent&&e.url&&e.label;return{consent:t,handleChange:t=>{a(t),(t=>{const r=on(e.url,{consent:t});wt(r).then((e=>{const t=K().get(e,"body.consent",!1);a(t)}))})(t)},showConsent:r,getConsentCookie:()=>wt(e.url).then((e=>{const t=K().get(e,"body.consent",!1);a(t)}))}},iy=({consent:e,handleChange:t,label:a})=>l().createElement("div",{className:"rc-cookie-compliance"},l().createElement(um,{className:"rc-cookie-compliance-checkbox",checked:e,onChange:e=>t(e.target.checked)},a)),cy=(e,t)=>encodeURI(`${e}=${t}`),dy=e=>Object.keys(e).filter((t=>t in e&&void 0!==e[t]&&null!==e[t]&&""!==e[t])).map((t=>"parts"===t?e[t].map(((e,t)=>{if(e&&"object"==typeof e){const a=[];return e.part&&a.push(cy(`parts.${t}`,e.part)),e.option&&a.push(cy(`option.${t}`,e.option.join(","))),e.cppart&&a.push(cy("cppart",e.cppart)),e.purchaseOption&&a.push(cy("purchaseOption",e.purchaseOption)),a.join("&")}return cy(`parts.${t}`,`${e}`)})).join("&"):cy(`${t}`,`${e[t]}`))).join("&"),my=(e,t={})=>((e,t)=>(e=(e=K().unescape(e)).indexOf("?")>-1?/&$/.test(e)?e:`${e}&`:`${e}?`,e+t))(e,dy(t)),uy=Object.freeze({FETCH_PICKUP_AVAILABILITY:"FETCH_PICKUP_AVAILABILITY",SET_PICKUP_AVAILABILITY:"SET_PICKUP_AVAILABILITY",UPDATE_PICKUP_AVAILABILITY:"UPDATE_PICKUP_AVAILABILITY",SET_STORE_ID:"SET_STORE_ID",SET_GEO_STORE_ID:"SET_GEO_STORE_ID",SET_OVERLAY:"SET_OVERLAY",SELECTED_PART_DATA:"SELECTED_PART_DATA",SL_FETCH_PICKUP_START:"SL_FETCH_PICKUP_START",SL_FETCH_PICKUP_ERROR:"SL_FETCH_PICKUP_ERROR",SL_FETCH_PICKUP_SUCCESS:"SL_FETCH_PICKUP_SUCCESS",SL_CLEAR_PICKUP_DATA:"SL_CLEAR_PICKUP_DATA",PL_FETCH_META_START:"PL_FETCH_META_START",PL_FETCH_META_ERROR:"PL_FETCH_META_ERROR",PL_FETCH_META_SUCCESS:"PL_FETCH_META_SUCCESS",PL_META_SET_CONFIG:"PL_META_SET_CONFIG",PL_FILTER_INIT:"PL_FILTER_INIT",PL_FILTER_UPDATE:"PL_FILTER_UPDATE",PL_FILTER_SET_PART:"PL_FILTER_SET_PART",PL_FILTER_SHOW:"PL_FILTER_SHOW",PL_FILTER_HIDE:"PL_FILTER_HIDE",PL_PICKUP_SHOW_TOGGLE:"PL_PICKUP_SHOW_TOGGLE",PL_PICKUP_HIDE_TOGGLE:"PL_PICKUP_HIDE_TOGGLE",PL_PICKUP_UPDATE_STORE_SELECTION:"PL_PICKUP_UPDATE_STORE_SELECTION",PL_PICKUP_REMOVE_STORE_SELECTION:"PL_PICKUP_REMOVE_STORE_SELECTION",PL_FETCH_PICKUP_START:"PL_FETCH_PICKUP_START",PL_FETCH_PICKUP_ERROR:"PL_FETCH_PICKUP_ERROR",PL_FETCH_PICKUP_SUCCESS:"PL_FETCH_PICKUP_SUCCESS",PL_CLEAR_PICKUP_DATA:"PL_CLEAR_PICKUP_DATA",PL_FETCH_DELIVERY_START:"PL_FETCH_DELIVERY_START",PL_FETCH_DELIVERY_ERROR:"PL_FETCH_DELIVERY_ERROR",PL_FETCH_DELIVERY_SUCCESS:"PL_FETCH_DELIVERY_SUCCESS",PL_CLEAR_DELIVERY_DATA:"PL_CLEAR_DELIVERY_DATA",PL_FETCH_SUGGESTIONS_START:"PL_FETCH_SUGGESTIONS_START",PL_FETCH_SUGGESTIONS_ERROR:"PL_FETCH_SUGGESTIONS_ERROR",PL_FETCH_SUGGESTIONS_SUCCESS:"PL_FETCH_SUGGESTIONS_SUCCESS",PL_CLEAR_SUGGESTIONS_DATA:"PL_CLEAR_SUGGESTIONS_DATA",PL_SUGGESTIONS_UPDATE_STORE_SELECTION:"PL_SUGGESTIONS_UPDATE_STORE_SELECTION",PL_SUGGESTIONS_REMOVE_STORE_SELECTION:"PL_SUGGESTIONS_REMOVE_STORE_SELECTION",PL_SUGGESTIONS_SHOW_TOGGLE:"PL_SUGGESTIONS_SHOW_TOGGLE",PL_SELECTION_UPDATE:"PL_SELECTION_UPDATE",PL_SELECTION_REMOVE:"PL_SELECTION_REMOVE",PL_SELECTION_CLEAR:"PL_SELECTION_CLEAR"}),py=(e,t,a)=>r=>{const n=i("productlocator/meta-reducer/fetchMetaData");r({type:uy.PL_FETCH_META_START});const s=wt(my(e,t));return s.then((e=>{const t=K().get(e,"body.productLocatorOverlayData.productLocatorMeta"),s=K().get(e,"body.productLocatorOverlayData.errorMessage");if(!e.body||s||K().isEmpty(t))n.debug(`ResponseError: ${s}`),r({type:uy.PL_FETCH_META_ERROR,error:{isResponseError:!0,message:s||a}});else{const t=K().get(e,"body.productLocatorOverlayData",{});t.assets=((e,t)=>({...K().get(e,"overlayLevelTextAssets.namedTextAssets",{}),footer:K().get(e,"familyLevelFragments.namedFragments.footer",""),coldStartPickupInfo:K().get(e,"overlayLevelFragments.namedFragments.coldStartPickupInfo",""),filterButtonText:K().get(e,"familyLevelTextAssets.namedTextAssets.filterButtonText",""),errorMessage:t}))(t,a);const n=K().get(t,"productLocatorMeta.dimensionsVariations",{});t.noConfigurator=K().isEmpty(n),r({type:uy.PL_FETCH_META_SUCCESS,data:t})}})).catch((e=>{n.error(e),r({type:uy.PL_FETCH_META_ERROR,error:{isNetworkError:!0,error:e,message:a}})})),s},gy={isFetching:!1,isFetched:!1,data:{},error:null},yy=(e,t)=>{switch(t.type){case uy.PL_FETCH_META_START:return{...e,isFetching:!0,isFetched:!1,error:null};case uy.PL_FETCH_META_ERROR:return{...e,isFetching:!1,isFetched:!0,error:t.error,data:{}};case uy.PL_FETCH_META_SUCCESS:return{...e,isFetching:!1,isFetched:!0,error:null,data:t.data};case uy.PL_META_SET_CONFIG:return{...e,config:t.config};default:return e}},hy={},Ey=(e,t,a,r)=>{const n=K().get(t,e,[]),s=K().map(K().sortBy(n,"sortOrder"),"key"),l=K().sortBy(K().uniq(K().map(K().filter(a,e),e)),(e=>s.indexOf(e)));return K().map(l,(t=>{const a=K().find(n,{key:t})||{};return{value:t,image:a.swatchImage,label:a.value,selected:!!r&&r[e]===t}}))},vy=e=>e.filter((e=>K().find(e.options,"selected"))).map((e=>({key:e.key,value:K().find(e.options,"selected").value}))).reduce(((e,t)=>(e[t.key]=t.value,e)),{}),by=(e,t,a=!1)=>{const{key:r,value:n}=e,s=vy(t);if(!((e,t,a=[])=>{let r=!1;return a.forEach((a=>{a.key===e&&K().findIndex(a.options,{value:t})>=0&&(r=!0)})),r})(r,n,t))return s;if(!a)return{...s,[r]:n};const l=((e,t)=>{let a=!1;const r=t.filter((t=>{if(t.key===e&&(a=!0),!a)return t.key}));return K().map(r,"key")})(r,t);return{...K().pick(s,l),[r]:n}},fy=(e,t,a)=>{let r=K().find(a,e);if(r)return r.partNumber;const n=Object.keys(e).length-1,s=n&&t[n]&&t[n].key,l=K().omit(e,s);return r=K().find(a,l),fy(l,t,a)},wy=(e,t,a)=>{const r=hy[t];if(!r||!r.products||!r.prices)return null;const n=a?{partNumber:e,carrierModel:a}:{partNumber:e},s=K().find(r.products,n)||{},l=K().get(r.prices,s.price,{});switch(r.purchaseOption||"fullPrice"){case"ipp":return K().get(l,"iupPrice");case"iupPriceNonDefault":return K().get(l,"iupPriceNonDefault");case"ipi":return K().get(l,"ipiPrice");case"cp":return K().get(l,"carrierInstallment");default:return K().get(l,"fullPrice")}},Ny=(e,t,a)=>{const r=hy[t];if(!r||!r.products||!r.imageDictionary)return{};const n=a?{partNumber:e,carrierModel:a}:{partNumber:e},s=K().find(r.products,n)||{};return K().get(r.imageDictionary,s.image)},Sy=(e,...t)=>{const a=hy[e];return a&&a.products?t.map((e=>(K().find(a.products,{partNumber:e})||{}).basePartNumber)):null},Cy=e=>{const t=hy[e];t.products=K().sortBy(t.products,(t=>((e,t)=>{const{displayValues:a,dimensionsVariations:r}=hy[t];return K().reduce(a.items,((t,a)=>{const n=K().get(a,"value.dimensionValue"),s=K().get(e,n),l=K().get(r,n,[]);return t+(K().find(l,{key:s})||{}).sortOrder}),0)})(t,e)))},Ty=(e,t)=>{var a,r;return a=t.config,r=t.family,hy[r]||(hy[r]={...a}),Cy(t.family),{...e,isInitialized:!0}},Ly=(e,t)=>{const a=hy[t.family],{products:r,displayValues:n,dimensionsVariations:s}=a;let l;if(t.part)hy[t.family]={...a,purchaseOption:t.purchaseOption},l=t.part;else{const a=vy(e.dimensions),{key:n,value:s}=t.selection,o={...a,[n]:s};l=fy(o,e.dimensions,r)}const o={partNumber:l},{cppart:i}=e;i&&(o.carrierModel=i);const c=K().find(r,o),d=wy(l,t.family,i),m=Ny(l,t.family);let u=((e,t,a,r,n)=>{const s=e.items.map((e=>({label:e.value.dimensionLabel,key:e.value.dimensionValue,showDisabledSelectors:e.value.showDisabledSelectors}))),l={partNumber:r};n&&(l.carrierModel=n);const o=K().find(a,l);return s.map(((e,r)=>({header:e.label,key:e.key,id:`pl-dim-${r}`,options:Ey(e.key,t,a,o),modelMessage:K().get(window,"fulfillmentBootstrap.modelMessage",""),showDisabledSelectors:e.showDisabledSelectors})))})(n,s,r,l,i);return u=((e,t)=>e.map((a=>(a.options=a.options.map((r=>{const n={key:a.key,value:r.value},s=by(n,e,!0),l=K().find(t,s);return{...r,enabled:!!l}})),a))))(u,r),{...e,dimensions:u,part:l,product:c,displayPrice:d,productImage:m}},ky={isShown:!1,isInitialized:!1},Iy=(e,t)=>{switch(t.type){case uy.PL_FILTER_INIT:return{...e,...Ty(e,t)};case uy.PL_FILTER_UPDATE:return{...e,...Ly(e,t)};case uy.PL_FILTER_SET_CPPART:return{...e,cppart:t.cppart};case uy.PL_FILTER_SET_PART:return{...e,part:t.part};case uy.PL_FILTER_SHOW:return{...e,isShown:!0};case uy.PL_FILTER_HIDE:return{...e,isShown:!1};default:return e}},Ay=(e,t,a)=>{const r=i("productlocator/handleDeliveryData");if(t.deliveryMessage){const n=K().get(t,"deliveryMessage.errorMessage");if(n)r.debug(`ResponseError: ${n}`),a({type:uy.PL_FETCH_DELIVERY_ERROR,error:{isResponseError:!0,message:n}});else{let r=K().get(t,"deliveryMessage");r=((e,t)=>{const a={...e};return a.deliveryQuoteNorm=K().get(e,t),a.partNorm=t,a})(r,e["parts.0"]),a({type:uy.PL_FETCH_DELIVERY_SUCCESS,data:r})}}},Py={isFetching:!1,isFetched:!1,data:{},error:null},Dy=(e,t)=>{switch(t.type){case uy.PL_FETCH_DELIVERY_START:return{...e,isFetching:!0,isFetched:!1,error:null};case uy.PL_FETCH_DELIVERY_ERROR:return{...e,isFetching:!1,isFetched:!0,error:t.error,data:{}};case uy.PL_FETCH_DELIVERY_SUCCESS:return{...e,isFetching:!1,isFetched:!0,error:null,data:t.data};case uy.PL_CLEAR_DELIVERY_DATA:return Py;default:return e}},Oy=e=>K().sortBy(e,(e=>K().get(e,"partsAvailabilityNorm.messageTypes.regular.storeSelectionEnabled",!1)?-1:1)),xy=(e,t)=>e.slice().map((e=>(t&&e.storeNumber===t&&K().get(e,"partsAvailabilityNorm.messageTypes.regular.storeSelectionEnabled",!1)?e.selected=!0:e.selected=!1,e))),Ry=e=>K().filter(e,(e=>K().get(e,"partsAvailabilityNorm.messageTypes.regular.storeSelectionEnabled",!1))).length,Fy=(e,t,a,r,n)=>(s,l)=>{r&&s({type:uy.PL_FETCH_PICKUP_START}),n&&l({type:uy.PL_FETCH_DELIVERY_START});const o=i("productlocator/fetchFulfillmentData"),c=wt(my(e,t));return c.then((e=>({pickupMessage:K().get(e,"body.content.pickupMessage"),deliveryMessage:K().get(e,"body.content.deliveryMessage")}))).then((e=>{if(r&&e.pickupMessage){const t=K().get(e,"pickupMessage.errorMessage");if(t)o.debug(`ResponseError: ${t}`),s({type:uy.PL_FETCH_PICKUP_ERROR,data:{location:K().get(e.pickupMessage,"location","")},error:{isResponseError:!0,message:t}});else{let t=e.pickupMessage,r=(e=>e.map((e=>{const t=K().get(e,"partsAvailability",{}),a=K().keys(t)[0];return e.partsAvailabilityNorm=K().get(t,a,{}),e})))(K().get(e,"pickupMessage.stores"));r=Oy(r),t.stores=xy(r,a),t.availableStoreCount=Ry(r),0===t.availableStoreCount&&(t=(e=>{const t=K().get(e,"notAvailableNearby",""),a=e.stores||[],r=t.replace("[X]",a.length);return{...e,notAvailableNearby:r}})(t)),s({type:uy.PL_FETCH_PICKUP_SUCCESS,data:t})}}n&&e.deliveryMessage&&Ay(t,e,l)})).catch((e=>{o.error(e),s({type:uy.PL_FETCH_PICKUP_ERROR,data:{},error:{isNetworkError:!0,message:e}}),l&&l({type:uy.PL_FETCH_DELIVERY_ERROR,error:{isNetworkError:!0,message:e}})})),c},My={isFetching:!1,isFetched:!1,data:{},error:null,isShown:!0,isToggleBtnNeeded:!1},By=(e,t)=>{switch(t.type){case uy.PL_PICKUP_SHOW_TOGGLE:return{...e,isToggleBtnNeeded:!0,isShown:!1};case uy.PL_PICKUP_HIDE_TOGGLE:return{...e,isToggleBtnNeeded:!1,isShown:!0};case uy.PL_PICKUP_UPDATE_STORE_SELECTION:{const a=xy(K().get(e,"data.stores",[]),t.selectedStore);return{...e,data:{...e.data,stores:a}}}case uy.PL_PICKUP_REMOVE_STORE_SELECTION:{const{stores:t}=e.data;if(t){const a=(e=>{const t=e.slice(),a=K().find(t,{selected:!0});return a&&(a.selected=!1),t})(t);return{...e,data:{...e.data,stores:a}}}return e}case uy.PL_FETCH_PICKUP_START:return{...e,isFetching:!0,isFetched:!1,error:null};case uy.PL_FETCH_PICKUP_ERROR:return{...e,isFetching:!1,isFetched:!0,error:t.error,data:t.data};case uy.PL_FETCH_PICKUP_SUCCESS:return{...e,isFetching:!1,isFetched:!0,error:null,data:t.data};case uy.PL_CLEAR_PICKUP_DATA:return My;default:return e}},_y=(e,t,a,r)=>{let n=[];return e.forEach((e=>{K().forEach(e.partsAvailability,((t,s)=>{const l=K().cloneDeep(e);l.partsAvailabilityNorm=t,l.selected=!1;let o=K().find(n,{part:s});o?o.stores.push(K().omit(l,"partsAvailability")):(o={stores:[]},o.part=s,o.displayPrice=wy(s,a,r),o.productImage=Ny(s,a,r),o.productTitle=((e,t,a)=>{const r=hy[t];if(!r||!r.products)return null;const n=a?{partNumber:e,carrierModel:a}:{partNumber:e};return(K().find(r.products,n)||{}).productTitle})(s,a,r),o.isShown=!1,o.stores.push(K().omit(l,"partsAvailability")),n.push(o))}))})),t&&(n=K().sortBy(n,(e=>t.indexOf(e.part)))),n},$y=(e,t,a)=>{const r=K().get(e,"PickupMessage.stores",[]),n=K().get(e,"PickupMessage.recommendedProducts");e.products=_y(r,n,t,a);let s=K().omit(e,"PickupMessage");return s.products=s.products.map((e=>(e.stores=Oy(e.stores),e))),s=(e=>(e.products=e.products.map((t=>{const a=Ry(t.stores),r=a>1?e.availableStoresText:e.availableStoreText;return t.availabilityText=r&&r.replace("[X]",a),t})),e))(s),s},Uy={isFetching:!1,isFetched:!1,data:{},error:null},Ky=(e=Uy,t)=>{switch(t.type){case uy.PL_FETCH_SUGGESTIONS_START:return{...e,isFetching:!0,isFetched:!1,error:null};case uy.PL_FETCH_SUGGESTIONS_ERROR:return{...e,isFetching:!1,isFetched:!0,error:t.error,data:{}};case uy.PL_FETCH_SUGGESTIONS_SUCCESS:return{...e,isFetching:!1,isFetched:!0,error:null,data:t.data};case uy.PL_CLEAR_SUGGESTIONS_DATA:return Uy;case uy.PL_SUGGESTIONS_UPDATE_STORE_SELECTION:{const a=((e,t,a)=>e.slice().map((e=>{const r=K().find(e.stores,{selected:!0});if(r&&(r.selected=!1),e.part===t){const t=K().find(e.stores,{storeNumber:a});t&&(t.selected=!0)}return e})))(e.data.products,t.part,t.selectedStore);return{...e,data:{...e.data,products:a}}}case uy.PL_SUGGESTIONS_REMOVE_STORE_SELECTION:{const{products:t}=e.data;if(t){const a=(e=>e.slice().map((e=>{const t=K().find(e.stores,{selected:!0});return t&&(t.selected=!1),e})))(t);return{...e,data:{...e.data,products:a}}}return e}case uy.PL_SUGGESTIONS_SHOW_TOGGLE:{const{products:a}=e.data;if(a){const r=((e,t)=>e.slice().map((e=>(e.part===t&&(e.isShown=!e.isShown),e))))(a,t.part);return{...e,data:{...e.data,products:r}}}return e}default:return e}},Vy=window.asMetrics,{sendUserInteraction:Hy=(()=>{}),util:jy={}}=window.asMetrics||{},{OmnitureCollection:Gy,OmnitureEvent:Wy}=jy.omnitureCollection;let qy,Yy="storeLocator";const zy=(e,t)=>{const a=((e,t)=>{const a=hy[t],r=K().find(a.products,{partNumber:e})||{},{displayValues:n}=a,s={};return n.items.forEach((e=>{const t=K().get(e,"value.dimensionValue");Object.prototype.hasOwnProperty.call(r,t)&&(s[t]=r[t])})),s})(e,t)||{},r=K().toArray(K().omit(a,"carrierModel")).join(" > ").toUpperCase();Vy.fireMicroEvent({part:r,feature:Yy,eVar:"eVar6",action:"Selected"})},Xy={submitSelection:!1,isPickupSelected:!1,isDeliverySelected:!1,isSuggestionSelected:!1},Jy=(e,t)=>{switch(t.type){case uy.PL_SELECTION_UPDATE:return{...e,...t.prop};case uy.PL_SELECTION_REMOVE:return{submitSelection:!1};case uy.PL_SELECTION_CLEAR:return Xy;default:return e}};let Zy={isMetaReceived:!1,combinePickupWithMeta:!1,pickupDebounceInterval:300,metaRequest:{},pickupRequest:{searchNearby:!0},suggestionsRequest:{},deliveryRequest:{"mts.1":"compact"}};const Qy=({fireRecommendations:e,params:t,location:a,family:r},n)=>{if(e){const e={...t};e["parts.0"]&&(e.product=e["parts.0"],delete e["parts.0"]),a&&(delete e.store,delete e.searchNearby),((e,t,a)=>r=>{const n=i("productlocator/suggestions-reducer/fetchSuggestionsData");r({type:uy.PL_FETCH_SUGGESTIONS_START});const s=wt(my(e,t));return s.then((e=>{if(e.body){const s=K().get(e,"body.PickupMessage.errorMessage")||e.body.errorMessage;s?(n.debug(`ResponseError: ${s}`),r({type:uy.PL_FETCH_SUGGESTIONS_ERROR,error:{isResponseError:!0,message:s}})):(e.body=$y(e.body,a,t.cppart),r({type:uy.PL_FETCH_SUGGESTIONS_SUCCESS,data:e.body}))}else n.debug("ResponseError: No response data"),r({type:uy.PL_FETCH_SUGGESTIONS_ERROR,error:{isResponseError:!0}})})).catch((e=>{n.error(e),r({type:uy.PL_FETCH_SUGGESTIONS_ERROR,error:{isNetworkError:!0,message:e}})})),s})(Zy.suggestionsURL,e,r)(n).then((e=>{((e,t,a)=>{let r=K().map(e,(e=>e.part));r=Sy(a,...r);const n=['D=pageName+"',"",Yy,"Recommended",`${r}"`].join("|"),s=['D=pageName+"',"",Yy,'No Availaibility"'].join("|"),l=new Gy(new Wy("event127"));let o={eVar6:n,eVar5:s};t&&(o={...o,events:l}),Hy({name:Yy,beacon:o})})(K().get(e,"body.products",[]),a,r)}))}},eh=({response:e,params:t,location:a,isDeliverySelected:r,fireRecommendations:n,family:s},l,o,i)=>{const c=K().get(e,"body.availableStoreCount");if(0===c?(l({type:uy.PL_PICKUP_SHOW_TOGGLE}),Qy({params:t,fireRecommendations:n,location:a,family:s},o)):(l({type:uy.PL_PICKUP_HIDE_TOGGLE}),o({type:uy.PL_CLEAR_SUGGESTIONS_DATA}),((e,t)=>{const a=new Gy(new Wy("event127")),r=['D=pageName+"',"",Yy,"APU",`${e}"`].join("|");t?Hy({name:Yy,beacon:{events:a,eVar6:r}}):Vy.fireMicroEvent({part:"APU",feature:Yy,eVar:"eVar6",action:e})})(c,a)),!r){const a=K().find(K().get(e,"body.stores"),{storeNumber:t.store}),r=K().get(a,"partsAvailabilityNorm.messageTypes.regular.storeSelectionEnabled",!1);i({type:uy.PL_SELECTION_UPDATE,prop:{part:t["parts.0"],isPickupSelected:r,isDeliverySelected:!1,isSuggestionSelected:!1}})}},th=({part:e,family:t,location:a,isDeliverySelected:r,needsDeliveryData:n,fireRecommendations:s},l,o,i,c)=>{const d={...Zy.pickupRequest},m={...Zy.deliveryRequest};e&&(Zy.pickupRequest["parts.0"]=e,d["parts.0"]=e,m["parts.0"]=e),a&&(Zy.pickupRequest.location=a),Zy.pickupRequest.location&&(d.location=Zy.pickupRequest.location),d.location&&(delete d.store,delete d.searchNearby);const u=d.location||d.store,p={"mts.0":"regular",...n?m:{},...u?d:{}};(u||n)&&Fy(Zy.pickupURL,p,r?null:Zy.pickupRequest.store,u,n)(l,c).then((e=>({body:K().get(e,"body.content.pickupMessage")}))).then((c=>{u&&eh({response:c,params:{...p,store:Zy.pickupRequest.store},location:a,isDeliverySelected:r,fireRecommendations:s,family:t},l,o,i),n&&r&&i({type:uy.PL_SELECTION_UPDATE,prop:{part:e,isPickupSelected:!1,isDeliverySelected:!0,isSuggestionSelected:!1}})}))},ah=e=>{e&&(Zy.pickupRequest.cppart=e,Zy.deliveryRequest.cppart=e)},rh=({bootstrap:e,part:t,storeId:a,visible:r,onStoreChange:n,cppart:s,preventClearOnSave:o,stickyTrigger:i})=>{Zy={...Zy,...e};const[c,d]=l().useReducer(yy,gy),[m,u]=l().useReducer(Iy,ky),[p,g]=l().useReducer(By,My),[y,h]=l().useReducer(Dy,Py),[E,v]=l().useReducer(Ky,Uy),[b,f]=l().useReducer(Jy,Xy),[w,N]=l().useState(""),[S,C]=l().useState(),T=K().get(Zy,"fireRecommendationsAvailability",!1)||!K().get(c,"data.hideRecommendations",!0),L=K().get(m,"cppart")||K().get(m,"product.carrierModel"),{isDeliverySelected:k}=b,I=l().useRef(null),A=l().useRef(!0);l().useEffect((()=>{e.family&&(Zy.metaRequest.family=e.family,Zy.metaRequest.node=e.node,((e,t,a)=>{py(Zy.metaURL,Zy.metaRequest,Zy.errorMessage)(e).then((e=>{const r=K().get(e,"body.productLocatorOverlayData.productLocatorMeta");r&&a({type:uy.PL_FILTER_INIT,config:{...r},family:t})}))})(d,e.family,u))}),[]),l().useEffect((()=>{u({type:uy.PL_FILTER_SET_CPPART,cppart:s}),ah(s)}),[s]),l().useEffect((()=>{var n,s;r&&t&&m.isInitialized&&(Zy.part=t,n=u,s=e.family,Zy.part&&n({type:uy.PL_FILTER_UPDATE,part:Zy.part,purchaseOption:Zy.purchaseOptionType,family:s}),f({type:uy.PL_SELECTION_CLEAR}),Zy.pickupRequest.store=a,((e,t)=>{qy=e,Yy=t?"storeLocator - sticky":"storeLocator"})(t,i),((e,t)=>{const a=new Gy(new Wy("event29"));e?a.add(new Wy("event32")):a.add(new Wy("event31"));const r=['D=pageName+"',"",Yy,"",(e?"See more stores":"Check availability")+'"'].join("|"),n=t.substring(0,5);Hy({name:Yy,beacon:{linkTrackVars:"eVar67,prop37,events",linkTrackEvents:a,events:a,prop37:r,eVar67:n}})})(a,t))}),[r,t,m.isInitialized,a,e.family]),l().useEffect((()=>{m.part&&(Zy.part=m.part,ah(L),th({part:m.part,family:e.family,fireRecommendations:T,isDeliverySelected:k,needsDeliveryData:!0},g,v,f,h),A.current?A.current=!1:zy(m.part,e.family))}),[m.part,T,L,e.family]);const P=()=>{u({type:uy.PL_FILTER_HIDE}),g({type:uy.PL_CLEAR_PICKUP_DATA}),h({type:uy.PL_CLEAR_DELIVERY_DATA}),v({type:uy.PL_CLEAR_SUGGESTIONS_DATA}),u({type:uy.PL_FILTER_SET_PART,part:null}),C(),Zy.pickupRequest={searchNearby:!0},A.current=!0};return{metaState:c,filterState:m,pickupState:p,deliveryState:y,suggestionsState:E,selectionState:b,store:w,inputRef:I,localLocation:S,setLocalLocation:C,handleFormSubmit:t=>{t.search&&th({location:t.search,fireRecommendations:T,family:e.family},g,v,f)},handleInputBlur:e=>{Zy.pickupRequest.location=e},handleDimensionChange:(e,t,a)=>{I.current&&""===Zy.pickupRequest.location?I.current.focus():u({type:uy.PL_FILTER_UPDATE,selection:{key:e,value:t},family:a})},handleStoreChange:(e,t)=>{Zy.pickupRequest.store=e,N(e),v({type:uy.PL_SUGGESTIONS_REMOVE_STORE_SELECTION}),g({type:uy.PL_PICKUP_UPDATE_STORE_SELECTION,selectedStore:e}),f({type:uy.PL_SELECTION_UPDATE,prop:{store:e,part:t,isPickupSelected:!0,isDeliverySelected:!1,isSuggestionSelected:!1}})},handleDeliverySelection:e=>{g({type:uy.PL_PICKUP_REMOVE_STORE_SELECTION}),v({type:uy.PL_SUGGESTIONS_REMOVE_STORE_SELECTION}),f({type:uy.PL_SELECTION_UPDATE,prop:{part:e,store:null,isPickupSelected:!1,isDeliverySelected:!0,isSuggestionSelected:!1}})},handleSuggestionsToggle:e=>{v({type:uy.PL_SUGGESTIONS_SHOW_TOGGLE,part:e})},handleSuggestionStoreChange:(e,t)=>{g({type:uy.PL_PICKUP_REMOVE_STORE_SELECTION}),v({type:uy.PL_SUGGESTIONS_UPDATE_STORE_SELECTION,part:t,selectedStore:e}),f({type:uy.PL_SELECTION_UPDATE,prop:{store:e,part:t,isDeliverySelected:!1,isSuggestionSelected:!0}})},handleSaveSelection:()=>{f({type:uy.PL_SELECTION_UPDATE,prop:{submitSelection:!0}}),((e={},t)=>{const a=Sy(t,e.part),r=e.isDeliverySelected?"STH":"APU",n=new Gy(new Wy("event128")),s=['D=pageName+"',"",Yy,"Continue",`${r}"`].join("|"),l=a[0];e.part!==qy&&(e.isSuggestionSelected?n.add(new Wy("event130")):n.add(new Wy("event129"))),Hy({name:Yy,beacon:{events:n,eVar6:s,eVar67:l}})})(b,e.family),n&&n({...b,submitSelection:!0}),o||P()},clearOverlayData:P}},nh="search",sh=({fieldData:e,form:t,inputProps:a,setOptions:r,onInputBlur:n,inputRef:s,resetA11yText:o,errorMessageId:i=""})=>l().createElement(l().Fragment,null,l().createElement("label",{className:"visuallyhidden",htmlFor:nh},e.searchPlaceholder),l().createElement(ri,ur({type:"text","data-autom":"zipCode",classes:{input:"rf-productlocator-form-textinput"},name:nh,search:!0,placeholder:e.searchPlaceholder,autoComplete:"off",maxLength:e.maxlength,value:t.values[nh],onChange:t.handleChange,error:t.touched[nh]&&t.errors[nh],onReset:()=>{t.setFieldValue(nh,""),r([]);const e=s||a.ref;e&&e.current.focus()},resetA11y:o,ref:s},a,{onBlur:e=>{a?(a.onBlur(),n(a.value)):n(t.values[nh]),t.handleBlur(e)},"aria-describedby":i}))),lh=({onSubmit:e,fieldData:t,consent:a,classes:r={},inputValue:n,onInputBlur:s,inputRef:o,errorMessageId:c})=>{const{initialValues:d,validationSchema:m}=l().useMemo((()=>((e,t)=>{const a={[nh]:t||""},r={};return r[nh]=[],r[nh].push({type:"required",message:e.requiredError}),e.isAutoCompleteEnabled||r[nh].push({type:"regEx",regEx:e.required?[e.pattern]:[e.pattern,"^$"],message:e.invalidFormatError}),{initialValues:a,validationSchema:r}})(t,n)),[t,n]),{isAutoCompleteEnabled:u}=t,[p,g]=l().useState([]),[y,h]=(({autoCompleteChoiceAllyTxt:e,autoCompleteChoicesAllyTxt:t})=>{const[a,r]=l().useState(),n=l().useRef();return l().useEffect((()=>{a&&(n.current&&clearTimeout(n.current),n.current=setTimeout((()=>{r()}),400))}),[a]),[a,n=>{1===n&&e&&r(`${n} ${e}`),(0===n||n>1&&t)&&r(`${n} ${t}`),a&&r(null)}]})(t),E=Gd({initialValues:d,validationSchema:m,onSubmit:e}),{consent:v,handleChange:b,showConsent:f}=a.cookieCompliance||{};l().useEffect((()=>{E.resetForm(),E.setValues(d)}),[d]);const{assets:w}=z(),N=K().get(w,"reset");return l().createElement("div",{className:qa()("rf-productlocator-search",r.search)},l().createElement("form",{className:"rf-productlocator-form",onSubmit:E.handleSubmit},l().createElement("div",{className:"field-wrapper",key:nh},u?l().createElement(l().Fragment,null,l().createElement(cu,{value:E.values[nh],onChange:e=>{const a=i("productlocator/SearchForm/onChange");E.setFieldValue(nh,e.target.value),wt(my(t.autoCompleteUrl,{value:e.target.value})).then((e=>{const t=K().get(e,"body.matches",[]);g(t),h(t.length)})).catch((e=>a.error(e)))},onSelection:t=>{E.setFieldValue(nh,t),e({[nh]:t})},options:p,getPosition:e=>e?{width:e.width,left:0}:{},renderInput:e=>{const a={...e,ref:o};return l().createElement(sh,{fieldData:t,form:E,inputProps:a,setOptions:g,onInputBlur:s,resetA11yText:N,errorMessageId:c})},classes:{root:"rf-productlocator-autocomplete"}}),y&&l().createElement(yr,{message:y})):l().createElement(sh,{fieldData:t,form:E,setOptions:g,onInputBlur:s,inputRef:o,resetA11yText:N,errorMessageId:c})),f?l().createElement(iy,{consent:v,handleChange:b,label:a.label}):null))};lh.displayName="SearchForm";const oh=lh,ih=({onSubmit:e,fieldData:t,consent:a,classes:r={},inputRef:n,pickup:s,localLocation:o,onLocalLocationChange:i})=>{const[c,d]=l().useState(!1),m=l().useRef(!1),{showingOptionsLabel:u,selectLocationLabel:p,provinceSelectorTabs:g,addressLookupUrl:y}=t,h=l().useMemo((()=>{const e=g.map((e=>e.name));return g.map(((t,a)=>({...t,update:e.slice(a+1)})))}),[g]),E=sp({addressLookupUrl:y,provinceSelectorTabs:h,onChange:(t,a)=>{d(!1),e({search:t}),i(K().get(a,"city"))}}),{consent:v,handleChange:b,showConsent:f}=a.cookieCompliance||{},w=(e=>K().get(e,"data.locationLabel")||K().get(e,"data.location"))(s),N=o||w;return l().createElement("div",{className:qa()("rf-productlocator-search-province-selector",r.search)},l().createElement("form",{className:"rf-productlocator-province-selector-form"},N&&l().createElement("span",null,u),l().createElement("button",{type:"button",className:qa()(r.button,"rf-productlocator-province-selector-button","icon","icon-after",{"icon-chevrondown":!c,"icon-chevronup":c}),onClick:()=>{d(!c),c||(m.current=!0)},ref:n,"aria-expanded":c},N||p),l().createElement("div",{className:"column large-12 small-12"},l().createElement(Yr,{in:c},f?l().createElement(iy,{consent:v,handleChange:b,label:a.label}):null,m.current&&l().createElement(np,{activeTab:E.activeTab,onTabChange:E.setActiveTab,selection:E.selection,onSelection:E.handleSelection,tabs:E.tabs,desktopColumns:2,mobileColumns:2})))))},ch=({inline:e,reduced:t,tiny:a,noScrim:r,className:n="",children:s,...o})=>l().createElement("span",ur({className:qa()("badge",{"badge-reduced":t,"badge-tiny":a,"badge-no-scrim":r,"badge-inline":e},n)},o),s),dh=({className:e,legend:t,reduced:a,childAfterLegend:r,classes:n={items:""},children:s,...o})=>l().createElement("fieldset",ur({className:qa()("colornav","rc-dimension-colornav",e,{"colornav-reduced":a})},o),l().createElement("legend",null,t),r,l().createElement("ul",{className:qa()("colornav-items",n.items)},s)),mh=({id:e,className:t,handleChange:a,classes:r={image:"",input:"",label:"",navLabel:""},badgeText:s,image:o,text:i,skipChangeSelection:c,isProductRed:d,productRedImage:m,compact:u,labelAttrs:p,useImageAlt:g=!1,isMultiSelect:y=!1,...h})=>{const E=l().useId(),v=e||E,b=g?o:o&&{...o,alt:""},f=(()=>{const e="../dist/assets/ac-colornav/productred.svg";return l().useMemo((()=>{let t=e;try{n.p&&(t=new URL(e,n.p).href)}catch{}return t}),[])})();return l().createElement("li",{className:qa()(t,"colornav-item",{"colornav-item-productred":d,"rc-colornav-item-compact":u})},l().createElement("input",ur({type:y?"checkbox":"radio",id:v,className:qa()("colornav-value","rc-dimension-colornav-input",r.input)},Rd(a,c),h)),l().createElement("label",ur({htmlFor:v,className:qa()("colornav-link","rc-dimension-colornav-link",{"rc-colornav-label-compact":u},r.label)},p),s&&l().createElement(ch,ur({noScrim:!0,reduced:!0,className:"rc-colornav-label-badge"},Ya(s))),l().createElement(Fl,{data:b,className:qa()(r.image,"colornav-swatch",{"rc-dimension-colornav-image-compact":u}),alt:""}),d&&l().createElement("span",{className:"colornav-logo-productred",tabIndex:"-1"},m||l().createElement("img",{alt:"",src:f})),l().createElement("span",ur({className:qa()("colornav-label",r.navLabel)},Ya(i)))))},uh=({legend:e,childAfterLegend:t,withGutters:a,classes:r={items:""},tag:n="div",className:s,children:o,...i})=>l().createElement("fieldset",ur({className:qa()("rc-dimension",s)},i),l().createElement("legend",null,e),t,l().createElement(xd,{withGutters:a,className:qa()("rc-dimension-selector-group",{row:a},r.items),tag:n},o)),ph=({className:e,handleChange:t,skipChangeSelection:a,showSwatch:r,short:n,threeLine:s,itemsPerRowLarge:o=2,itemsPerRowSmall:i=2,classes:c={input:"",label:""},children:d,...m})=>l().createElement(Od,ur({tag:"div",className:qa()(e,"rc-dimension-multiple",{"form-selector-swatch":r,"form-selector-threeline":s,"form-selector-short":n},"column","large-"+12/o,"small-"+12/i),classes:{input:c.input,label:c.label}},Rd(t,a),m),d),gh=({className:e,handleChange:t,skipChangeSelection:a,threeLine:r,listChild:n,childRight:s,childRightColumnWidth:o=6,classes:i={input:"",label:""},childTop:c,children:d,isStackedLayout:m,labelProps:u,...p})=>{const g=()=>l().createElement(l().Fragment,null,c&&l().createElement("span",{className:"row row-logical"},c),m?l().createElement("span",{className:"row row-logical"},l().createElement("span",{className:qa()("form-selector-left-col","column","large-12","rc-dimension-stacked-layout",i.left)},l().createElement("span",{className:"row row-logical"},d),l().createElement("span",{className:"row row-logical"},s))):l().createElement("span",{className:"row row-logical"},l().createElement("span",{className:qa()("form-selector-left-col","column",i.left,{["large-"+(12-o)]:s,"large-12":!s})},d),s?l().createElement("span",{className:qa()("form-selector-right-col","column",`large-${o}`,i.right)},s):null));return l().createElement(Od,ur({tag:"div",className:qa()(e,"rc-dimension-selector-row",{"form-selector-twocol-threeline":r}),classes:{input:i.input,label:i.label},render:({inputId:e,SelectorLabel:t})=>n?l().createElement("div",{id:`${e}_label`,className:qa()("form-selector-label",i.label)},l().createElement(t,{className:qa()("rc-dimension-list-header","form-selector-list-header"),id:void 0},l().createElement(g,null)),n):l().createElement(t,ur({classes:{root:i.label}},u),l().createElement(g,null))},Rd(t,a),p))},yh=({text:e,className:t,...a})=>l().createElement("span",ur({className:qa()("form-label-small",t)},Ya(e),a)),hh=({text:e,className:t})=>l().createElement("span",ur({className:qa()("form-selector-title",t)},Ya(e))),Eh=({className:e,text:t,...a})=>l().createElement("span",ur({className:qa()("rf-pickup-recommended-violator",nd.CAPTION,e)},Ya(t),a)),vh=({stores:e,handleStoreChange:t,legend:a=""})=>l().createElement("div",{className:"rf-productlocator-stores"},l().createElement(uh,{name:"store",legend:a},e&&e.map(((e,a)=>l().createElement(Od,ur({key:e.storeNumber,name:`store-${e.partsAvailabilityNorm.partNumber}`,value:e.storeNumber,checked:e.selected,withAriaLabeledBy:!0,"data-pl-partnumber":e.partsAvailabilityNorm.partNumber,disabled:!K().get(e,"partsAvailabilityNorm.messageTypes.regular.storeSelectionEnabled",!1)},Rd((a=>t(a,e.partsAvailabilityNorm.partNumber)),!0),{className:qa()("rf-productlocator-storeoption","form-selector-twocol-threeline",{disabled:!K().get(e,"partsAvailabilityNorm.messageTypes.regular.storeSelectionEnabled",!1)}),tagAttrs:{"data-autom":`pickupStore_${a}`},render:({SelectorLabel:t})=>l().createElement(l().Fragment,null,l().createElement(t,null,l().createElement("span",{className:"row"},l().createElement("span",{className:qa()("form-selector-left-col","column","large-6")},e.recommendationLabel&&l().createElement(Eh,{text:e.recommendationLabel}),l().createElement(hh,{text:e.address.address}),l().createElement(yh,{text:e.state?`${e.city}, ${e.state}`:e.city}),l().createElement(yh,{text:e.storeDistanceWithUnit})),l().createElement("span",{className:qa()("form-selector-right-col","column","large-6")},l().createElement("span",Ya(e.partsAvailabilityNorm.pickupSearchQuote)),e.partsAvailabilityNorm.pickupType&&l().createElement(yh,{text:e.partsAvailabilityNorm.pickupType})))),l().createElement(Yr,{in:e.selected},l().createElement("div",{className:"rf-productlocator-storedetails",id:`${e.partsAvailabilityNorm.partNumber}-${e.storeNumber}-details`},l().createElement("div",null,e.address&&l().createElement("span",ur({className:"rf-productlocator-storename row"},Ya(e.address.address2))),l().createElement("span",{className:"rf-productlocator-storeaddress row"},e.state?`${e.city}, ${e.state}`:`${e.city}`),e.address&&e.address.postalCode&&l().createElement("span",ur({className:"row"},Ya(e.address.postalCode))),e.storeHours&&l().createElement("div",{className:"rf-productlocator-storehours"},l().createElement("span",{className:"visuallyhidden"},e.storeHours.storeHoursText),e.storeHours.hours&&e.storeHours.hours.map((t=>l().createElement("div",{key:`${e.storeNumber}-${t.storeDays}`,className:"rf-productlocator-storehours-row"},l().createElement("span",ur({className:"rf-productlocator-storehoursdays"},Ya(t.storeDays))),l().createElement("span",ur({className:"rf-productlocator-storehourstiming"},Ya(t.storeTimings)))))),e.specialHours&&e.specialHours.specialHoursData&&l().createElement("div",{className:"rf-productlocator-specialhours"},l().createElement("p",Ya(e.specialHours.specialHoursText)),e.specialHours.specialHoursData.map((t=>l().createElement("div",{key:`${e.storeNumber}-${t.specialDays}`,className:"rf-productlocator-storehours-row"},l().createElement("span",ur({className:"rf-productlocator-storehoursdays"},Ya(t.specialDays))),l().createElement("span",ur({className:"rf-productlocator-storehourstiming"},Ya(t.specialTimings))))))))),e.pickupOptionsDetails&&l().createElement("div",{className:qa()("rf-productlocator-pickupdetails",nd.CAPTION)},l().createElement("div",Ya(e.pickupOptionsDetails.whatToExpectAtPickup)),e.pickupOptionsDetails.pickupOptions&&e.pickupOptionsDetails.pickupOptions.map((e=>l().createElement("ul",{key:e.index,className:"form-selector-group"},l().createElement("li",{className:"rf-productlocator-pickupoption"},l().createElement("div",Ya(e.pickupOptionTitle)),l().createElement("div",Ya(e.pickupOptionDescription)))))),l().createElement("div",Ya(e.pickupOptionsDetails.comparePickupOptionsLink))))))}))))));vh.displayName=vh;const bh=vh,fh=({pickup:e,localLocation:t,handleStoreChange:a,assets:r,errorMessageId:n})=>{const[s,o]=l().useState(!1),{pickupHeader:i,pickupHeaderNear:c,coldStartPickupInfo:d}=r,m=K().get(e,"data.stores"),u=K().get(e,"data.availability.isComingSoon",!1),p=t||(e=>K().get(e,"data.locationLabel")||K().get(e,"data.location"))(e),g=K().get(e,"data.legendLabelText",""),y=l().createElement("span",ur({className:"visuallyhidden"},Ya(g)));return l().createElement(l().Fragment,null,l().createElement("div",{className:"rf-productlocator-pickuploctionheader"},p?l().createElement("h3",null,c," ",p):l().createElement("h3",null,i),e.isFetched?"":l().createElement("div",ur({className:"rf-productlocator-pickupinfo"},Ya(d)))),e.isFetched&&!u&&l().createElement("div",{className:qa()("rf-productlocator-pickupstoreslist",{"rf-productlocator-nopickupstores":e.isToggleBtnNeeded,"rf-productlocator-togglebtn-open":s})},e.isToggleBtnNeeded?l().createElement(l().Fragment,null,l().createElement("button",{type:"button",className:qa()("rf-productlocator-nopickupstores-btn as-buttonlink",nd.BODY_REDUCED),"aria-expanded":s,onClick:()=>o(!s)},l().createElement("span",ur({className:"rf-productlocator-buttontitle"},Ya(m&&m.length>1?e.data.notAvailableNearby:e.data.notAvailableNearOneStore))),l().createElement("span",{className:"icon icon-after icon-chevrondown rf-productlocator-buttonicon"})),l().createElement(Yr,{in:s,className:"rf-productlocator-notavailablestores"},l().createElement(bh,{stores:m,handleStoreChange:a,legend:y}))):l().createElement(l().Fragment,null,e.error&&l().createElement("div",{className:qa()("rf-productlocator-errormsg",nd.BODY_REDUCED,"is-error"),id:n},l().createElement(po,{error:e.error.message})),l().createElement(bh,{stores:m,handleStoreChange:a,legend:y}))),e.isFetched&&u&&l().createElement("div",ur({className:"rf-productlocator-pickupinfo rf-productlocator-comingsoon"},Ya(K().get(e,"data.availability.comingSoonText","")))))};fh.displayName="ProductLocatorPickup";const wh=fh,Nh=({delivery:e,selected:t,handleDeliverySelection:a})=>{const{deliveryQuoteNorm:r,partNorm:n}=e,s=K().get(r,"compact.label",""),o=K().get(r,"compact.quote",""),i=K().get(r,"compact.isBuyable",!0);return r?l().createElement("div",{className:"rf-productlocator-deliveryquotes"},l().createElement(gh,{name:"delivery",value:n,checked:t,tag:"div",disabled:!i,className:"rf-productlocator-deliveryquotesoption",skipChangeSelection:!0,handleChange:a,render:({SelectorLabel:e})=>l().createElement(e,null,l().createElement("span",{className:"row"},l().createElement("span",{className:qa()("form-selector-left-col","column","large-12","small-12")},l().createElement(hh,{text:`${s} ${o}`}))))})):""};Nh.displayName="Delivery";const Sh=Nh,Ch=({suggestions:e,assets:t,handleSuggestionStoreChange:a,handleSuggestionsToggle:r})=>{const{recommendationSectionHeader:n,errorMessage:s}=t,{isFetching:o,isFetched:i,data:c,error:d}=e,m=K().get(c,"products",[]),u=0===m.length;return l().createElement("div",{className:"rf-productlocator-suggestions"},l().createElement("div",{className:"rf-productlocator-suggestionheader"},l().createElement("h3",null,n)),o&&l().createElement("div",{className:"column large-12 small-12 rf-pickupinfo-spinner"},l().createElement("div",{role:"img",tabIndex:-1,className:"waitindicator waitindicator40-blue","aria-label":"loading"})),i&&l().createElement("div",{className:qa()("rf-productlocator-suggestionitems",{"rf-productlocator-nosuggestionitems":u})},d&&l().createElement("div",ur({className:"rf-productlocator-errormsg is-error"},Ya(d.isResponseError?d.message:s))),u?l().createElement("div",ur({className:qa()("rf-productlocator-suggestions-nosimilarmodels",nd.BODY_REDUCED)},Ya(c.noSimilarModelsText))):m.map(((e,t)=>{const{part:n,productImage:s,productTitle:o,displayPrice:i,availabilityText:c,stores:d}=e;return l().createElement("div",{className:"rf-productlocator-suggestionitem","data-autom":`productLocator-suggestions-${t}`,key:n},l().createElement("div",{className:"rf-productlocator-productdetails"},s&&l().createElement("div",{className:"rf-productlocator-productimg"},l().createElement("img",{src:s.srcSet.src,className:"ir",alt:s.alt?s.alt:"",width:s.width,height:s.height})),l().createElement("div",{className:qa()("rf-productlocator-productinfo",{"rf-productlocator-togglebtn-open":e.isShown})},l().createElement("button",{type:"button",className:"rf-productlocator-suggestionstogglebtn",onClick:()=>r(n)},l().createElement("span",{className:"rf-productlocator-togglebtn-content"},l().createElement("span",{className:nd.BODY_REDUCED},o),l().createElement("span",ur({className:qa()("rf-productlocator-productprice",nd.BODY_REDUCED)},Ya(i))),l().createElement("span",{className:qa()("rf-productlocator-suggestionsstoresbtn",nd.CAPTION)},c)),l().createElement("span",{className:"icon icon-after icon-chevrondown rf-productlocator-buttonicon"})))),l().createElement(Wr,{in:e.isShown,className:"rf-productlocator-suggestionoptions"},l().createElement(bh,{stores:d,handleStoreChange:e=>a(e,n)})))}))))};Ch.displayName="Suggestions";const Th=Ch,Lh=({state:e,onDimensionChange:t})=>{const a=K().get(e,"dimensions",[]),r=e=>e.showDisabledSelectors?e.options:e.options.filter((e=>e.enabled));return a.map((e=>"carrierModel"!==e.key&&l().createElement("div",{key:e.key,className:"rf-productlocator-filter-dimension"},e.header&&l().createElement("h3",ur({className:qa()("rf-productlocator-filter-dimensionlabel",nd.BODY)},Ya(e.header))),"dimensionColor"===e.key?l().createElement(dh,{name:"color",legend:l().createElement("span",ur({className:"visuallyhidden"},Ya(e.header))),className:"rf-productlocator-filter-dimensiongroup"},r(e).map((a=>{const r={...a.image,alt:""};return l().createElement(mh,{key:a.value,name:"pl_dimensionColor",value:a.value,checked:a.selected,image:r,text:a.label,isProductRed:"product_red"===a.value,skipChangeSelection:!0,handleChange:a=>t(e.key,a)})}))):l().createElement(uh,{name:e.key,legend:l().createElement("span",ur({className:"visuallyhidden"},Ya("dimensionConnection"!==e.key?e.header:K().get(e,"modelMessage")))),className:"rf-productlocator-filter-dimensiongroup",withGutters:!0},r(e).map((a=>l().createElement(ph,{key:a.value,name:`pl_${e.key}`,value:a.value,checked:a.selected,disabled:!a.enabled,className:"rf-productlocator-filteroption",itemsPerRowLarge:"dimensionConnection"===e.key||"dimensionPackQty"===e.key||"dimensionScreensize"===e.key||"dimensionFinish"===e.key||"dimensionStandType"===e.key?1:3===r(e).length?3:2,itemsPerRowSmall:"dimensionConnection"===e.key||"dimensionPackQty"===e.key||"dimensionScreensize"===e.key||"dimensionFinish"===e.key||"dimensionStandType"===e.key?1:2,skipChangeSelection:!0,handleChange:a=>t(e.key,a)},l().createElement(yh,{text:a.label}))))))))},kh=({ariaLabel:e,entered:t})=>{const a=l().useRef(null),r=l().useRef(null);return l().useEffect((()=>(t&&(r.current=document.activeElement,a.current&&a.current.focus()),()=>{r.current&&window.setTimeout((()=>{r.current.focus()}),0)})),[t]),l().createElement("div",{className:"column large-12 small-12 rf-pickupinfo-spinner"},l().createElement("div",{ref:a,role:"img",tabIndex:-1,className:"waitindicator waitindicator40-blue","aria-label":e}))};kh.displayName="Loader";const Ih=kh,Ah=({bootstrap:e,part:t,storeId:a,visible:r,consent:n,isSaving:s,onClose:o,onStoreChange:i,cppart:c,onMetaInitialized:d=K().noop,preventClearOnSave:m,stickyTrigger:u=!1})=>{const p=rh({bootstrap:e,visible:r,part:t,storeId:a,onStoreChange:i,cppart:c,preventClearOnSave:m,stickyTrigger:u}),{viewport:g}=z(),[y,h]=l().useState(!1),[E,v]=l().useState(!1),[b,f]=hr({resetDelay:4e3}),w=l().useId(),{metaState:N={},filterState:S={},pickupState:C,deliveryState:T,suggestionsState:L,selectionState:k={},inputRef:I,localLocation:A,setLocalLocation:P,handleDimensionChange:D,handleStoreChange:O,handleDeliverySelection:x,handleFormSubmit:R,handleInputBlur:F,handleSuggestionsToggle:M,handleSuggestionStoreChange:B,handleSaveSelection:_,clearOverlayData:$}=p,U="small"===g,{data:V={},error:H,isFetched:j,isFetching:G}=N,{overlayHeader:W,search:q,assets:Y={}}=V,{deliveryHeader:X,storeSelectionButtonText:J,filterButtonText:Z,footer:Q}=Y,ee=K().get(C,"data.location"),{displayPrice:te,productImage:ae,product:re={}}=S,{part:ne,isPickupSelected:se,isDeliverySelected:le,isSuggestionSelected:oe}=k,ie=Boolean(ne)&&(se||le||oe),ce=K().get(N,"data.displayableDimensionVariants"),de=ce&&ce.size,me=ce&&ce.items.some((e=>"dimensionColor"===e.value)),{provinceSelector:ue,showingOptionsLabel:pe,selectLocationLabel:ge,provinceSelectorTabs:ye,addressLookupUrl:he,resultVoText:Ee,resultsVoText:ve}=e,be=K().get(C,"data.stores",[]),fe=K().get(C,"isFetched",""),we=K().get(C,"data.availability.isComingSoon",!1),Ne=be.length,Se=1===Ne?Ee:ve;return l().useEffect((()=>{j&&d()}),[j,H,d]),l().useEffect((()=>{f(`${Ne} ${Se}`)}),[fe]),l().createElement(is,{visible:r,classes:{root:"rf-productlocator-overlay",content:qa()("rf-productlocator-overlay-content",{"rf-productlocator-overlay-comingsoon":we})},fixedWidth:!0,noPadding:!0,appear:!0,ariaLabel:"rf-productlocator-overlay-label",onClose:()=>{o(),Vy.fireMicroEvent({feature:Yy,eVar:"eVar6",action:"Close"}),$(),v(!1)},onEntered:()=>h(!0),onExited:()=>h(!1)},G&&l().createElement(Ih,{ariaLabel:"loading",entered:y}),fe&&Ne>0&&l().createElement(yr,{message:b}),j&&(K().isEmpty(H)?l().createElement(l().Fragment,null,l().createElement("div",{className:"rf-productlocator-header"},l().createElement("h2",ur({id:"rf-productlocator-overlay-label"},Ya(W))),r&&U&&q&&l().createElement(l().Fragment,null,ue?l().createElement(ih,{fieldData:{showingOptionsLabel:pe,selectLocationLabel:ge,provinceSelectorTabs:ye,addressLookupUrl:he},onSubmit:R,onInputBlur:F,pickup:C,inputRef:I,consent:n,localLocation:A,onLocalLocationChange:P}):l().createElement(oh,{fieldData:q,onSubmit:R,onInputBlur:F,inputValue:ee,inputRef:I,consent:n,errorMessageId:w}))),l().createElement("div",{className:"row"},l().createElement("div",{className:qa()("column","large-5","small-12","rf-productlocator-column",{"rf-productlocator-hidedimensions":1===de&&me,"rf-productlocator-filter-scrollable":!U})},r&&!U&&q&&l().createElement(l().Fragment,null,ue?l().createElement(ih,{fieldData:{showingOptionsLabel:pe,selectLocationLabel:ge,provinceSelectorTabs:ye,addressLookupUrl:he},onSubmit:R,onInputBlur:F,pickup:C,inputRef:I,consent:n,localLocation:A,onLocalLocationChange:P,classes:{search:"column large-12 small-12"}}):l().createElement(oh,{fieldData:q,onSubmit:R,onInputBlur:F,inputValue:ee,inputRef:I,consent:n,errorMessageId:w})),l().createElement("div",{className:qa()("rf-productlocator-filter",nd.CAPTION)},U?l().createElement(l().Fragment,null,l().createElement("button",{type:"button",className:qa()("rf-productlocator-filterbtn",nd.BODY_REDUCED,{"rf-productlocator-filterbtn-show":E}),onClick:()=>{v(!E),(e=>{const t=e?"Check availability of another device - open":"Check availability of another device - close";Vy.fireMicroEvent({part:"Link",feature:Yy,eVar:"eVar6",action:t})})(!E)}},l().createElement("span",{className:"icon icon-after icon-chevrondown"},Z)),l().createElement(Wr,{in:E,className:"rf-productlocator-filtercontent"},l().createElement(Lh,{state:S,onDimensionChange:(t,a)=>D(t,a,e.family)}))):l().createElement(Lh,{state:S,onDimensionChange:(t,a)=>D(t,a,e.family)}))),l().createElement("div",{className:qa()("column","large-7","small-12","rf-productlocator-column",{"rf-productlocator-ispickuploading":C.isFetching})},l().createElement("div",{className:qa()("rf-productlocator-options",{"rf-productlocator-scrollable":!U})},C.isFetching&&l().createElement(Ih,{ariaLabel:"loading",entered:y}),l().createElement("div",{className:"rf-productlocator-main"},l().createElement("div",{className:"rf-productlocator-productdetails"},l().createElement("div",{className:"rf-productlocator-productimg"},ae&&l().createElement(Fl,{data:ae})),l().createElement("div",{className:"rf-productlocator-productinfo"},l().createElement("div",{className:nd.BODY_TIGHT},re.productTitle),l().createElement("div",ur({className:qa()("rf-productlocator-productprice",nd.BODY)},Ya(te))))),l().createElement("div",{className:"rf-productlocator-maincontent"},!C.isFetching&&l().createElement(l().Fragment,null,l().createElement(wh,{pickup:C,localLocation:A,handleStoreChange:O,assets:Y,errorMessageId:w}),T.data&&!T.error&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rf-productlocator-deliveryheader"},l().createElement("h3",null,X)),l().createElement(Sh,{delivery:T.data,handleDeliverySelection:x,selected:k.isDeliverySelected}))))),C.isToggleBtnNeeded&&!we&&l().createElement(Th,{suggestions:L,handleSuggestionsToggle:M,handleSuggestionStoreChange:B,assets:Y}),l().createElement("div",ur({className:qa()("rf-productlocator-footer",nd.CAPTION)},Ya(Q)))),l().createElement("div",{className:"rf-productlocator-sticky"},l().createElement(ds,{className:qa()("button","button-block","rf-productlocator-selectstorebtn",{disabled:!ie}),"data-autom":"continuePickUp",disabled:!ie||s,type:"button",isLoading:s,onClick:()=>_()},J))))):l().createElement("div",ur({className:"rf-productlocator-error"},Ya(H.message)))))},Ph=({bootstrap:e,...t})=>e&&e.metaURL?l().createElement(Ah,ur({bootstrap:e},t)):null;Ph.displayName="ProductLocatorOverlay";const Dh=Ph,Oh=({onChangeModelClick:e,changeModelButtonLabel:t,changeModelOverlay:a,showChangeFamilyOverlay:r,onChangeFamilyClick:n,changeFamilyButtonLabel:s,changeFamilyOverlay:o})=>l().createElement("div",{className:"rs-iteminfo-changeproduct"},t&&l().createElement("button",{onClick:e,className:"rs-iteminfo-changeproduct-link as-buttonlink more",type:"button"},t),r&&l().createElement("button",{onClick:n,className:"rs-iteminfo-changeproduct-link as-buttonlink more",type:"button"},s),a,r&&o),xh=()=>{const{modKey:e}=ul(),[t,a]=(0,s.useState)(!1),r=Ua(),n=`${e}.changeProduct`,o=Ra(n),{data:i,properties:c}=o,d=c.isLoadingSubmit,{currentFamilyNode:m,currentFamilyName:u,cppart:p,nextFamilyNode:g,nextFamilyName:y,nextFamilyDefaultPart:h,nextFamilyCppart:E,changeFamilyLinkTxt:v,changeProductLinkTxt:b,bootstrapURL:f}=i,[w,N]=(0,s.useState)(!1),[S,C]=(0,s.useState)(!1),[T,L]=(0,s.useState)(),k=oy(K().get(T,"consent",{})),I={label:K().get(T,"consent.label"),cookieCompliance:k},A=Ka(n,"part"),P=Ka(n,"store"),D=Boolean(v);(0,s.useEffect)((()=>{(e=>{const t=`${window.location.origin}${e}`;return wt(t).then((e=>{const t=K().get(e,"body.fulfillmentMessageBootstrap"),a=K().get(e,"body.productLocatorBootstrap");return{...t,...a,fireRecommendationsAvailability:!1,metaURL:a.productLocatorMetaDataUrl,pickupURL:t.storePickupMessageUrlForPL,suggestionsURL:a.productLocatorRecommendedProductsUrl,maxParamsPerURL:t.batchSize||3,isAutoCompleteEnabled:t.autoCompleteEnabled,cookie:{name:t.cookieName,expiry:t.cookieExpiry,domain:t.cookieDomain,countryCode:t.countryCode,enabled:t.enabled},storeCookie:t.retailStoreCookie,validation:{zip:{pattern:t.locationValidationRegEx,invalidFormatError:t.invalidFormatErrorMessage,requiredError:t.requiredFieldErrorMessage}},availabilityUnknownError:t.availabilityUnknownErrorMessage,searchPlaceholder:t.searchPlaceholderText,searchButton:t.searchButtonText,availabilityFor:t.availabilityForText,personalPickup:t.personalPickupFragment,previousButton:t.previousButtonText,nextButton:t.nextButtonText,cancelButton:t.cancelButtonText,selectButton:t.selectButtonText,dataVersion:t.dataVersionValue,moreInformation:t.moreInformationText,url:t.storePickupMessageUrl,isSingleStorePickup:K().get(t,"singleStoreMetaData.singleStoreCountry",!1),singleStoreId:t.defaultRetailStoreId,productLocatorColdStartText:a.checkAvailabilityText,productLocatorWarmStartText:a.pickupLinkText,notificationMessage:a.toastNotificationText,setAPUCookie:!1,combinePickupWithMeta:!0,closeOverlayOnSelectStore:!1,deliveryURL:a.deliveryMessageUrl,searchForStoresNearLabel:a.searchForNearbyStoresLabel,showingStoresNearLabel:a.showingStoresNearLabel}}))})(f).then((e=>{L(e)}))}),[]);const O=e=>{var t,s;a(!0),t=e.part,s=e.store,A.setValue(t),P.setValue(s),r({type:pe,modKey:n,name:"update"})};(0,s.useEffect)((()=>{t&&!d&&(C(!1),N(!1),a(!1))}),[t,d]);const x=Boolean(T&&w)&&l().createElement(Dh,{preventClearOnSave:!0,visible:w,part:A.value,storeId:P.value,bootstrap:{...T,family:u,node:m},cppart:p,onClose:()=>N(!1),consent:I,onStoreChange:O,isSaving:d}),R=Boolean(T&&S)&&l().createElement(Dh,{preventClearOnSave:!0,visible:S,part:h,storeId:P.value,bootstrap:{...T,family:y,node:g},cppart:E,onClose:()=>C(!1),consent:I,onStoreChange:O,isSaving:d});return l().createElement(Oh,{onChangeModelClick:()=>{(e=>{const t=K().get(window,"s.prop8","");wl({eVar:hl,slot:t,feature:`link | update your ${e} selections`,action:""})})(u),N(!0)},changeModelButtonLabel:b,changeModelOverlay:x,showChangeFamilyOverlay:D,onChangeFamilyClick:()=>{(()=>{const e=K().get(window,"s.prop8","");wl({eVar:hl,slot:e,feature:"link | choose a different iPhone model",action:""})})(),C(!0)},changeFamilyButtonLabel:v,changeFamilyOverlay:R})},Rh=l().memo(xh),Fh=({header:e,message:t})=>l().createElement("div",{className:"rs-carrier-connectivity"},l().createElement("div",{className:"rs-carrier-connectivity-wrap"},l().createElement("h3",{className:"rs-carrier-connectivity-title"},e),l().createElement("div",ur({className:"rs-carrier-connectivity-message typography-body-reduced"},Ya(t))))),Mh=({modKey:e})=>{const[t]=Ba(e,"connectivityHeader"),[a]=Ba(e,"connectivityText");return l().createElement(Fh,{header:t,message:a})},Bh=l().memo(Mh),_h=({upgradingFrom:e,productDetails:t,upgradeDetails:a})=>l().createElement("div",{className:"rs-iteminfo-child rs-iteminfo-upgradedetails"},l().createElement("h3",{className:"rs-iteminfo-upgradedetails-header typography-body"},e,":"),l().createElement("span",{className:"rs-iteminfo-upgradedetails-productdetails typography-body"},t),Array.isArray(a)&&a.map((e=>l().createElement("div",{key:e,className:"rs-iteminfo-child-details"},l().createElement("span",{className:"rs-iteminfo-child-details-label"},e.label,": "),l().createElement("span",{className:"rs-iteminfo-child-details-value"},e.value))))),$h=({modKey:e,isReview:t,isEditable:a,announceMessage:r=K().noop,showQuantity:n=!0,showImage:o=!0,quantityLabel:i,dataAutom:c,productTitleHeadingLevel:d=2,alignDetailsLeft:m,index:u,itemLength:p,removedItemIndex:g,isFullWidthTitleMow:y=!0})=>{const{viewport:h,assets:E,fragments:v}=z(),b="small"===h,[f]=Ma(`${e}.cartItemBundleDownPaymentReview`),w=Ra(e),{isGiftCard:N,promoLabel:S,showIntentToGift:C,isBundlePromoItem:T,buyFlowInstallmentsDetails:L,hasCarrierTradeIn:k,carrierLabel:I,carrierName:A,relatedParentLabel:P,relatedParent:D,purchaseOptionDescription:O,appleCareIncluded:x,priceMessage:R,preOrderDeviceTradein:F,productId:M,notReturnable:B,installmentPrice:_,fullPriceInfo:$,vatInfo:U,segmentSavingsMessage:V,standAloneDeviceActivationDetails:H={},description:j,processLinkText:G,processLinkMetrics:W,processOverlayText:q,bundleDetails:Y,brandTitle:X,carrierConnectivityDiscountMessage:J,priceAfterDiscountMessage:Z,savingsBadge:Q,upgradingFrom:ee,upgradeFromProductDetails:te,bundleUpgradeFromDetails:ae}=w.data,re=Boolean(L),ne=Boolean(V),se=K().get(x,"label"),le=se?`${se} ${x.value}`:"",oe=Fa(`${e}.recommendedSystemCartMoreProducts`),ie=Fa(`${e}.egc`),ce=Fa(`${e}.giftCard`),de=ie||ce,me=Fa(`${e}.engraving`),ue=Fa(`${e}.gifting`),pe=Fa(`${e}.delivery`),ge=Fa(`${e}.itemQuantity`),ye=Fa(`${e}.changeProduct`),he=Fa(`${e}.changeProductDisclaimer`),Ee=Fa(`${e}.carrierConnectivityCallout`),ve=Ka(e,"changeAppleCareModal"),be=H&&H.hasLearnMoreOverlay,fe=l().createElement(Oo,null),{isRecommendedSystems:we,quantity:Ne}=w.data,Se=we&&l().createElement(Fo,null),Ce=(0,s.useRef)(),Te=a?Ce:null,Le=b&&(!y||k),ke=l().createElement(_o,{linkRef:Te,productTitleHeadingLevel:d,shouldFormatName:Le}),Ie=l().createElement(Ko,{linkRef:Te}),[Ae,Pe]=(0,s.useState)(!1),De=l().createElement(ti,{visible:Ae}),Oe=!be&&l().createElement(qo,{visible:Ae,setVisible:Pe}),xe=be&&l().createElement(ro,{btnLabel:E.carrierLearnMore,overlayContent:v.carrierLearnMoreOverlayContent}),{originalQty:Re}=w.data,Fe=Boolean(Y),Me=n&&(Re||ge)&&!(k&&b)&&!Fe,Be=Me&&l().createElement(di,{label:i}),_e=l().createElement(yi,{showPriceMessage:!m}),$e=l().createElement(vi,null),Ue=l().createElement(Ci,{index:u,removedItemIndex:g}),Ke=l().createElement(Ii,null),Ve=ye&&l().createElement(Rh,null),[He,je]=l().useState(!1),Ge=ve.bindExists&&l().createElement(ty,{removeClick:He}),We=he&&l().createElement(ny,null),qe=Ee&&l().createElement(Bh,{modKey:`${e}.carrierConnectivityCallout`}),Ye=Fe&&b&&l().createElement(sy,{showDetails:!1,headerLabel:Y.headerLabel}),ze=Fe&&l().createElement(sy,{showHeader:!b,showDetails:!0,headerLabel:Y.headerLabel,carrierLabel:I,carrierName:A}),Xe=ee&&l().createElement(_h,{upgradingFrom:ee,productDetails:te,upgradeDetails:ae}),Je=f.downPayment&&l().createElement(ly,{downPayment:f.downPayment,downPaymentTermsUrl:f.downPaymentTermsUrl}),{priceDetails:Ze,promos:Qe}=w.data,et=Boolean(Qe),[tt,at]=Ba(e,"isNewItemAdded"),rt=l().useRef(),[nt,st]=Ba(ws,"isItemRemoved",!1),[lt,ot]=(0,s.useState)(tt||nt?-1:null),[it,ct]=(0,s.useState)("");(0,s.useEffect)((()=>{tt&&rt.current&&(rt.current.focus(),at(!1))}),[tt,rt]),(0,s.useEffect)((()=>{nt&&rt.current&&(u===g.current||g.current===p&&u===g.current-1)&&(rt.current.focus(),st(!1))}),[nt,rt,g]),(0,s.useEffect)((()=>()=>{g&&(g.current=u,st(!0))}),[]);const[dt]=Ba(Is,"total"),[mt]=Ba(Rs,"emiAmount"),ut=mt||dt,[pt]=Ma(Cs),gt=Boolean(pt.undoMessages);(0,s.useEffect)((()=>{if(gt){const e=`${dn(E.itemsHeader,{price:ut})}`;r(e)}}),[ut]);const yt=Wm(`${e}.delivery.lineDeliveryOptions`),ht={modKey:e,isReview:t,isEditable:a,announceMessage:r,editLocation:yt,isBundle:Fe},Et=!Fe&&(H.carrierLabelText||A),vt=!Fe&&(H.carrierLabel||I),bt=(0,s.useRef)(""),ft=(0,s.useRef)("");return l().createElement(ml.Provider,{value:ht},l().createElement(Al,{messages:fe,isGiftCard:N,hasBuyFlowInstallmentDetails:re,hasCarrierTradeIn:k,isRecommendedSystems:we,recommendedSystemsQuantity:Ne,recommendedSystemsActions:Se,promoLabel:S,carrierDiscountMessage:H.carrierDiscountMessage,brandTitle:X,productTitle:ke,productImage:Ie,showProductImage:o,productInfo:De,productInfoTrigger:Oe,carrierLearnMoreTrigger:xe,description:j,processLinkText:G,processLinkMetrics:W,processOverlayContent:q,showQuantity:Me,quantity:Be,price:_e,carrierLabel:vt,carrierName:Et,carrierConnectivityDiscountMessage:J,priceAfterDiscountMessage:Z,relatedParentLabel:P,relatedParent:D,inlineFees:$e,installmentPrice:_,fullPriceInfo:$,hasSegmentSavingsMessage:ne,removeButton:Ue,saveForLaterButtonMarkup:Ke,partNumber:M,isNonRefundable:B,hasPromos:et,installmentDetails:Ze,itemTabIndex:lt,changeProduct:Ve,changeAppleCare:Ge,changeProductDisclaimer:We,itemRef:rt,dataAutom:c,purchaseOptionDescription:O,alignDetailsLeft:m,priceMessage:R,hasPreOrderTradeIn:F,appleCareDescription:le,vatInfo:U,itemBundleHeader:Ye,itemBundleDetails:ze,itemDownPayment:Je,isFullWidthTitleMow:y,carrierConnectivityCalloutInfo:qe,savingsBadge:Q},Xe,l().createElement(Di,null),l().createElement(Ri,null),oe&&l().createElement(Bi,null),l().createElement(uo,{itemRef:rt,setItemTabIndex:ot,setAppleCarePlusType:ct,removeBtnRef:bt,acPlusAddRef:ft,handleRemoveClick:()=>{je(!0)}}),l().createElement(Ao,{appleCarePlusType:it,acPlusAddRef:ft,removeClick:He}),de&&l().createElement(Xi,null),me&&l().createElement(dm,null),C&&l().createElement(ym,null),ue&&l().createElement($m,null),pe&&l().createElement(jg,null),T&&l().createElement(qg,null)))},Uh=l().memo($h),Kh=({items:e,announceMessage:t,isEditable:a,quantityLabel:r,productTitleHeadingLevel:n=2,isReview:s,removedItemIndex:o})=>l().createElement(cl,{className:"rs-bag-items rs-iteminfos",component:"ol",role:"list","data-autom":"bag-items","data-analytics-region":"bag-items"},e.map((({modKey:i,props:c},d)=>l().createElement(dl,ur({key:`bag-item-${i}`},c,{enter:!0}),l().createElement(Uh,{modKey:i,announceMessage:t,isEditable:a,quantityLabel:r,dataAutom:`bag-item-${d+1}`,productTitleHeadingLevel:n,isReview:s,index:d,itemLength:e.length,removedItemIndex:o}))))),Vh=(e,t)=>{const a=e.items.length===t.items.length,r=e.isEditable===t.isEditable;return a&&r},Hh=l().memo(Kh,Vh),jh=({modKey:e,quantityLabel:t,isEditable:a,productTitleHeadingLevel:r=2,isReview:n=!1})=>{const{assets:o}=z(),i=el(e),c=ir(e,i),[d]=Ba(e,al),m=a||d,[u,p]=hr(),[g,y]=hr(),h=(0,s.useRef)(0);return l().createElement(l().Fragment,null,l().createElement(Hh,{items:c,announceMessage:e=>{e===o.processing?p(e):y(e)},isEditable:m,quantityLabel:t,productTitleHeadingLevel:r,isReview:n,removedItemIndex:h}),l().createElement(yr,{message:u}),l().createElement(yr,{message:g}))},Gh=l().memo(jh),Wh=({text:e})=>l().createElement("span",{className:"rs-notificationbanner-ackmessage"},l().createElement("span",Ya(e))),qh=({text:e,redirectText:t,redirectLink:a,linkEvar1:r})=>l().createElement("span",{className:"rs-notificationbanner-ackmessage rs-notificationbanner-saveditem"},l().createElement("span",ur({className:"rs-notificationbanner-icon"},Ya('<svg width="21" height="21" class="as-svgicon as-svgicon-bookmarkfill as-svgicon-tiny as-svgicon-bookmarkfilltiny" role="img" aria-hidden="true"><path fill="none" d="M0 0h21v21H0z"/><path d="M12.8 3.25H8.2A2.2 2.2 0 0 0 6 5.45v11.588a.768.768 0 0 0 .166.522.573.573 0 0 0 .455.19.644.644 0 0 0 .38-.128 5.008 5.008 0 0 0 .524-.467l2.916-2.885a.084.084 0 0 1 .118 0l2.916 2.886a6.364 6.364 0 0 0 .52.463.628.628 0 0 0 .384.131.573.573 0 0 0 .456-.19.768.768 0 0 0 .165-.522V5.45a2.2 2.2 0 0 0-2.2-2.2Z"/></svg>'))),l().createElement("span",null,e," "),l().createElement("a",{href:a,className:"rs-notificationbanner-link more","data-evar1":r},t)),Yh=e=>{const{message:t,isUndo:a,isUndoDisabled:r,undoButtonLabel:n,processingAriaLabel:s,undoButtonAriaLabel:o,undoButtonAttrs:i}=e;if("object"==typeof t){return{SAVED_ITEMS:l().createElement(qh,{text:t.text,redirectText:t.redirectText,redirectLink:t.savedItemsRedirect,linkEvar1:t.linkEvar1})}[t.type]||l().createElement(Wh,{text:t.text})}return l().createElement("span",{className:"rs-notificationbanner-ackmessage"},l().createElement("span",Ya(t)),a&&l().createElement("button",ur({},i,{"data-autom":"bag-item-remove-undo",disabled:r,className:"as-buttonlink",type:"button"}),l().createElement("span",{"aria-hidden":"true"},n),r?l().createElement("span",{className:"visuallyhidden"},s):l().createElement("span",{className:"visuallyhidden"},o)))},zh=e=>{const{isShown:t,stopTimer:a,startTimer:r,messages:n,isLoaded:s,closeButtonAttrs:o,closeNotificationAriaLabel:i,isUndo:c,isClose:d,isUndoDisabled:m,undoButtonLabel:u,processingAriaLabel:p,undoButtonAriaLabel:g,undoButtonAttrs:y}=e;return l().createElement(fg,{className:"rs-notificationbanner"},l().createElement(Wr,{in:t,id:"rs-notificationbanner-animation"},l().createElement("div",{className:"rs-notificationbanner-content","aria-live":"polite",role:"status",onMouseOver:a,onMouseOut:r,onFocus:a,onBlur:r},s&&l().createElement("div",{className:"rs-notificationbanner-message as-l-container"},l().createElement("p",{className:"rs-notificationbanner-row"},n&&n.map((e=>l().createElement(Yh,{key:"object"==typeof e?e.text:e,message:e,isUndo:c,isUndoDisabled:m,undoButtonLabel:u,processingAriaLabel:p,undoButtonAriaLabel:g,undoButtonAttrs:y})))),d&&l().createElement("button",ur({},o,{className:"icon icon-reset rs-notificationbanner-close",type:"button","data-autom":"notification-banner-close-button"}),l().createElement("span",{className:"visuallyhidden"},i))))))},Xh=({modKey:e,showBindName:t,closeBindName:a,undoBindName:r,headerRef:n})=>{const{assets:o}=z(),[i,c]=(0,s.useState)(null),[d,m]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1),{data:g,properties:y}=Ra(e),h=Ha(e,t),E=r?g.undoMessages:g.ackMessages,v=r?g.undoDelayClose:g.ackDelayClose,b=()=>{const e=y.isLoadingSubmit;if(v&&!e){m(!0),window.clearTimeout(i);const e=window.setTimeout((()=>{c(null),m(!1),h.binding.setProperty("visible",!1)}),v);c(e)}},f=()=>{m(!1),n.current&&n.current.focus()};(0,s.useEffect)((()=>{E&&(i||(b(),m(!0)),p(!0))}),[E]),(0,s.useEffect)((()=>{u&&v&&setTimeout((()=>{p(!1)}),v+3e3)}),[u]);const w=ja(e,a),N=ja(e,r),S={...w.props,onClick:e=>{w.props.onClick(e),f()}},C={...N.props,onClick:e=>{N.props.onClick(e),f()}};return l().createElement(zh,{messages:E,isShown:d,isLoaded:u,stopTimer:()=>{window.clearTimeout(i),c(null)},startTimer:b,handleClose:f,closeButtonAttrs:S,closeNotificationAriaLabel:o.closeNotification,isUndo:Boolean(r),isClose:K().get(w,"binding.bindExists",!1),isUndoDisabled:y.isLoadingSubmit,undoButtonLabel:o.undo,processingAriaLabel:o.processing,undoButtonAriaLabel:o.undo,undoButtonAttrs:C})},Jh=({rootTag:e="ul",index:t,defaultIndex:a=[],handleChange:r=(()=>{}),isExclusive:n=!1,id:o,children:i,...d})=>{const m=l().useId(),u=o||m,p=l().Children.count(i),{current:g}=(0,s.useRef)(void 0!==t),[y,h]=(0,s.useState)(a),[E,v]=(0,s.useState)(null);return l().createElement(e,ur({"data-core-accordion":"",id:u},d),l().Children.map(i,((e,a)=>e?l().cloneElement(e,{...e.props,isSelected:g?t&&t.includes(a):y.includes(a),focusedIndex:E,onHandleClick:e=>(e=>{let a=[];const s=g?t||[]:y;a=n?s.includes(e)?[]:[e]:s.includes(e)?s.filter((t=>t!==e)):[...s,e],g||h(a),r(a)})(e),onHandleKeyDown:(e,t)=>((e,t,a,r)=>{let n;const s=a-1;switch(e.keyCode){case c.ArrowDown:return e.preventDefault(),n=t<s?t+1:0,r(n);case c.ArrowUp:return e.preventDefault(),n=t>0?t-1:s,r(n);default:return!1}})(e,t,p,v),id:u,index:a}):null)))},Zh=(0,s.forwardRef)((({rootTag:e="li",titleWrapperTag:t=l().Fragment,titleWrapperAttrs:a={},title:r,titleAttrs:n={},contentAttrs:o={},id:i,index:c,isSelected:d,onHandleClick:m=(()=>{}),onHandleKeyDown:u=(()=>{}),focusedIndex:p,children:g,mountOnEnter:y,unmountOnExit:h,...E},v)=>{const b=`title-${i}-${c}`,f=`content-${i}-${c}`,w=(0,s.useRef)(null);(0,s.useEffect)((()=>{c===p&&w.current&&w.current.focus()}),[c,p]);const{onClick:N,...S}=n;return l().createElement(e,ur({ref:v,"data-core-accordion-item":"","data-core-accordion-item-expanded":d?"":void 0},E),l().createElement(t,a,l().createElement("button",ur({type:"button","data-core-accordion-button":"","data-core-accordion-button-expanded":d?"":void 0,onClick:e=>{return t=e,m(c),void(N&&N(t));var t},onKeyDown:e=>u(e,c),"aria-expanded":d,"aria-controls":f,id:b,ref:w},S),r)),l().createElement(Yr,{in:d,mountOnEnter:y,unmountOnExit:h},l().createElement("div",ur({"data-core-accordion-content":"","aria-hidden":!d||void 0,id:f},o),g)))}));Zh.displayName="AccordionItem";const Qh=Zh,eE="15 1.13 8.5 7.72 2 1.13",tE="15.85 4.42 8.5 4.42 1.15 4.42",aE="15 7.72 8.5 1.13 2 7.72",rE=({toggleState:e})=>{const t=(0,s.useRef)(null),a=(0,s.useRef)(null),[r,n]=(0,s.useState)(e);return(0,s.useEffect)((()=>{r&&(e?t.current.beginElement():a.current.beginElement()),n(!0)}),[e]),l().createElement("span",{className:"rc-accordion-chevrondown rc-accordion-collapse-icon"},l().createElement("svg",{className:"accordion-icon-svg",viewBox:"0 0 17 8.85",height:"35px",width:"35px"},l().createElement("polyline",{"data-accordion-icon-shape":"",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",fillRule:"evenodd",points:eE},l().createElement("animate",{ref:t,"data-accordion-animate":"expand",attributeName:"points",values:`${eE}; ${tE}; ${aE}`,dur:"320ms",begin:"indefinite",fill:"freeze",keyTimes:"0; 0.5; 1",calcMode:"spline",keySplines:"0.12, 0, 0.38, 0; 0.2, 1, 0.68, 1"}),l().createElement("animate",{ref:a,"data-accordion-animate":"collapse",attributeName:"points",values:`${aE}; ${tE}; ${eE}`,dur:"320ms",begin:"indefinite",fill:"freeze",keyTimes:"0; 0.5; 1",calcMode:"spline",keySplines:"0.2, 0, 0.68, 0; 0.2, 1, 0.68, 1"}))))},nE=({title:e,classes:t={root:"",button:"",icon:""},noPadding:a,className:r,children:n,withPlus:s,withChevron:o=!0,iconAttrs:i,firstItem:c,numbered:d,isSelected:m,titleAttrs:u,...p})=>l().createElement(Qh,ur({className:qa()(r,t.root,{"rc-accordion-item":!c}),title:l().createElement(l().Fragment,null,l().createElement("span",{className:qa()({[`icon icon-${p.index+1}circle rc-accordion-numbered`]:d},nd.CALLOUT)}),l().createElement("span",ur({className:qa()("rc-accordion-title large-10",nd.CALLOUT)},Ya(e))),l().createElement("span",ur({className:qa()("icon","rc-accordion-collapse-icon",{"icon-plus rc-accordion-plusicon":s},t.icon)},i)),!s&&o&&l().createElement(rE,{toggleState:m})),titleAttrs:{className:qa()("rc-accordion-button",t.button),...u},isSelected:m},p),l().createElement("div",{className:qa()("rc-accordion-content","large-10",{"rc-accordion-content-nopadding":a,"rc-accordion-content-numbered":d})},n)),sE=({compact:e,centered:t,hideClose:a,classes:r={root:""},className:n,...s})=>l().createElement(Jh,ur({className:qa()("rc-accordion",n,r.root,{"rc-accordion-compact":e,"rc-accordion-centered":t,"rc-accordion-hideclose":a})},s)),lE=({isToolbarLoadingSubmit:e,toolbarSuccessMessage:t,isToolbarExpanded:a,rccToolbarCustomerId:r,rccToolbarAgentName:n,showToolbarOptions:o,isSavedCart:i,isThankYouToolBar:c,isCheckoutToolBar:d,commentsFieldProps:m,notificationBanner:u,rccHeaderLinks:p,productQuickLinks:g,rccOptions:y,dealCloserOverlay:h})=>{const{assets:E,viewport:v}=z(),b="small"===v,[f,w]=(0,s.useState)([]),[N,S]=(0,s.useState)(a||!1),C=!i&&!d&&!c,T=0===f.length?E.showProductLinks:E.hideProductLinks,L=N?E.hideToolbar:E.viewToolbar,k=l().createElement("button",{type:"button",className:qa()("as-buttonlink icon icon-after rs-rcctoolbar-button",{row:b},{"icon-chevronup rs-rcctoolbar-hidetoolbar":N},{"icon-chevrondown rs-rcctoolbar-viewtoolbar":!N}),onClick:()=>{S(!N)}},L);return l().createElement("div",{className:"rs-rcctoolbar-container","data-trigger-context":!0,"aria-label":E.rccDashBoardA11y,role:"region"},l().createElement(wr,{isPending:e,messages:{pending:E.processing,finished:t}}),u,l().createElement("div",{className:"rs-rcctoolbar-header as-l-container"},l().createElement("div",{className:"row rs-rcctoolbar-header-info"},l().createElement("div",{className:"rs-rcctoolbar-appleid",tabIndex:"-1"},r),l().createElement("div",{className:"rs-rcctoolbar-headerright"},l().createElement("div",{className:"rs-rcctoolbar-agent-name"},n),!b&&k)),b&&k,l().createElement(Yr,{in:N},p,o&&l().createElement("div",{className:"rs-rcctoolbar-options row"},l().createElement("div",{className:"column large-6 small-12"},y,h),l().createElement("div",{className:"rs-rcctoolbar-comments column large-6 small-12"},l().createElement(Vi,ur({},m,{className:"rs-form-textbox-textarea"})))),C&&g&&l().createElement("div",{className:"as-l-container"},l().createElement("div",{className:"rs-rcctoolbar-productlinks"},l().createElement(sE,{index:f,handleChange:w,id:"rs-rcctoolbar-productlinks",compact:!0,onClick:()=>{wl({action:T,feature:"Agent",eVar:fl})}},l().createElement(nE,{title:T,withPlus:!1,withChevron:!0,role:"listitem",iconAttrs:{"aria-hidden":"true"},classes:{root:"rs-rcctoolbar-accordionitem"}},l().createElement("div",ur({className:"row rs-rcctoolbar-drawer"},Ya(g))))))))))},oE=({id:e,messages:t,messageLastUpdated:a,isEmailOverlayVisible:r,setEmailOverlayVisible:n,emailBagButtonProps:s,messageFieldProps:o,sendButtonProps:i,toEmailFieldProps:c,email2FieldProps:d,email3FieldProps:m,email4FieldProps:u,email5FieldProps:p})=>{const{assets:g}=z();return l().createElement("div",{className:"rs-rcctoolbar-emailoverlay-editbag rs-rcctoolbar-link"},l().createElement("button",ur({},s,{type:"button",className:"as-buttonlink"}),g.emailBag),l().createElement(is,{visible:r,doublePadding:!0,onClose:()=>n(!1),ariaLabel:`${e}-overlayHeading`,fixedWidth:!0},l().createElement("div",{className:"rs-rcctoolbar-emailoverlay"},l().createElement("h2",{className:"rs-rcctoolbar-emailoverlay-header",id:`${e}-overlayHeading`},g.shareViaEmailLabel),l().createElement(Qs,{messages:t,lastUpdated:a}),l().createElement("div",{className:"rs-rcctoolbar-emailoverlay-section"},l().createElement("div",{className:"rs-rcctoolbar-overlay-subsection"},l().createElement("p",{className:"rs-rcctoolbar-emailoverlay-label"},g.primaryRecipient),l().createElement(ri,c)),l().createElement("div",{className:"rs-rcctoolbar-emailoverlay-subsection"},l().createElement("p",{className:"rs-rcctoolbar-emailoverlay-label"},g.additionalRecipients),l().createElement(ri,d,l().createElement("span",{className:"visuallyhidden"},`${g.additionalRecipientA11y} 1`)),l().createElement(ri,m,l().createElement("span",{className:"visuallyhidden"},`${g.additionalRecipientA11y} 2`)),l().createElement(ri,u,l().createElement("span",{className:"visuallyhidden"},`${g.additionalRecipientA11y} 3`)),l().createElement(ri,p,l().createElement("span",{className:"visuallyhidden"},`${g.additionalRecipientA11y} 4`))),l().createElement("div",{className:"rs-rcctoolbar-overlay-subsection"},l().createElement("div",{className:"rs-rcctoolbar-overlay-message",htmlFor:"emailCartMessageId"},g.messageOptionalLabel),l().createElement(Vi,o))),l().createElement("div",{className:"rs-rcctoolbar-emailoverlay-buttoncontainer"},l().createElement(ds,i,g.sendEmailLabel),l().createElement("div",{className:"rs-rcctoolbar-emailoverlay-cancel"},l().createElement("button",{className:"as-buttonlink",type:"button",onClick:()=>n(!1)},g.cancel))))))},iE=({modKey:e})=>{const{assets:t}=z(),[a,r]=(0,s.useState)(!1),n=`${e}.toolbarHeader.emailCart`,{properties:o}=Ra(n),[i,c]=Ba(n,"isEmailSent"),[d,m]=_a(n);(0,s.useEffect)((()=>{i&&(r(!1),c(!1))}),[i]);const u={...nr(n,"message").props,className:"rs-rcctoolbar-emailoverlay-textarea",id:"emailCartMessageId","aria-label":t.emailOverlayMessageA11y,label:"Enter Message"},p=ja(`${e}.toolbarHeader`,"emailBag"),g={...p.props,onClick:e=>{r(!0),wl({action:"EmailBag",feature:"Agent",eVar:fl}),p.props.onClick(e)}},y={...ja(n,"send").props,disabled:o.isLoadingSubmit,isLoading:o.isLoadingSubmit},h={...nr(n,"toEmails").props,label:t.emailAddressLabel},E={...nr(n,"email2").props,label:t.emailAddressOptional},v={...nr(n,"email3").props,label:t.emailAddressOptional},b={...nr(n,"email4").props,label:t.emailAddressOptional},f={...nr(n,"email5").props,label:t.emailAddressOptional};return l().createElement(oE,{id:n,messages:d,messagesLastUpdated:m,isEmailOverlayVisible:a,setEmailOverlayVisible:r,emailBagButtonProps:g,messageFieldProps:u,sendButtonProps:y,toEmailFieldProps:h,email2FieldProps:E,email3FieldProps:v,email4FieldProps:b,email5FieldProps:f})},cE=l().memo(iE),dE=({showOverlay:e,setShowOverlay:t,returnToBagLink:a,hasBundle:r})=>{const{assets:n}=z();return l().createElement(is,{visible:e,onClose:()=>{wl({feature:"bag",eVar:fl,action:"close"}),t(!1)},doublePadding:!0,fixedWidth:!0,ariaLabel:"rs-leaving-securecheckout-header"},l().createElement("section",{className:"rs-leavingsecurecheckout-overlay"},l().createElement("h2",{id:"rs-leaving-securecheckout-header",className:"typography-headline-reduced"},n.leavingSecureCheckout),!r&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-leavingsecurecheckout-message"},n.secureCheckoutMessage),l().createElement("div",{className:"rs-leavingsecurecheckout-action"},Boolean(a)&&l().createElement("a",{href:a,className:"button rs-leavingsecurecheckout-button","data-prop37":'D=pageName+"|bag|leave secure checkout"',"data-autom":"leaveSecureCheckoutButton"},l().createElement("span",null,n.leaveSecureCheckoutCTA)),l().createElement("div",{className:"rs-leavingsecurecheckout-link"},l().createElement("button",{type:"button",className:"as-buttonlink","data-autom":"stay-and-continue-link",onClick:()=>{Ll(),t(!1)}},n.stayInCheckoutCTA)))),r&&l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-leavingsecurecheckout-message"},n.bundleSecureCheckoutMessage),l().createElement("div",{className:"rs-leavingsecurecheckout-action"},l().createElement("button",{type:"button",className:"button rs-leavingsecurecheckout-button","data-autom":"stay-and-continue-link",onClick:()=>{Ll(),t(!1)}},n.stayInCheckoutCTA),Boolean(a)&&l().createElement("div",{className:"rs-leavingsecurecheckout-link"},l().createElement("a",{href:a,"data-prop37":'D=pageName+"|bag|leave secure checkout"',"data-autom":"leaveSecureCheckoutButton"},l().createElement("span",null,n.leaveSecureCheckoutCTA)))))))},mE=({isSavedCart:e,isBagToolBar:t,isThankYouToolBar:a,isCheckoutToolBar:r,emailOverlayWithButton:n,hasInstallmentsFinancing:o,clearCustomerLink:i,findCustomerLink:c,clearBagLink:d,saveBagLink:m,editBagLink:u,copyToClipBoardLink:p,copyCartLinkProps:g,returnToBagLink:y})=>{const{assets:h}=z(),[E,v]=(0,s.useState)(!1);return l().createElement(l().Fragment,null,t&&!a&&l().createElement("div",{className:"row rs-rcctoolbar-header-links"},l().createElement("div",{className:"rs-rcctoolbar-content-left large-6 small-12"},!e&&i,c,d,m,u),l().createElement("div",{className:"rs-rcctoolbar-content-right large-5 small-12"},n,p,l().createElement(ds,g,o?h.copyAcmiBagToClipBoard:h.copyToClipBoard))),r&&!a&&l().createElement("div",{className:"row rs-rcctoolbar-header-links"},l().createElement(dE,{showOverlay:E,setShowOverlay:v,returnToBagLink:y}),l().createElement("button",{type:"button",id:"returnToBagOverlaySelector",className:"as-buttonlink",onClick:()=>{wl({part:"Checkout",action:"ReturnToBag",feature:"Agent",eVar:fl}),v(!0)}},h.returnToBag)))},uE=({buttonProps:e,linkLabel:t})=>l().createElement("div",{className:"rs-rcctoolbar-link rs-load-fadein"},l().createElement("button",ur({type:"button"},e),t)),pE=({modKey:e,bindKey:t,linkLabel:a,setToolbarSuccessMessage:r})=>{const{assets:n}=z(),s=ja(`${e}.toolbarHeader`,t),o=s.binding.bindExists,i={...s.props,className:"as-buttonlink",onClick:e=>{switch(e.target.id){case"cart-toolbar-header-clearCustomer":r(n.clearCustomerA11y);break;case"cart-toolbar-header-savedBag":r(n.bagSavedA11y);break;case"cart-toolbar-header-copyToClipBoard":r(n.copyToClipBoardA11y);break;case"cart-toolbar-header-clearEntireBag":r(n.clearBagA11y);break;default:r("")}s.props.onClick(e)}};return o&&l().createElement(uE,{buttonProps:i,linkLabel:a})},gE=l().memo(pE),yE=({modKey:e,isBagToolBar:t,isCheckoutToolBar:a,isThankYouToolBar:r,setToolbarSuccessMessage:n,setFlagNotificationBanner:o})=>{const{assets:i}=z(),[c]=Ma(fs),d=c.savedCart,{data:m}=Ra(`${e}.toolbarHeader`),u=!!m.cartLink,[p]=Ba(Is,"buyFlowInstallmentsFinancing"),g={hasDefaultClass:!1,className:"as-buttonlink rs-load-fadein",disabled:!m.cartLink,onClick:()=>{if(wl({action:"CopySharedBagLink",feature:"Agent",eVar:fl}),m.cartLink){const e=document.createElement("textarea");document.body.appendChild(e),e.textContent=m.cartLink,e.select(),document.execCommand("Copy"),document.body.removeChild(e),o(!0)}}};return(0,s.useEffect)((()=>{if(m.cartLink){const e=m.cartLink.match(/<SHAREDITEMSID>(.+)<\/SHAREDITEMSID>/)[1];Yl(e,"SHARED_BAG_ID")}}),[m.cartLink]),l().createElement(mE,{isSavedCart:d,isBagToolBar:t,isThankYouToolBar:r,isCheckoutToolBar:a,emailOverlayWithButton:l().createElement(cE,{modKey:e}),hasInstallmentsFinancing:p,clearCustomerLink:t&&!r&&!d&&l().createElement(gE,{modKey:e,bindKey:"clearCustomer",linkLabel:i.clearCustomer,setToolbarSuccessMessage:n}),findCustomerLink:t&&!r&&l().createElement(gE,{modKey:e,bindKey:"findCustomer",linkLabel:i.findCustomer,setToolbarSuccessMessage:n}),clearBagLink:t&&!r&&l().createElement(gE,{modKey:e,bindKey:"clearBag",linkLabel:i.clearBag,setToolbarSuccessMessage:n}),saveBagLink:t&&!r&&l().createElement(gE,{modKey:e,bindKey:"saveBag",linkLabel:i.saveBag,setToolbarSuccessMessage:n}),editBagLink:t&&!r&&l().createElement(gE,{modKey:e,bindKey:"editBag",linkLabel:i.editBag,setToolbarSuccessMessage:n}),copyToClipBoardLink:t&&!r&&l().createElement(gE,{modKey:e,bindKey:"copyToClipBoard",linkLabel:p?i.createAcmiSharedBagLabel:i.createSharedBagLabel,setToolbarSuccessMessage:n,disabled:!u}),copyCartLinkProps:g,returnToBagLink:m.returnToBag})},hE=l().memo(yE),EE=({addToCartModExists:e,isAddToCartLoadingSubmit:t,addToCartFieldProps:a,addToCartButtonProps:r,otherProductsLink:n,holdCodeOptions:s})=>{const{assets:o}=z();return l().createElement(l().Fragment,null,e&&l().createElement("div",{className:"row rs-rcctoolbar-addtocart-otherproducts-wrapper"},l().createElement(wr,{isPending:t,messages:{pending:o.processing,finished:o.itemAddedSucessAlly}}),l().createElement(ri,a,t?l().createElement("div",{role:"img",className:"rs-rcctoolbar-loading waitindicator waitindicator16-gray","aria-label":o.processing}):l().createElement(si,r,o.addToBagLabel)),n&&l().createElement("div",{className:"rs-rcctoolbar-otherproducts column"},l().createElement("a",{href:n,target:"_blank",className:"icon-wrapper",onClick:()=>{wl({action:"OtherProducts",feature:"Agent",eVar:fl})}},l().createElement("span",{className:"icon-copy"},o.otherProducts,l().createElement("span",{className:"visuallyhidden"},o.newWindowAlly)),l().createElement("span",{className:"more","aria-hidden":"true"})))),s)},vE=({holdCodeDropDownProps:e,defaultSelectLabel:t,holdCodeOptions:a})=>l().createElement("div",{className:"rs-rcctoolbar-hold-code large-10"},l().createElement("div",{className:"form-dropdown"},l().createElement(yo,e,l().createElement(Eo,{disabled:!0},t),a.map((e=>l().createElement(Eo,{key:`product-${e.label}`,value:e.value},e.label)))))),bE=({modKey:e})=>{const{assets:t}=z(),[a]=Ma(`${e}.toolbarOptions`),{holdCodeOptions:r}=a,n={...lr(`${e}.toolbarOptions`,"holdCode").props,label:t.holdCodeLabel};return l().createElement(vE,{holdCodeDropDownProps:n,defaultSelectLabel:t.selectOne,holdCodeOptions:r})},fE=l().memo(bE),wE=({modKey:e})=>{const{assets:t}=z(),{data:a}=Ra(`${e}.toolbarOptions`),{modExists:r,properties:n}=Ra(`${e}.toolbarOptions.addToCart`),s=nr(`${e}.toolbarOptions.addToCart`,"product"),o={...s.props,label:t.partNumber,classes:{root:"column rs-rcctoolbar-partnumber",input:"rs-rcctoolbar-partnumber-input"},"data-trigger-return":"click .form-textbox-button","data-trigger-esc":"click .form-textbox-sidebutton"},i={...ja(n.key,"add-to-cart-button").props,className:"form-textbox-button",disabled:!s.binding.value};return l().createElement(EE,{addToCartModExists:r,isAddToCartLoadingSubmit:n.isLoadingSubmit,addToCartFieldProps:o,addToCartButtonProps:i,otherProductsLink:a.otherProductsLink,holdCodeOptions:Boolean(a.holdCodeOptions)&&l().createElement(fE,{modKey:e})})},NE=l().memo(wE),SE=({priceOptionLabel:e,priceOptionRadioFieldEnabled:t,priceOptionRadioFieldProps:a,products:r=[]})=>{const{assets:n}=z(),s=Boolean(r.length);return l().createElement(l().Fragment,null,l().createElement(Od,a,l().createElement("span",{className:"row"},l().createElement("span",{className:"form-selector-left-col column large-6"},l().createElement("span",{className:"form-selector-title"},e)),!t&&l().createElement("span",{className:"form-selector-right-col column large-6"},n.orderUnavailable))),s&&l().createElement("ul",{className:"rs-dealcloseroverlay-productinfo"},r))},CE="order_level",TE="price_match",LE=({isActive:e,priceOptionValue:t,title:a,originalPrice:r,discount:n,maxPriceMatchDiscount:s,discountOptions:o,productDiscountDropdownProps:i,productDiscountTextFieldProps:c})=>{const{assets:d}=z();return l().createElement(Yr,{in:e},l().createElement("li",null,l().createElement("div",{className:"rs-dealcloseroverlay-innersection"},t!==CE&&l().createElement("p",{className:"rs-dealcloseroverlay-productname"},l().createElement("span",null,a)),l().createElement("div",{className:"rs-dealcloseroverlay-options"},l().createElement("div",{className:"large-7"},l().createElement("p",{className:"rs-dealcloseroverlay-columnheader"},"order_level"===t?d.originalOrderTotalHeader:d.originalPriceHeader),l().createElement("p",{className:"rs-dealcloseroverlay-columncontent"},r)),l().createElement("div",{className:"rs-dealcloseroverlay-dropdown"},l().createElement("div",{className:"rs-dealcloseroverlay-discountlabel"},n,o?l().createElement(yo,i,o.map(((e,t)=>l().createElement(Eo,{key:`discount-${e}`,value:0===t?-1:t},e)))):l().createElement(ri,c)),t===TE&&l().createElement("div",{className:"rs-dealcloseroverlay-maxdiscount"},`${d.maxDiscountAmount} ${s}`))))))},kE=({isActive:e,modKey:t,priceOptionValue:a})=>{const{assets:r}=z(),[n]=Ma(t),s={...lr(t,"selectedDealCloserIndex").props,label:r.discountLabel},o={...nr(t,"deal-discount").props,label:r.discountLabel};return l().createElement(LE,{isActive:e,priceOptionValue:a,title:n.title,originalPrice:n.originalPrice,discount:n.discount,discountOptions:n.discountOptions,maxPriceMatchDiscount:n.maxPriceMatchDiscount,productDiscountDropdownProps:s,productDiscountTextFieldProps:o})},IE=l().memo(kE),AE=({modKey:e,priceOptionValue:t,priceOptionLabel:a})=>{const[r,n]=Ba(`${e}.toolbarOptions.dealCloserPriceAdjustment`,"priceAdjustmentTab"),{childModKeys:s}=Ra(`${e}.toolbarOptions.dealCloserPriceAdjustment.${t}`),o=sr(`${e}.toolbarOptions.dealCloserPriceAdjustment`,`show-${t}`),i={...o.props,key:o.binding.properties.key,value:t,checked:r===t,disabled:!o.binding.properties.enabled,onChange:e=>{n(e.target.value),o.binding.runClickEvents()}},c=s.map((e=>l().createElement(IE,{key:`product-list-item-${e}`,isActive:r===t,modKey:e,priceOptionValue:t})));return l().createElement(SE,{priceOptionLabel:a,priceOptionRadioFieldEnabled:o.binding.properties.enabled,priceOptionRadioFieldProps:i,products:c})},PE=l().memo(AE),DE=({id:e,overlayProps:t,cancelOverlay:a,priceAdjustmentLabel:r,isToolbarOptionsLoadingSubmit:n,pricingSections:s,priceAdjustmentButtonProps:o,savePriceAdjustmentButtonProps:i,removePriceAdjustmentButtonProps:c,isRemoving:d})=>{const{assets:m}=z(),{priceAdjustmentLabel:u}=m,p=Boolean(r),g=qa()("as-buttonlink column",{"rs-dealcloseroverlay-change":p}),y=qa()("row",{"rs-dealcloseroverlay-label":p}),h=qa()("large-6",{"small-12":!p}),E=qa()("rs-dealcloseroverlay",{"rs-apply-price-adjustment":!p});return l().createElement("div",{className:E},p&&l().createElement("div",{className:"rs-dealcloseroverlay-label-header"},`${u}:`),l().createElement("div",{className:y},p&&l().createElement("div",{className:"large-6"},r),l().createElement("div",{className:h},l().createElement("div",{className:"row rs-dealcloseroverlay-buttons"},l().createElement(wr,{isPending:n,messages:{pending:m.processing,finished:""}}),l().createElement("button",ur({},o,{type:"button",className:g}),p?l().createElement(l().Fragment,null,m.changeLabel,l().createElement("span",{className:"visuallyhidden"},u)):m.applyPriceAdjustments),l().createElement(is,ur({},t,{className:"rs-dealcloser-overlay",ariaLabel:`${e}-overlayHeading`,fixedWidth:!0,noPadding:!0,footerContent:l().createElement("div",{className:"rs-dealcloseroverlay-buttoncontainer"},l().createElement("div",{className:"rs-dealcloseroverlay-save"},l().createElement(ds,i,m.save),l().createElement(wr,{isPending:i.isLoading,messages:{pending:m.processing,finished:m.itemAddedSucessAlly}})),l().createElement("div",{className:"rs-dealcloseroverlay-cancel"},l().createElement("button",{type:"button",className:"as-buttonlink",onClick:a},m.cancel)))}),l().createElement("div",{className:"rs-dealcloseroverlay-content"},l().createElement("h2",{id:`${e}-overlayHeading`,className:"rs-dealcloseroverlay-header"},m.priceAdjustmentLabel),l().createElement("div",{className:"rs-dealcloseroverlay-section"},l().createElement("fieldset",{className:"form-selector-group"},l().createElement("legend",{className:"rs-dealcloseroverlay-subheader"},m.dealCloserSubHeader),s)))),p&&l().createElement(l().Fragment,null,l().createElement("button",ur({},c,{type:"button",className:"as-buttonlink"}),d?l().createElement("span",{className:"waitindicator waitindicator-inline waitindicator16-gray column rs-dealcloseroverlay-loading"}):m.remove,l().createElement("span",{className:"visuallyhidden"},m.priceAdjustmentLabel)),l().createElement(wr,{isPending:c.isLoading,messages:{pending:m.processing,finished:m.removedPriceAdjustmentA11y}}))))))},OE=({modKey:e})=>{const t=`${e}.toolbarOptions.dealCloserPriceAdjustment`,[a,r]=cr(t),{data:n,properties:s}=Ra(`${e}.toolbarOptions`),{priceAdjustmentLabel:o}=n,{data:i,properties:c}=Ra(`${e}.toolbarOptions.dealCloserPriceAdjustment`),{priceOptionsAcc:d=[]}=i,m={...ja(`${e}.toolbarOptions`,"priceAdjustment").props,disabled:!n.enablePriceAdjustment,id:"rccApplyPriceAdjustmentsSelector"},u=ja(`${e}.toolbarOptions`,"removePriceAdjustment"),p={...ja(`${e}.toolbarOptions.dealCloserPriceAdjustment`,"save").props,isLoading:c.isLoadingSubmit},g=d.map((t=>l().createElement(PE,{key:t,modKey:e,priceOptionValue:t.value,priceOptionLabel:t.label})));return l().createElement(DE,{id:c.key,overlayProps:a,cancelOverlay:r,priceAdjustmentLabel:o,isToolbarOptionsLoadingSubmit:s.isLoadingSubmit,pricingSections:g,priceAdjustmentButtonProps:m,savePriceAdjustmentButtonProps:p,removePriceAdjustmentButtonProps:u.props,isRemoving:u.binding.properties.isLoadingSubmit})},xE=l().memo(OE),RE=({modKey:e,isBagToolBar:t=!1,isCheckoutToolBar:a=!1,isThankYouToolBar:r=!1})=>{const n=l().useRef(null),{assets:o}=z(),{customerAppleId:i,notSignedIn:c,specialistLabel:d,noSpecialist:m,comments:u}=o,[p]=Ma(fs),g=p.savedCart,{properties:y}=Ra(e),[h]=Ma(`${e}.toolbarHeader`),[E]=Ma(`${e}.toolbarOptions`),v=h.toolbarExpanded,b=Boolean(Object.keys(E).length),[f,w]=(0,s.useState)(""),[N,S]=(0,s.useState)(!1),C=`${i} ${h.customerId||c}`,T=`${d} ${h.agentName||m}`,L=Ua(),k=nr(`${e}.toolbarOptions`,"comments"),I={...k.props,label:u,onBlur:t=>{k.props.onBlur(t),L({type:Ee,modKey:`${e}.toolbarOptions`,bindName:"comments"})}},A=b&&!g&&!r;return l().createElement(lE,{modKey:e,isToolbarLoadingSubmit:y.isLoadingSubmit,toolbarSuccessMessage:f,flagNotificationBanner:N,headerRef:n,isToolbarExpanded:v,rccToolbarCustomerId:C,rccToolbarAgentName:T,showToolbarOptions:A,isSavedCart:g,isThankYouToolBar:r,isCheckoutToolBar:a,commentsFieldProps:I,notificationBanner:N&&l().createElement(Xh,{modKey:`${e}.toolbarHeader`,key:"ack-message",headerRef:n,showBindName:"ackBanner",closeBindName:"ack"}),rccHeaderLinks:l().createElement(hE,{modKey:e,isBagToolBar:t,isCheckoutToolBar:a,isThankYouToolBar:r,setToolbarSuccessMessage:w,setFlagNotificationBanner:S}),productQuickLinks:h.productQuickLinks,rccOptions:A&&l().createElement(NE,{modKey:e}),dealCloserOverlay:A&&l().createElement(xE,{modKey:e})})},FE=l().memo(RE),ME=({carrierFinancedInfo:e})=>l().createElement("div",{className:"rs-carrier-billedseparately"},l().createElement("div",ur({className:"row rs-carrier-financed-info"},Ya(e)))),BE=({modKey:e})=>{const[t]=Ba(e,"itemsBilledSeparately"),{assets:{carrierFinancedItemHeader:a},fragments:{carrierFinancedIphoneBilling:r}}=z(),{carrierFinancedItemHeader:n}=t,s=dn(r,{carrierFinancedItemHeader:n||a});return l().createElement(ME,{carrierFinancedInfo:s})},_E=l().memo(BE),$E=(e,t)=>Object.keys(t).every((a=>e.dimensions[a]===t[a])),UE=(e,t)=>{if(!t||!(e&&e.length>0))return null;return e.find((e=>$E(e,t)))||null},KE=(e,t)=>t&&e&&e.length>0?e.filter((e=>$E(e,t))):[],VE=(e,t)=>{if(!e)return!1;return Object.keys(e).every((a=>!!t.find((t=>t.key===a&&t.options?t.options.find((t=>t.value===e[a])):null))))},HE=(e,t)=>{const a=t.reduce(((e,t)=>(t.dependsOn&&t.dependsOn.length&&t.dependsOn.some((t=>e.includes(t)))&&e.push(t.key),e)),[e]);return K().uniq(a).filter((t=>t!==e))},jE=(e,t)=>{if(0===e.length)return{};const a=(t?KE(e,t):e).map((e=>e.dimensions));return a.reduce(((e,t)=>(Object.keys(t).forEach((a=>{e[a]!==t[a]&&delete e[a]})),e)),{...a[0]})},GE=(e,t,a,r)=>{const n=KE(a,t);if(1===n.length)return{part:n[0].part,selection:n[0].dimensions};if(n.length>1)return r?{part:n[0].part,selection:n[0].dimensions}:{part:null,selection:t};const s=((e,t)=>t.map((e=>e.key)).filter((t=>e.hasOwnProperty(t))))(t,e),l=K().omit(t,s[s.length-1]);return GE(e,l,a,r)},WE=e=>0===Object.keys(e).length,qE=(e,t,a)=>{const r={};return!K().isEmpty(K().get(t,"full"))||!K().isEmpty(K().get(t,"short"))?K().forEach(t,((t,n)=>{K().isEmpty(t)||(r.pricesInOrder=r.pricesInOrder||{},r.pricesInOrder[n]=[],t.forEach((t=>{let s="";e[t]?r.pricesInOrder[n].push({key:t,value:e[t]}):"fullPrice"===t?(s=a?e.comparativeDisplayPrice:e.currentDisplayPrice||K().get(e,"currentPrice.amount",""),r.pricesInOrder[n].push({key:t,value:s})):"fullPrice-short"===t&&(s=a?e["comparativeDisplayPrice-short"]:e["currentDisplayPrice-short"]||K().get(e,"currentPrice.amount",""),r.pricesInOrder[n].push({key:t,value:s}))})))})):r.full=a?K().get(e,"comparativeDisplayPrice"):K().get(e,"currentPrice.amount"),r},YE=(e,t,a)=>{const{bootstrap:{products:r},autoSelectOneProduct:n,autoSelectSingleDimension:s}=a;if(e){const t=e&&r?r.find((t=>t.part===e)):null;return t?{part:t.part,selection:t.dimensions}:{part:null,selection:{}}}if(n&&r&&1===r.length)return{part:r[0].part,selection:r[0].dimensions};const l=s?{...jE(r,t),...t}:t;if(!K().isEmpty(l)){const e=a.bootstrap.products.find((e=>((e,t)=>{const a=Object.keys(t),r=Object.keys(e.dimensions);return a.every((a=>e.dimensions[a]===t[a]))&&r.every((a=>e.dimensions[a]===t[a]))})(e,l)));if(e)return{part:e.part,selection:l}}return{part:e,selection:l}},zE=(e,t,a)=>a.map((a=>{if(!a.options){const r=e.map((e=>e.dimensions[a.key])),n=((e,t,a)=>e.map((e=>({value:e,...K().get(a,`dimensions.${t}.${e}`,{})}))))(K().uniq(r),a.key,t);return n.sort(((e,t)=>e.sortOrder-t.sortOrder)),{...a,options:n}}return a})),XE=(e,t,a)=>t.length>0&&t.every((e=>!e.productMessage))?a:a.map((r=>(r.options&&r.options.map((n=>{let s={...e,[r.key]:n.value};s=K().omit(s,HE(r.key,a));const l=KE(t,s),o=l.length>0&&l.every((e=>e.productMessage));if(o&&a.every((e=>!e.isProductMessageDimension))&&(r.isProductMessageDimension=!0),o&&r.isProductMessageDimension){const{productMessage:e}=l[0];n.productMessage=e}return n})),r))),JE=(e,t,a)=>a.map(((r,n)=>{const s=HE(r.key,a),l=K().omit(e,s);let o=!1;const i=r.options.map((a=>{const s=e[r.key]===a.value;s&&(o=!0);let i=!1;if(s||0===n)i=!1;else{i=!UE(t,{...l,[r.key]:a.value})}return{...a,disabled:i}}));return{...r,options:i,value:e[r.key],selected:o}})),ZE=(e,t,a,r,n,s,l,o,i)=>n?i.map((n=>{const c=n.key,d=HE(c,i),{promotionsFilter:m={},promotionsFilterOverrideUseFromPrice:u=!1}=((e,t,a,r,n)=>{if(K().isEmpty(a))return{};const s=n.includes(r),l=K().has(e,r),o=s||!l&&t!==r?{...a}:{};return{promotionsFilter:o,overrideUseFromPrice:!K().isEmpty(o)}})(e,c,l,o,d),p=n.options.map((i=>{let c={...e,[n.key]:i.value};c=K().omit(c,d);let p=K().uniq(K().filter(KE(t,c),m).map((e=>e?e.productPrice:null)));p=K().sortBy(p,(e=>parseInt(K().get(a,`productPrice[${e}].currentPrice.raw_amount`,0),10)));let g=K().uniq(K().filter(KE(t,c),m).map((e=>e?e.amsProductPrice:null)));g=K().sortBy(K().compact(g),(e=>parseFloat(K().get(a,`productPrice[${e}].rawAmsPrice`,0),10)));let y={};g[0]&&(y=K().pick(K().get(a,`productPrice.${g[0]}`,{}),["amsPrice","amsPrice-short","rawAmsPrice","bundlePriceForDockedHeader"]));const h={...K().get(a,`productPrice.${p[0]}`,{}),...y};let E=!1;E=!(!K().isEmpty(l)&&0===d.indexOf(o))&&(K().isBoolean(s)?s:p.length>1||u);const v={useFromPrice:E,...qE(h,r,E)};return{...i,price:v,priceData:h}}));return{...n,options:p}})):i,QE=e=>e.map(((t,a)=>{if(a>0){const r=t.dependsOn?t.dependsOn:[e[a-1].key];return{...t,dependsOn:r}}return{...t}})),ev=e=>e.map((t=>{const{dependsOn:a}=t;if(a&&a.length>0){const r=e.find((e=>a.indexOf(e.key)>=0&&(!e.selected||e.disabled)));t.disabled=!!r}else t.disabled=!1;return t.active=!t.disabled&&!t.selected,{...t}})),tv=(e,{bootstrap:{products:t,dictionaries:a}})=>{const{selectionImages:r,productImage:n}=a;if(r){const t=(e=>{const t=e.find((e=>null===e.selection));return t?t.image:null})(r),a=((e,t)=>{const a=t.find((t=>K().isEqual(t.selection,e)));return a?a.image:null})(e,r);if(WE(e)&&t)return t;if(!WE(e)&&a)return a}return((e,t)=>{const a=e?e.productImage:null;return a&&t[a]?t[a]:null})(UE(t,e),n)},av=(e,{bootstrap:{products:t,dictionaries:a}})=>{const r=t.find((t=>t.part===e));return r?Object.keys(r).reduce(((e,t)=>{const n=r[t],s=K().get(a,`${t}.${n}`);return e[t]=s||n,e}),{}):null},rv=(e,t,a,r)=>{const{config:n}=e,{part:s,selection:l}=YE(t,a,n);if(e.init&&K().isEqual(e.part,s)&&K().isEqual(e.selection,l)&&!r)return e;const o=((e,t,{bootstrap:{products:a,dictionaries:r,priceDisplayOrder:n,leadPriceFilter:s},calculateOptionPrices:l,overrideUseFromPrice:o,promotedDimension:i})=>K().flow(K().partial(QE),K().partial(zE,a,r),K().partial(JE,t,a),K().partial(ZE,t,a,r,n,l,o,s,i),K().partial(XE,t,a),K().partial(ev))(e))(e.init?e.dimensions:K().cloneDeep(n.bootstrap.dimensions),l,n),i=e.init?e.hidePartnershipIcons:!!(c=n.bootstrap.products)&&!c.find((e=>Array.isArray(e.partnershipIcons)&&e.partnershipIcons.length>0));var c;return{...e,part:s,selection:l,dimensions:o,hidePartnershipIcons:i,selectedProduct:av(s,n),selectionImage:n.bootstrap.dictionaries?tv(l,n):null}},nv={part:null,selection:{},dimensions:[],selectedProduct:null,config:{},carrierPromoParams:{}},sv="INIT",lv="SET_DIMENSION",ov="SET_SELECTION",iv="SET_PART",cv="REPLACE_PRICES",dv="UPDATE_CARRIER_PROMO_PARAMS",mv=(e,t)=>{const{key:a,value:r,part:n,selection:s,callbacks:l}=t;let o;const i=(t,a)=>{K().isEqual(e.part,t)||l.onPartChange(t,e.part),K().isEqual(e.selection,a)||l.onSelectionChange(a,e.selection)};switch(t.type){case sv:return{...e,init:!0};case lv:return o=((e,t,a)=>{const{part:r,selection:n,dimensions:s,config:{autoSelectFirstSelection:l,bootstrap:{products:o}}}=e;if(a&&!VE({[t]:a},s))return e;const i=((e,t,a,r)=>{const n=r?{...r,[e]:t}:{[e]:t};return a?{...a.dimensions,[e]:t}:n})(t,a,o.find((e=>e.part===r)),n),c=GE(s,i,o,l);return rv(e,c.part,c.selection)})(e,a,r),i(o.part,o.selection),o;case ov:return o=((e,t)=>{const{dimensions:a,config:{bootstrap:{products:r},autoSelectFirstSelection:n}}=e;if(!VE(t,a))return e;if(WE(t))return rv(e,null,{});const s=GE(a,t,r,n);return rv(e,s.part,s.selection)})(e,s),i(o.part,o.selection),o;case dv:return o={...e,carrierPromoParams:t.payload},i(o.part,o.selection),o;case iv:return o=((e,t)=>{const{config:{bootstrap:{products:a}}}=e,r=a.find((e=>e.part===t));return r?rv(e,r.part,r.selection):e})(e,n),i(o.part,o.selection),o;case cv:return o={...e,config:{...e.config,bootstrap:{...e.config.bootstrap,dictionaries:{...e.config.bootstrap.dictionaries,productPrice:t.payload.prices},priceDisplayOrder:t.payload.priceDisplayOrder,leadPriceFilter:t.payload.leadPriceFilter}}},o=rv(o,e.part,e.selection,!0),o;default:return e}},uv=({selection:e={},part:t=null,bootstrap:a,autoSelectOneProduct:r=!1,autoSelectFirstSelection:n=!1,autoSelectSingleDimension:l=!1,calculateOptionPrices:o=!1,overrideUseFromPrice:i,promotedDimension:c="carrierModel",onSelectionChange:d=(()=>{}),onPartChange:m=(()=>{})})=>{const u=(e=>{const t=e||{};return t.dimensions||(t.dimensions=[]),t.products||(t.products=[]),t})(a),p=(0,s.useMemo)((()=>rv({...nv,part:t,selection:e,config:{bootstrap:u,autoSelectOneProduct:r,autoSelectFirstSelection:n,autoSelectSingleDimension:l,calculateOptionPrices:o,overrideUseFromPrice:i,promotedDimension:c}},t,e)),[]),[g,y]=(0,s.useReducer)(mv,p),h={onSelectionChange:d,onPartChange:m};(0,s.useEffect)((()=>{y({type:sv})}),[]);const E=Object.keys(e).reduce(((t,a)=>`${t},${a}=${e[a]}`),"");(0,s.useEffect)((()=>{g.init&&y({type:ov,selection:e,callbacks:h})}),[E]),(0,s.useEffect)((()=>{g.init&&y({type:iv,part:t,callbacks:h})}),[t]);const v=K().get(a,"products",[]),b=K().get(e,"carrierModel"),f=v.find((e=>e.carrierPolicyPart===b))||{};return(0,s.useEffect)((()=>{y({type:dv,payload:{carrierPolicyPart:f.carrierPolicyPart,familyType:f.familyType}})}),[f.carrierPolicyPart,f.familyType]),{state:g,setDimension:(e,t)=>y({type:lv,key:e,value:t,callbacks:h}),replacePrices:({prices:e,priceDisplayOrder:t,leadPriceFilter:a})=>{y({type:cv,payload:{prices:e,priceDisplayOrder:t,leadPriceFilter:a}})}}},pv=({uid:e,dimension:t,onDimensionChange:a,hidePartnershipIcons:r})=>{const n=K().get(K().find(t.options,{value:t.value}),"text","");return l().createElement(dh,{legend:`${t.legend} - ${n}`,disabled:t.disabled},t.options.map((n=>l().createElement(mh,{key:n.value,name:`${t.key}_${e}`,value:n.value,checked:n.value===t.value,handleChange:e=>a(t.key,e),disabled:n.disabled,image:n.image,isProductRed:!r&&"product_red"===n.value,text:n.text}))))},gv=({uid:e,dimension:t,onDimensionChange:a})=>l().createElement(yo,{name:`${t.key}_${e}`,label:t.label,value:t.value,onChange:e=>a(t.key,e.target.value),disabled:t.disabled,classes:{root:"rf-recommendations-productselection-dropdown"}},t.options.map((e=>l().createElement(Eo,{key:e.value,value:e.value,disabled:e.disabled},e.text)))),yv=({uid:e,dimensions:t,onDimensionChange:a,hidePartnershipIcons:r})=>t.map((t=>{const n="dropdown"===t.displayType?gv:pv;return l().createElement("div",{className:"rf-recommendations-productselection",key:t.key},l().createElement(n,{uid:e,dimension:t,onDimensionChange:a,hidePartnershipIcons:r}))})),hv=({dimensions:e,bootstrap:t,title:a})=>{const r=K().find(e,{displayType:"image"}),{moreText:n="",minimumSwatches:s=4}=t,o=r&&r.options?r.options.length-s:0;return r&&r.options?l().createElement("ul",{className:"rf-recommendations-accessory-swatchescontainer","aria-label":a+r.availableColors,role:"list"},r.options.slice(0,s).map((e=>e.image?l().createElement("li",{className:"rf-recommendations-accessory-colorimage",key:e.value},l().createElement(Fl,{data:e.image,alt:""})):"")),o>0?l().createElement("li",{className:"rf-recommendations-accessory-moretext"},dn(n,{swatches:o})):null):null},Ev=Object.freeze({RECOMMENDATIONS_INIT:"RECOMMENDATIONS_INIT",FETCH_RECOMMENDATIONS_START:"FETCH_RECOMMENDATIONS_START",FETCH_RECOMMENDATIONS_SUCCESS:"FETCH_RECOMMENDATIONS_SUCCESS",FETCH_RECOMMENDATIONS_ERROR:"FETCH_RECOMMENDATIONS_ERROR",FETCH_MORE_TILES_START:"FETCH_MORE_TILES_START",FETCH_MORE_TILES_SUCCESS:"FETCH_MORE_TILES_SUCCESS",FETCH_MORE_TILES_ERROR:"FETCH_MORE_TILES_ERROR",UPDATE_RECOMMENDATIONS_TILE:"UPDATE_RECOMMENDATIONS_TILE"}),vv=Object.freeze({GRID:"grid",CAROUSEL:"carousel",SCROLLER:"scroller"}),bv=Object.freeze({SPOTLIGHT:"spotlight",RECOMMENDED:"recommended"}),fv=window.asMetrics,{OmnitureCollection:wv,OmnitureProduct:Nv,OmnitureVariable:Sv,OmnitureEvent:Cv}=K().get(fv,"util.omnitureCollection",{}),Tv=(e=[],t,a)=>{const{partsInBag:r="",baseParts:n=""}=t,s=r?r.join(":"):n?n.join(":"):"",l="loadMore"===a?e.slice(t.minimumTiles):e,o="AOS_Momentum_Recommendations"===K().get(l,"[0].metrics.mZone")?"ty Recommendation":"Bag Recommendation",i=new wv;return l.forEach((e=>{const t=K().get(e.metrics,"mZone",o),r=K().get(e.metrics,"ruleId",""),n=K().get(e.metrics,"ruleAction",""),l=K().get(e.metrics,"algorithm",""),c=r?`${r}:${n}`:l,d=K().get(e,"products",[]).find((t=>t.part===e.part))||e,m=K().get(d,"basePartNumber"),u=K().get(e.metrics,"position","1/1");"addToBag"===a&&fv.purchaseJourney.registerProduct(m,o),i.add(new Nv({sku:m,variables:new wv(new Sv("eVar60",t.toLowerCase()),new Sv("eVar61",c),new Sv("eVar65",u),new Sv("eVar69",s))}))})),i},Lv=(e,t,a)=>{const r=e.basePartNumber,n="Configurable spotlight",{partsInBag:s=""}=t,l=s?s.join(":"):"";return"addToBag"===a&&fv.purchaseJourney.registerProduct(r,n),new Nv({sku:r,variables:new wv(new Sv("eVar60",n),new Sv("eVar61","curated"),new Sv("eVar65","1/1"),new Sv("eVar69",l))})},kv=(e,t)=>{if(!fv)return;const a=Tv(e,t,"loadMore"),r=new wv(new Cv("event4"));fv.sendUserInteraction({name:"metrics",data:{events:r,products:a,prop37:'D=pageName+"||recommendation|Show more products"'}})},Iv=({product:e,type:t,bootstrap:a})=>{if(!fv)return;let r;r=t===bv.SPOTLIGHT?Lv(e,a,"addToBag"):t===bv.RECOMMENDED?Tv([e],a,"addToBag"):new wv;const n=new wv(new Cv("scAdd"),new Cv("event52"),new Cv("event115"));fv.sendUserInteraction({name:"metrics",data:{products:r,events:n}})},Av=({products:e,part:t,metrics:a,bootstrap:r,type:n})=>{if(!fv)return;const s=K().find(e,{part:t})||{};let l;n===bv.SPOTLIGHT?l=Lv(s,r):n===bv.RECOMMENDED?(s.metrics=a,l=Tv([s],r)):l=new wv;const o=new wv(new Cv("event4"));fv.sendUserInteraction({name:"metrics",data:{products:l,events:o}})},Pv=(e,t={})=>{if(!fv)return;const{products:a,part:r}=e,n=K().find(a,{part:r})||{},s=Lv(n,t),l=new wv(new Cv("event4"));fv.sendUserInteraction({name:"metrics",data:{products:s,events:l}})},Dv=(e,t={})=>{if(!fv)return;const a=Tv(e,t),r=new wv(new Cv("event4"));fv.sendUserInteraction({name:"metrics",data:{products:a,events:r}})},Ov=(e,t,a)=>{if(!fv)return;const r=[];if(Array.isArray(e))e.forEach((e=>{const a=K().find(t,{part:e.part})||{};r.push(a)}));else{const a=K().find(t,{part:e.part})||{};r.push(a)}const n=Tv(r,a),s=new wv(new Cv("event4"));fv.sendUserInteraction({name:"metrics",data:{products:n,events:s}})},xv=({tiles:e=[],recommendations:t,mZone:a})=>{const r=t?t.length:"";return e.map(((n,s)=>{const l=t.find((e=>e.part===n.part))||{};return n.metrics={recommendationLength:r,algorithm:l.algorithm,ruleId:l.ruleId,ruleAction:l.ruleAction,mZone:a,position:`${s+1}/${e.length}`},n}))},Rv=({spotlight:e,bootstrap:t,onAddToBag:a})=>{const{viewport:r}=z(),n=l().useId(),{products:s,part:o,headerTitle:i,headerSubTitle:c,marketingData:d,isAddingToBag:m=!1}=e,{state:u,setDimension:p}=uv({part:o,bootstrap:e,onPartChange:e=>{Av({products:s,part:e,bootstrap:t,type:bv.SPOTLIGHT})}}),{dimensions:g,selectionImage:y,selectedProduct:h,hidePartnershipIcons:E}=u,{asyncAddToBag:v={},entireTileClickable:b=!1,spotlightType:f}=t,{addToBagButton:w="",addToBagButtonA11y:N=""}=v,{part:S,price:C,productDetailsUrl:T,productEvarURL:L}=h||{},k=s&&s.length<=1,I={disabled:!o||m},A=K().get(C,"currentPrice.amount"),P=K().get(C,"previousPrice.previousPrice"),D=K().get(C,"tierListSavings"),O=K().get(C,"promoSavings"),x=`${S||o||""}|${f}`,R={className:qa()("rf-recommendations-accessory rf-recommendations-accessory-featured row row-reverse",{"as-util-relatedlink":b})};return b&&(R["data-trigger-click"]=`click [data-relatedlink='${n}']`),l().createElement("div",R,l().createElement("div",{className:"column large-6 small-12"},y&&l().createElement("div",{className:"rf-recommendations-accessory-image"},l().createElement(Fl,{data:y,alt:""}))),l().createElement("div",{className:"column large-6 small-12"},i&&l().createElement("div",{className:qa()("rf-recommendations-accessory-violator",{[nd.EYEBROW_REDUCED]:"small"===r,[nd.BODY]:"small"!==r})},l().createElement("span",Ya(i))),c&&l().createElement("h3",{className:`rf-recommendations-accessory-title ${nd.CALLOUT}`},l().createElement("a",{href:T,"data-evar1":L,"data-relatedlink":n,"data-evar11":x},l().createElement("span",Ya(c)))),A&&l().createElement("div",{className:"rf-recommendations-accessory-price"},l().createElement("span",Ya(A)),P&&l().createElement("span",ur({className:"rf-recommendations-accessory-previousprice"},Ya(P)))),D&&l().createElement("div",{className:"rf-recommendations-accessory-pricesavings"},l().createElement("span",Ya(D))),O&&l().createElement("div",{className:`rf-recommendations-accessory-promosavings ${nd.BODY}`},l().createElement("span",Ya(O))),d&&l().createElement("div",ur({className:`rf-recommendations-accessory-description ${nd.BODY_REDUCED}`},Ya(d))),!k&&l().createElement(yv,{dimensions:g,onDimensionChange:(e,t)=>p(e,t),uid:n,hidePartnershipIcons:E}),l().createElement("button",ur({type:"button",className:"button button-block button-super rf-recommendations-accessory-button","data-autom":"recommendations-addToBag-button"},I,{onClick:()=>a(h,bv.SPOTLIGHT)}),l().createElement("span",{"aria-hidden":"true"},w),N&&h?l().createElement("span",{className:"visuallyhidden"},dn(N,h)):"")))},Fv=({tile:e,bootstrap:t,className:a,onAddToBag:r,tabIndex:n=0})=>{const{viewport:s}=z(),o=l().useId(),{products:i,part:c,isAddingToBag:d=!1,metrics:m={},showSingleVariant:u=!1,message:p={}}=e,{state:g,setDimension:y}=uv({part:c,bootstrap:e,onPartChange:e=>{Av({products:i,part:e,metrics:m,bootstrap:t,type:bv.RECOMMENDED})}}),{dimensions:h,selectionImage:E,selectedProduct:v}=g,{part:b,title:f="",price:w,productDetailsUrl:N,productEvarURL:S,violators:C=[],basePartNumber:T="",engravingDescription:L,withSavingsMessage:k}=v||{},I=i&&i.length<=1,A={disabled:!c||d},P=K().get(w,"currentPrice.amount"),D=K().get(w,"previousPrice.previousPrice"),O=K().get(w,"tierListSavings"),x=K().get(w,"promoSavings"),R=K().get(w,"segmentSavings.priceString",""),{ruleId:F,ruleAction:M,mZone:B}=m,_=`${F}:${M}`,$="AOS_Momentum_Recommendations"===B?"ty Recommendation":"recommended cart",U=`${b||c||""}|${K().get(t,"recommendationEvar11Val",$)}`,{isAddToBagEnabled:V=!0,asyncAddToBag:H={},entireTileClickable:j=!1,isProductSelectionEnabled:G=!0}=t,{addToBagButton:W="",addToBagButtonA11y:q=""}=H,Y={className:qa()("rf-recommendations-accessory rf-recommendations-accessory-inline tile",a,{"as-util-relatedlink":j})},X={data:E,className:qa()({"as-util-relatedlink":!j}),alt:""},J=`click [data-relatedlink='${o}']`;return j?Y["data-trigger-click"]=J:X["data-trigger-click"]=J,l().createElement("div",Y,E&&l().createElement("div",{className:"rf-recommendations-accessory-image"},l().createElement(Fl,X)),l().createElement("div",{className:"rf-recommendations-accessory-info"},C&&C.length>0?l().createElement("div",{className:qa()("rf-recommendations-accessory-violator",{[nd.EYEBROW_REDUCED]:"small"===s,[nd.BODY]:"small"!==s})},C.map(((e,t)=>l().createElement(ch,ur({},Ya(e.violatorTranslatedText),{key:K().get(e,"value.attributeValue",t),noScrim:!0,reduced:!0}))))):null,f&&l().createElement("h3",{className:qa()("rf-recommendations-accessory-title",{[nd.BODY_REDUCED_TIGHT]:"small"===s,[nd.BODY]:"small"!==s})},l().createElement("a",{href:N,"data-evar1":S,"data-relatedlink":o,"data-evar11":U,"data-algorithm-type":_,"data-display-name":f,"data-part-number":T,"data-slot-name":m.recommendationLength,tabIndex:n},l().createElement("span",Ya(f)))),P&&l().createElement("div",{className:`rf-recommendations-accessory-price ${nd.BODY}`},l().createElement("span",Ya(P)),D&&l().createElement("span",ur({className:"rf-recommendations-accessory-previousprice"},Ya(D))),k&&l().createElement("span",Ya(k))),O&&l().createElement("div",{className:"rf-recommendations-accessory-pricesavings"},l().createElement("span",Ya(O))),x&&l().createElement("div",{className:`rf-recommendations-accessory-promosavings ${nd.BODY}`},l().createElement("span",Ya(x))),R&&l().createElement("div",{className:`rf-recommendations-accessory-segmentsavings ${nd.BODY}`},l().createElement("span",Ya(R))),(!I||u)&&(G?l().createElement(yv,{dimensions:h,onDimensionChange:(e,t)=>y(e,t),uid:o}):l().createElement(hv,{dimensions:h,title:f,bootstrap:t})),L&&l().createElement("div",{className:`rf-recommendations-accessory-engravingdescription ${nd.BODY_REDUCED}`},l().createElement("span",Ya(L)))),V?l().createElement("button",ur({type:"button",className:"button button-block button-super rf-recommendations-accessory-button","data-autom":"recommendations-addToBag-button",onClick:()=>r({...v,metrics:m},bv.RECOMMENDED)},A),l().createElement("span",{"aria-hidden":"true"},W),q&&v?l().createElement("span",{className:"visuallyhidden"},dn(q,v)):null):null,p.text&&l().createElement("div",{className:qa()("rf-recommendations-accessory-message",{"form-message-wrapper":"ERROR"===p.level})},p.text))},Mv=i("recommendations/reducer"),Bv=(e,t)=>a=>{const{tiles:r=[],recommendations:n,mZone:s,baseParts:l}=e,o=((e,t)=>{const{minimumTiles:a,recommendedForYouDetailsUrl:r}=t,n=e.slice(a).map(((e,t)=>`parts.${t}=${encodeURIComponent(e.part)}`)).join("&");return r?r+(r.indexOf("?")>0?"&":"?")+n:null})(n,t);a({type:Ev.FETCH_MORE_TILES_START});const i=wt(o,{credentials:"include"});return i.then((e=>{const o=K().get(e,"body.tiles",[]),i=r.concat(o),c=xv({tiles:i,recommendations:n,mZone:s});kv(c,{...t,baseParts:l}),a({type:Ev.FETCH_MORE_TILES_SUCCESS,data:c})})).catch((e=>{Mv.error(`Network ERROR: ${e}`),a({type:Ev.FETCH_META_ERROR,error:{isNetworkError:!0,errorInfo:e,message:"Something went wrong."}})})),i},_v=(e,t)=>{switch(t.type){case Ev.RECOMMENDATIONS_INIT:{const a=K().get(t,"data.spotlight",{});return{...e,data:{...t.data,spotlight:a.products?a:null}}}case Ev.FETCH_RECOMMENDATIONS_START:return{...e,isFetching:!0,isFetched:!1,isFetchedMoreTiles:!1,error:null};case Ev.FETCH_RECOMMENDATIONS_SUCCESS:return{...e,isFetching:!1,isFetched:!0,isFetchedMoreTiles:!1,error:null,data:t.data};case Ev.FETCH_RECOMMENDATIONS_ERROR:return{...e,isFetching:!1,isFetched:!0,isFetchedMoreTiles:!1,error:t.error,data:{}};case Ev.FETCH_MORE_TILES_START:return{...e,isFetchingMoreTiles:!0,isFetchedMoreTiles:!1};case Ev.FETCH_MORE_TILES_SUCCESS:return{...e,isFetchingMoreTiles:!1,isFetchedMoreTiles:!0,data:{...e.data,tiles:t.data}};case Ev.FETCH_MORE_TILES_ERROR:return{...e,isFetchingMoreTiles:!1,isFetchedMoreTiles:!1};case Ev.UPDATE_RECOMMENDATIONS_TILE:{const{index:a,message:r}=t.data,n=K().get(e,"data.tiles",[]).slice();return n[a]={...n[a],message:r},{...e,data:{...e.data,tiles:n}}}default:return e}},$v={isRecommendationsFirst:!1,isSpotlightHidden:!1,isRecommendationsHidden:!1,elementAfterTitle:null,elementAfterFirstSection:null,doPostRenderInit:!0,minimumTiles:3},Uv=({bootstrap:e,part:t,recommendations:a={},ref:r,onAddToBag:n})=>{const[s,o]=l().useReducer(_v,{isFetchedMoreTiles:!1,data:{}}),[i,c]=l().useState(!1);l().useEffect((()=>{t&&(({part:e,bootstrap:t})=>a=>{const r=K().unescape(on(t.recommendedForYouFullUrl,{mainPart:e}));a({type:Ev.FETCH_RECOMMENDATIONS_START});const n=wt(r);return n.then((e=>{const r=K().get(e,"body",{}),{recommendations:n,tiles:s,mZone:l,baseParts:o}=r,{view:i,marketingTile:c,isMarketingTileFirst:d}=t;let m={};if(n&&n.length>2){m={recommendations:n,mZone:l,baseParts:o};const e=xv({tiles:s,recommendations:n,mZone:l});i===vv.SCROLLER&&c?m.tiles=d?[{...c},...e]:[...e,{...c}]:m.tiles=[...e],i===vv.CAROUSEL&&(m.galleryItems=t.minimumTiles>1?K().chunk(n,t.minimumTiles):n,m.pageStandard=0),m.updateTileHeight=!1}a({type:Ev.FETCH_RECOMMENDATIONS_SUCCESS,data:m})})).catch((e=>{Mv.error(`Network ERROR: ${e}`),a({type:Ev.FETCH_RECOMMENDATIONS_ERROR,error:{isNetworkError:!0,errorInfo:e,message:"Something went wrong."}})})),n})({state:s,part:t,bootstrap:e})(o).then((()=>{c(e.view===vv.CAROUSEL)}))}),[t]),l().useEffect((()=>{if(e.doPostRenderInit){const e=xv(a);o({type:Ev.RECOMMENDATIONS_INIT,data:{...a,tiles:e}})}}),[e.doPostRenderInit]),l().useEffect((()=>{if(i&&r&&r.current){const e=[...r.current.querySelectorAll(".rf-recommendations-accessory-info")],t=Math.max.apply(e,e.map((e=>e.clientHeight)));e.forEach((e=>{e.style.minHeight=`${t}px`}))}}),[i,r]),l().useEffect((()=>{if(a.message){const e=K().get(s,"data.tiles",[]),t=K().findIndex(e,(e=>e.part===a.part));t>=0&&o({type:Ev.UPDATE_RECOMMENDATIONS_TILE,data:{index:t,message:a.message}})}}),[a.parts,a.message]);return window.recommendationsState=s,{...s,onAddToBag:(t,a)=>{n(t.part),Iv({product:t,bootstrap:e,type:a})},onLoadMore:()=>{const t=K().get(s,"data",{});c(!1),Bv(t,e)(o).then((t=>{c(e.view===vv.CAROUSEL);const a=K().get(t,"body.tiles[0].part",""),r=document.getElementById(`rf-recommendations-${a}`);r&&r.focus()}))},onPageChangeFireMetrics:t=>{const{data:{tiles:a=[],galleryItems:r=[],baseParts:n}}=s,l=r[t];Ov(l,a,{...e,baseParts:n})}}},Kv=({className:e,"aria-label":t=""})=>{const a=l().useRef(null),r=l().useRef(null);return l().useEffect((()=>(r.current=document.activeElement,a.current&&a.current.focus(),()=>{r.current&&r.current.focus()})),[]),l().createElement("div",{ref:a,role:"img",tabIndex:-1,className:qa()("waitindicator",e),"aria-label":t})},Vv=({spotlight:e,hide:t,bootstrap:a,onAddToBag:r})=>{const{dataAnalyticsType:n}=a,[s,o]=Pl({});return l().useEffect((()=>{o&&Pv(e,a)}),[o]),e&&!t?l().createElement("div",{className:"as-l-container rf-recommendations-spotlight",ref:s,"data-analytics-type":n},l().createElement(Rv,{spotlight:e,bootstrap:{...a,spotlightType:"Configurable spotlight"},onAddToBag:r})):""},Hv=({state:e,hide:t,bootstrap:a})=>{const{data:{tiles:r=[],recommendations:n=[],mZone:s=""},isFetchingMoreTiles:o,isFetchedMoreTiles:i,onLoadMore:c,onAddToBag:d}=e,{loadMoreText:m,loadingText:u,minimumTiles:p,dataAnalyticsType:g=""}=a,y=n&&n.length>p,h=r&&r.length>3,E=r&&r.length%3==2,[v,b]=Pl({});return l().useEffect((()=>{b&&Dv(r,a)}),[b]),!t&&r&&r.length>=p?l().createElement("div",{className:"as-l-container rf-recommendations-tiles",ref:v,"data-analytics-type":g,"data-mzone":s},r.map(((e,t)=>[l().createElement("div",{tabIndex:-1,id:`rf-recommendations-${e.part}`,className:"rf-recommendations-tile small-12",key:e.part},l().createElement(Fv,{tile:e,bootstrap:a,onAddToBag:d})),h&&t+1!==r.length&&(t+1)%3==0?l().createElement("div",{className:"rf-recommendations-divider",key:`${e.part}-divider`}):""])),E?l().createElement("div",{className:"rf-recommendations-tile small-12"}):"",y?l().createElement("div",{className:"as-l-container rf-recommendations-footer"},o&&l().createElement(Kv,{className:"waitindicator-inline waitindicator16-gray","aria-label":u}),!i&&!o&&l().createElement("button",{type:"button",className:"as-buttonlink","data-analytics-title":"show more products",onClick:c},m,l().createElement("span",{"aria-hidden":"true",className:"icon icon-after icon-chevrondown"}))):""):""},jv=({bootstrap:e,part:t,defaultRecommendations:a={},onAddToBag:r=(e=>e)})=>{const n=l().useRef(null),s={...$v,...e},o=Uv({bootstrap:s,ref:n,part:t,recommendations:a,onAddToBag:r}),{isRecommendationsFirst:i,isSpotlightHidden:c,isRecommendationsHidden:d,elementAfterTitle:m,elementAfterFirstSection:u,title:p,subTitle:g}=s,{data:{spotlight:y={},recommendations:h=[]},onAddToBag:E}=o,v=!c&&!K().isEmpty(y)||!d&&h.length>0,b=i?l().createElement(l().Fragment,null,m&&l().createElement("div",Ya(m)),l().createElement(Hv,{hide:d,state:o,bootstrap:s}),u&&l().createElement("div",Ya(u)),l().createElement(Vv,{hide:c,spotlight:y,bootstrap:s,onAddToBag:E})):l().createElement(l().Fragment,null,m&&l().createElement("div",Ya(m)),l().createElement(Vv,{hide:c,spotlight:y,bootstrap:s,onAddToBag:E}),u&&l().createElement("div",Ya(u)),l().createElement(Hv,{hide:d,state:o,bootstrap:s}));return v&&l().createElement("div",{className:"rf-recommendations rf-recommendations-grid",key:"recommendationsGrid",ref:n},l().createElement("div",{className:"as-l-container"},p&&l().createElement("h2",{className:`rf-recommendations-title ${nd.HEADLINE_REDUCED}`},p),g&&l().createElement("div",{className:`rf-recommendations-subtitle ${nd.QUOTE_REDUCED}`},g)),b)},Gv=(e="")=>{switch(e.toLowerCase()){case"aos_momentum_recommendations":return"recommendations:momentum";case"aos_bag_recommendations":return"recommendations:bag";default:return""}},Wv=({label:e})=>l().createElement("div",{className:"rs-recommendations-loader as-l-container"},l().createElement("div",{role:"img",className:"waitindicator waitindicator40-gray","aria-label":e})),qv=({label:e})=>((0,s.useLayoutEffect)((()=>{window.scrollTo(window.pageXOffset,0)}),[]),(0,pr.createPortal)(l().createElement("div",{className:"rs-recommendations-add-to-bag-loader"},l().createElement("div",{role:"img",className:"waitindicator waitindicator40-gray","aria-label":e})),document.getElementById("portal")||document.body)),Yv=({modKey:e,isThankyou:t})=>{const a=Ra(e),r=`${e}.recommendedItem`,n=Ka(r,"part"),{assets:s}=z(),o=Ra(r),{data:i}=o;if(!a.modExists)return null;const c=o.properties.isLoadingSubmit,d=!c&&(!i.recommendations||o.properties.isLoadingFault),m=!d&&(!c||t),u=i.mZone||"",p={...a.data.bootstrap,dataAnalyticsType:Gv(u),isRecommendationsFirst:!0};return l().createElement(l().Fragment,null,d&&l().createElement(Wv,{label:s.processing}),!t&&c&&l().createElement(qv,{label:s.processing}),l().createElement(wr,{isPending:c,messages:{pending:s.processing,finished:s.itemAddedSucessAlly}}),m&&l().createElement("div",{className:"rs-recommendations"},l().createElement(jv,{bootstrap:p,defaultRecommendations:i,onAddToBag:e=>{n.setValue(e),n.runSetEvents()}})))},zv=({content:e,titleTag:t,defaultSelection:a,analyticsId:r,...n})=>{const[o,i]=(0,s.useState)(void 0!==a?[a]:[]),c=r||n.id;return l().createElement(sE,ur({compact:!0,index:o,handleChange:e=>i(e),role:"list"},n),e.map(((e,a)=>e.question&&e.answer&&l().createElement(nE,{key:e.question,title:e.question,titleWrapperTag:t,onClick:()=>((e,t,a,r)=>{const n=window.asMetrics,s=`${e}-${a} | ${t.question}`,l=r.includes(a)?"collapsed":"expanded";n.fireMicroEvent({part:"FAQ",eVar:"eVar6",feature:s,action:l})})(c,e,a,o),role:"listitem"},l().createElement("div",Ya(e.answer))))))},Xv=({modKey:e,metrics:t={}})=>{const[a]=Ma(e),[r,n]=l().useState([]),{assets:s}=z();return a.faq&&a.faq.length?l().createElement(sE,{index:r,handleChange:e=>{n(e),((e=[],t={})=>{const{feature:a="FaqSection",eVar:r=vl}=t,n=e.includes(0)?"collapsed":"expanded";wl({action:n,eVar:r,feature:a})})(r,t)},rootTag:"div",className:"rs-faq"},l().createElement(nE,{title:a.faqTitle||s.faqTitle,titleWrapperTag:"h2",titleWrapperAttrs:{className:"as-l-container"},contentAttrs:{className:"as-l-container"},noPadding:!0,rootTag:"div",titleAttrs:{"data-autom":"faq-button",className:"rc-accordion-button"}},l().createElement(zv,{content:a.faq,id:"faq-question",titleTag:"h3"}))):null},Jv=({acShowInstallment:e,shipping:t,epptext:a,subtotal:r,instantCredit:n,amountChargedToday:s,instantCashback:o,emiDetails:i,loyaltyPointsAmount:c,downPayment:d,paymentFullDiscount:m,tax:u,appleBalanceApplied:p,totalGCsApplied:g,noOfGiftCards:y,taxCalculatorEnabled:h,hasTaxCalculator:E,recycleFee:v,fees:b,hasPromoCode:f,hidePromoModule:w,upgrade:N,installmentTerm:S,installmentAmount:C,total:T,monthlyTotalPricing:L,monthlyTotalPricingLabel:k,mixedTradeInMonthlyInstallmentAmount:I,showPayInFullFirst:A,buyFlowInstallmentsCashBackLabel:P,tradeInRefund:D,totalAfterTradeIn:O,totalAfterInstantTradeIn:x,paymentSubLabel:R,showTotalAfterTradeinAsTotal:F,showTaxInclusivePrices:M,taxExclusiveTax:B,creditInstallmentAmount:_,totalSavings:$,totalSavingsInclusiveTax:U,totalListSavings:K,segmentSavingsMessages:V,financingMessage:H,enableFinancingCalculatorLink:j,financeOverlayLinkLeftAlignment:G,buyflowMessages:W,installmentSummary:q,cashBackOverlayLink:Y,hasPinCodeEligibility:z,cashBackSuperscript:X,monthlyTotal:J,partnerFinancedInstallments:Z,paymentBreakdown:Q,hasFlexibleTradeIn:ee,tradeInCredit:te,outstandingLoan:ae,iUPOrInstallments:re,paymentDetails:ne,totalTaxSubValue:se,totalTaxSubLabel:le,acmiMonthlyPayment:oe,acmiPayTextEnabled:ie,assets:ce,iupEstCredit:de,iupEstAfterCredit:me,totalSavingsWithCard:ue,stateDeliveryFee:pe,displayNetOfAllSavings:ge,hasPartnerFinance:ye,savingsLabel:he,hideVatText:Ee})=>{const ve=l().createElement(l().Fragment,null,l().createElement("span",Ya(`- ${D}`)),l().createElement("span",{className:"visuallyhidden"},ce.footnoteText),l().createElement("span",Ya(ce.tradeInValueDagger))),be=l().createElement(l().Fragment,null,l().createElement("span",Ya(O)),l().createElement("span",{className:"visuallyhidden"},ce.footnoteText),l().createElement("span",null,"*")),fe=l().createElement(l().Fragment,null,l().createElement("span",Ya(`- ${de}${ce.tradeInValueDagger}`)),l().createElement("span",{className:"visuallyhidden"},ce.footnoteText)),we=l().createElement(l().Fragment,null,l().createElement("span",Ya(`${me}*`)),l().createElement("span",{className:"visuallyhidden"},ce.footnoteText)),Ne=l().createElement("div",null,l().createElement("span",{className:"rs-summary-totalaftertradeiLabel"},`${R} `),l().createElement("span",{className:"rs-summary-totalaftertradeinvalue"},F?T:O));let Se="";return t&&(Se=t.free?ce.freeLabel:t.cost),[{showField:!!a,type:"ePPPlusSummary"},{showField:!!te&&!re,type:"summaryRow",name:"tradeInCredit",label:ce.tradeinInstantCreditLabel,value:te},{showField:!!(re&&ee&&ne),type:"oneTimeChargeLabel"},{showField:!!ae,type:"summaryRow",name:"outsandingLoan",label:ce.tradeinOutstandingAmtLabel,value:ae},{showField:!!r,type:"summaryRow",name:"subtotal",label:ce.subtotal,value:r},{showField:!!n,type:"summaryRow",name:"instantCredit",label:ce.instantCredit,value:n},{showField:!!s,type:"amountChargedToday"},{showField:!!i,type:"emiDetails"},{showField:!!c,type:"summaryRow",name:"loyaltypointsAmount",label:ce.loyaltyPointsLabel,value:c},{showField:!!d,type:"summaryRow",name:"downpayment",label:ce.downPaymentLabel,value:d},{showField:!!t,type:"summaryRow",name:"shipping",label:ce.shipping,value:Se},{showField:!(!o||!U||ge),type:"summaryRow",name:"discountSavings",label:he||ce.savingsLabel,value:U},{showField:!!o&&!ge,type:"summaryRow",name:"instantCashback",label:ce.instantcashback,value:o},{showField:!!m,type:"summaryRow",name:"paymentFullDiscount",label:ce.paymentFullDiscount,value:m},{showField:!!pe,type:"stateDeliveryFeeDetails"},{showField:!!u,type:"taxReview"},{showField:!!p,type:"summaryRow",name:"accountbalance",label:ce.accountBalance,value:p},{showField:!!g,type:"summaryRow",name:"giftcardamount",label:y?dn(ce.giftCardAmount,{quantity:y}):ce.giftCardBalance,value:g},{showField:!(!h||!E),type:"taxWithTaxCalculator"},{showField:!!v,type:"recycleFee"},{showField:!(!b||!b.cod),type:"summaryRow",name:"codfee",label:ce.codFeeLabel,value:b&&b.cod},{showField:!!f&&!w,type:"promoCodeRow"},{showField:!!N,type:"summaryRow",name:"upgrade",label:N&&N.upgradePaymentLabel,value:N&&N.upgradeProgramBalance},{showField:!(!S||!C),type:"summaryRow",name:"installmentTerm",label:S,value:C},{showField:!(A||!L&&!I),type:"monthlyInstallmentsRow",name:"monthlyInstallmentsRow"},{showField:!!T,type:"totalAmountRow"},{showField:!e&&!!A&&!(!O||!R),type:"summaryRow",name:"totalAfterTradeInSub",label:Ne},{showField:!!A&&!!L&&!G,type:"monthlyInstallmentsRow",name:"monthlyInstallmentsLabelValueAfterTotal"},{showField:!(!A||!L&&!k||!G),type:"monthlyInstallmentsRow",name:"monthlyInstallmentsLabelValueAfterTotal"},{showField:ge&&!(!o&&!U),type:"summaryRow",name:"discountSavings",label:ce.followingSavingsLabel},{showField:!!(o&&U&&ge),type:"summaryRow",name:"discountSavings",label:he||ce.savingsLabel,value:U},{showField:!!o&&ge,type:"summaryRow",name:"instantCashback",label:ce.instantcashback,value:o},{showField:!(!$&&!U),type:"summaryRow",name:"savings",label:ce.totalSavings,value:$||U||""},{showField:!!J,type:"summaryRow",name:"monthlyPayment",label:ce.monthlyTotal,value:J},{showField:!!ue,type:"summaryRow",name:"totalSavingsWithCard",value:ue},{showField:!!D,type:"summaryRow",name:"tradeInRefund",label:ce.tradeUpValueLabel,value:ve},{showField:!(!O||!D),type:"summaryRow",name:"totalAfterTradeIn",label:ce.orderTotalAfterTradeUpLabel,value:be},{showField:de,type:"summaryRow",name:"iupCredit",label:ce.iupEstCreditValueLabel,value:fe},{showField:me,type:"summaryRow",name:"iupEstAfterCredit",label:ce.iupEstAfterCreditLabel,value:we},{showField:!(!x||!x),type:"summaryRow",name:"totalAfterInstantTradeIn",label:ce.totalAfterInstantTradeIn,value:x},{showField:(!e||ye)&&!A&&!(!O||!R),type:"summaryRow",name:"totalAfterTradeInSub",label:Ne},{showField:Boolean(V),type:"segmentSavings"},{showField:!!P,type:"summaryRow",name:"cashback",label:P+(X||""),value:""},{showField:!(!M||!B||Ee),type:"showTaxInclusivePrices",name:A&&"taxLeftAligned"},{showField:!(!se&&!le),type:"totalTaxSubValue"},{showField:!!_,type:"creditInstallmentAmount"},{showField:!!K,type:"totalListSavings"},ie?{showField:!!oe,type:"summaryRow",name:"acmiMontlhyPayment",label:oe}:{showField:!!oe,type:"summaryRow",name:"acmiMontlhyPayment",label:ce.acmiPaymentLabel,value:oe},ie?{showField:!oe&&(!!H||!!Q||!!j||W&&W.buyflowMessagesEnabled||!!q),type:"financingMessagesMarkup"}:{showField:!!H||!!Q||!!j||W&&W.buyflowMessagesEnabled&&!oe||!!q,type:"financingMessagesMarkup"},{showField:!!Y,type:"cashbackMessagesMarkup"},{showField:!!z,type:"pinCodeEligibility"},{showField:!!A&&!L&&!G,type:"monthlyInstallmentsRow",name:"monthlyInstallmentsLabelAfterTotal"},{showField:!!Z,type:"partnerFinancedInstallmentsMarkup"}]},Zv=({orderTotal:e,subtotal:t,installmentSubTotal:a,subTotalExclusiveTax:r,tradeInValue:n,installmentTotal:s,orderTotalExclusiveTax:l,installmentTotalFinanced:o,downPayment:i,shipping:c,tradeinCreditSecured:d,tax:m,hasTaxCalculator:u,recycleFee:p,fees:g,hasPromoCode:y,hidePromoModule:h,installmentsremainingpayments:E,firstInstallmentAmount:v,upgrade:b,totalCardCharge:f,amountAuthorized:w,totalAmountAuthorized:N,psd2Enabled:S,financingMessage:C,enableFinancingCalculatorLink:T,buyflowMessages:L,installmentSummary:k,cashBackOverlayLink:I,tradeInCredit:A,iUPOrInstallments:P,hasFlexibleTradeIn:D,outstandingLoan:O,tradeInType:x,stateDeliveryFee:R,assets:F})=>{let M="";return c&&(M=c.free?F.freeLabel:c.cost),[{showField:!!A&&!P,type:"summaryRow",name:"tradeInCredit",label:F.tradeinInstantCreditLabel,value:A},{showField:!!e,type:"summaryRow",name:"ordertotal",label:F.orderTotal,value:e},{showField:!(!P||!D),type:"oneTimeChargeLabel"},{showField:!!O&&D,type:"summaryRow",name:"outstandingLoan",label:F.tradeinOutstandingAmtLabel,value:O},{showField:!!t,type:"summaryRow",name:"subtotal",label:F.subtotal,value:t},{showField:!!a,type:"summaryRow",name:"installmentsubtotal",label:F.installmentSubTotal,value:a},{showField:!(!a||!r),type:"subTotalExclusiveTax"},{showField:!!n,type:"summaryRow",name:"tradeinvalue",label:F.instantCreditTradeInValueLabel,value:n},{showField:!!s,type:"summaryRow",name:"installmenttotal",label:F.installmentTotal,value:s},{showField:!(!s||!l),type:"orderTotalExclusiveTax"},{showField:!!o,type:"summaryRow",name:"installmenttotalfinanced",label:F.installmentTotalFinanced,value:o},{showField:!!i,type:"summaryRow",name:"downpayment",label:F.installmentdownPaymentLabel,value:i},{showField:!!c,type:"summaryRow",name:"shipping",label:F.shipping,value:M},{showField:!!d,type:"summaryRow",name:"trade-in",label:F.instantCreditTradeInValueLabel,value:d},{showField:!!R,type:"stateDeliveryFeeDetails"},{showField:!!m,type:"taxReview",name:"taxandfees"},{showField:!!u,type:"taxWithTaxCalculator"},{showField:!!p,type:"recycleFee"},{showField:!(!g||!g.cod),type:"summaryRow",name:"codfee",label:F.codFeeLabel,value:g&&g.cod},{showField:!!y&&!h,type:"promoCodeRow"},{showField:!!E,type:"summaryRow",name:"installmentsremainingpayments",label:F.installmentsremainingpayments,value:E},{showField:!!v,type:"summaryRow",name:"firstinstallmentamount",label:F.firstInstallmentAmountLabel,value:v},{showField:!!b,type:"summaryRow",name:"upgrade",label:b&&b.upgradePaymentLabel,value:b&&b.upgradeProgramBalance},{showField:!!f,type:"summaryRow",name:"totalcardcharge",label:F.total,value:f},{showField:!!w,type:"summaryRow",name:"amountauthorized",label:F.authorizedAmount,value:w},{showField:!(!N||!S||"TRADE_IN_GREATER_THAN_LOAN"!==x),type:"totalAmountAuthorizedRow"},{showField:!!C||!!T||L&&L.buyflowMessagesEnabled||!!k,type:"financingMessagesMarkup"},{showField:!!I,type:"cashbackMessagesMarkup"}]},Qv=({carrierSummaryClasses:e,deviceCarrierHeaderLabel:t,productLabel:a,monthlyPayment:r,monthlyPaymentAlly:n,monthlyPayments:s,productPrice:o,priceMessage:i,instantCredit:c,downPayment:d,totalCarrierFinancedLabel:m,totalCarrierFinancedAmount:u,carrierCredit:p,monthlyPaymentBeforeCredit:g,monthlyPaymentAfterCredit:y})=>{const{assets:h}=z();return l().createElement("div",{className:`rs-summary-carrierfinance ${e}`},l().createElement("div",{className:"rs-carrierfinance-paymentheader"},t),a&&l().createElement(pl,{name:"productinfo",label:a,value:r,valuea11y:n,subLabel:o}),(c||d)&&l().createElement(l().Fragment,null,l().createElement("div",ur({className:"rs-summary-instantcredit"},Ya(c))),d&&l().createElement("div",{className:"rs-summary-sublabel large-12"},d)),i&&l().createElement("div",ur({className:"rs-summary-pricemessage"},Ya(i))),u&&l().createElement(pl,{name:"totalCarrierFinance",label:m,value:u}),s&&l().createElement(pl,{name:"monthlyPayments",label:h.monthlyPaymentsLabel,value:s}),g&&l().createElement(pl,{name:"monthlyPaymentBeforeCredit",label:h.monthlyPaymentBeforeCreditLabel,value:g}),p&&l().createElement("div",{className:"rs-summary-labelred rs-summary-carriercredit"},l().createElement("div",Ya(p))),y&&l().createElement(pl,{name:"monthlyPaymentAfterCredit",label:h.monthlyPaymentAfterCreditLabel,value:y}))},eb=({classes:e,modKey:t})=>{const[a]=Ba(t,"carrierFinancePromoSummary"),{productLabel:r,productPrice:n,priceMessage:s,instantCredit:o,downPayment:i,totalCarrierFinancedLabel:c,totalCarrierFinancedAmount:d,carrierCredit:m,monthlyPaymentBeforeCredit:u,monthlyPaymentAfterCredit:p,deviceCarrierHeaderLabel:g,monthlyPayment:y,monthlyPaymentAlly:h,monthlyPayments:E}=a;return l().createElement(Qv,{carrierSummaryClasses:e,deviceCarrierHeaderLabel:g,productLabel:r,monthlyPayment:y,monthlyPaymentAlly:h,monthlyPayments:E,productPrice:n,priceMessage:s,instantCredit:o,downPayment:i,totalCarrierFinancedLabel:c,totalCarrierFinancedAmount:d,carrierCredit:m,monthlyPaymentBeforeCredit:u,monthlyPaymentAfterCredit:p})},tb=l().memo(eb),ab=({supplementalInfo:e,iUpSummaryField:t,classes:a,installmentsAmountDue:r,authorizedAmount:n,totalSavings:s,showSupplementalDisclaimer:o})=>{const{assets:i}=z(),c=qa()(a,{"large-9 large-offset-3 small-12 small-offset-0":!a});return l().createElement(l().Fragment,null,l().createElement("div",{className:"row"},l().createElement("div",{className:c},t)),l().createElement("div",{className:"row"},r&&(n?l().createElement("div",{className:c},l().createElement(pl,{name:"installmentsamountdue",label:i.dueTodayLabel,classes:"rs-summary-withauthorizedamount",value:r})):l().createElement(pl,{name:"installmentsamountdue",label:i.dueTodayLabel,classes:c,value:r})),o&&l().createElement("div",{className:`rs-summary-installmentsamountdue rs-summary-supplementalinfo ${c}`},e.installmentsAmountDue),s&&l().createElement(pl,{name:"savings",label:i.totalSavings,value:s})))},rb=({modKey:e,supplementalInfo:t,iUpSummaryField:a,classes:r,showFinancingMessages:n})=>{const[s]=Ma(e),{installmentsAmountDue:o,authorizedAmount:i,totalSavings:c}=s,d=o&&t&&t.installmentsAmountDue;return l().createElement(ab,{supplementalInfo:t,iUpSummaryField:a,classes:r,installmentsAmountDue:o,authorizedAmount:i,totalSavings:c,showSupplementalDisclaimer:d,showFinancingMessages:n})},nb=l().memo(rb),sb=({summaryClasses:e,wrapperClass:t,webInstallmentSummary:a,fullPriceProductSummary:r,summaryDetails:n,hasCarrierFinancePromoSummary:s,hasIUPOrInstallments:o,summaryModKey:i,supplementalInfo:c,summaryField:d,iUpSummaryField:m,showFinancingMessages:u,xMerchSummary:p})=>l().createElement("div",{className:`rs-summary ${t}`},s&&l().createElement(tb,{classes:e,modKey:i}),a,r,n,o?l().createElement(nb,{modKey:i,supplementalInfo:c,iUpSummaryField:m,classes:e,showFinancingMessages:u}):l().createElement("div",{className:e},d),p&&l().createElement("div",ur({className:"rs-summary-xmerch"},Ya(p)))),lb=({epptext:e,showEPPPlusSummaryButton:t,ePPPlusSummaryButtonProps:a})=>{const{assets:r}=z();return l().createElement(l().Fragment,null,l().createElement("span",null,e," "),t&&l().createElement(ds,a,r.remove))},ob=({modKey:e})=>{const{data:t,properties:a}=Ra(`${e}.ePPPlusSummary`),{epptext:r,showRemove:n}=t,s=ja(`${e}.ePPPlusSummary`,"remove-binding"),o=n&&s.binding.bindExists,i={...s.props,isLoading:a.isLoadingSubmit,hasDefaultClass:!1,className:"as-buttonlink"};return l().createElement(lb,{epptext:r,showEPPPlusSummaryButton:o,ePPPlusSummaryButtonProps:i})},ib=l().memo(ob),cb=({recycleFeeInfo:e})=>{const{assets:t,viewport:a}=z(),r="small"===a,[n,o]=(0,s.useState)(!1);return l().createElement(l().Fragment,null,t.recycleFee,e&&l().createElement(l().Fragment,null," ",l().createElement("button",{id:"recyclefee-help",className:"as-buttonlink icon icon-after icon-pluscircle","aria-label":t.recycleFeesLearnMoreA11y,type:"button",onClick:()=>{o(!0),wl({eVar:fl,feature:"",part:"Recycling",action:"LearnMore"})}},l().createElement("span",Ya(t.learnMore))),l().createElement(is,{visible:n,onClose:()=>o(!1),isFullscreen:r,ariaLabel:"rs-recyclefee-overlayHeading",fixedWidth:!0},l().createElement("div",ur({className:"rs-recyclefee-overlay"},Ya(e))))))},db=({modKey:e})=>{const[t]=Ma(e),{recycleFee:a,recycleFeeHelp:r}=t;return l().createElement(pl,{name:"recycleFee",label:l().createElement(cb,{recycleFeeInfo:r}),value:a})},mb=l().memo(db),ub=({couponAppliedMessage:e,promoMessage:t})=>{const{assets:a}=z();return l().createElement("div",null,l().createElement("div",{"aria-live":"polite",className:"rs-summary-promocodelabel"},e||a.promoCodeApplied),t&&l().createElement("div",{className:"rs-summary-promocodemessage"},t))},pb=({promoSaving:e,showRemovePromoCodeButton:t,removePromoCodeButtonProps:a})=>{const{assets:r}=z();return l().createElement(l().Fragment,null,e&&l().createElement("div",{className:"rs-summary-promocodevalue"},e),t&&l().createElement(ds,a,l().createElement("span",null,r.remove),l().createElement("span",{className:"visuallyhidden"},r.promoEnterLabel)))},gb=({showEditPromoCodeButton:e,editPromoCodeButtonProps:t})=>{const{assets:a}=z();return l().createElement("div",null,l().createElement("span",null,a.promoCodeLabel," "),e&&l().createElement("button",ur({},t,{type:"button"}),l().createElement("span",null,a.promoEnterItNow),l().createElement("span",{className:"icon icon-after icon-chevrondown","aria-hidden":"true"})))},yb=({modKey:e,messages:t,promoApplied:a,couponAppliedMessage:r,promoMessage:n,promoSaving:s,showEditPromoCodeButton:o,editPromoCodeButtonProps:i,showRemovePromoCodeButton:c,removePromoCodeButtonProps:d,cancelMetricsForPromo:m})=>{const{assets:u}=z(),p=Boolean(t.length);return a?l().createElement(pl,{name:"promoCodeSaving",label:l().createElement(ub,{couponAppliedMessage:r,promoMessage:n}),value:l().createElement(pb,{promoSaving:s,showRemovePromoCodeButton:c,removePromoCodeButtonProps:d})}):l().createElement(l().Fragment,null,l().createElement(pl,{name:"promoCode",label:l().createElement(gb,{showEditPromoCodeButton:o,editPromoCodeButtonProps:i})}),l().createElement(uu,{modKey:e,className:"rs-summary-promo-inlineeditor",triggerRef:i.ref,visibleKey:"_editing",textField:{label:u.promoEnterLabel,bindName:"promoCode","data-autom":"bag-promocode-input"},applyButton:{label:u.apply,ally:u.applyPromoCodeA11y,processingText:u.processing,bindName:"applyPromoCode","data-autom":"bag-promocode-apply"},cancelButton:{label:u.cancel,ally:u.cancelPromoCodeA11y,bindName:p?"removePromoCode":void 0,"data-autom":"bag-promocode-cancel",metrics:m}}))},hb=({modKey:e})=>{const{data:t,properties:a}=Ra(`${e}.promoCode`),[r]=Ba(`${e}.promoCode`,"_editing"),n=ja(`${e}.promoCode`,"edit"),s=!r&&n.binding.bindExists,o=ja(`${e}.promoCode`,"removePromoCode"),i=!r&&o.binding.bindExists,{assets:c}=z(),[d]=_a(`${e}.promoCode`),{promoApplied:m,couponAppliedMessage:u,promoMessage:p,promoSaving:g}=t,y={...n.props,id:"rs-summary-enterpromocode",className:"as-buttonlink","aria-label":c.promoEnterLabel,"aria-controls":a.key,"data-autom":"bag-promocode-enteritnow"},h={...o.props,isLoading:a.isLoadingSubmit,hasDefaultClass:!1,className:"as-buttonlink"};return l().createElement(yb,{modKey:a.key,messages:d,promoApplied:m,couponAppliedMessage:u,promoMessage:p,promoSaving:g,showEditPromoCodeButton:s,editPromoCodeButtonProps:y,showRemovePromoCodeButton:i,removePromoCodeButtonProps:h,cancelMetricsForPromo:{eVar:"eVar6",feature:"PromoCode",action:"CancelPromoCode"}})},Eb=l().memo(hb),vb=({showTooltip:e,label:t,isEditing:a,postalCode:r,showGeoLocationDisclaimer:n,showTaxCalc:s,editButtonProps:o})=>{const{assets:i,viewport:c}=z(),d="small"===c,m=r?`${r} ${i.estimatedTaxZipA11y}`:i.taxZipCodeA11y;return l().createElement("div",{className:"rs-summary-tax"},l().createElement("span",{className:"rs-summary-tax-label"},t),e&&l().createElement(Co,{className:"rs-summary-tooltip",labelA11y:i.taxEstimateLabelIconA11y,before:!d,after:d,autoAlign:!0},l().createElement(No,null,i.taxTooltipTitle),l().createElement(So,null,i.taxTooltipContent)),s&&!a&&l().createElement("button",ur({},o,{className:"as-buttonlink icon icon-after icon-chevrondown","aria-label":m,type:"button","data-autom":"enterzipcode-checkoutpage"}),r?l().createElement(l().Fragment,null,r,n&&i.geoLocationDagger):i.taxZipCode))},bb=({modKey:e})=>{const[t]=Ma(e),{tax:a,taxSubLabel:r,bundleTaxSubLabel:n,showTooltip:s=!1}=t,{assets:o}=z(),i=n?`${n}<br/>${r}`:r;return l().createElement(pl,{name:"tax",label:l().createElement(vb,{showTooltip:s,label:o.tax}),value:a,subLabel:i})},fb=l().memo(bb),wb={eVar:"eVar6",feature:"TaxCalculator",action:"CancelZipCode"},Nb=({modKey:e})=>{const{assets:t}=z(),{modExists:a,data:r}=Ra(`${e}.taxCalculator`),{showVatLabel:n,tax:s}=r,[o]=Ba(e,"showTooltip"),[i]=Ma(`${e}.taxCalculator.address`),{showGeoLocationDisclaimer:c,_editing:d}=i,m=K().get(i,"was.postalCode",""),u={...ja(`${e}.taxCalculator.address`,"edit").props,id:"rs-summary-enterzipcode","aria-controls":`${e}.taxCalculator.address`},p=n?t.tax:l().createElement(vb,{showTooltip:o,showTaxCalc:a,label:t.taxEstimateLabel,isEditing:d,postalCode:m,showGeoLocationDisclaimer:c,editButtonProps:u});return l().createElement(l().Fragment,null,l().createElement(pl,{name:"tax",label:p,value:s}),a&&l().createElement(uu,{modKey:`${e}.taxCalculator.address`,className:"rs-summary-enterzipcode",triggerRef:u.ref,visibleKey:al,textField:{label:t.zipCodeLabel,bindName:"postalCode","data-autom":"bag-zipcode-input"},applyButton:{label:t.apply,ally:t.applyZipCodeA11y,processingText:t.processing,bindName:"calculate","data-autom":"bag-zipcode-apply"},cancelButton:{label:t.cancel,ally:t.cancelTaxCalculatorA11y,"data-autom":"bag-zipcode-cancel",metrics:wb}},l().createElement(hu,{isBagApp:!0})))},Sb=l().memo(Nb),Cb=({was:e,pinCodeAddressKey:t,showEditPinCodeAddresButton:a,editPinCodeAddresButtonProps:r,cancelMetricsForZipcode:n})=>{const{assets:s}=z(),o=e&&e.postalCode,i=qa()({"rs-summary-pincode-warm-inline":e.postalCode,"rs-summary-pincode-cold-inline":!e.postalCode});return l().createElement("div",{className:i},l().createElement("h2",{className:"visuallyhidden"},s.pinCodeAvailibilityLabelA11y),o&&l().createElement("div",{className:"rs-summary-pincode"},l().createElement("span",null,`${s.deliveryPostalLabelWarmStart} `),a&&l().createElement("button",ur({},r,{type:"button"}),l().createElement("span",null,e.postalCode),l().createElement("span",{className:"icon icon-after icon-chevrondown","aria-hidden":"true"}))),l().createElement("div",null,!o&&l().createElement("div",{className:"rs-summary-pincode"},s.pinCodeAvailibilityLabel),l().createElement(uu,{modKey:t,className:"rs-summary-pincode-inlineeditor",triggerRef:r.ref,isCollapsible:Boolean(o),visibleKey:"_editing",textField:{label:s.zipCodeLabel,bindName:"postalCode","data-autom":"bag-pincode-input"},applyButton:{label:s.apply,ally:s.applyZipCodeA11y,processingText:s.processing,bindName:"calculate","data-autom":"bag-pincode-apply"},cancelButton:{label:s.cancel,ally:s.cancelZipCodeA11y,"data-autom":"bag-pincode-cancel",metrics:n}},l().createElement(hu,{isBagApp:!0}))))},Tb=({modKey:e})=>{const[t]=Ma(`${e}.pinCodeEligibility.address`),{was:a,_editing:r}=t,n=ja(`${e}.pinCodeEligibility.address`,"edit"),s=!r&&n.binding.bindExists,o=Ra(`${e}.pinCodeEligibility.address`).properties.key,i={...n.props,id:`${o}-enterpincode`,className:"as-buttonlink","data-autom":"bag-pincode-edit-cold","aria-controls":o};return l().createElement(Cb,{was:a,pinCodeAddressKey:o,showEditPinCodeAddresButton:s,editPinCodeAddresButtonProps:i,cancelMetricsForZipcode:{eVar:"eVar6",feature:"Delivery",action:"CancelZipCode"}})},Lb=l().memo(Tb),kb=({messages:e})=>l().createElement("div",{className:"rs-summary-segmentsavings"},e.map((e=>l().createElement("div",{key:e,className:"rs-summary-segmentsavingsmessage"},e)))),Ib=({modKey:e})=>{const[t]=Ba(e,"segmentSavingsMessages",[]);return t.length>0&&l().createElement(kb,{messages:t})},Ab=l().memo(Ib),Pb=({totalLoyaltySavings:e,totalListSavings:t})=>l().createElement("div",{className:"rs-summary-loyaltysavings-message"},l().createElement("div",{className:"rs-summary-value"},l().createElement("p",{className:"rs-total-loyalty-savings"},l().createElement("span",Ya(dn(e,{totalListSavings:t})))))),Db=({modKey:e})=>{const[t]=Ba(e,"totalListSavings"),{assets:a}=z();return l().createElement(Pb,{totalLoyaltySavings:a.totalLoyaltySavings,totalListSavings:t})},Ob=l().memo(Db),xb=({creditInstallmentsContent:e,creditInstallmentTerm:t,creditInstallmentAmount:a})=>l().createElement("div",ur({className:"rs-credit-installments"},Ya(dn(e,{creditInstallmentTerm:t,creditInstallmentAmount:a})))),Rb=({modKey:e})=>{const[t]=Ma(e),{creditInstallmentTerm:a,creditInstallmentAmount:r}=t,{fragments:n}=z();return l().createElement(xb,{creditInstallmentsContent:n.creditInstallments,creditInstallmentTerm:a,creditInstallmentAmount:r})},Fb=l().memo(Rb),Mb=({totalAmountAuthorized:e,tradeinLabel:t,tradeinLabelWithDeposit:a})=>{const{assets:r}=z(),n=a?r.authorizedAmountInfoWithDeposit:r.authorizedAmountInfo;return l().createElement(l().Fragment,null,l().createElement(pl,{name:"totalAmountAuthorized",label:"",value:e}),t&&l().createElement(pl,{name:"totalAmountAuthorized",label:"",value:n}))},Bb=({modKey:e})=>{const[t]=Ma(e),{totalAmountAuthorized:a,tradeinLabel:r,tradeinLabelWithDeposit:n}=t;return l().createElement(Mb,{totalAmountAuthorized:a,tradeinLabel:r,tradeinLabelWithDeposit:n})},_b=l().memo(Bb),$b=({className:e,headerLabel:t,row:a})=>{const r=qa()(e,"row");return l().createElement("div",{className:r},l().createElement("div",{className:"large-12"},t&&l().createElement("div",{className:"rs-summary-subheader"},t),a&&a.map((e=>l().createElement(pl,{key:`amount-${e.name}`,name:e.name,label:e.label,value:e.value,subValue:e.subValue,valuea11y:e.valuea11y||""})))))},Ub=({modKey:e})=>{const[t]=Ba(e,"amountChargedToday"),{headerLabel:a,row:r}=t;return l().createElement($b,{className:"rs-summary-amountchargedtoday",headerLabel:a,row:r})},Kb=l().memo(Ub),Vb=({modKey:e})=>{const[t]=Ba(e,"emiDetails"),{headerLabel:a,row:r}=t;return l().createElement($b,{className:"rs-summary-emidetails",headerLabel:a,row:r})},Hb=l().memo(Vb),jb=({taxLabel:e,taxValue:t,name:a})=>{const r=qa()("rs-tax-section",{"rs-tax-alignleft":"taxLeftAligned"===a});return l().createElement("div",ur({className:r},Ya(dn(e,{taxExclusiveTax:t}))))},Gb=({modKey:e})=>{const[t]=Ba(e,"subTotalExclusiveTax"),{assets:a}=z();return l().createElement(jb,{taxLabel:a.subTotalExclusiveTax,taxValue:t})},Wb=l().memo(Gb),qb=({totalTaxSubValue:e,totalTaxSubLabel:t})=>l().createElement("div",{className:"rs-summary-content"},t&&l().createElement("div",ur({className:"rs-summary-tax-sublabel"},Ya(t))),e&&l().createElement("div",ur({className:"rs-summary-subvalue"},Ya(e)))),Yb=({modKey:e})=>{const[{totalTaxSubValue:t,totalTaxSubLabel:a}]=Ba(e);return l().createElement(qb,{totalTaxSubValue:t,totalTaxSubLabel:a})},zb=l().memo(Yb),Xb=({modKey:e,name:t})=>{const[a]=Ba(e,"taxExclusiveTax"),{assets:r}=z();return l().createElement(jb,{taxLabel:r.taxExclusiveTax,taxValue:a,name:t})},Jb=l().memo(Xb),Zb=({modKey:e})=>{const[t]=Ba(e,"orderTotalExclusiveTax"),{assets:a}=z();return l().createElement(jb,{taxLabel:a.orderTotalExclusiveTax,taxValue:t})},Qb=l().memo(Zb),ef=({totalClassName:e,label:t,total:a,orderInstallmentPriceVal:r})=>{const{assets:n}=z();return l().createElement(l().Fragment,null,l().createElement("div",{className:e},t&&(t&&"string"==typeof t?l().createElement("div",ur({className:"rs-summary-label","data-autom":"bagtotallabel"},Ya(t))):l().createElement("div",{className:"rs-summary-label","data-autom":"bagtotalvalue"},t)),a&&(a&&"string"==typeof a?l().createElement("div",ur({className:"rs-summary-value","data-autom":"bagtotalvalue"},Ya(a))):l().createElement("div",{className:"rs-summary-value","data-autom":"bagtotalvalue"},a))),r&&l().createElement("div",{className:"column large-10 large-last rs-summary-emiinstallmenttotal"},l().createElement("span",{"aria-hidden":"true"},dn(n.orderInstallmentPriceLabel,{orderInstallmentPrice:r})),l().createElement("span",{className:"visuallyhidden","aria-live":"polite"},dn(n.orderInstallmentPriceLabelA11y,{orderInstallmentPrice:r}))))},tf=({modKey:e})=>{const{assets:t}=z(),[a]=Ma(e),{suppressDefaultInstallmentDisplays:r,partnerFinancedInstallments:n,buyFlowInstallmentsFinancing:s,carrierFinancePromoSummary:o,totalAfterTradeIn:i,paymentSubLabel:c,showTotalAfterTradeinAsTotal:d,hasSubscription:m,orderInstallmentPrice:u,total:p,monthlyTotalPricing:g,totalLabel:y,showPayInFullFirst:h}=a,E=qa()("rs-summary-labelandvaluecontainer","rs-summary-total",{"rs-webinstallment-summary-total":s&&!n,"rs-carrierfinance-summary-total":o,"rs-monthlyprice-summary-total":g&&!h,"rs-monthlyprice-summary-total rs-monthlyprice-border":h}),{acShowInstallment:v}=zs();let b;return b=y||(i&&c&&!v?t.tradeInDueTodayLabel:m?t.totalToday:t.total),l().createElement(ef,{totalClassName:E,label:b,total:d?i:p,orderInstallmentPriceVal:r?"":u})},af=l().memo(tf),rf=({cashBackOffersData:e,cashBackHeader:t,cashBackLegalFooter:a})=>l().createElement("div",{className:"rs-cashbackoverlay"},l().createElement("h2",{id:"cashbackOptions",className:"rs-cashbackoverlay-header"},t),l().createElement("div",{className:"rs-cashbackoverlay-options-wrapper"},l().createElement("ul",{className:"rs-cashbackoverlay-options-list row small-12"},e.map((t=>{const a=qa()("rs-cashbackoverlay-options-item column",{"rs-cashbackoverlay-centered-item":1===e.length});return l().createElement("li",{className:a,id:t.id,key:t},l().createElement("div",{className:"rs-cashbackoverlay-option-list"},l().createElement("h3",{className:"rs-cashbackoverlay-option-image"},l().createElement(Fl,{width:t.image.labelImageWidth,height:t.image.labelImageHeight,src:t.image.labelImageUrl,alt:t.image.labelImageAlt,"aria-hidden":"true"}),l().createElement("span",{className:"visuallyhidden rs-cashbackoverlay-imagealt-span"},t.image.labelImageAlt)),l().createElement("p",ur({className:"rs-cashbackoverlay-offermessage-keyline"},Ya(t.offerMessage))),l().createElement("div",ur({className:"rs-cashbackoverlay-offerdetails"},Ya(t.offerDetails.content)))))})))),l().createElement("div",ur({className:"rs-cashbackoverlay-legalfooter"},Ya(a)))),nf=({cashBackOffersData:e,cashBackHeader:t,cashBackLegalFooter:a,isOpen:r,setIsOpen:n})=>{const{viewport:s}=z(),o="small"===s;return l().createElement(is,{visible:r,fixedWidth:!0,noPadding:!0,isFullscreen:o,ariaLabel:"cashbackOptions",footerContent:l().createElement(ao,null),onClose:()=>n(!1)},l().createElement(rf,{cashBackOffersData:e,cashBackHeader:t,cashBackLegalFooter:a}))},sf=({cashBackOverlayLinkButtonProps:e,cashBackOverlayLinkText:t,instantLearnMoreLabel:a})=>l().createElement("div",{className:"rs-cashbackoverlay-link"},l().createElement("button",ur({},e,Ya(t),{type:"button","data-autom":"cashbackoverlay-button","aria-label":a,className:"as-buttonlink"}))),lf=({modKey:e})=>{const{assets:t}=z(),a=ja(e,"cashBackOverlayLink"),r=Ra(`${e}.cashBackOverlay`),[n]=Ba(e,"cashBackOverlayLink"),o=$a(`${e}.cashBackOverlay`),[i,c]=(0,s.useState)(!1),{header:d,legalFooter:m}=r.data,u=o.map((e=>({image:e.data.image,offerMessage:e.data.offerMessage,offerDetails:e.data.offerDetails,id:e.data.id}))),p={...a.props,onClick:()=>{c(!0),a.props.onClick()}},g=n&&t.instantLearnMoreLabel?t.instantLearnMoreLabel:"";return l().createElement(l().Fragment,null,r.modExists&&l().createElement(nf,{cashBackOffersData:u,cashBackHeader:d,cashBackLegalFooter:m,isOpen:i,setIsOpen:c}),l().createElement(sf,{cashBackOverlayLinkButtonProps:p,cashBackOverlayLinkText:n,instantLearnMoreLabel:g}))},of=l().memo(lf),cf=({hasACMessages:e,webApplyButtonProps:t,acMessageBootstrap:a,hideGetDailyCashWithAppleCardText:r,children:n,financeOverlayLinkLeftAlignment:s})=>{const o=qa()("rs-summary-financingmessage-wrapper",{"rs-summary-financingmessage-align-left":s});return l().createElement("div",{className:o},l().createElement("div",{className:"rs-summary-value"},e?l().createElement(vs,{webApplyButtonProps:t,bootstrap:a,shouldHideLinks:r,dataAutom:"rs-financinglink"},n):n))},df=({displayDynamicHeader:e,headerMap:t,noInstallmentsResponse:a,errorText:r,legalFooter:n,tradeInAndInstallments:s})=>{const{assets:o}=z(),i=e?t.compareInstallmentSubHeader:o.installmentInfo;return l().createElement(l().Fragment,null,a?l().createElement("p",{className:"rs-financeoverlay-error"},r):l().createElement(l().Fragment,null,l().createElement("div",null,o.overlayHeader&&l().createElement("p",{className:"rs-finance-overlay-header"},o.overlayHeader),l().createElement("h2",{id:"financingOptions",className:"as-compareplansoverlay-header"},e?t.compareInstallmentHeader:o.compareInstallmentHeader)),i&&l().createElement("div",{className:"as-compareplansoverlay-info"},l().createElement("div",ur({className:"as-compareplansoverlay-subinfo"},Ya(i)))),s,n&&l().createElement("div",ur({className:"as-compareplans-information large-10 small-12 large-centered"},Ya(n)))))},mf=({selectedTab:e,tables:t,showInstallmentsWithTradeinTab:a,columnHeaderLabels:r})=>{const{assets:n}=z(),s=qa()("as-compareplans-wrapper",{"as-l-container-full-small":!a}),o=e||{tabKey:"nontradeinKey"},i=qa()("as-compareplans-bankname as-compareplans-first",{"rs-compareplans-savings-height":t.some((e=>e.savings))}),c=qa()("as-compareplans-data",{"rs-compareplane-paymentpromo-savings-height":t.some((e=>e.termData.some((e=>e.savingsPaymentPromo))))});return l().createElement("div",{className:"as-compareplans-tablewrapper"},l().createElement("div",{className:s,id:`${o.tabKey}-tab`,role:"tabpanel"},l().createElement("table",{className:"as-compareplans-datatable"},l().createElement("caption",{className:"visuallyhidden"},n.paymentCompareFinanceLink||n.compareFinanceLink),l().createElement("thead",{className:"rs-financeoverlay-compare-plan-table-head"},l().createElement("tr",{className:"rs-financeoverlay-compare-plan-table-heading-row"},l().createElement("th",{scope:"col",className:"as-compareplans-heading"},n.partnerHeading),r.map((e=>l().createElement("th",{scope:"col",className:"as-compareplans-heading",key:`financingcolheader-${e}`},e))))),l().createElement("tbody",null,t.map((e=>{const t=e.imageAttributes,a=t&&t.labelImageAlt?t.labelImageAlt:e.issuerName;return l().createElement("tr",{className:"rs-compareplans-issuer-row",key:`financingbankrow-${a}`},l().createElement("td",{className:i},t&&t.labelImageUrl?l().createElement(Fl,{className:"as-compareplans-bankimage",width:t.labelImageWidth,height:t.labelImageHeight,src:t.labelImageUrl,alt:t.labelImageAlt}):e.issuerName,e.savings&&l().createElement("div",{className:"rs-compareplans-savings"},e.savings)),e.termData.map((e=>{let t="tradeInTabText"===o.tabKey?"netmonthly":"monthly";e[t]||"netmonthly"!==t||(t="monthly");const a="tradeInTabText"===o.tabKey&&"monthly"===t&&e[t]&&"-"!==e[t],r=`dataitem-${e.total}-${e.monthly}`;return l().createElement("td",{className:c,key:`financingbankitems-${r}`},l().createElement("div",{className:"rs-financeoverlay-compare-plan-item-asterisk"},a?l().createElement(l().Fragment,null,l().createElement("span",null,e[t]),l().createElement("span",{className:"visuallyhidden"},n.footnoteText),l().createElement("span",null,"*")):e[t]),e.rate&&l().createElement("div",null,e.rate),e.savingsPaymentPromo&&l().createElement("div",{className:"rs-financeoverlay-compare-plan-promo-savings"},e.savingsPaymentPromo),e.apr&&l().createElement("div",null,e.apr))})))}))))))},uf=({tradeInTabHeaderMap:e,tables:t,columnHeaderLabels:a,showInstallmentsWithTradeinTab:r})=>{const[n,o]=(0,s.useState)(1),i=Object.entries(e).map((([e,t])=>({title:t,tabKey:e})));return l().createElement("div",{className:"row rs-tradeintab-container"},l().createElement("div",{className:"column large-12 small-12 large-centered rs-tradeintab-options"},l().createElement(Nd,{count:i.length,index:n,handleChange:o,className:"as-l-container-full-small"},l().createElement(wd,{items:i.map((e=>e.title))})),l().createElement(mf,{tradeInTabHeaderMap:e,selectedTab:i[n],tables:t,showInstallmentsWithTradeinTab:r,columnHeaderLabels:a})))},pf=({cartTotal:e,orderTotalLabel:t,orderTotal:a,columnHeaderLabels:r,tables:n,compareMultipleBanksDropdownProps:s,issuerOptions:o=[],emiTypeOptions:i,emiOptionsRadioProps:c,emiSelectedOption:d,showConsolidatedTerms:m})=>{const{assets:u}=z(),p=i?u.bankLabel:u.selectOne,g=i?u.selectBankLabel:u.selectOneCreditcard,y=qa()("rs-financeoverlay-multiplebanks as-l-container-full-small",{"rs-financeoverlay-multiplebanks-terms":m});return l().createElement("div",{className:y},m&&l().createElement("div",{className:"column large-12 small-12 large-centered rs-emi-table-header"},u.financeOverlayTableHeader),i&&l().createElement("div",{className:"column large-6 small-12 large-centered rs-emi-options"},l().createElement("fieldset",null,l().createElement("div",{className:"as-buttongroup rs-emiOptionsGroup"},i.map(((e,t)=>l().createElement("div",{className:"as-buttongroup-item large-5 rs-emiOption-item",key:e.value},l().createElement("input",ur({},c,{type:"radio",value:e.value,checked:d===e.value,id:`emiOptionType${t}`,name:"emiOptionType",className:"as-buttongroup-radio rs-emiOption-radio"})),l().createElement("label",{htmlFor:`emiOptionType${t}`,className:"as-buttongroup-button large-12  rs-emiOption-button"},l().createElement("span",{className:"rs-emiOption-label"},e.label)))))))),o&&!!o.length&&l().createElement("div",{className:"rs-financeoverlay-dropdowns large-12"},l().createElement(yo,ur({},s,{id:"rs-financeoverlay-issuer",classes:{root:"large-6 small-12 large-centered column"},label:l().createElement("span",{"aria-label":g},p)}),o.map((e=>l().createElement(Eo,{key:e.value,value:e.value},e.label))))),a&&l().createElement("div",{className:"rs-emioverlay-ordertotal large-12 small-12"},l().createElement("span",{className:"rs-emioverlay-ordertotal-label"},t),l().createElement("span",{className:"rs-emioverlay-ordertotal-value"},a)),l().createElement("div",{className:"rs-financeoverlay-table"},e&&l().createElement("div",{className:"rs-financeoverlay-table-header as-l-container-full-small"},u.loanAmount,": ",e),l().createElement("div",{className:"rs-financeoverlay-wrapper"},l().createElement("div",{className:"rs-financeoverlay"},l().createElement("div",{className:"rs-financeoverlay-tableinner"},l().createElement("table",{className:"rs-emioverlay-tablewrapper rs-financeoverlay-comparebanks","aria-labelledby":"financingOptions"},l().createElement("thead",null,l().createElement("tr",{className:"rs-financeoverlay-duration"},r.map((e=>l().createElement("th",{scope:"col",className:"rs-emioverlay-headings",key:`financingcolheader-${e}`},e))))),l().createElement("tbody",null,n.map((e=>l().createElement("tr",{className:"rs-emioverlay-tablerow",key:e.termData[0]?`financingbankrow-${e.termData[0].term}`:"financingbankrow"},e.termData.map((e=>{const t=`dataitem-${e.cost}-${e.total}-${e.rate}-${e.monthly}`;return e.total?l().createElement("td",{className:"rs-financeoverlay-data large-6 small-6",key:`financingbankitems-${t}`},e.noCostEMI&&l().createElement("div",{className:"rs-financeoverlay-nocost-emi"},e.noCostEMI),e.topLabel&&l().createElement("div",{className:"rs-emioverlay-special-offers"},e.topLabel),l().createElement("div",{className:"rs-emioverlay-term"},e.term),l().createElement("div",ur({className:"rs-emioverlay-total large-11 small-12"},Ya(e.total))),i&&e.totalSavings&&l().createElement("div",{className:"rs-emioverlay-totalsavings large-6 small-6"},e.totalSavings)):l().createElement("td",{className:"rs-financeoverlay-data large-6 small-6",key:`financingbankitems-${t}`},l().createElement("div",null,l().createElement("span",{className:"rs-emioverlay-installment"},l().createElement("span",null,e.installmentAmount),e.installmentsa11y&&l().createElement(l().Fragment,null,l().createElement("span",{"aria-hidden":"true"},e.installmentPer),l().createElement("span",{className:"visuallyhidden"},e.installmentsa11y))),e.imageAttributes&&e.imageAttributes.labelImageUrl&&l().createElement(Fl,{className:qa()("rs-compareplans-bankimage",`rs-compareplans-bankimage-${e.imageAttributes.labelImageAlt.toLowerCase()}`),width:e.imageAttributes.labelImageWidth,height:e.imageAttributes.labelImageHeight,src:e.imageAttributes.labelImageUrl,alt:e.imageAttributes.labelImageAlt}),e.term&&l().createElement("span",{className:"rs-emioverlay-nototal-term"},e.term),e.threshold&&l().createElement("span",{className:"rs-emioverlay-threshold"},e.threshold)))}))))))))))))},gf=({tables:e=[],columnHeaderLabels:t,cartTotal:a})=>{const{assets:r}=z();return l().createElement("div",{className:"as-l-container-full-small"},l().createElement("div",{className:"as-compareplans-tablewrapper"},a&&l().createElement("div",{className:"rs-financeoverlay-table-header as-l-container-full-small"},r.loanAmount,": ",a),l().createElement("div",{className:"as-compareplans-wrapper"},l().createElement("div",{className:"rs-financeoverlay-tableinner"},e.map((e=>{const a=e.imageAttributes,n=a&&a.labelImageAlt?a.labelImageAlt:e.issuerName;return l().createElement("div",{className:"rs-financeoverlay-issuer-tablecontent",key:`financingissuercontent-${n}`},l().createElement("table",{className:"rs-financeoverlay-tablewrapper as-compareplans-datatable",key:`financingtable-${n}`},l().createElement("caption",{className:"visuallyhidden"},`${r.compareInstallmentHeader}\n                                            ${e.thresholdText}`),l().createElement("thead",{className:"rs-financeoverlay-table-head"},l().createElement("tr",{className:"rs-financeoverlay-duration"},l().createElement("th",{scope:"col",className:"as-compareplans-heading"},a&&a.labelImageUrl&&l().createElement(Fl,{className:"rs-compareplans-bankimage",width:a.labelImageWidth,height:a.labelImageHeight,src:a.labelImageUrl,alt:a.labelImageAlt})),t.map((e=>l().createElement("th",{scope:"col",className:"as-compareplans-heading",key:`financingcolheader-${e}`},l().createElement("div",{className:"rs-financeoverlay-compareplans-heading-item"},e)))))),l().createElement("tbody",null,l().createElement("tr",{className:"rs-financeoverlay-tablerow"},l().createElement("th",{scope:"row",className:"rs-financeoverlay-sidelabels rs-financeoverlay-first"},l().createElement("span",Ya(e.sideLabels.monthly))),e.termData.map((e=>{const t=`dataitem-${e.cost}-${e.total}-${e.monthly}`;return l().createElement("td",{className:"rs-financeoverlay-data",key:`financingdataitem-${t}`},l().createElement("div",{className:"rs-financeoverlay-compareplans-item-monthly-cost"},e.monthly),e.rate&&l().createElement("div",{className:"rs-financeoverlay-compareplans-item-rate"},e.rate),l().createElement("div",{className:"rs-financeoverlay-compareplans-item-apr"},e.apr))}))),l().createElement("tr",{className:"rs-financeoverlay-tablerow"},l().createElement("th",{scope:"row",className:"rs-financeoverlay-sidelabels rs-financeoverlay-first"},e.sideLabels.cost),e.termData.map((e=>{const t=`dataitem-${e.cost}-${e.total}-${e.monthly}`;return l().createElement("td",{className:"rs-financeoverlay-data",key:`financingdataitem-${t}`},e.cost)}))),l().createElement("tr",{className:"rs-financeoverlay-tablerow"},l().createElement("th",{scope:"row",className:"rs-financeoverlay-sidelabels rs-financeoverlay-first"},e.sideLabels.total),e.termData.map((e=>{const t=`dataitem-${e.cost}-${e.total}-${e.monthly}`;return l().createElement("td",{className:"rs-financeoverlay-data",key:`financingdataitem-${t}`},e.total)}))))),e.thresholdText&&l().createElement("table",{className:"rs-financeoverlay-thresholdtext-table"},l().createElement("tbody",{className:"rs-financeoverlay-thresholdtext-tablebody"},l().createElement("tr",{className:"rs-financeoverlay-thresholdtext-row"},l().createElement("td",{className:"rs-financeoverlay-thresholdtext-cell"},l().createElement("div",{className:"rs-financeoverlay-thresholdtext","aria-hidden":"true"},e.thresholdText))))))}))))))},yf=({rows:e,footnotes:t})=>{const[a,r]=(0,s.useState)([]);return l().createElement("div",{className:"rs-payment-breakdown-wrapper"},l().createElement(sE,{index:a,handleChange:r,rootTag:"div"},e.map((e=>l().createElement(nE,{rootTag:"h3",title:`<span class="typography-eyebrow-reduced rs-payment-breakdown-accordian-title"><span>${e.header}</span> <span>${e.total}</span></span>`,iconAttrs:{"aria-hidden":"true"},classes:{root:"rs-payment-breakdown-accordian-item",button:"rs-payment-breakdown-accordian-header"},key:e.header},Array.isArray(e.rangeGroup)&&e.rangeGroup.map((t=>l().createElement("div",{className:"rs-payment-breakdown-data typography-body",key:`${e.header}-${t.label}`},l().createElement("span",{className:"large-8"},t.label),l().createElement("span",ur({className:"large-last"},Ya(t.value)))))))))),t&&l().createElement("div",{className:"rs-payment-breakdown-footnotes"},t.map((e=>l().createElement("div",ur({key:e,className:"rs-payment-breakdown-footnote"},Ya(e)))))))},hf=({columnHeaderLabels:e,instalmentData:t})=>l().createElement("table",{className:"rs-financeoverlay-comparebanks","aria-labelledby":"financingOptions"},l().createElement("thead",null,l().createElement("tr",{className:"rs-financeoverlay-duration"},e.map((e=>l().createElement("th",ur({scope:"col",className:"rs-emioverlay-headings typography-body-reduced",key:`financingcolheader-${e}`},Ya(e))))))),l().createElement("tbody",null,Object.values(t.tables).map((e=>l().createElement("tr",{className:"rs-emioverlay-tablerow",key:e.termData[0]?`financingbankrow-${e.termData[0].term}`:"financingbankrow"},e.termData.map((e=>{const t=`dataitem-${e.cost}-${e.total}-${e.rate}-${e.monthly}`;return l().createElement("td",{className:"rs-financeoverlay-data large-6 small-6",key:`financingbankitems-${t}`},e.term&&l().createElement("div",{className:"rs-emioverlay-special-offers"},e.term),e.apr&&l().createElement("div",{className:"rs-emioverlay-special-offers"},e.apr),e.installmentFee&&l().createElement("div",{className:"rs-emioverlay-special-offers"},e.installmentFee),e.cancellationFee&&l().createElement("div",{className:"rs-emioverlay-special-offers"},e.cancellationFee))}))))))),Ef=({columnHeaderLabels:e,compareMultipleBanksDropdownProps:t,issuerOptions:a=[],modKey:r})=>{const{assets:n}=z(),s=n.bankLabel,o=n.selectBankLabel,i=qa()("rs-financeoverlay-selectbanks as-l-container-full-small",{}),[c,d]=Ba(r,"issuer"),m=a.filter((e=>c===e.value)).pop(),[u]=Ba(r,`${m.value}`),p={...t,onChange:e=>{d(e.target.value)}};return l().createElement("div",{className:i},n.tableHeader&&l().createElement("div",{className:"rs-financeoverlay-table-header as-l-container-full-small"},n.tableHeader),a&&!!a.length&&l().createElement("div",{className:"rs-financeoverlay-dropdowns large-12"},l().createElement(yo,ur({},p,{id:"rs-financeoverlay-issuer",value:c,classes:{root:"large-6 small-12 large-centered column"},label:l().createElement("span",{"aria-label":o},s)}),a.map((e=>l().createElement(Eo,{key:e.value,value:e.value},e.label))))),l().createElement("div",{className:"rs-financeoverlay-table"},l().createElement("div",{className:"rs-financeoverlay-wrapper"},l().createElement("div",{className:"rs-financeoverlay"},l().createElement("div",{className:"rs-financeoverlay-tableinner"},l().createElement(hf,{columnHeaderLabels:e,instalmentData:u}))))))},vf=({modKey:e})=>{const[t]=Ma(e),a=lr(e,"issuer"),r=sr(e,"emiType"),n=a.props,s=r.props,{displayDynamicHeader:o,headerMap:i,noInstallmentsResponse:c,errorText:d,showInstallmentsWithTradeinTab:m,useInstallmentTableOverlay:u,cartTotal:p,showOnlyMonthlyInstallments:g,legalFooter:y,columnHeaderLabels:h,tables:E,tradeInTabHeaderMap:v,orderTotalLabel:b,orderTotal:f,issuerOptions:w,emiTypeOptions:N,paymentBreakdownTree:S,footnotes:C,showConsolidatedTerms:T,hasIssuerData:L}=t;let k;return k=m?l().createElement(uf,{tradeInTabHeaderMap:v,tables:E,showInstallmentsWithTradeinTab:m,columnHeaderLabels:h}):g?l().createElement(mf,{showInstallmentsWithTradeinTab:m,tables:E,columnHeaderLabels:h}):u&&!L?l().createElement(pf,{cartTotal:p,tables:E,columnHeaderLabels:h,orderTotalLabel:b,orderTotal:f,compareMultipleBanksDropdownProps:n,issuerOptions:w,emiTypeOptions:N,emiOptionsRadioProps:s,emiSelectedOption:r.binding.value,showConsolidatedTerms:T}):S?l().createElement(yf,{rows:S,footnotes:C}):L?l().createElement(Ef,{columnHeaderLabels:h,issuerOptions:w,modKey:e,compareMultipleBanksDropdownProps:n}):l().createElement(gf,{cartTotal:p,columnHeaderLabels:h,tables:E}),l().createElement(df,{displayDynamicHeader:o,headerMap:i,noInstallmentsResponse:c,errorText:d,legalFooter:y,tradeInAndInstallments:k})},bf=l().memo(vf),ff=({monthlyInstallmentsExists:e,financeOverlayLink:t,buttonProps:a,overlayProps:r,financeCalculatorExists:n,useInstallmentTableOverlay:s,modKey:o,financingOverlayLoading:i,showChatLink:c,topBanner:d,isCCITermsMod:m,hasIssuerData:u,buttonID:p,hasZiniaReviewExist:g})=>{const{viewport:y,assets:h,fragments:E}=z(),v="small"===y,b=qa()({"rs-financeoverlay-emioverlay":s,"rs-financeoverlay-monthlyinstallments":e,"rs-financeoverlay-monthlyinstallments-breakdown":!!h.paymentBreakDownInstallmentLink,"rs-financeoverlay-select-banks-dropdown":!!u}),[f,w]=l().useState([]),N=!!t&&l().createElement("button",ur({},a,Ya(t),{type:"button",className:qa()("as-buttonlink rs-financeoverlay-buttonlink icon icon-after icon-pluscircle",{"ribbon-link more":d}),"data-autom":"bag-installments-financing-options",id:p}));return l().createElement(l().Fragment,null,l().createElement(is,ur({},r,{fixedWidth:!0,ariaLabel:"financingOptions",isFullscreen:v,classes:{root:b},footerContent:c?l().createElement(ao,null):"",contentAttrs:{"data-autom":"financeOptionsOverlay"}}),e&&l().createElement("div",{className:"rs-finance-overlay","aria-labelledby":"aprFinanceLearnMoreveOverlayHeading"},l().createElement("div",Ya(dn(E.aprFinancingOverlayContent,{headerId:"aprFinanceLearnMoreveOverlayHeading"})))),n&&l().createElement(bf,{modKey:o}),!c&&e&&l().createElement("div",{className:"rs-acmilearnmore-footnotes"},l().createElement(wi,null),l().createElement("div",null,l().createElement(sE,{rootTag:"div",index:f,handleChange:w,id:"rs-finance-footer",compact:!0},l().createElement(nE,{rootTag:"div",title:h.seeTermsConditions,withPlus:!1,withChevron:!0,role:"listitem",iconAttrs:{"aria-hidden":"true"},classes:{root:"rs-acmilearnmore-footer-item"}},l().createElement("div",Ya(E.aprLearnMoreOverlayNoCardFootnote))))))),!m&&!g&&l().createElement("div",{className:qa()("rs-financeoverlay-link",{"rs-banneroverlay-buttonlink":d})},i?l().createElement("div",{role:"img",className:"waitindicator waitindicator-inline waitindicator16-gray ","aria-label":h.processing}):l().createElement(l().Fragment,null,h.paymentCompareFinanceLinkText&&l().createElement("span",{className:"rs-financeoverlay-link-pretext"},h.paymentCompareFinanceLinkText),N),l().createElement(wr,{isPending:i,messages:{pending:h.processing}})))},wf=({modKey:e,topBanner:t})=>{const{assets:a}=z(),[r]=Ba(e,"showPaymentBreakdownLink"),n=r?`${e}.paymentBreakdownOverlay`:`${e}.financeCalculator`,[o]=Ba(e,"monthlyInstallmentsOptions"),[i]=Ba(e,"momoInstallmentsEnabled"),c=ja(e,"viewFinanceOverlay"),d=c.binding.bindExists,m=ja(e,"viewPaymentBreakdownOverlay"),u=m.binding.bindExists,p=r?m.props:c.props,[g]=cr(n),y=Ra(n),[h]=Ba(e,"financeOverlayLinkText"),[E]=Ba(pu,"partnerFinanceFromBag"),{useInstallmentTableOverlay:v,showChatLink:b,hasIssuerData:f}=y.data,{modExists:w}=Ra("checkout.review.placeOrder.termsAndConditions.cciTerms"),N=o||i,S=p.id?p.id:"rs-financingOptions-overlay",[C,T]=(0,s.useState)(!1),L=d||u,k=Fa("checkout.review.billingReview.ziniaReview"),I=L?{...g,onExited:()=>{g.onExited(),c.props&&c.props.ref.current&&c.props.ref.current.focus()}}:{visible:C,onClose:()=>{T(!1)}},A=L?{...p}:{onClick:()=>{T(!0);Il("Payment")}};return l().createElement(ff,{monthlyInstallmentsExists:N,buttonProps:A,financeOverlayLink:o&&a.aprFinancingSummaryLink||N&&a.momoCCIFinanceLink||r&&!E&&a.paymentBreakdownLabel||t&&a.learnMore||h||a.compareFinanceLink||L&&a.paymentCompareFinanceLink,overlayProps:I,financeCalculatorExists:y.modExists,modKey:n,useInstallmentTableOverlay:v,showChatLink:b,financingOverlayLoading:c.binding.properties.isLoadingSubmit,topBanner:t,isCCITermsMod:w,hasIssuerData:f,buttonID:S,hasZiniaReviewExist:k})},Nf=l().memo(wf),Sf=({bagSeasonalMessage:e,bagInstallmentRestrictionMessage:t,financingMessage:a,loanOffer:r,installmentSummary:n,enableFinancingCalculatorLink:s,financeCalculatorModKey:o,momoInstallmentsEnabled:i})=>{const c=s&&!i;return l().createElement(l().Fragment,null,e&&l().createElement("p",Ya(e)),t&&l().createElement("p",Ya(t)),a&&l().createElement("div",{className:"large-12 rs-summary-financingmessage"},l().createElement("p",ur({className:"large-8 small-12"},Ya(a)))),r&&l().createElement("p",Ya(r)),n&&l().createElement("p",Ya(n)),c&&l().createElement(Nf,{modKey:o}))},{NOT_SAFARI:Cf,OLD_DEVICE:Tf,OLD_SAFARI:Lf,NIL:kf,UNSUPPORTED:If}=window.acStoreApplePaySetup.AppleCardState,Af=[Cf,Tf,Lf,kf,If],Pf=({modKey:e,showFinancingMessages:t,hideGetDailyCashWithAppleCardText:a})=>{const[r]=Ma(e),n=Fa(`${e}.webApplyRedirect`),s=`${e}.webApply`,{data:{applyLabel:o},properties:{isLoadingSubmit:i}}=Ra(s),{fragments:{bagSeasonalMessage:c,bagInstallmentRestrictionMessage:d}}=z(),{financingMessage:m,buyflowMessages:u,showInstallmentMessage:p,showDynamicFinancing:g,creditOffer:y,loanOffer:h,installmentSummary:E,enableFinancingCalculatorLink:v,showPaymentBreakdownLink:b,financeOverlayLinkLeftAlignment:f,momoInstallmentsEnabled:w}=r,N=ja(s,"apply");K().get(u,"messages.additionalData.namedAssets",{}).isBFIEnabled=u&&u.isBFIEnabled;const S={hasACMessages:Boolean(t&&u),hideGetDailyCashWithAppleCardText:a,financeOverlayLinkLeftAlignment:f,webApplyButtonProps:{...N.props,isLoading:i||n,label:o,role:"link"},acMessageBootstrap:{...u,isBag:!0,bagWebApplyStates:Af}};return l().createElement(cf,S,l().createElement(Sf,{bagSeasonalMessage:c,installmentSummary:E,financingMessage:t?m:"",loanOffer:g&&y?h:"",bagInstallmentRestrictionMessage:p?d:"",enableFinancingCalculatorLink:v||b,financeCalculatorModKey:e,momoInstallmentsEnabled:w}))},Df=l().memo(Pf),{isMobileIos:Of}=A(),xf=({summaryData:e,financingOptionsModkey:t,financeCalculatorExists:a,financingOptionsLinkProps:r,financingOverlayLoading:n,financeOverlayProps:o,isFinanceBindExists:i,hasIssuerData:c,showChatLink:d})=>{const[m,u]=(0,s.useState)(!1),{assets:p,fragments:g,viewport:y}=z(),h="small"===y,E=i?{...r}:{onClick:()=>{if(u(!0),e.showPayInFullFirst){Il("Bag")}}},v=i?{...o,onExited:()=>{o.onExited(),r&&r.ref.current&&r.ref.current.focus()}}:null,[b,f]=l().useState([]),w=Of?e.iosURL:e.androidURL,N=qa()("rs-summary-financing-wrapper",{"rs-summary-label":e.showPayInFullFirst&&!e.monthlyTotalPricing,"rs-summary-value":!e.showPayInFullFirst||e.showPayInFullFirst&&e.monthlyTotalPricing}),S=p.aprFinancingSummaryLink||p.momoCCIFinanceLink,C=qa()("rs-installment-overlay",{"rs-financeoverlay-select-banks-dropdown":!!c});return l().createElement("div",{className:N},S&&l().createElement(l().Fragment,null,n?l().createElement("div",{role:"img",className:"waitindicator waitindicator-inline waitindicator16-gray ","aria-label":p.processing}):l().createElement("button",ur({type:"button",className:"as-buttonlink rs-summary-financing-link"},E,{id:r.id}),l().createElement("span",ur({"aria-hidden":"true"},Ya(S))),l().createElement("span",ur({className:"visuallyhidden"},Ya(S))))),l().createElement(is,ur({noPadding:!0,visible:m,onClose:()=>u(!1),isFullscreen:h,className:C,fixedWidth:!0,ariaLabel:"aprFinanceLearnMoreveOverlayHeading"},v,{footerContent:d?l().createElement(ao,null):""}),e.partnerFinancedInstallments&&l().createElement("div",{className:"rs-acmilearnmore-overlay"},l().createElement("div",Ya(dn(g.aprFinancingOverlayContent,{headerId:"aprFinanceLearnMoreveOverlayHeading",appUrl:w}))),a&&l().createElement(bf,{modKey:t}),!d&&l().createElement("div",{className:"rs-acmilearnmore-footnotes"},l().createElement(wi,null),l().createElement("div",null,l().createElement(sE,{rootTag:"div",index:b,handleChange:f,id:"rs-finance-footer",compact:!0},l().createElement(nE,{rootTag:"div",title:p.seeTermsConditions,withPlus:!1,withChevron:!0,role:"listitem",iconAttrs:{"aria-hidden":"true"},classes:{root:"rs-acmilearnmore-footer-item"}},l().createElement("div",Ya(g.aprLearnMoreOverlayNoCardFootnote)))))))))},Rf=({modKey:e})=>{const[t]=Ma(e),a=`${e}.financeCalculator`,r=Ra(a),n=ja(e,"viewFinanceOverlay"),[s]=cr(a),{bindExists:o}=Ka(e,"viewFinanceOverlay"),{hasIssuerData:i,showChatLink:c}=r.data;return l().createElement(xf,{summaryData:t,financingOptionsModkey:a,financeCalculatorExists:r.modExists,financingOptionsLinkProps:n.props,financingOverlayLoading:n.binding.properties.isLoadingSubmit,financeOverlayProps:s,isFinanceBindExists:o,hasIssuerData:i,showChatLink:c})},Ff=l().memo(Rf),Mf=()=>{const{assets:e}=z();return l().createElement("li",ur({className:"rs-summary-onetimecharge"},Ya(e.oneTimeCharge)))},Bf=({monthlyTotalPricing:e,monthlyTotalPricingLabel:t,monthlyLabelDescription:a,orKeyWord:r,downPaymentDue:n,showPayInFullFirst:s,momoInstallmentsEnabled:o,mixedTradeInMonthlyInstallmentAmount:i,mixedTradeInPayMonthlyLabel:c,mixedTradeInDiscountText:d,mixedTradeInConsumptionTax:m,mixedTradeInTotal:u,hasMixedTerms:p,mixedTradeInShippingNonFinancedText:g,mixedTradeInPaymentsTermText:y})=>{const{assets:h}=z(),E=t||c,v=e||i;return l().createElement("div",{className:"rs-summary-monthlyinstallment-price-section"},s&&l().createElement("div",{className:qa()("rs-summary-label",{"rs-summary-or-label":e||t})},r),l().createElement("div",{className:qa()("rs-summary-labelandvaluecontainer rs-summary-total",{"rs-pricingsummary-noborder":s})},E&&(t&&"string"==typeof t?l().createElement("div",ur({className:"rs-summary-label","data-autom":"bagtotallabel"},Ya(t))):l().createElement("div",{className:"rs-summary-label","data-autom":"bagtotalvalue"},E)),v&&(e&&"string"==typeof e?l().createElement("div",ur({className:"rs-summary-value","data-autom":"bagtotalvalue"},Ya(e))):l().createElement("div",ur({className:"rs-summary-value","data-autom":"bagtotalvalue"},Ya(v))))),l().createElement("div",ur({className:"rs-summary-label rs-summary-monthly-desc"},Ya(a))),s&&l().createElement("div",{className:"rs-summary-monthlyinstallment-details"},n&&n.map((({label:e,value:t})=>l().createElement(l().Fragment,null,l().createElement(pl,{key:`interest-${e}-${t}`,name:"interest",label:e}),l().createElement(pl,{key:`downpaymentdue-${e}-${t}`,name:"downpaymentdue",value:t})))),!e&&o&&l().createElement("div",{className:"rs-summary-label"},h.choosePreferredTerms)),!s&&!c&&l().createElement("div",{className:"rs-summary-label rs-summary-or-label"},r),p&&l().createElement(pl,{classes:"rs-mixed-terms-row",name:"mixedTradeInDiscount",label:u,value:m}),!p&&d&&l().createElement(pl,{name:"mixedTradeInDiscount",label:d,value:u}),!p&&m&&l().createElement(pl,{name:"mixedTradeInConsumptionTax",value:m}),(g||y)&&l().createElement("div",{className:"rs-summary-label"},p?y:g),p&&l().createElement("div",{className:"rs-summary-label"},d," ",g))},_f=({modKey:e})=>{const[t]=Ma(e),{monthlyTotalPricing:a,monthlyTotalPricingLabel:r,monthlyLabelDescription:n,downPaymentDue:s,showPayInFullFirst:o,momoInstallmentsEnabled:i,mixedTradeInMonthlyInstallmentAmount:c,mixedTradeInPayMonthlyLabel:d,mixedTradeInDiscountText:m,mixedTradeInConsumptionTax:u,mixedTradeInTotal:p,hasMixedTerms:g,mixedTradeInShippingNonFinancedText:y,mixedTradeInPaymentsTermText:h}=t,{assets:E}=z();return l().createElement(Bf,{monthlyTotalPricing:a,monthlyTotalPricingLabel:r,monthlyLabelDescription:n,orKeyWord:E.orKeyWord,downPaymentDue:s,showPayInFullFirst:o,momoInstallmentsEnabled:i,mixedTradeInMonthlyInstallmentAmount:c,mixedTradeInPayMonthlyLabel:d,mixedTradeInDiscountText:m,mixedTradeInConsumptionTax:u,mixedTradeInTotal:p,hasMixedTerms:g,mixedTradeInShippingNonFinancedText:y,mixedTradeInPaymentsTermText:h})},$f=l().memo(_f),Uf=({showTooltip:e,stateDeliveryFee:t})=>{const{assets:a,viewport:r}=z(),n="small"===r;return l().createElement("div",null,l().createElement("span",{className:"rs-summary-statedeliveryfee-label"},a.stateDeliveryFeeLabel),e&&l().createElement(Co,{className:"rs-summary-tooltip",labelA11y:a.stateDeliveryFeeLabelIconA11y,before:!n,after:n,autoAlign:!0},l().createElement(So,null,dn(a.stateDeliveryFeeInfo,{stateDeliveryFee:t}))))},Kf=({modKey:e})=>{const[t]=Ba(e,"stateDeliveryFee"),[a]=Ba(e,"showTooltip");return l().createElement(pl,{name:"stateDeliveryFee",label:l().createElement(Uf,{showTooltip:a,stateDeliveryFee:t}),value:t})},Vf=l().memo(Kf),Hf=({modKey:e,field:t,showFinancingMessages:a,hideGetDailyCashWithAppleCardText:r})=>{const{showField:n,type:s}=t;if(!n)return null;switch(s){case"summaryRow":return l().createElement(pl,{name:t.name,label:t.label,value:t.value});case"ePPPlusSummary":return l().createElement(ib,{modKey:e});case"promoCodeRow":return l().createElement(Eb,{modKey:e});case"recycleFee":return l().createElement(mb,{modKey:e});case"taxReview":return l().createElement(fb,{modKey:e});case"taxWithTaxCalculator":return l().createElement(Sb,{modKey:e});case"pinCodeEligibility":return l().createElement(Lb,{modKey:e});case"totalListSavings":return l().createElement(Ob,{modKey:e});case"segmentSavings":return l().createElement(Ab,{modKey:e});case"creditInstallmentAmount":return l().createElement(Fb,{modKey:e});case"totalAmountAuthorizedRow":return l().createElement(_b,{modKey:e});case"amountChargedToday":return l().createElement(Kb,{modKey:e});case"emiDetails":return l().createElement(Hb,{modKey:e});case"subTotalExclusiveTax":return l().createElement(Wb,{modKey:e});case"totalTaxSubValue":return l().createElement(zb,{modKey:e});case"showTaxInclusivePrices":return l().createElement(Jb,{modKey:e,name:t.name});case"orderTotalExclusiveTax":return l().createElement(Qb,{modKey:e});case"totalAmountRow":return l().createElement(af,{modKey:e});case"monthlyInstallmentsRow":return l().createElement($f,{modKey:e});case"financingMessagesMarkup":return l().createElement(Df,{modKey:e,showFinancingMessages:a,hideGetDailyCashWithAppleCardText:r});case"cashbackMessagesMarkup":return l().createElement(of,{modKey:Is});case"partnerFinancedInstallmentsMarkup":return l().createElement(Ff,{modKey:e});case"oneTimeChargeLabel":return l().createElement(Mf,{modKey:e});case"stateDeliveryFeeDetails":return l().createElement(Vf,{modKey:e});default:return null}},jf=({name:e,label:t,value:a,subValue:r,subLabel:n,labelRed:s,labela11y:o,valuea11y:i,index:c,useLedgerSummary:d})=>{const m=e&&`rs-summary-${e.toLowerCase()}`,u=`bag${m}labelitem${c}`,p=`bag${m}valueitem${c}`,g=`bag${m}sublabelitem${c}`,y=`bag${m}subvalueitem${c}`,h=`bag${m}labelReditem${c}`,E=t&&"string"==typeof t,v=a&&"string"==typeof a,b=r&&"string"==typeof r,f=n&&"string"==typeof n,w=s&&"string"==typeof s,N=Array.isArray(s)?s.map((e=>l().createElement("div",ur({key:e,className:"rs-summary-labelred-item"},Ya(e))))):s,S=qa()("rs-summary-content",m);return l().createElement("li",{className:S,role:"listitem"},l().createElement("div",{className:"rs-summary-labelandvaluecontainer"},t&&(E?l().createElement("div",{className:"rs-summary-label","data-autom":u},l().createElement("span",ur({role:"text","aria-label":o||t},Ya(t)))):l().createElement("div",{className:"rs-summary-label","data-autom":u},t))||null,a&&(v?i&&l().createElement("div",{className:"rs-summary-value","data-autom":p},l().createElement("span",ur({role:"text","aria-label":i},Ya(a))))||l().createElement("div",ur({className:"rs-summary-value","data-autom":p},Ya(a))):l().createElement("div",{className:"rs-summary-value","data-autom":p},a))||null),n&&(f?l().createElement("div",ur({className:qa()("rs-summary-sublabel",{"rs-review-monthly-installment":d}),"data-autom":g},Ya(n))):l().createElement("div",{className:qa()("rs-summary-sublabel",{"rs-review-monthly-installment":d}),"data-autom":g},n))||null,r&&(b?l().createElement("div",ur({className:"rs-summary-subvalue large-last large-6 small-12","data-autom":y},Ya(r))):l().createElement("div",{className:"rs-summary-subvalue large-last large-6 small-12","data-autom":y},r))||null,s&&(w?l().createElement("div",ur({className:"rs-summary-labelred","data-autom":h},Ya(s))):l().createElement("div",{className:"rs-summary-labelred","data-autom":h},N))||null)},Gf=({showBreakdownLink:e,headerLabel:t,paymentHeader:a,classes:r,installmentHeaderLabel:n,installmentRow:s,hasFlexibleTradeIn:o,useLedgerSummary:i,paymentBreakdownProps:c})=>{const{assets:d}=z(),m=a?"column large-9 small-12":r,u=qa()("row rs-webinstallment-summary",{"rs-webinstallment-payment-breakdown":!!c&&e});return l().createElement("div",{className:u},a&&l().createElement("div",{className:`column large-3 small-12 rs-webinstallment-payment-header ${nd.LABEL}`},a),l().createElement("div",{className:m},l().createElement("h3",{className:"rs-webinstallment-summary-subheader","data-autom":"bagrs-installmentsummary-subheader"},n),l().createElement("ul",{className:"rs-webinstallment-summary-list","aria-label":d.productsLabel,role:"list"},s&&s.map(((e,t)=>("productDetails"===e.name||"promoSpecialSavings"===e.name)&&l().createElement(jf,{key:e.label,name:e.name,label:e.label,subLabel:e.subLabel,labelRed:e.labelRed,value:e.value,subValue:e.subValue,labela11y:e.labela11y,valuea11y:e.valuea11y||"",index:t,useLedgerSummary:i})))),s&&s.map((t=>{let a,r;return e&&"total"===t.name&&c&&(r="rs-webinstallment-payment-breakdown-link-container",a=l().createElement("div",{className:"typography-body-reduced"},l().createElement("button",ur({},c,{type:"button",className:"rs-webinstallment-payment-breakdown-link as-buttonlink icon icon-after icon-pluscircle"}),d.paymentBreakdownLabel))),"productDetails"!==t.name&&"promoSpecialSavings"!==t.name&&l().createElement(pl,{classes:r,key:t.name,name:t.name,label:t.label,subLabel:t.subLabel,labelRed:t.labelRed,value:a||t.value,subValue:t.subValue,monthlyValue:t.monthlyValue,valuea11y:t.valuea11y||"",useLedgerSummary:i})})),t&&!o&&l().createElement("h3",{className:"rs-webinstallment-summary-subheader","data-autom":"bagrs-installmentsummary-subheader"},t)))},Wf=({modKey:e,headerLabel:t,paymentHeader:a,classes:r})=>{const[n]=Ma(e),[s]=Ma(pu),o=ja(e,"viewPaymentBreakdownOverlay"),{buyFlowInstallmentsFinancing:i,installmentsFinancing:c,hasFlexibleTradeIn:d,paidOverTimeLedger:m,paidTodayLedger:u,useLedgerSummary:p}=n,{partnerFinanceFromBag:g}=s,y=[];return m&&y.push(m),u&&y.push(u),i&&y.push(i),c&&y.push(c),y.map((e=>l().createElement(Gf,{key:e,showBreakdownLink:g,headerLabel:t,paymentHeader:a,classes:r,hasFlexibleTradeIn:d,installmentHeaderLabel:e.headerLabel,installmentRow:e.row,useLedgerSummary:p,paymentBreakdownProps:o.binding.bindExists&&o.props})))},qf=l().memo(Wf),Yf=({fullPriceHeader:e,fullPriceRow:t,summaryData:a,classes:r})=>{const{assets:n}=z(),s=qa()("rs-webinstallment-summary-subheader",{"rs-pricingsummary-noborder":t&&0===t.length&&!a.shipping&&a.showTaxInclusivePrices});return l().createElement("div",{className:r},l().createElement("h3",{className:s,"data-autom":"rs-fullprice-header"},e),l().createElement("ul",{className:"rs-webinstallment-summary-list","aria-label":n.productsLabel,role:"list"},t&&t.map((e=>l().createElement("li",{key:`fullprice-${e.name}`},l().createElement(pl,{name:e.name,label:e.label,labelRed:e.labelRed,value:e.value}))))))},zf=({modKey:e,classes:t})=>{const[a]=Ma(e),[r]=Ba(e,"fullPriceProducts"),{headerLabel:n,row:s}=r;return l().createElement(Yf,{fullPriceHeader:n,fullPriceRow:s,summaryData:a,classes:t})},Xf=l().memo(zf),Jf=({oneTimeItems:e,oneTimeTotal:t,monthlyItems:a,monthlyTotal:r,totalDisclaimer:n})=>{const{assets:s}=z();return l().createElement("div",{className:"rs-bundle-summary"},e&&l().createElement("div",{className:"rs-bundle-summary-init"},l().createElement("h3",{className:"rs-bundle-summary-subheader"},s.oneTimeChargeLabel),e.map((e=>l().createElement(pl,{key:e.label,name:e.name,label:e.label,subLabel:e.subLabel,labelRed:e.labelRed,value:e.value,subValue:e.subValue,valuea11y:e.valuea11y||""}))),l().createElement(pl,{name:"total",label:s.total,value:t,key:"one-time-total"})),a&&l().createElement("div",{className:"rs-bundle-summary-monthly"},l().createElement("h3",{className:"rs-bundle-summary-subheader"},s.monthlyBundleLabel),a.map((e=>l().createElement(pl,{key:e.label,name:e.name,label:e.label,subLabel:e.subLabel,labelRed:e.labelRed,value:e.value,subValue:e.subValue,valuea11y:e.valuea11y||""}))),l().createElement(pl,{name:"total",label:s.total,value:r,subLabel:n,key:"monthly-total"})))},Zf=({modKey:e})=>{const[t]=Ma(e),{oneTimeSummary:a,monthlySummary:r,totalDisclaimer:n,appleAccountBalance:s,appleAccountBalanceDisclaimer:o}=t,{items:i,total:c}=a||{},{items:d,total:m}=r||{};return l().createElement(Jf,{oneTimeItems:i,oneTimeTotal:c,monthlyItems:d,monthlyTotal:m,totalDisclaimer:n,appleAccountBalance:s,appleAccountBalanceDisclaimer:o})},Qf=l().memo(Zf),ew=({modKey:e,classes:t,isAcmi:a,supplementalInfo:r,showFinancingMessages:n=!0,cashBackSuperscript:s,noOffset:o,hideGetDailyCashWithAppleCardText:i=!1})=>{const{assets:c,viewport:d}=z(),[m]=Ma(e),[u]=Ma(Ps),[p]=Ma(Ls),g=Fa(`${e}.taxCalculator`),y=Fa(`${e}.promoCode`),h=Fa(`${e}.pinCodeEligibility`),[E]=Ba(`${e}.promoCode`,"hidePromoModule"),[v]=Ba(Ds,"placements"),b=v&&v.summary,{buyFlowInstallmentsFinancing:f,installmentsFinancing:w,carrierFinancePromoSummary:N,fullPriceProducts:S,monthlySummary:C,iUPOrInstallments:T,headerLabel:L,paymentLabel:k,installmentsHeader:I,useLedgerSummary:A}=m,[P]=Ba(`${e}.ePPPlusSummary`,"epptext"),D=Boolean(f||w||A),O=Boolean(C),x=qa()(t,{"large-9 large-offset-3 small-12 small-offset-0":!o},{"rs-summary-noline-height":f},{"rs-summary-paidovertimeledger":A}),R=qa()({"rs-summary-webinstallment":f,"rs-webinstallment-summary-acmi":f&&a,"rs-webinstallment-summary-buyflow":f&&!a,"rs-summary-partner-financing":f&&!I,"rs-webinstallment-summary-digitalfinancing":f&&I}),{acShowInstallment:F}=zs(),M=F&&u.displayInStack&&!f&&"small"===d?u.monthlyInstallment:"",B={acShowInstallment:F,shipping:m.shipping,epptext:P,subtotal:m.subtotal,instantCredit:m.instantCredit,amountChargedToday:m.amountChargedToday,instantCashback:m.instantCashback,emiDetails:m.emiDetails,loyaltyPointsAmount:m.loyaltyPointsAmount,downPayment:m.downPayment,paymentFullDiscount:m.paymentFullDiscount,tax:m.tax,appleBalanceApplied:m.appleBalanceApplied,totalGCsApplied:m.totalGCsApplied,noOfGiftCards:m.noOfGiftCards,taxCalculatorEnabled:m.taxCalculatorEnabled,hasTaxCalculator:g,recycleFee:m.recycleFee,fees:m.fees,hasPromoCode:y,hidePromoModule:E,upgrade:m.upgrade,installmentTerm:m.installmentTerm,installmentAmount:m.installmentAmount,total:m.total,buyFlowInstallmentsCashBackLabel:m.buyFlowInstallmentsCashBackLabel,tradeInRefund:m.tradeInRefund,savingsLabel:m.savingsLabel,totalAfterTradeIn:m.totalAfterTradeIn,totalAfterInstantTradeIn:m.totalAfterInstantTradeIn,paymentSubLabel:m.paymentSubLabel,showTotalAfterTradeinAsTotal:m.showTotalAfterTradeinAsTotal,showTaxInclusivePrices:m.showTaxInclusivePrices,taxExclusiveTax:m.taxExclusiveTax,creditInstallmentAmount:m.creditInstallmentAmount,totalSavings:m.totalSavings,totalSavingsInclusiveTax:m.totalSavingsInclusiveTax,totalListSavings:m.totalListSavings,segmentSavingsMessages:m.segmentSavingsMessages,financingMessage:m.financingMessage,enableFinancingCalculatorLink:m.enableFinancingCalculatorLink,financeOverlayLinkLeftAlignment:m.financeOverlayLinkLeftAlignment,paymentBreakdown:m.showPaymentBreakdownLink,buyflowMessages:m.buyflowMessages,installmentSummary:m.installmentSummary,cashBackOverlayLink:m.cashBackOverlayLink,hasPinCodeEligibility:h,cashBackSuperscript:s,monthlyTotal:m.monthlyTotal,partnerFinancedInstallments:m.partnerFinancedInstallments,hasFlexibleTradeIn:m.hasFlexibleTradeIn,tradeInCredit:m.tradeInCredit,outstandingLoan:m.outstandingLoan,iUPOrInstallments:m.iUPOrInstallments,paymentDetails:m.paymentDetails,totalTaxSubValue:m.totalTaxSubValue,totalTaxSubLabel:m.totalTaxSubLabel,acmiMonthlyPayment:M,acmiPayTextEnabled:u.acmiPayTextEnabled,assets:c,monthlyTotalPricing:m.monthlyTotalPricing,monthlyTotalPricingLabel:m.monthlyTotalPricingLabel,mixedTradeInMonthlyInstallmentAmount:m.mixedTradeInMonthlyInstallmentAmount,iupEstCredit:m.iupEstCredit,iupEstAfterCredit:m.iupEstAfterCredit,showPayInFullFirst:m.showPayInFullFirst,totalSavingsWithCard:m.totalSavingsWithCard,stateDeliveryFee:m.stateDeliveryFee,displayNetOfAllSavings:m.displayNetOfAllSavings,hasPartnerFinance:p.isPartnerFinancingSelectionDisabled,hideVatText:!!m.mixedTradeInConsumptionTax},_={orderTotal:m.orderTotal,subtotal:m.subtotal,installmentSubTotal:m.installmentSubTotal,subTotalExclusiveTax:m.subTotalExclusiveTax,tradeInValue:m.tradeInValue,installmentTotal:m.installmentTotal,orderTotalExclusiveTax:m.orderTotalExclusiveTax,installmentTotalFinanced:m.installmentTotalFinanced,downPayment:m.downPayment,shipping:m.shipping,tradeinCreditSecured:m.tradeinCreditSecured,tax:m.tax,hasTaxCalculator:g,recycleFee:m.recycleFee,fees:m.fees,hasPromoCode:y,hidePromoModule:E,installmentsremainingpayments:m.installmentsremainingpayments,firstInstallmentAmount:m.firstInstallmentAmount,upgrade:m.upgrade,totalCardCharge:m.totalCardCharge,amountAuthorized:m.amountAuthorized,totalAmountAuthorized:m.totalAmountAuthorized,psd2Enabled:m.psd2Enabled,financingMessage:m.financingMessage,enableFinancingCalculatorLink:m.enableFinancingCalculatorLink,buyflowMessages:m.buyflowMessages,installmentSummary:m.installmentSummary,cashBackOverlayLink:m.cashBackOverlayLink,tradeInCredit:m.tradeInCredit,iUPOrInstallments:m.iUPOrInstallments,hasFlexibleTradeIn:m.hasFlexibleTradeIn,outstandingLoan:m.outstandingLoan,tradeInType:m.tradeInType,stateDeliveryFee:m.stateDeliveryFee,assets:c},$=Jv(B),U=Zv(_),K=O?l().createElement(Qf,{modKey:e}):$.map((t=>l().createElement(Hf,{key:`summary-${t.name||t.type}`,modKey:e,field:t,showFinancingMessages:n,hideGetDailyCashWithAppleCardText:i}))),V=U.map((t=>l().createElement(Hf,{key:`iUP-summary-${t.name||t.type}`,modKey:e,field:t,showFinancingMessages:n,hideGetDailyCashWithAppleCardText:i})));return l().createElement(sb,{summaryClasses:x,wrapperClass:R,webInstallmentSummary:D&&l().createElement(qf,{modKey:e,headerLabel:L,paymentHeader:k,classes:x}),fullPriceProductSummary:Boolean(S)&&l().createElement(Xf,{modKey:e,classes:x}),hasCarrierFinancePromoSummary:Boolean(N),hasIUPOrInstallments:Boolean(T),summaryModKey:e,supplementalInfo:r,summaryField:K,iUpSummaryField:V,showFinancingMessages:n,xMerchSummary:b})},tw=l().memo(ew),aw=({footnotes:e=[]})=>{const{assets:t}=z(),a=e.join(""),r=document.getElementById("footnotes-portal")||document.querySelector("footer");return r&&(0,pr.createPortal)(l().createElement("ul",ur({"aria-label":t.footnotesA11y,role:"list"},Ya(a))),r)},rw=({modKey:e,buyFlowInstallments:t=!1,paymentsBuyFlowInstallments:a=!1,buyflowMessageFootNote:r=!1,webapplyLoan:n=!1,hasAcmiPaymentOption:s=!1,appleCardApply:o=!1,returnToShopForAcmi:i=!1,acmiSelected:c=!1,partnerFinancedInstallment:d=!1,acmiCheckout:m=!1,acmiFromBag:u=!1,partnerFinanceFromBag:p=!1,thankYouacmiSelected:g=!1,hasTradeIn:y=!1,webapplyInstallmentsFootnote:h=!1,webapplyInstallmentsApprovedFootnote:E=!1,hasTradeinTopics:v=!1,hasMonthlyPricing:b=!1,getReadyAcmi:f=!1,verificationFootnote:w})=>{const[N]=Ma(e),{assets:S,fragments:C}=z(),T=K().get(N,"carrierFinancePromo.carrierId","").toUpperCase(),L=`carrierFinanceFootNote_${T}`,k=`carrierPromoTaxDisclaimer_${T}`,{acShowInstallment:I}=zs(),A=N.bugattiTradeInFootNotes&&Array.isArray(N.bugattiTradeInFootNotes),P=N.financingMessageEnabled&&ql,D=[];return P&&C.financeFootnote&&D.push(`<li class="as-footnotes-finance" role="listitem">${C.financeFootnote}</li>`),C.webapplyLegacyACCFooter&&D.push(`<li role="listitem">${C.webapplyLegacyACC}</li>`),n&&C.webapplyLoan&&D.push(`<li role="listitem">${C.webapplyLoan}</li>`),r&&C.buyflowMessageFootNote&&D.push(`<li role="listitem">${C.buyflowMessageFootNote}</li>`),C.bagGenericFootNote&&D.push(`<li role="listitem">${C.bagGenericFootNote}</li>`),C.checkoutGenericFootNote&&D.push(`<li role="listitem">${C.checkoutGenericFootNote}</li>`),a&&C.paymentsBuyFlowInstallments&&D.push(`<li role="listitem">${C.paymentsBuyFlowInstallments}</li>`),(t||p)&&C.buyFlowInstallmentsFootnotes&&D.push(`<li role="listitem">${C.buyFlowInstallmentsFootnotes}</li>`),!A&&N.carrierFinanceNoPromo&&C.carrierFinanceNoPromoFootNote&&D.push(`<li role="listitem">${dn(C.carrierFinanceNoPromoFootNote,{carrierName:N.carrierFinanceNoPromo.carrierName,monthlyPayments:N.carrierFinanceNoPromo.monthlyPayments,tradeInProductName:N.carrierFinanceNoPromo.tradeInProductName,productName:N.carrierFinanceNoPromo.productName,superScript:N.carrierFinanceNoPromo.superScript,apr:N.carrierFinanceNoPromo.apr})}</li>`),o&&C.appleCardApplyFootnote&&D.push(`<li role="listitem">${C.appleCardApplyFootnote}</li>`),!N.tradeInDisclaimerEnabled&&(I||u||d||f)&&(c||f||!C.acmiBagFootnote?(c||f)&&C.acmiIphoneBagFootnote&&D.push(`<li role="listitem">${C.acmiIphoneBagFootnote}</li>`):D.push(`<li role="listitem">${C.acmiBagFootnote}</li>`)),I||u||!C.acmiIneligibleFootnote||D.push(`<li role="listitem">${C.acmiIneligibleFootnote}</li>`),m&&C.acmiCheckoutFootnote&&D.push(`<li role="listitem">${C.acmiCheckoutFootnote}</li>`),u&&D.push(`<li role="listitem">${C.acmiDeliveryPickupFootnote}</li>`),s&&C.acmiPaymentFootnote&&D.push(`<li role="listitem">${C.acmiPaymentFootnote}</li>`),(o||s)&&C.appleCardPaymentFootnote&&D.push(`<li role="listitem">${C.appleCardPaymentFootnote}</li>`),i&&C.acmiFulfillmentFootnote&&D.push(`<li role="listitem">${C.acmiFulfillmentFootnote}</li>`),N.hasPartnerFinanceInstallment&&C.paymentPartnerFinanceFootnote&&D.push(`<li role="listitem">${C.paymentPartnerFinanceFootnote}</li>`),N.tradeInDisclaimerEnabled&&C.tradeInDisclaimerFootnote&&D.push(`<li role="listitem">${C.tradeInDisclaimerFootnote}</li>`),!A&&N.carrierFinancePromo&&C[L]&&(D.push(`<li role="listitem">${dn(C[L],{superScript:N.carrierFinancePromo.superScript})}</li>`),N.carrierFinancePromo.taxDisclaimer&&C[k]&&D.push(`<li role="listitem">${C[k]}</li>`)),N.totalAfterTradeInEnabled&&S.priceAfterTradeInDisclaimer&&D.push(`<li role="listitem">${S.priceAfterTradeInDisclaimer}</li>`),N.tradeInRefundEnabled&&S.tradeInRefundDisclaimer&&D.push(`<li role="listitem">${S.tradeInValueDagger} ${S.tradeInRefundDisclaimer}</li>`),S.giftCardDisclaimer&&D.push(`<li role="listitem">${S.giftCardDisclaimer}</li>`),S.loanDisclaimer&&!d&&D.push(`<li role="listitem">${S.loanDisclaimer}</li>`),h&&!E&&C.webapplyInstallmentsFootnote&&D.push(`<li role="listitem">${C.webapplyInstallmentsFootnote}</li>`),E&&C.webapplyInstallmentsApprovedFootnote&&D.push(`<li role="listitem">${C.webapplyInstallmentsApprovedFootnote}</li>`),N.showInstantTradeUpValueDisclaimer&&S.instantTradeInRefundDisclaimer&&D.push(`<li role="listitem">${S.instantTradeInRefundDisclaimer}</li>`),N.showLoanDisclaimer&&C.showLoanDisclaimer&&D.push(`<li role="listitem">${C.showLoanDisclaimer}</li>`),S.footerPricing&&D.push(`<li role="listitem">${S.footerPricing}</li>`),g&&C.thankyouacmiSelected&&D.push(`<li role="listitem">${C.thankyouacmiSelected}</li>`),S.footerEncryptionMsg&&D.push(`<li role="listitem">${S.footerEncryptionMsg}</li>`),S.signInFooterEncryptionMsg&&D.push(`<li role="listitem">${S.signInFooterEncryptionMsg}</li>`),N.exitWithBuyUp&&D.push(`<li role="listitem">${S.dynamicFootnotes}</li>`),N.isMonthlyProminent&&D.push(`<li role="listitem">${C.isMonthlyProminentFootnotes}</li>`),y&&D.push(`<li role="listitem">${C.isTradeInFootnotes}</li>`),A&&N.bugattiTradeInFootNotes.map((e=>D.push(`<li role="listitem">${e}</li>`))),v&&D.push(`<li role="listitem">${C.tradeinTopicsFootnotes}</li>`),C.monthlyPricingFootnotes&&b&&D.push(`<li role="listitem">* ${C.monthlyPricingFootnotes}</li>`),C.installmentUpgradeOfferFootnotes&&N.isInstallmentsUpgradeAvailable&&D.push(`<li role="listitem">${C.installmentUpgradeOfferFootnotes}</li>`),w&&D.push(`<li role="listitem">${w}</li>`),D.length?l().createElement(aw,{footnotes:D}):null},nw=({showIcon:e,iconImageProp:t,description:a,learnMore:r,hasOverlay:n})=>{const{assets:s}=z(),o="rs-installment-banner";return l().createElement("div",{className:o},l().createElement("div",{className:qa()({"as-icondetails":e},{"rs-installment-banner-container":!e}),"data-autom":"rs-installment-banner"},e&&l().createElement("div",{className:"as-icondetails-icon"},l().createElement(Fl,ur({},t,{"aria-hidden":"true"}))),l().createElement("div",{className:qa()(`${o}-content`,{"as-icondetails-detail":e})},l().createElement("div",{className:`${o}-description`},l().createElement("span",Ya(`${a} `)),n&&l().createElement("button",ur({type:"button",className:"as-buttonlink as-buttonlink-inline","data-autom":"installments-learn-more-link"},r.props),l().createElement("span",ur({"aria-hidden":"true"},Ya(s.learnMore))),l().createElement("span",{className:"visuallyhidden"},s.acmiLearnMoreA11y))))))},sw=({acmiWithCard:e,acmiNoCard:t,showPartnerInstallment:a,applyButton:r,appUrl:n,...s})=>{const{fragments:o,assets:i,viewport:c}=z(),d="small"===c,[m,u]=l().useState([]);return l().createElement(is,ur({},s,{noPadding:!0,isFullscreen:d,className:"rs-installment-overlay",fixedWidth:!0}),e&&l().createElement("div",Ya(dn(o.acmiLearnMoreOverlayContent,{headerId:"acmiLearnMoreveOverlayHeading"}))),t&&l().createElement(l().Fragment,null,l().createElement("div",Ya(dn(o.acmiNoCardLearnMoreOverlayHeader,{headerId:"acmiLearnMoreveOverlayHeading"}))),l().createElement("div",{className:"rs-installment-action"},l().createElement(ds,ur({},r.props,{className:"large-6 small-12"}),r.label)),l().createElement("div",Ya(o.acmiNoCardLearnMoreOverlayFooter))),a&&l().createElement("div",{className:"rs-acmilearnmore-overlay"},l().createElement("div",Ya(dn(o.aprFinancingOverlayContent,{headerId:"aprFinanceLearnMoreveOverlayHeading",appUrl:n}))),l().createElement("div",{className:"rs-acmilearnmore-footnotes"},l().createElement(wi,null),l().createElement("div",null,l().createElement(sE,{rootTag:"div",index:m,handleChange:u,id:"rs-finance-footer",compact:!0},l().createElement(nE,{rootTag:"div",title:i.seeTermsConditions,withPlus:!1,withChevron:!0,role:"listitem",iconAttrs:{"aria-hidden":"true"},classes:{root:"rs-acmilearnmore-footer-item"}},l().createElement("div",Ya(o.aprLearnMoreOverlayNoCardFootnote))))))))},{isMobileIos:lw}=A(),ow=({positionTop:e})=>{const{assets:t}=z(),[a,r]=(0,s.useState)(!1),[n]=Ma(Ss),[o]=Ba(Is,"buyflowMessages"),i=Fa(`${Is}.webApplyRedirect`),{data:c,properties:{isLoadingSubmit:d}}=Ra(xs),{acAvailable:m}=zs(),u=K().get(o,"messages.additionalData.namedAssets",{});u.isBFIEnabled=o&&o.isBFIEnabled;const{appleCardLogo:p,topBannerDescription:g,topNoCardBannerDescription:y,bannerDescription:h,noCardBannerDescription:E,partnerFinancedInstallments:v,hasPartnerPromo:b,iosURL:f,androidURL:w,hasInstallmentIneligibilityMessage:N}=n,{state:S,handleOpenOverlay:C,handleCloseOverlay:T,handleApplyClick:L,handleWebApplyClick:k,handleContinueClick:I}=Kn({bootstrap:{...o}});let A="";A=v||b||N?h:e?m?g:y:m?h:E;const P=!(e||b||N),D={positionTop:e,showIcon:!e&&p,iconImageProp:p&&{src:p.src,data:{height:p.height,width:p.width}},description:A,learnMore:{props:{onClick:()=>{r(!0),v?Ws({name:"metrics",data:{hier1:"aos:bag",prop3:"open modal | installment |ribbon| D=pageName",evar6:'D=pageName+"|ribbon|learn more - installment|open modal"'}}):C({metricsKey:"bagLearnMoreLink"})}}},hasOverlay:P},O=ja(xs,"apply"),x={label:S.isCompleted?u.continue:u.apply};S.canNativeApply&&!S.isCompleted?x.props={onClick:e=>{L(e)}}:S.isCompleted?x.props={onClick:e=>{r(!1),I(e)}}:S.hasNativeState||(x.label=c.applyLabel||t.apply,x.props={...O.props,isLoading:d||i,label:c.applyLabel,role:"link",onClick:e=>{O.props.onClick(e),k(e,{metricsKey:"bagLearnMoreWebApply"})}});const R=lw?f:w,F=P&&{acmiWithCard:!n.partnerFinancedInstallments&&m,acmiNoCard:!(n.partnerFinancedInstallments||m),showPartnerInstallment:n.partnerFinancedInstallments,visible:a,ariaLabel:n.partnerFinancedInstallments?"aprFinanceLearnMoreveOverlayHeading":"acmiLearnMoreveOverlayHeading",onClose:e=>{r(!1),T(e)},applyButton:x,appUrl:R};return l().createElement(l().Fragment,null,l().createElement(nw,D),P&&l().createElement(sw,F))},iw=l().memo(ow),cw=({messages:e,messagesLastUpdated:t,hasTradeIn:a,acmiSelected:r,installmentsSelected:n,children:s})=>{const{assets:o}=z();return l().createElement("div",null,!(r||n)&&l().createElement("h2",{className:"rs-bag-installment-actions-label"},o.paymentOptionsHeader),l().createElement(Qs,{messages:e,lastUpdated:t}),l().createElement("div",{className:qa()("row","rs-bag-installment-actions",{"rs-bag-installment-tradein":a},{"rs-bag-installment-acmi":r||n})},s))},dw=({overlayProps:e,acmiSelected:t,overlayData:a,installmentCheckoutButton:r,modKey:n,informational:s})=>{const{assets:o,fragments:i,viewport:c}=z(),{acAvailable:d}=zs(),m="rs-installmentcheckout",{appleCardLabel:u,itemsBilledSeparately:p,acmiOtbValue:g,carrierFinancePromo:y,installmentMessage:h}=a,E=y?i[`carrierFinanceFootNote_${y.carrierId.toUpperCase()}`]:"",v=l().createElement(l().Fragment,null,i.acmiOverlayFootnote&&l().createElement("div",ur({className:`${m}-footer${y?" rs-carrierfinance-footer":""}`},Ya(d?i.acmiOverlayFootnote:i.acmiOverlayNoCardFootnote))),y&&E&&l().createElement("div",ur({className:`${m}-footer`},Ya(dn(E,{carrierName:y.carrierName,monthlyPayments:y.monthlyPayments,carrierInstallmentPlan:y.carrierInstallmentPlan,productName:y.productName,superScript:y.superScript,apr:y.apr}))))),b="small"===c;return l().createElement(is,ur({},e,{className:`${m}-overlay`,isFullscreen:b,noPadding:!0,fixedWidth:!0,footerContent:v,ariaLabel:"appleCardInstallmentHeader"}),l().createElement("div",{className:`${m}-overlay-content`},u&&l().createElement("div",{className:`${m}-cardlabel`,"aria-hidden":"true"},u),l().createElement("h2",ur({id:"appleCardInstallmentHeader",className:`${m}-header`},Ya(o.acmiOverlayHeader))),l().createElement("div",ur({className:`${m}-subheader`},Ya(d?i.acmiOverlayDescription:i.acmiOverlayNoCardDescription))),!d&&l().createElement("div",ur({className:`${m}-benefits`},Ya(i.acmiOverlayCardBenefits))),l().createElement(tw,{modKey:n,classes:`large-12 ${m}-summary`,cashBackSuperscript:d?a.hasCardSuperscript:a.noCardSuperscript,isAcmi:!0,noOffset:!0}),p&&l().createElement("div",{className:"rs-bag-itembilled-separately"},l().createElement(_E,{modKey:n})),g&&l().createElement("div",ur({className:"rs-acmiotb large-8 small-12"},Ya(dn(d?i.otbMessageWithAppleCard:i.otbMessageWithoutAppleCard,{acmiOtbValue:g})))),!s&&l().createElement("div",{className:qa()("rs-installmentcheckout-bottom-wrapper","row",{"rs-installmentcheckout-withinstallment":h})},l().createElement("div",{className:`${m}-bottom`},l().createElement(ds,ur({},r.props,{disabled:r.props.disabled||r.isLoading,"data-autom":"bag-checkout-button","aria-describedby":"bag-checkoutbutton-installment-message",isLoading:r.isLoading,className:"rs-bag-checkoutbutton"}),t?o.acmiCheckoutLabel:o.checkoutLabel),h&&l().createElement("div",ur({id:"bag-checkoutbutton-installment-message",className:`${m}-message`,"aria-hidden":"true"},Ya(h)))))))},mw=({informational:e,continueButtonRef:t})=>{const[a]=Ma(Ps),{acmiSelected:r,partnerFinancedInstallments:n}=a,s=e?"shoppingCart.summary.cartInstallmentOverlay":"shoppingCart.actions.installmentCheckoutOverlay",[o]=cr(s),{data:i,properties:{isLoadingSubmit:c}}=Ra(s),{acAvailable:d,acSupportInstallment:m}=zs(),u=ja(s,m?"nativeInstallmentsCheckout":"installmentsCheckout"),p={...o,onExited:()=>{o.onExited(),t&&t.current&&t.current.focus()}};return l().createElement(dw,{overlayProps:p,overlayData:i,acmiSelected:r,modKey:s,informational:e,installmentCheckoutButton:{isLoading:c,props:{...u.props,onClick:e=>{u.props.onClick(e),(({acAvailable:e,acSupportInstallment:t,partnerFinancedInstallments:a})=>{const r=e?"check out":"continue",n=a?"installment":"acmi";Ws({name:"metrics",data:{hier1:"aos:bag",[Ks]:`aos:bag|${n} option|${r}`,[Hs]:"aos:bag",[js]:t?"apy-220-100006":"apy-220-100010",events:"event287"}})})({acAvailable:d,acSupportInstallment:m,partnerFinancedInstallments:n})}}}})},uw=l().memo(mw),pw=({acmiSelected:e,installmentsSelected:t,...a},r)=>{const{assets:n}=z();return l().createElement(ds,ur({},a,{id:"cart-actions-installmentCheckout","data-autom":"bag-checkout-button","aria-describedby":"bag-instalment-button-due-detail",className:"rs-bag-installmentbutton",ref:r}),l().createElement("span",Ya(e||t?n.continueCheckoutLabel:n.acmiCheckoutLabel)))},gw=l().forwardRef(pw),yw=()=>{const{acAvailable:e}=zs(),[t]=Ma(Ps),{acmiSelected:a,installmentsSelected:r,partnerFinancedInstallments:n}=t,s=ja(Ps,"continueWithInstallmentCheckout"),o=K().get(s,"props.ref",null),i={...s.props,isLoading:K().get(s,"binding.properties.isLoadingSubmit",!1),disabled:s.props.disabled||K().get(s,"binding.properties.isLoadingSubmit",!1),onClick:t=>{s.props.onClick(t),(({acAvailable:e,partnerFinancedInstallments:t})=>{const a=t?"installment":"acmi";Ws({name:"metrics",data:{hier1:"aos:bag",channel:"aos:bag",prop3:`open modal|${a} option|${e?"check out":"learn more and apply"}`,[Hs]:"aos:bag",[Vs]:`view|${a} benefits and ledger`}})})({acAvailable:e,partnerFinancedInstallments:n})}};return l().createElement(l().Fragment,null,s.binding.bindExists&&l().createElement(gw,ur({acmiSelected:a,installmentsSelected:r},i)),l().createElement(uw,{continueButtonRef:o}))},hw=l().memo(yw),Ew=({isBagHeader:e,apwStrongDefault:t,showApplePay:a,showCheckoutButton:r,mainButton:n,addButton:s,continueButton:o,otherButton:i,applePayButton:c,showInstallmentAction:d})=>{const{assets:m}=z();return l().createElement("div",{className:qa()("rs-bag-checkoutbuttons-wrapper",{"rs-bag-applepay-strong-default":t},{"rs-bag-applepay-enabled":a},{"rs-bag-checkout-mainbutton-show":r})},n&&l().createElement("div",{className:"rs-bag-checkoutbutton rs-bag-checkout-mainbutton"},l().createElement(ds,ur({},n.props,{hasDefaultClass:!e,isLoading:n.isLoading,className:qa()({"button button-block":e}),"data-autom":"checkout"}),n.label)),s&&l().createElement("div",{className:"rs-bag-checkoutbutton rs-bag-checkout-mainbutton"},l().createElement(ds,ur({},s.props,{hasDefaultClass:!e,isLoading:s.isLoading,className:qa()({"button button-block":e})}),s.label)),o&&l().createElement("div",{className:"rs-bag-checkoutbutton rs-bag-checkout-continuebutton"},l().createElement(ds,ur({},o.props,{hasDefaultClass:!e,isLoading:o.isLoading,className:qa()({"button button-block":e})}),o.label)),i&&l().createElement("div",{className:"rs-bag-checkoutbutton rs-bag-checkout-otheroptions"},l().createElement(ds,ur({},i.props,{hasDefaultClass:!e,isLoading:i.isLoading,className:qa()({"button button-block":e})}),i.label)),d&&l().createElement("div",{className:"rs-bag-checkoutbutton rs-bag-checkout-installment"},l().createElement(hw,null)),c&&l().createElement("div",{className:qa()("rs-bag-checkoutbutton","rs-bag-applepay",{"rs-bag-applepay-activecard":c.apwActive})},l().createElement(ds,ur({},c.props,{hasDefaultClass:!e,isLoading:c.isLoading,className:qa()({"rs-applepay":!t},{"button button-block":e})}),c.label),c.apwPromoMessage&&l().createElement("p",ur({className:"rs-bag-applepay-promo"},Ya(c.apwPromoMessage))),c.isShowApplePayFullPaymentOnlyMessage&&l().createElement("p",ur({className:"rs-bag-applepay-paymentinfo rs-bag-applepay-promo"},Ya(m.applePayFullPayOnlyMessage)))))},vw=({isBagHeader:e=!1,showInstallmentAction:t=!1,continueBtnRef:a=null})=>{const{assets:r}=z(),{showCheckoutButton:n}=zs(),[o]=Ma(Ps),[i]=Ma(fs),{apwEnabled:c,financeMessage:d,hideFinance:m,apwStrongDefault:u,disableCheckout:p,enableCheckout:g,disableAddToCart:y,merchantIdentifier:h="",isShowApplePayFullPaymentOnlyMessage:E}=o,{savedCart:v,sharedCart:b}=i;let f=e?"navCheckout":"checkout",w="";b?(f=g?f:"",w=g?"":"addAllToCart"):v?(f=g?f:"",w=y?"":"addAllToCart"):f=p?"saveCart":f;const N=ja(Ps,f),S=ja(Ps,w,{disableFocusSync:!0}),C=ja(Ps,"continueToSignIn"),T=ja(Ps,e?"navCheckoutOtherPayments":"checkoutOtherPayments"),L=ja(Ps,e?"navApwCheckout":"apwCheckout"),k=e=>{const t=K().get(e,"props.ref",null);a&&t&&(a.current=t.current)},I=c&&!(ql&&m),A=ql&&d&&!e?d:r.applePayPromo||r.applePayButtonSubtext,P=K().get(C,"binding.properties.isLoadingSubmit",!1)||K().get(C,"binding.properties.polling",!1);return(0,s.useEffect)((()=>{ql&&d&&Sl({name:"metrics",data:{events:"event330"}})}),[d]),l().createElement(Ew,{isBagHeader:e,showInstallmentAction:t,apwStrongDefault:u,showApplePay:I,showCheckoutButton:n,mainButton:(g||N.binding.bindExists)&&{label:p?r.saveBagLabel:r.checkoutLabel,isLoading:K().get(N,"binding.properties.isLoadingSubmit",!1),props:{...N.props,disabled:N.props.disabled||K().get(N,"binding.properties.isLoadingSubmit",!1),onClick:()=>{k(N),N.props.onClick()}}},addButton:S.binding.bindExists&&{label:b?r.addToBag:r.addAllToBag,isLoading:K().get(S,"binding.properties.isLoadingSubmit",!1),props:{...S.props,id:e?`${S.props.id}-header`:S.props.id,disabled:S.props.disabled||K().get(S,"binding.properties.isLoadingSubmit",!1)}},continueButton:C.binding.bindExists&&{label:r.continue,isLoading:P,props:{...C.props,disabled:C.props.disabled||P}},otherButton:!u&&I&&T.binding.bindExists&&{label:r.checkoutLabel,isLoading:K().get(T,"binding.properties.isLoadingSubmit",!1),props:{...T.props,disabled:T.props.disabled||K().get(T,"binding.properties.isLoadingSubmit",!1),onClick:()=>{k(T),T.props.onClick()}}},applePayButton:I&&L.binding.bindExists&&{apwActive:Boolean(h),label:u?r.checkoutLabel:r.checkoutWithApplePayLabel,isLoading:K().get(L,"binding.properties.isLoadingSubmit",!1),apwPromoMessage:A,isShowApplePayFullPaymentOnlyMessage:E,props:{...L.props,disabled:L.props.disabled||K().get(L,"binding.properties.isLoadingSubmit",!1),onClick:()=>{k(L),L.props.onClick()}}}})},bw=l().memo(vw),fw=({hasTradeIn:e,total:t,totalAfterTradeIn:a,showTaxInclusivePrices:r})=>{const{assets:n}=z();return l().createElement("div",{className:"column large-6 small-12 rs-bag-payinfull rs-bag-actions-box-wrapper"},l().createElement("div",{className:"rs-bag-actions-box"},l().createElement("div",{className:"rs-bag-actions-box-title"},l().createElement("div",{className:"rs-bag-actions-box-paymentlabel"},n.fullPaymentLabel),l().createElement("div",null,`${t}${r?n.taxIncludedLabel:""}`)),l().createElement("div",{className:"rs-bag-actions-box-message"},e&&l().createElement(l().Fragment,null,l().createElement("div",null,n.totalAfterTradeInLabel),l().createElement("div",null,a))),l().createElement(bw,null),l().createElement("div",{className:"rs-bag-actions-box-promo"},n.dailyCashPromo)))},ww=({forcePartnerFinanceSelectionEnabled:e,hasInstallmentTradeIn:t,dueToday:a,monthlyInstallment:r,showAcmiDailyCashPromo:n})=>{const{assets:s}=z(),o=qa()("column large-6 small-12 rs-bag-installment rs-bag-actions-box-wrapper",{"rs-bag-installmentbutton-container":e});return l().createElement("div",{className:o},e?l().createElement(hw,null):l().createElement("div",{className:"rs-bag-actions-box"},l().createElement("div",{className:"rs-bag-actions-box-title"},l().createElement("div",ur({className:"rs-bag-actions-box-paymentlabel"},Ya(s.acmiPaymentLabel))),l().createElement("div",Ya(r))),l().createElement("div",{className:"rs-bag-actions-box-message"},t&&l().createElement("div",Ya(s.acmiTradeInMessage))),l().createElement("div",{className:"rs-applecardinstallment-checkout"},l().createElement(hw,null)),l().createElement("div",ur({id:"bag-instalment-button-due-detail",className:"rs-bag-actions-box-footer"},Ya(a))),n&&l().createElement("div",{className:"rs-bag-actions-box-promo"},s.acmiDailyCashPromo)))},Nw=()=>{const{viewport:e}=z(),[t,a]=_a(Ps),[r]=Ma(Ps),{acmiSelected:n,installmentsSelected:s,forcePartnerFinanceSelectionEnabled:o,hasTradeIn:i,hasInstallmentTradeIn:c,dueToday:d,monthlyInstallment:m,total:u,totalAfterTradeIn:p,partnerFinancedInstallments:g,showTaxInclusivePrices:y}=r,h={hasTradeIn:i,total:u,totalAfterTradeIn:p,showTaxInclusivePrices:y},E={forcePartnerFinanceSelectionEnabled:o,hasInstallmentTradeIn:c,dueToday:d,monthlyInstallment:m,showAcmiDailyCashPromo:!g};return l().createElement(cw,{messages:t,messagesLastUpdated:a,hasTradeIn:i,acmiSelected:n,installmentsSelected:s},"small"===e?l().createElement(l().Fragment,null,!(n||s)&&l().createElement(fw,h),l().createElement(ww,E)):l().createElement(l().Fragment,null,l().createElement(ww,E),!(n||s)&&l().createElement(fw,h)))},Sw=l().memo(Nw),Cw=({isBagHeader:e,isLoading:t,showInstallmentAction:a,notEligibleForAcmi:r,displayInStack:n,isInstallmentSelected:s,savingsDisclaimer:o,continueBtnRef:i})=>{const{assets:c}=z(),d=qa()("row",{"rs-bag-checkoutbutton-header":e,"rs-bag-checkoutbutton-bottom":!e}),m=qa()("small-12 small-offset-0",{"large-12":e,"large-9 large-offset-3":!e,"rs-has-savings-disclaimer":o}),u=!(n||e)&&a,p=n||!a,g=qa()("column rs-bag-savings-disclaimer",nd.CAPTION,{"rs-bag-savings-disclaimer-tiles large-6 small-12":u,"rs-bag-savings-disclaimer-stack":p,"rs-bag-savings-disclaimer-installmentselected":s});return l().createElement("div",{className:d},l().createElement(wr,{isPending:t,messages:{pending:c.processing}}),l().createElement("div",{className:m},u&&l().createElement(Sw,null),p&&l().createElement(bw,{isBagHeader:e,showInstallmentAction:a,continueBtnRef:i}),r&&l().createElement("div",ur({className:"rs-bag-noteligibleforacmi"},Ya(r))),o&&l().createElement("div",{className:"row rs-bag-savings-disclaimer-wrapper"},l().createElement("div",{className:g},o))))},Tw=({isBagHeader:e,continueBtnRef:t})=>{const{assets:a,viewport:r}=z(),{data:{enableCheckout:n,displayInStack:s,savingsDisclaimer:o,acmiSelected:i,installmentsSelected:c},properties:{isLoadingSubmit:d}}=Ra(Ps),{data:{savedCart:m,sharedCart:u},properties:{isLoadingSubmit:p}}=Ra(fs),[g]=Ma(Ls),{acShowInstallment:y,showInstallmentTile:h}=zs(),E=y?"":a.notEligibleForAcmi,v=y&&(e||h)&&(!(m||u)||m&&n)&&!g.isPartnerFinancingSelectionDisabled;return l().createElement(Cw,{isBagHeader:e,isLoading:p||d,showInstallmentAction:v,notEligibleForAcmi:E,displayInStack:s&&"small"===r,isInstallmentSelected:i||c,savingsDisclaimer:o,continueBtnRef:t})},Lw=l().memo(Tw),kw=({header:e,value:t,options:a,radioProps:r})=>l().createElement("div",{className:"large-5 small-12 large-centered rs-bag-pricingselector"},l().createElement("fieldset",null,l().createElement("legend",{className:"rs-bag-pricingselectorheader"},e),l().createElement("div",{className:"as-buttongroup"},a.map(((e,a)=>l().createElement("div",{className:"as-buttongroup-item large-6",key:e.value},l().createElement("input",ur({},r,{type:"radio",value:e.value,checked:t===e.value,id:`pricingOptionButton${a}`,name:"pricingOptionButtonGroup",className:"as-buttongroup-radio","data-autom":`pricing-option-${e.value}`})),l().createElement("label",{htmlFor:`pricingOptionButton${a}`,className:"as-buttongroup-button large-12"},l().createElement("span",{className:"rs-bag-optionstitle"},l().createElement("div",null,e.title),l().createElement("div",{className:"form-label"},e.pricing))))))))),Iw=()=>{const e=Ra(Rs),t=sr(Rs,"selectPricing");return e.modExists?l().createElement(kw,{header:e.data.header,value:t.binding.value,options:e.data.options,radioProps:t.props}):null},Aw=l().memo(Iw),Pw=({headerText:e,headerMessage:t,ariaLiveMessage:a,emiPrice:r,isSavedBag:n,bagId:s,savedBagListUrl:o,pricingDisclaimer:i,messages:c,messagesLastUpdated:d,showCheckoutButtons:m,headerRef:u,hasBanner:p,continueBtnRef:g})=>{const{assets:y}=z(),h=qa()({"rs-bag-button-header":m,"large-12":m,"large-8":!m,"small-12":!m,"rs-header-noborder":p,"rs-saved-bag":n}),E=Boolean(n&&o);return l().createElement("div",{className:h},e&&l().createElement("h1",ur({ref:u,className:"rs-bag-header","data-autom":"bag-header",tabIndex:"-1"},Ya(e))),l().createElement("span",{className:"visuallyhidden","aria-live":"polite"},a),r&&l().createElement("div",{className:"rs-bag-header-emiprice"},l().createElement("span",{"aria-hidden":"true"},dn(y.orderInstallmentPriceLabel,{orderInstallmentPrice:r})),l().createElement("span",{className:"visuallyhidden"},dn(y.orderInstallmentPriceLabelA11y,{orderInstallmentPrice:r}))),t&&l().createElement("div",ur({className:"rs-bag-headermessage"},Ya(t))),n&&l().createElement("div",{className:"rs-savedbag-id"},y.bagId," ",s),l().createElement(Qs,{messages:c,lastUpdated:d}),l().createElement(Aw,null),i&&l().createElement("div",ur({className:"rs-bag-pricingdisclaimer"},Ya(i))),m&&l().createElement(Lw,{isBagHeader:!0,continueBtnRef:g}),E&&l().createElement("div",{className:"rs-savedbag-listlink"},l().createElement("a",{href:o},y.viewAllSavedBags,l().createElement("span",{className:"more","aria-hidden":"true"}))))},Dw=({headerRef:e,continueBtnRef:t})=>{const{assets:a}=z(),[r]=Ma(fs),[n]=Ba(Ps,"disableStickyNav"),[o]=Ba(Is,"total"),[i]=Ba(Is,"orderInstallmentPrice"),[c]=Ba(Is,"suppressDefaultInstallmentDisplays"),[d]=Ma(Rs),m=Ra(Ds),[u]=Ma(Fs),[p,g]=_a(Fs),y=d.emiAmount||o,h=r.savedCart,[E]=Ma(Ss),v=Fa(Ns),{bindExists:b}=Ka(Ps,"continueToSignIn"),{acShowInstallment:f}=zs(),[w]=Ba(ws,"splitQuantity");let N="";N=h?a.savedBagHeader:r.sharedCart?a.sharedBagHeader:f?a.acmiBagHeader:E.priceHeader?E.priceHeader:dn(a.itemsHeader,{price:y});let S="";m.modExists&&(S=m.data.placements&&m.data.placements.middle?m.data.placements.middle:m.data.iPhoneLimitWarningMesssage);const C={headerText:N,headerMessage:S,emiPrice:c?"":i,ariaLiveMessage:w?dn(a.splitQuantityUpdateA11y,{quantity:w}):"",isSavedBag:h,bagId:u.cartId,savedBagListUrl:u.savedCartListUrl,pricingDisclaimer:d.pricingDisclaimer,messages:p,messagesLastUpdated:g,showCheckoutButtons:n&&!f&&!b,headerRef:e,hasBanner:Boolean(E.bannerDescription),continueBtnRef:t};return(0,s.useEffect)((()=>{v&&h&&u.cartId&&Yl(u.cartId,"SAVED_BAG_ID")}),[v,h,u.cartId]),l().createElement(Pw,C)},Ow=l().memo(Dw),xw=({signInUrl:e,signInEvar1:t,signInMetricId:a,homeLinkURL:r,homeLinkEvar1:n,homeLinkMetricId:s,headerRef:o})=>{const{assets:i}=z();return l().createElement("div",{className:"rs-bagempty large-9 small-12"},l().createElement("h1",ur({className:"rs-bag-header",tabIndex:"-1",ref:o},Ya(i.emptyBagHeader))),l().createElement("div",{className:"rs-bagempty-message"},e?i.emptyBagNotSignedPrefix:i.emptyBagSignedPrefix),l().createElement("div",{className:"rs-bagempty-actions"},l().createElement("div",{className:"row"},e&&l().createElement("div",{className:"column rs-bagempty-button"},l().createElement("a",{className:"form-button",href:e,"data-evar1":t,"data-s-object-id":a,"data-autom":"bag-empty-signin-button"},i.signinTxt)),l().createElement("div",{className:"column rs-bagempty-button"},l().createElement("a",{href:r,className:"form-button form-button-secondary","data-evar1":n,"data-s-object-id":s,"data-autom":"bag-empty-continueshopping-button"},i.continueShopping)))))},Rw=({headerRef:e})=>{const[t]=Ma(fs),{signInUrl:a,signInEvar1:r,signInMetricId:n,marcomHome:s,evar1:o,metricId:i}=t;return l().createElement(xw,{signInUrl:a,signInEvar1:r,signInMetricId:n,homeLinkURL:s,homeLinkEvar1:o,homeLinkMetricId:i,headerRef:e})},Fw=l().memo(Rw),Mw=({noKeyline:e,hasCoveragePlans:t,hasSubscriptions:a,subscriptionTitle:r,isAnnualCoverage:n,hasRecurringServices:s,isNewAppleMusicSubscriber:o,isNewICloudSubscriber:i})=>{const{assets:c}=z(),d=qa()("rs-servicessummary-section",{"rs-servicessummary-multisummary":a});let m=c.coverageSubheader;return s?m=c.recurringCoverageSubheader:n&&(m=c.annualCoverageSubheader),l().createElement("div",{className:qa()("row rs-servicessummary-container",{"rs-servicessummary-keyline":e})},l().createElement("div",{className:"column large-3 small-12"},l().createElement("h2",{className:"rs-servicessummary-header"},c.monthlyServicesLabel)),l().createElement("div",{className:"column rs-servicessummary large-9 small-12"},t&&l().createElement("div",{className:d},l().createElement("h3",{className:"rs-servicessection-header"},c.coverageHeader),l().createElement("p",{className:"rs-servicessection-subheader"},m)),a&&l().createElement("div",{className:"rs-servicessummary-section rs-services-summaryrow"},l().createElement("h3",{className:"rs-servicessection-header"},r),l().createElement("p",{className:"rs-servicessection-subheader"},c.subscriptionsSubheader)),l().createElement("div",{className:"rs-servicessummary-note"},c.monthlyServiceNote),o&&l().createElement("p",{className:"rs-services-summaryrow"},c.appleMusicSubscriberLabel),i&&l().createElement("p",{className:"rs-services-summaryrow"},c.iCloudSubscriberLabel)))},Bw="applemusic",_w="icloud",$w="year",Uw=({modKey:e,noKeyline:t})=>{const[a]=Ma(e),{coveragePlans:r=[],subscriptions:n=[],subscriptionTitle:s,hasRecurringServices:o}=a,i=n.some((e=>e.newSubscriberDisclaimer&&e.familyType===Bw)),c=n.some((e=>e.newSubscriberDisclaimer&&e.familyType===_w)),d=r.some((e=>e.payFrequency===$w));return l().createElement(Mw,{noKeyline:t,hasCoveragePlans:Boolean(r.length),hasSubscriptions:Boolean(n.length),subscriptionTitle:s,isAnnualCoverage:d,hasRecurringServices:o,isNewAppleMusicSubscriber:i,isNewICloudSubscriber:c})},Kw=l().memo(Uw),Vw=({tradeInProductTitle:e,title:t,subTitle:a,summary:r,overlayButtonLabel:n,overlayContent:o,outstandingLoanLabel:i,appliedTradeInLabel:c,tradeinCreditLabel:d,tradeInType:m,hideTradeInOverlay:u})=>{const[p,g]=(0,s.useState)(!1),{viewport:y}=z(),h="small"===y;return l().createElement("div",{className:"rs-tradeup-content"},e&&l().createElement("div",{className:"row rs-tradeup-title"},l().createElement("h3",ur({className:"rs-tradeup-device-name-label"},Ya(e)))),l().createElement("div",{className:"row"},t&&l().createElement("h3",ur({className:"rs-tradeup-estimated-label"},Ya(t)))),a&&l().createElement("p",Ya(a)),i&&l().createElement("div",{className:"rs-tradeup-outstanding-loan"},i),c&&l().createElement("div",{className:"rs-tradeup-credit"},c),d&&l().createElement("div",{className:"rs-tradeup-credit"},d),l().createElement("div",ur({className:"rs-tradeup-summary"},Ya(r))),!u&&l().createElement("div",{className:"rs-tradeup-instruction"},l().createElement("button",ur({id:"tradeup-summary",className:"as-buttonlink icon icon-after icon-pluscircle",type:"button",onClick:()=>{g(!0),(({tradeInType:e})=>{const t={[Gs]:'D=pageName+"||TradeIn||LearnMore"'};e&&(t.prop3='trade-in | flexible trade-in | see how it works"',t.prop37='D=pageName+"|Bag - Link|See how it works || Selected"'),Ws({name:"metrics",data:t})})({tradeInType:m})}},Ya(n))),l().createElement(is,{visible:p,onClose:()=>g(!1),isFullscreen:h,ariaLabel:"pd-overlay-header",fixedWidth:!0,noPadding:!0},l().createElement("div",Ya(o)))))},Hw=({multipleFlexTradeIn:e})=>{const{assets:t,fragments:a}=z(),{multipleFlexTradeInSummary:r={}}=t;return l().createElement("div",{className:"rs-mutlipleflex-tradein"},e.map((({deviceName:n,isIPhone:s,installmentsWithTradeIn:o,tradeInType:i,tradeInValue:c,tradeInValueApplied:d,tradeInCredit:m,isGrv:u,grvPercentage:p,isFlexTradeIn:g,accruedInterest:y,tradeInProduct:h},E)=>{let v,b,f;const w=`multiple-flex-trade-in-${E}`;"TRADE_IN_GREATER_THAN_LOAN"===i?s?o?(v=t.multipleFlexAppliedGreaterTradeInMonthlyLabel,b=y?t.multipleFlexWithAccuredInterestCloseoutTradeInLabel:t.multipleFlexCloseoutTradeInMonthlyLabel,f=r[`${i}_MONTHLY${s&&u?"_IPHONE":""}`]):(v=t.multipleFlexAppliedGreaterTradeInLabel,b=y?t.multipleFlexWithAccuredInterestCloseoutTradeInLabel:t.multipleFlexCloseoutTradeInLabel,f=r[`${i}${s&&u?"_IPHONE":""}`]):(v=t.multipleFlexAppliedGreaterTradeInLabel,b=t.multipleFlexCloseoutTradeInLabel,f=r[`${i}_NON_IPHONE_LOB`]):(v=t.multipleFlexAppliedTradeInLabel,b=t.multipleFlexCloseoutTradeInLabel,f=r[`${i}${s&&u?"_IPHONE":""}`]);const N=(e,t,a)=>a&&dn(e,t),S=N(t.multipleFlexTradeInLabel,{tradeInValue:c},c),C="TRADE_IN_LESSER_THAN_LOAN"!==i&&N(b,{tradeInValueApplied:d,accruedInterest:y},d),T="TRADE_IN_GREATER_THAN_LOAN"===i?m:d,L="TRADE_IN_EQUAL_TO_LOAN"!==i&&N(v,{appliedTradeInValue:T,deviceName:n},T),k="TRADE_IN_MONTHLY_INSTALLMENTS"===i?t.monthlyInstallmentTradeIn:t.tradeInTagLine,I=g?N(f,{deviceName:n,grvPercentage:p},f):k,A=""+(h?`${t.tradeInDevice} ${h}`:"");return l().createElement(Vw,{key:w,tradeInProductTitle:A,title:S,summary:I,hideTradeInOverlay:E!==e.length-1,overlayButtonLabel:t.multipleFlexOverlayButtonLabel,outstandingLoanLabel:C,appliedTradeInLabel:L,overlayContent:a.tradeUpInstructionOverlayContent,tradeInType:i})})))},jw=l().memo(Hw),Gw=()=>{const[e]=Ma(As),{installmentsWithTradeIn:t,isTradeinDropoff:a,multipleFlexTradeIn:r,tradeInValue:n,tradeInType:s,outstandingLoan:o,tradeInCredit:i,subsidyValue:c,showTradeInBalanceGiftMessage:d}=e,{assets:m,fragments:u}=z();let p;p=s&&"ACDC"===s&&n?dn(m.acdcTradeInLabel,{tradeInValue:n}):n?dn(s&&"TRADE_IN_MONTHLY_INSTALLMENTS"!==s?m.totalTradeInLabel:m.tradeInLabel,{tradeInValue:n}):"";const g=c&&dn(m.tradeInSubsidyLabel,{subsidyValue:c});let y,h=s;d&&"ACDC"!==s?y=m.tradeinOverfundSummaryInfo:t&&!s?y=m.instantTradeInTagLine:"TRADE_IN_MONTHLY_INSTALLMENTS"===s?(y=m.monthlyInstallmentTradeIn,h=!1):"ACDC"===s?(y=m.acdcTradeInSummary,h=!1):y=s?u[`instructionsFor_${s.toLowerCase()}${t?"_monthly":""}`]:m.tradeInTagLine;const E=t&&!s?m.instantTradeInInstruction:m.tradeInInstruction;let v;v="ACDC"===s?u.acdcTradeUpInstructionOverlayContent:a?u.instantTradeUpInstructionDropoffOverlayContent:t?u.instantTradeUpInstructionOverlayContent:u.tradeUpInstructionOverlayContent;const b=o&&dn(m.outstandingLoan,{outstandingLoan:o}),f=i&&dn(t?m.instantTradeInCredit:m.tradeInCredit,{tradeInCredit:i});return l().createElement("div",{className:qa()("row rs-bag-tradeup",{"rs-tradeup-noborder":r})},l().createElement("h2",ur({className:"column large-3 small-12 rs-tradeup-label"},Ya(m.tradeUpQuote))),l().createElement("div",{className:"column large-9 small-12"},r?l().createElement(jw,{multipleFlexTradeIn:r}):l().createElement(Vw,{title:p,subTitle:g,summary:y,hideTradeInOverlay:h,overlayButtonLabel:E,outstandingLoanLabel:b,tradeinCreditLabel:f,overlayContent:v,tradeInType:s})))},Ww=l().memo(Gw),qw=()=>{const{assets:e}=z();return l().createElement("div",{className:"column large-4 small-12 rs-recommendedsystem-details"},l().createElement("div",{className:"rs-recommendedsystem-label"},e.recommendedSystemLabel),l().createElement(uu,{modKey:Ts,className:"rs-recommendedsystem-wrapper",isCollapsible:!1,textField:{label:e.recommendedSystemInputLabel,bindName:"name","data-autom":"bag-recommendedsystem-input"},applyButton:{label:e.save,ally:`${e.save} ${e.recommendedSystemLabel}`,processingText:e.processing,bindName:"button","data-autom":"bag-recommendedsystem-save"}}))},Yw=({errorMessage:e,dataAutom:t,buttonLabel:a,buttonProps:r,lastUpdated:n})=>{const o=(0,s.useRef)(null);(0,s.useEffect)((()=>{o.current&&o.current.focus()}),[n]);const i=e.split("{buttonLabel}").map(((e,t)=>l().createElement(l().Fragment,{key:e},e,0===t&&l().createElement("button",ur({type:"button",className:"as-buttonlink"},r),a))));return l().createElement("div",{className:"rs-trade-in-error",tabIndex:"-1","data-autom":t,ref:o},l().createElement(Js,{key:e,error:!0},i))},zw=({modKey:e,dataAutom:t})=>{const[a,r]=Ma(e),n=K().get(a,"tradeInErrorMessage.message",""),s=K().get(a,"tradeInErrorMessage.buttonLabel",""),o=ja(e,"removeAllTradeIns");return l().createElement(Yw,{errorMessage:n,dataAutom:t,buttonLabel:s,buttonProps:o.props,lastUpdated:r})},Xw=l().memo(zw),Jw=({iUpTitle:e,iUpEstCreditMarkup:t,summary:a,overlayButtonLabel:r,overlayContent:n})=>{const[o,i]=(0,s.useState)(!1),{viewport:c}=z(),d="small"===c;return l().createElement("div",{className:"rs-iup-summary"},l().createElement("div",{className:"row rs-iup-summary-content"},l().createElement("h2",{className:"column large-3 small-12 rs-iup-summary-label"},e),l().createElement("div",{className:"column large-9 small-12"},l().createElement("div",{className:"row"},t),l().createElement("div",{className:"rs-iup-summary-info"},a),l().createElement("div",{className:"rs-iup-summary-instruction"},l().createElement("button",ur({id:"iup-summary",className:"as-buttonlink",type:"button",onClick:()=>{i(!0),wl({eVar:vl,feature:"Bag page - Link",action:"AOS:overlay/tradein/learn_more_about_upgrade_redemption_process| Selected"})}},Ya(r))),l().createElement(is,{visible:o,onClose:()=>i(!1),isFullscreen:d,ariaLabel:"rs-iup-overlay-header",fixedWidth:!0,noPadding:!0},l().createElement("div",{className:"rs-iup-summary-overlay as-overlay-content"},l().createElement("div",Ya(n)),l().createElement(wi,null)))))))},Zw=({modKey:e})=>{const[t]=Ma(e),{tradeInValue:a}=t,{assets:r,fragments:n}=z(),s=l().createElement("div",{className:"rs-iup-estimated-label"},dn(r.iUpSummaryCreditLabel,{tradeInValue:a}));return l().createElement(Jw,{iUpTitle:r.iUpCreditTitle,iUpEstCreditMarkup:s,summary:r.iUpCreditSummary,overlayButtonLabel:r.iUpCreditOverlayLabel,overlayContent:n.iUpSummaryOverlayContent})},Qw=l().memo(Zw),eN=({title:e,subtitle:t,savedLabel:a,image:r,isPreOrderMode:n,actionLinkLabel:s,actionLinkAXLabel:o,actionLinkURL:i,actionEvar1:c})=>{const{viewport:d}=z(),m="small"===d,u=qa()("rs-grbanner-action",{button:n,"button-reduced":m});return l().createElement("div",{className:"rs-grbanner as-l-container"},l().createElement("div",{className:"rs-grbanner-content"},l().createElement("div",{className:"rs-grbanner-content-leading"},r&&l().createElement(Fl,{className:"rs-grbanner-image",data:r}),l().createElement("div",{className:"rs-grbanner-info"},a&&l().createElement("div",{className:"rs-grbanner-savedlabel"},a),l().createElement("span",{className:"rs-grbanner-title"},e),t&&l().createElement("p",{className:"rs-grbanner-subtitle"},t))),l().createElement("div",{className:"rs-grbanner-content-trailing"},l().createElement("a",{className:u,href:i,"data-evar1":c},o?l().createElement(l().Fragment,null,l().createElement("span",{"aria-hidden":"true"},s),l().createElement("div",{className:"visuallyhidden"},o)):s))))},tN=()=>{const[e]=Ma(Bs),{title:t,subtitle:a,savedLabel:r,image:n,isPreOrderMode:s,actionLinkLabel:o,actionLinkAXLabel:i,actionLinkURL:c,actionEvar1:d}=e;return l().createElement(eN,{title:t,subtitle:a,savedLabel:r,image:n,isPreOrderMode:s,actionLinkLabel:o,actionLinkAXLabel:i,actionLinkURL:c,actionEvar1:d})},aN=l().memo(tN),rN=({children:e,isSideBySide:t,index:a})=>l().createElement("li",{role:"listitem",className:qa()("rs-product-list-item column",{"large-12":!t,"small-12":t}),"data-autom":`product-list-item-${a}`},e),nN=({productInfo:e,children:t,detailsContainer:a,actionsContainer:r,editMode:n,isSideBySide:s,listId:o,saveToStorage:i,isAddToBag:c,dataAutom:d,onClickHandler:m,addToBagLoading:u})=>{const{assets:p}=z(),{name:g,price:y,subheader:h,learnMoreUrl:E,productUrl:v,productMetricId:b,productIDForMetrics:f,productEvar1:w,macHardwareDetails:N,isEOLProduct:S,unavailableDisplayText:C,badge:T,monthlyPriceA11y:L}=e,k=g&&(S?l().createElement("span",null,g):l().createElement("a",{className:"rs-product-list-item-productlink",href:v,onClick:o?i:K().noop,"data-analytics-list-id":o,"data-purchase-journey":o?`${f}|lists`:"","data-evar1":w,"data-part-number":f,"data-relatedlink":b,"data-autom":"list-productlink"},g)),I=s?l().createElement("h3",{className:"rs-product-list-item-productname typography-intro-elevated"},k):l().createElement("h2",{className:"rs-product-list-item-productname typography-intro-elevated"},k),A={onClick:m,disabled:u};return l().createElement("div",{className:qa()("column",{"large-offset-1 small-offset-0 large-11 small-12":!s,"large-12":s})},Boolean(T)&&l().createElement("div",{className:"rs-product-list-item-violator badge badge-reduced badge-no-scrim"},T),l().createElement("div",{className:"rs-product-list-item-infocontent"+(S?" rs-yoursaves-item-noimage":"")},g&&I,S&&l().createElement("div",{className:"rs-product-list-item-eolproduct"},C),h&&l().createElement("div",{className:"rs-product-list-item-subheader"},h),y&&!S&&l().createElement("div",{className:"rs-product-list-item-productprice"},l().createElement("span",{"aria-hidden":"true"},y),l().createElement("span",{className:"visuallyhidden"},L||y)),N&&Boolean(N.length)&&l().createElement("ul",{className:"rs-product-list-item-hwdetails"},N.map((e=>l().createElement("li",{className:"rs-product-list-item-hwdetail typography-body",key:e},e)))),a,E&&l().createElement("div",{className:"rs-product-list-item-learnmore"},l().createElement("a",{href:E,className:"as-buttonlink"},p.learnMoreLink))),t,r,!c&&!n&&v&&l().createElement("a",{href:v,className:qa()("rs-product-list-item-buybtn button",{"button-elevated":!s,"button-block button-super":s}),onClick:o?i:K().noop,"data-analytics-list-id":o,"data-purchase-journey":o?`${f}|lists`:"","data-evar1":w,"data-part-number":f,"data-autom":d},s?p.continueButton:p.buyButton,l().createElement("span",{className:"visuallyhidden"},g)),c&&!n&&l().createElement(ds,ur({},A,{hasDefaultClass:!1,className:qa()("rs-product-list-item-buybtn button",{"button-elevated":!s,"button-block button-super":s}),"data-autom":"list-item-addtobagbtn"}),p.addAllToBag,l().createElement("span",{className:"visuallyhidden"},g)))},sN=({buttonText:e,buttonVOText:t,toggleButtonClickHandler:a,toggleButtonClass:r,isDetailsShown:n,showMoreButtonRef:s})=>l().createElement("div",{className:"rs-product-list-item-toggle-button"},l().createElement("button",ur({type:"button",ref:s,className:r,onClick:a,"aria-expanded":n,"aria-label":t,"data-autom":n?"hide-details-chevronup":"see-details-chevrondown"},Ya(e)))),lN=({modKey:e,isDetailsShown:t,loadingRef:a,isChildItem:r})=>{const n=r?"child-":"",{assets:o}=z(),[i]=Ba(e,"name"),c=Ua(),d=ja(e,`${n}show-more`),m=K().get(d,"binding.properties.isLoadingSubmit",!1),u=(0,s.useRef)(null);(0,s.useEffect)((()=>{u&&u.current&&t&&(m?a&&a.current&&a.current.focus():u.current.focus())}),[m]);const p=t?o.hideDetails:o.showDetails,g=dn(t?o.hideDetailsVOText:o.showDetailsVOText,{productName:i}),y=qa()("as-buttonlink",{"icon icon-chevrondown icon-after":!t},{"icon icon-chevronup icon-after":t});return l().createElement(sN,{buttonText:p,buttonVOText:g,toggleButtonClickHandler:()=>{c(t?{type:he,modKey:e,bindName:`${n}show-less`}:{type:he,modKey:e,bindName:`${n}show-more`})},toggleButtonClass:y,isDetailsShown:t,showMoreButtonRef:u})},oN=l().memo(lN),iN=({pickupEnabled:e,buacPickupQuote:t,pickupLabel:a,modExists:r})=>l().createElement("div",{className:"rs-product-list-item-detail-pickup"},r&&e&&l().createElement("div",{className:"rs-product-list-item-detail-pickup-details"},l().createElement("div",{className:"rs-product-list-item-detail-pickup-label"},a),l().createElement("div",ur({className:"rs-product-list-item-detail-pickup-value"},Ya(t))))),cN=({deliveryMessages:e,hasDeliveryMessages:t,promoMessage:a,orderByDeliveryBy:r,modExists:n,templateID:s,deliveryHeader:o})=>l().createElement("div",{className:"rs-product-list-item-detail-delivery"+(s?" rs-product-list-item-detail-delivery-bold":"")},n&&l().createElement(l().Fragment,null,Boolean(o)&&l().createElement("div",{className:"rs-product-list-item-detail-delivery-header"},o),l().createElement("div",{className:"rs-product-list-item-detail-delivery-label"},r),(t||a)&&l().createElement("ul",{className:"rs-product-list-item-detail-delivery-dudeinfo"},e,Boolean(a)&&l().createElement("li",{key:a,className:"rs-product-list-item-detail-delivery-deliverypromo","data-autom":"list-item-deliverypromo"},l().createElement("span",null,a))))),dN=({pickup:e,delivery:t})=>{if(!e&&!t)return null;const a=e?l().createElement(iN,ur({key:"pickup"},e,{modExists:!0})):null,{deliveryOptionMessages:r=[],leadByPickup:n}=t||{},s=!!t&&(t.templateID&&"null"!==t.templateID),o=t?l().createElement(cN,ur({key:"delivery"},t,{hasDeliveryMessages:Boolean(r.length),deliveryMessages:r.map((e=>l().createElement("li",{key:e.quote,className:"rs-product-list-item-detail-delivery-deliverymsg","data-autom":"list-item-deliverymsg"},l().createElement("span",null,e.quote),Boolean(e.tooltip)&&l().createElement(Co,{after:!0,middle:!0},l().createElement("div",Ya(e.tooltip)))))),templateID:s,modExists:!0})):null,i="true"===n||!0===n;return l().createElement("div",{className:"rs-product-list-item-detail"},i?[a,l().createElement("br",{key:"saved-lists-new-line"}),o]:[o,a])},mN=({modKey:e,isChildItem:t,isItemSubmitting:a,toggleButtonContainer:r,isDetailsShown:n,loadingRef:s})=>{const o=ja(e,`${t?"child-":""}show-more`),i=Fa("shoppingCart"),c=t?`${e}.pickup`:`${e}.details.pickup`,d=t?`${e}.delivery`:`${e}.details.delivery`,[m]=Ma(c),[u]=Ma(d),p=Fa(c),g=Fa(d);return!i&&o.binding&&o.binding.bindExists&&l().createElement("div",{className:"rs-product-list-item-detail-container"},r,a&&l().createElement("div",{className:"rs-product-list-item-detail-waitindicator"},l().createElement("div",{ref:s,tabIndex:-1,role:"img","aria-label":"processing",className:"waitindicator waitindicator40-blue"})),n&&!a&&l().createElement(dN,{pickup:p&&m,delivery:g&&u}))},uN=l().memo(mN),pN='<svg viewBox="0 0 35 35" class="as-svgicon as-svgicon-applelogo as-svgicon-base as-svgicon-applelogobase" role="img" aria-hidden="true" width="35px" height="35px"><path fill="none" d="M0 0h35v35H0z"/><path d="M25.99 11.345a5.047 5.047 0 0 0-2.411 4.245 4.912 4.912 0 0 0 2.989 4.51 11.737 11.737 0 0 1-1.531 3.162C24.084 24.629 23.088 26 21.572 26s-1.906-.881-3.653-.881c-1.7 0-2.31.91-3.7.91s-2.354-1.271-3.465-2.83a13.679 13.679 0 0 1-2.325-7.378c0-4.332 2.816-6.628 5.588-6.628 1.473 0 2.7.967 3.624.967.881 0 2.253-1.025 3.927-1.025a5.253 5.253 0 0 1 4.422 2.21ZM17.76 8.89a1.659 1.659 0 0 1-.3-.029 1.982 1.982 0 0 1-.043-.4 4.841 4.841 0 0 1 1.227-3.018 4.989 4.989 0 0 1 3.274-1.693 2.14 2.14 0 0 1 .043.448 4.979 4.979 0 0 1-1.184 3.1A4.325 4.325 0 0 1 17.76 8.89Z"/></svg>',gN=({name:e,subheader:t,price:a,type:r,link:n,linkLabel:s,src:o,alt:i,isEOLProduct:c,showAppleLogo:d,unavailableDisplayText:m,productName:u,detailsContainer:p})=>{const{fragments:g}=z();let y="",h="";if("applecare"===r)y=pN,h=dn(g.applecareChildItemInfo,{productName:u});return l().createElement("div",{className:"rs-product-list-childitem-container"},c?l().createElement(l().Fragment,null,d&&l().createElement("div",ur({className:"as-svgicon-container"},Ya(pN))),e&&l().createElement("h4",{className:"rs-product-list-childitem-name"},e),m&&l().createElement("div",{className:"rs-product-list-childitem-info"},m)):l().createElement(l().Fragment,null,y&&h?l().createElement(l().Fragment,null,l().createElement("div",ur({className:`as-svgicon-container rs-product-list-${r}logo`},Ya(y))),l().createElement("div",ur({className:`rs-product-list-${r}info`},Ya(h)))):l().createElement(l().Fragment,null,o&&l().createElement(Fl,{src:o,alt:i}),e&&l().createElement("h4",{className:"rs-product-list-childitem-name"},e),a&&l().createElement("div",{className:"rs-product-list-childitem-price"},a),p,t&&l().createElement("div",{className:"rs-product-list-childitem-info"},t),n&&l().createElement("a",{href:n,className:"as-buttonlink more"},s))))},yN=({modKey:e,productName:t,editMode:a})=>{const[{name:r,subheader:n,price:o,type:i,link:c,linkLabel:d,src:m,alt:u,isChildItem:p,isDetailsShown:g,showChildDetails:y,isEOLProduct:h,showAppleLogo:E,unavailableDisplayText:v}]=Ma(e),b=(0,s.useRef)(null),f=ja(e,`${p?"child-":""}show-more`),w=K().get(f,"binding.properties.isLoadingSubmit",!1),N=p?y:g,S=!a&&!h&&p?l().createElement(uN,{isItemSubmitting:w,modKey:e,isChildItem:p,isDetailsShown:N,loadingRef:b,toggleButtonContainer:l().createElement(oN,{modKey:e,isChildItem:p,isDetailsShown:N,loadingRef:b})}):null;return l().createElement(gN,{name:r,subheader:n,price:o,src:m,alt:u,type:i,link:c,linkLabel:d,isEOLProduct:h,showAppleLogo:E,unavailableDisplayText:v,productName:t,detailsContainer:S})},hN=l().memo(yN),EN="eVar59",vN="prop3",bN=K().get(window,"asMetrics.sendUserInteraction",K().noop),fN=e=>{bN({name:"metrics",data:{[vN]:`D=pageName+|${window.props3MetricValue}`,[EN]:`list|${e}`}})},wN=({visible:e,cancelHandler:t,header:a,subHeader:r,currentList:n,savedLists:o,confirmButtonProps:i,listNameFieldProps:c,setTextFieldValue:d,onChangeHandler:m,handleShowHideCreateNewList:u,isCreateNewListVisible:p,selectedListOption:g,messages:y,maxCustomListErrorLabel:h,savedByYouPageURL:E,showError:v,errorHeader:b,errorSubHeader:f,fieldError:w,setFieldError:N,fieldErrorMessage:S,errorHeaderRef:C,listFieldRef:T,props3Metrics:L})=>{const{assets:k}=z(),I={...c,onReset:e=>{c.onChange(e),T.current.focus(),d("")},resetA11y:k.reset,onChange:e=>{c.onChange(e),N(!1)},label:k.listNameLabel},A="new"===g.value?!c.value:!g.value;(0,s.useEffect)((()=>{window.props3MetricValue=L}),[L]);const P={...i,disabled:A||w||i.disabled,onClick:e=>{i.onClick(e),window.setTimeout((()=>fN(n)),50)}},D=Boolean(h);(0,s.useEffect)((()=>{v&&C.current.focus()}),[C,v]);const O=({SelectorLabel:e})=>l().createElement(l().Fragment,null,l().createElement(e,{classes:{root:"rs-pl-addtolistoverlay-selector-label"}},l().createElement("div",{className:"rs-pl-addtolistoverlay-selector-image large-2 small-3"},l().createElement("span",{className:"rs-pl-addtolistoverlay-selector-icon icon icon-after icon-plussolid"})),l().createElement("div",{className:"rs-pl-addtolistoverlay-selector-container"},l().createElement("span",ur({className:"rs-pl-addtolistoverlay-selector-title"},Ya(K().get(k,"createNewListLabel","")))))),l().createElement(Yr,{in:p,onExited:()=>{d("")}},l().createElement("div",{className:"rs-pl-addtolistoverlay-createnew-container"},l().createElement(ri,ur({},I,{ref:T,classes:{root:qa()({"is-error":w})},"data-autom":"listname-textbox"})),l().createElement("span",{role:"alert","aria-atomic":"true",className:"visuallyhidden"},S)))),x=l().createElement(l().Fragment,null,l().createElement("h2",{className:"rs-pl-addtolistoverlay-error-header",id:"rs-pl-addtolistoverlay-error-header",ref:C,tabIndex:-1},b),l().createElement("div",{className:"rs-pl-addtolistoverlay-subheader"},f),l().createElement("div",{className:"pl-rs-addtolistoverlay-error-actions"},l().createElement("button",{onClick:t,type:"button",className:"form-button"},k.okButton)));return l().createElement(is,{visible:e,fixedWidth:!0,onClose:t,className:"rs-pl-addtolistoverlay",ariaLabel:v?"rs-pl-addtolistoverlay-error-header":"rs-pl-addtolistoverlay-header"},l().createElement("div",{className:"as-overlay-content rs-pl-addtolistoverlay-wrapper"},v?x:l().createElement(l().Fragment,null,l().createElement("h2",{className:"rs-pl-addtolistoverlay-header",id:"rs-pl-addtolistoverlay-header"},a),l().createElement("div",{className:"rs-pl-addtolistoverlay-subheader"},r),y[0]&&l().createElement(Js,{error:!0},l().createElement("div",{className:"rt-messages-text"},l().createElement("span",Ya('<svg viewBox="0 0 20 25" class="as-svgicon as-svgicon-exclamationmarkcircle as-svgicon-reduced as-svgicon-exclamationmarkcirclereduced" role="img" aria-hidden="true" width="25px" height="25px"><path fill="none" d="M0 0h20v25H0z"/><path d="M10 4.1a8.4 8.4 0 1 1-8.4 8.4A8.409 8.409 0 0 1 10 4.1M10 3a9.5 9.5 0 1 0 9.5 9.5A9.5 9.5 0 0 0 10 3Z"/><path d="M9.092 16.411a.9.9 0 0 1 .908-.879.879.879 0 1 1 0 1.758.907.907 0 0 1-.908-.879Zm.3-2.773-.105-5.225A.674.674 0 0 1 10 7.71a.691.691 0 0 1 .713.7l-.113 5.228a.561.561 0 0 1-.6.635.568.568 0 0 1-.605-.635Z"/></svg>')),y[0].text),l().createElement(yr,{message:y[0].text})),l().createElement(xd,{className:"rs-pl-addtolistoverlay-selectors"},o&&o.map(((e={})=>{const{label:t,value:a,imageData:r,isGlobalList:s,isProductAdded:o,itemsCountLabel:i}=e,c="new"===a;return l().createElement(Od,{classes:{root:qa()("rs-pl-addtolistoverlay-selector-item",{"rs-pl-addtolistoverlay-selector-createnew":c}),label:"rs-pl-addtolistoverlay-selector-label",input:"rs-pl-addtolistoverlay-selector-input"},"data-autom":c?"create-new-list":null,name:"savedList",id:a,value:a,key:a,disabled:s||n===a||o,checked:g.value===a,withAriaLabeledBy:"true",onClick:c?u:m,render:c?O:null},!c&&((e,t,a,r,n)=>{let s=k.multiItemCountLabel;return 0===t?s=k.zeroItemCountLabel:1===t&&(s=k.singleItemCountLabel),l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-pl-addtolistoverlay-selector-image large-2 small-3"},a&&!a.showAppleLogo?l().createElement(Fl,{data:a}):l().createElement("span",Ya('<svg viewBox="0 0 56 56" class="as-svgicon as-svgicon-applelogo as-svgicon-elevated as-svgicon-applelogoelevated" role="img" aria-hidden="true" width="56px" height="56px"><path fill="none" d="M0 0h56v56H0z"/><path d="M41.207 18.248a7.851 7.851 0 0 0-3.751 6.6 7.64 7.64 0 0 0 4.644 7.011 18.257 18.257 0 0 1-2.381 4.919c-1.482 2.134-3.032 4.268-5.391 4.268s-2.965-1.37-5.683-1.37c-2.65 0-3.594 1.415-5.75 1.415s-3.661-1.977-5.391-4.4a21.279 21.279 0 0 1-3.616-11.478c0-6.738 4.38-10.31 8.692-10.31 2.291 0 4.2 1.5 5.638 1.5 1.37 0 3.5-1.595 6.109-1.595a8.172 8.172 0 0 1 6.88 3.44ZM28.4 14.43a2.581 2.581 0 0 1-.472-.045 3.083 3.083 0 0 1-.067-.629 7.531 7.531 0 0 1 1.909-4.694 7.76 7.76 0 0 1 5.1-2.628 3.329 3.329 0 0 1 .067.7 7.745 7.745 0 0 1-1.837 4.825 6.728 6.728 0 0 1-4.7 2.471Z"/></svg>'))),l().createElement("div",{className:"rs-pl-addtolistoverlay-selector-container "+(n||r?"large-7 small-6":"large-10 small-9")},l().createElement("div",ur({className:"rs-pl-addtolistoverlay-selector-title"},Ya(e))),l().createElement("div",ur({className:"rs-pl-addtolistoverlay-selector-subtitle"},Ya(dn(s,{itemsCountLabel:t}))))),(n||r)&&l().createElement("div",{className:"large-3 rs-pl-addtolistoverlay-selector-sublabel"},k.savedLabel))})(t,i,r,o,s))}))),l().createElement("div",{className:"rs-pl-addtolistoverlay-actions"},l().createElement(ds,ur({},P,{type:"button","aria-label":`${k.confirm} ${a}`,"aria-describedby":"rs-pl-addtolistoverlay-maxcustomlists-message","data-autom":"addtolistoverlay-confirm"}),k.confirm),l().createElement("button",{onClick:t,type:"button",className:"as-buttonlink rs-pl-addtolistoverlay-cancel","aria-label":`${k.cancel} ${a}`,"data-autom":"addtolistoverlay-cancel"},k.cancel)),D&&l().createElement("div",{className:"rs-pl-addtolistoverlay-maxcustomlists"},l().createElement("p",ur({className:"rs-pl-addtolistoverlay-maxcustomlists-message",id:"rs-pl-addtolistoverlay-maxcustomlists-message"},Ya(h))),l().createElement("p",{className:"rs-pl-addtolistoverlay-maxcustomlists-link"},l().createElement("a",{href:E,"data-autom":"maxcustomlists-savedList"},k.manageListsLabel))))))},NN=({modKey:e,addButtonRef:t})=>{const a=e&&e.split(".")[0],[r]=Ba(a,"savedByYouUrl"),n=`${e}.addToListOverlay`,o=ja(n,"confirm"),[i,c]=Ba(n,"showAddToListOverlay",!1),d=Ka(n,"selectedListOption"),[m,u]=(0,s.useState)(!1),[p,g]=_a(n),[y,h]=(0,s.useState)(!1),[E,v]=(0,s.useState)(""),b=Boolean(p[0]&&p[0].text),f=(0,s.useRef)(null),w=(0,s.useRef)(null),[N]=Ba(n,"props3Metrics"),{data:{header:S,subHeader:C,currentList:T,listOptions:L,maxCustomListErrorLabel:k,showError:I=!1,errorHeader:A,errorSubHeader:P}}=Ra(n),D={...o.props,isLoading:o.binding.properties.isLoadingSubmit,disabled:o.binding.properties.isLoadingSubmit},{binding:{setValue:O},props:x,state:{error:R}}=nr(n,"listName"),F=e=>{d.setValue(e.target.value),u(!1),h(!1)};return(0,s.useEffect)((()=>{d.value||u(!1)}),[d]),(0,s.useEffect)((()=>{h(b),w.current&&w.current.focus()}),[b,g]),(0,s.useEffect)((()=>{v(R),setTimeout((()=>{v("")}),4e3)}),[R]),l().createElement(wN,{visible:i,header:S,subHeader:C,currentList:T,savedLists:L,cancelHandler:()=>{d.setValue(""),u(!1),c(!1),t.current.focus()},confirmButtonProps:D,listNameFieldProps:x,setTextFieldValue:O,onChangeHandler:F,selectedListOption:d,handleShowHideCreateNewList:e=>{F(e),u(!m),O("")},isCreateNewListVisible:m,messages:p,maxCustomListErrorLabel:k,savedByYouPageURL:r,showError:I,errorHeader:A,errorSubHeader:P,fieldError:y,setFieldError:h,fieldErrorMessage:E,errorHeaderRef:f,listFieldRef:w,props3Metrics:N})},SN=l().memo(NN),CN=({overlayProps:e,cancelHandler:t,header:a,subHeader:r,confirmButtonProps:n})=>{const{assets:s}=z();return l().createElement(is,ur({},e,{fixedWidth:!0,disableFocusOut:!0,onClose:t,className:"rs-pl-removeoverlay",ariaLabel:"rs-pl-removeoverlay-header"}),l().createElement("div",{className:"as-overlay-content rs-pl-removeoverlay-wrapper"},l().createElement("h2",{className:"rs-pl-removeoverlay-header",id:"rs-pl-removeoverlay-header"},a),l().createElement("div",{className:"rs-pl-removeoverlay-subheader"},r),l().createElement("div",{className:"rs-pl-removeoverlay-actions"},l().createElement(ds,ur({hasDefaultClass:!1},n,{className:"button button-pill button-super","aria-label":`${s.confirm} ${a}`,"data-autom":"removeItemOverlay-confirm"}),s.confirm),l().createElement("button",{onClick:t,type:"button",className:"as-buttonlink rs-pl-removeoverlay-cancel","aria-label":`${s.cancel} ${a}`,"data-autom":"removeItemOverlay-cancel"},s.cancel))))},TN=({modKey:e,removeButtonRef:t})=>{const a=`${e}.removeItemOverlay`,r=ja(a,"confirm"),[n,s]=cr(a),{data:{header:o,subHeader:i}}=Ra(a),c={...r.props,isLoading:r.binding.properties.isLoadingSubmit,disabled:r.binding.properties.isLoadingSubmit};return l().createElement(CN,{overlayProps:n,header:o,subHeader:i,cancelHandler:()=>{s(),t.current.focus()},confirmButtonProps:c})},LN=l().memo(TN),kN=({modKey:e})=>{const t=Ua(),{assets:a}=z(),[r]=Ba(e,"name"),n={type:he,modKey:e,bindName:"remove-item"},o={type:he,modKey:e,bindName:"add-to-list"},i=(0,s.useRef)(null),c=(0,s.useRef)(null);return l().createElement(l().Fragment,null,l().createElement("div",{className:"rs-product-list-item-actions"},l().createElement("button",{onClick:()=>t(o),ref:c,className:"as-buttonlink icon icon-after icon-pluscircle",type:"button","aria-label":dn(a.saveToAnotherListVOText,{productName:r}),"data-autom":"save-another-list-btn"},a.saveAnotherLink),l().createElement("button",{onClick:()=>t(n),ref:i,className:"as-buttonlink icon icon-after icon-minuscircle",type:"button","aria-label":dn(a.removeVOText,{productName:r}),"data-autom":"remove-list-btn"},a.removeLink)),l().createElement(SN,{modKey:e,addButtonRef:c}),l().createElement(LN,{modKey:e,removeButtonRef:i}))},IN=l().memo(kN),AN=({modKey:e,parentKey:t,addToBagKey:a,globalListId:r,editMode:n,listId:o,saveToStorage:i,isSideBySide:c,dataAutom:d})=>{const{data:{name:m,price:u,subheader:p,learnMoreUrl:g,productUrl:y,productMetricId:h,productId:E,productIDForMetrics:v,productEvar1:b,isDetailsShown:f=!1,isEOLProduct:w,unavailableDisplayText:N,badge:S,isAddToBagEnabled:C,monthlyPriceA11y:T},childModKeys:L}=Ra(e),k=Ua(),{data:I,modExists:A}=Ra(`${e}.macDetails`),P=ja(e,"show-more"),D=K().get(P,"binding.properties.isLoadingSubmit",!1),O=(0,s.useRef)(null),x=t||e,{setValue:R,runSetEvents:F}=Ka(x,a),{setValue:M}=Ka(x,"listId"),{setValue:B}=Ka(x,"childPart"),_=K().get(ja(x,"add-to-bag"),"binding.properties.isLoadingSubmit",!1),[$]=Ba(L.length?L[0]:"","partNumber"),U=A&&I.hardwareDetails&&I.hardwareDetails.filter((e=>e)),V=!!L.length&&L.map((t=>t!==`${e}.macDetails`&&l().createElement(hN,{key:t,modKey:t,productName:m,editMode:n})));(0,s.useEffect)((()=>{n&&k({type:he,modKey:e,bindName:"show-less"})}),[n]);const H=!n&&!w?l().createElement(uN,{isItemSubmitting:D,modKey:e,isDetailsShown:f,loadingRef:O,toggleButtonContainer:l().createElement(oN,{modKey:e,isDetailsShown:f,loadingRef:O})}):null,j=n&&l().createElement(IN,{modKey:e});return l().createElement(nN,{productInfo:{name:m,price:u,subheader:p,learnMoreUrl:g,productUrl:y,productMetricId:h,productIDForMetrics:v,productEvar1:b,macHardwareDetails:U,isEOLProduct:w,unavailableDisplayText:N,badge:S,monthlyPriceA11y:T},isSideBySide:c,editMode:n,detailsContainer:H,actionsContainer:j,listId:o,saveToStorage:i,isAddToBag:C,addToBagLoading:_,onClickHandler:()=>{"add-to-bag"===a?k({type:he,modKey:x,bindName:a}):(R(E),M(r),B($),F())},dataAutom:d},V)},PN=l().memo(AN),DN=({modKey:e,parentKey:t,addToBagKey:a="add-to-bag",globalListId:r,showEdit:n=!1,listId:s="",isSideBySide:o=!1,dataAutom:c,index:d})=>{const[{src:m,width:u,height:p,isEOLProduct:g,productMetricId:y}]=Ma(e),h=m&&-1!==m.indexOf("NOIMAGE"),E={listId:s,isSavedItem:!0};return l().createElement(rN,{isSideBySide:o,index:d},l().createElement("div",{className:"row rs-product-list-item-container"},l().createElement("div",{className:qa()("column rs-product-list-item-imgcontainer",{"large-6 small-12":!o,"rs-yoursaves-item-noimage":g,"rs-product-list-noimagesrc-container":h})},g?l().createElement("span",Ya('<svg viewBox="0 0 53 106" class="as-svgicon as-svgicon-applelogo as-svgicon-mega as-svgicon-applelogomega" role="img" aria-hidden="true" width="106px" height="106px"><path fill="none" d="M0 0h53v106H0z"/><path d="M50.844 34.791a14.473 14.473 0 0 0-6.915 12.172c0 9.481 8.323 12.834 8.571 12.917a33.617 33.617 0 0 1-4.389 9.067c-2.732 3.933-5.588 7.866-9.936 7.866S32.71 74.288 27.7 74.288c-4.883 0-6.624 2.608-10.6 2.608s-6.747-3.643-9.936-8.115A39.23 39.23 0 0 1 .5 47.626c0-12.42 8.074-19 16.023-19 4.221 0 7.741 2.774 10.391 2.774 2.526 0 6.459-2.939 11.261-2.939a15.063 15.063 0 0 1 12.669 6.33Zm-23.6-7.038a4.779 4.779 0 0 1-.87-.083 5.778 5.778 0 0 1-.123-1.159 13.882 13.882 0 0 1 3.52-8.653 14.3 14.3 0 0 1 9.4-4.844 6.14 6.14 0 0 1 .123 1.283A14.274 14.274 0 0 1 35.9 23.2c-2.113 2.607-5.757 4.553-8.655 4.553Z"/></svg>')):l().createElement(Fl,{className:"as-util-relatedlink",src:m,width:u,height:p,alt:"","data-trigger-click":`click [data-relatedlink='${y}']`})),l().createElement("div",{className:qa()("column",{"large-6 small-12":!o,"large-12":o})},l().createElement(PN,{modKey:e,parentKey:t,addToBagKey:a,globalListId:r,editMode:n,listId:s,saveToStorage:()=>{const e=i("product-list-item-container/saveToStorageForPDP");if(window.sessionStorage)try{window.sessionStorage.setItem("dt-list",JSON.stringify(E))}catch(t){e.error(t)}},isSideBySide:o,dataAutom:c}))))},ON=l().memo(DN),xN=({label:e})=>((0,s.useLayoutEffect)((()=>{window.scrollTo(window.pageXOffset,0)}),[]),(0,pr.createPortal)(l().createElement("div",{className:"rs-savedbyyou-add-to-bag-loader"},l().createElement("div",{role:"img",className:"waitindicator waitindicator40-gray","aria-label":e})),document.getElementById("portal")||document.body)),RN=({loadMore:e,itemCount:t,allSavedItems:a,showMoreItems:r,children:n,isAddingToBag:s})=>{const{assets:o,viewport:i}=z(),c=t&&t<=12&&t%3==2;let d=null;return t>12&&r?d=l().createElement("a",{href:a,"data-evar1":"aos:bag | see all",className:"as-buttonlink icon icon-after icon-chevronright"},o.seeAllLabel):r||(d=l().createElement("button",{type:"button",className:"as-buttonlink",onClick:()=>e(!0)},o.seeMoreLabel,l().createElement("span",{"aria-hidden":"true",className:"icon icon-after icon-chevrondown"}))),l().createElement(l().Fragment,null,s&&l().createElement(xN,{label:o.processing}),!s&&l().createElement("div",{className:"rs-savedbyyou","data-analytics-region":"saved-by-you"},l().createElement("h2",{className:"rs-savedbyyou-title"},o.savedItemsHeader),l().createElement("ul",{className:"as-l-container row rs-savedbyyou-tiles",role:"list","aria-label":o.productsLabel},n,"small"!==i&&c?l().createElement("li",{role:"listitem",className:"rs-product-list-emptytile column small-12"}):null),l().createElement("div",{className:"as-l-container rs-savedbyyou-loadmore"},t>3&&d)))};function FN(e){const t={...e,shoppingCart:{bagSavedItems:{bagSavedListItems:e.bagSavedListItems}}};return t.meta.l=[`/${Us}`],t}const MN=()=>{const e=Ua(),[t,a]=(0,s.useState)(!1),[r]=Ba($s,"savedItemsFetchURL"),[{itemCount:n,allSavedItems:o,listId:c}]=Ba(Us),d=Fa(Us),{childModKeys:m}=Ra(`${Us}.items`),u=K().get(ja($s,"part"),"binding.properties.isLoadingSubmit",!1),p=m&&m.map(((e,a)=>(a<3||t)&&l().createElement(ON,{key:e,modKey:e,index:a,parentKey:$s,addToBagKey:"part",globalListId:c,isSideBySide:"true",dataAutom:"bag-item-buybtn"})));return(0,s.useEffect)((()=>{const t=i("SavedByYouContainer/buildSavedList");r&&!n&&wt(r).then((t=>{e({type:ve,data:FN(t)})})).catch((e=>{t.error(e)}))}),[r,n]),(0,s.useEffect)((()=>{if(t){const e=document.querySelectorAll(".rs-product-list-item-productlink")[3];e&&e.focus()}}),[t]),d&&Boolean(n)&&l().createElement(RN,{loadMore:a,showMoreItems:t,itemCount:n,allSavedItems:o,isAddingToBag:u},p)},BN=l().memo(MN),_N=({className:e="rs-installment-summary-card",payOverTimeLabel:t,offerDetailsLinkLabel:a,installmentSummaryCard:r,singleTermFinancingMessage:n,additionalSummaryCard:s,monthlyPricingDisclaimer:o,totalPrice:i,offerDetailsDescription:c,installmentButtonProps:d,hasInstallmentTradeIn:m,hasStaticOverlay:u,staticOverlayProps:p,isZiniaInstallmentsEnabled:g})=>{const{viewport:y,assets:h}=z(),E="small"===y,v=u?p:d;return l().createElement("div",{className:`${e} large-9 large-offset-3 small-12 small-offset-0`},l().createElement("div",{className:`${e}-container`,"data-autom":"payment-installment-summary-card"},l().createElement("h2",{className:`${e}-header`},t),l().createElement("p",ur({role:"text",className:`${e}-payment-title`},Ya(n||r))),s&&l().createElement("div",ur({className:`${e}-payment-subtitle`},Ya(s))),l().createElement("div",{className:`${e}-total ${e}-info`},l().createElement("div",{className:`${e}-disclaimer`},o),l().createElement("span",{className:`${e}-price`},i)," ",m&&l().createElement("div",ur({className:`${e}-message`},Ya(h.acmiTradeInMessage))),!E&&l().createElement("button",ur({type:"button","aria-label":`${a}, ${t}`,className:`${e}${g?"-zinia-button":"-offer-details-button"} icon icon-after icon-pluscircle as-buttonlink`},v,{"data-autom":"payment-installment-options"}),a)),E&&l().createElement("div",{className:`${e}-offer-details`},l().createElement("button",ur({type:"button","aria-label":`${a}, ${t}`,className:`${e}-offer-details-button icon icon-after icon-pluscircle as-buttonlink`},v,{"data-autom":"payment-installment-options"}),a)),l().createElement("div",{className:`${e}-info`},c)))},$N=({visible:e,setVisible:t,content:a})=>{const{viewport:r}=z(),n="small"===r;return l().createElement(is,{className:"rs-financing-bag-overlay",visible:e,onClose:()=>t(!1),isFullscreen:n,fixedWidth:!0},l().createElement("div",ur({className:"rs-financing-bag-overlay-content"},Ya(a))))},UN=({modKey:e})=>{const[t]=Ba(`${e}.cartInstallmentSummary`),a=ja(`${e}.cartInstallmentSummary`,"offerInstallmentsOverlay"),[r,n]=(0,s.useState)(!1),o=Boolean(t&&t.offerDetailsOverlayContent),i={onClick:()=>{n(!0),Ws({name:"metrics",data:{eVar6:'D=pageName+"|summary|explore all financing options|open modal"'}})}};return l().createElement(l().Fragment,null,l().createElement(_N,ur({},t,{installmentButtonProps:a.props,hasStaticOverlay:o,staticOverlayProps:i})),l().createElement(uw,{informational:!0}),o&&l().createElement($N,{visible:r,setVisible:n,content:t&&t.offerDetailsOverlayContent}))},KN=l().memo(UN),VN=({bannerMessage:e,buttonProps:t,overlayContent:a,overlayProps:r})=>{const{assets:n,viewport:s}=z(),o="small"===s,i="rs-upgradebanner";return l().createElement("div",{className:i},l().createElement("div",{className:qa()(`${i}-container as-l-container`)},l().createElement("span",Ya(`${e} `)),l().createElement("button",ur({type:"button",className:"as-buttonlink as-buttonlink-inline more","data-autom":"upgradebanner-learn-more-link"},t),l().createElement("span",Ya(n.learnMore)))),l().createElement(is,ur({},r,{isFullscreen:o,className:qa()(`${i}-overlay`),fixedWidth:!0}),l().createElement("div",ur({className:qa()(`${i}-overlay-container`)},Ya(a)))))},HN=()=>{const[e,t]=(0,s.useState)(!1),[a]=Ma(Ss),{installmentsUpgradeBannerDetails:{bannerMessage:r,overlayContent:n}}=a,o={bannerMessage:r,overlayContent:n,buttonProps:{onClick:()=>t(!0)},overlayProps:{visible:e,onClose:()=>t(!1)}};return r&&l().createElement(VN,o)},jN=l().memo(HN),GN=e=>{if(window?.asMetrics?.sendUserInteraction){const t=e?"agree and continue":"decline";window.asMetrics.sendUserInteraction({name:"privacy policy prompt|edu verify",beacon:{eVar5:`D=pageName+"|privacy policy prompt|${t}"`}})}},WN=()=>{window?.asMetrics?.onError&&window.asMetrics.onError({message:"your status couldn't be verified at this time"})},qN=({assets:e={},onAccept:t,onCancel:a,isLoading:r,overlayId:n})=>{const[o,i]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1);return l().createElement("div",{className:"rf-pipl-content"},l().createElement("h2",{id:n||"personal-consent-overlay-header",className:`rf-pipl-header ${nd.HEADLINE_REDUCED}`},e.overlayHeader),l().createElement("div",ur({className:"rf-pipl-subheader rf-pipl-description"},Ya(e.overlayDescription))),l().createElement(um,{className:nd.BODY,classes:{wrapper:`rf-pipl-checkbox ${nd.BODY}`},checked:o,onChange:()=>i(!o),"aria-required":"true"},l().createElement("span",Ya(e.consent_1))),l().createElement(um,{className:nd.BODY,classes:{wrapper:`rf-pipl-checkbox ${nd.BODY}`},checked:c,onChange:()=>d(!c),"aria-required":"true"},l().createElement("span",Ya(e.consent_2))),e.overlayFooter?l().createElement("p",ur({className:"rf-pipl-footer"},Ya(e.overlayFooter))):null,l().createElement("div",{className:"rf-pipl-buttons"},l().createElement("div",{className:"rf-pipl-agree-button"},l().createElement(ds,{isLoading:r,onClick:t,className:nd.BODY,disabled:r||!o||!c},e.continueButton)),l().createElement("div",{className:"rf-pipl-cancel-button"},l().createElement("button",{type:"button",onClick:a,className:nd.BODY,disabled:r},e.cancelButton))))},YN=l().lazy((()=>n.e(553).then(n.bind(n,1562)))),zN=e=>{const{src:t,data:a}=e;return t||a?l().createElement(s.Suspense,{fallback:null},l().createElement(YN,e)):null},XN=({id:e,className:t,classes:a={button:"as-buttonlink",content:""},onClick:r=(()=>{}),assets:n,children:o,showDownloadLink:i=!1})=>{const[c,d]=(0,s.useState)(!1),m=(0,s.useId)(),u=`${e||m}-transcript`,p=K().get(n,"showTranscriptText","View transcript"),g=K().get(n,"hideTranscriptText","Hide transcript"),{assets:y}=z(),h=K().get(n,"downloadText")||K().get(y,"downloadText","Download"),E=K().get(n,"transcriptContent");return l().createElement("div",{className:qa()("rf-videoplayer-transcript",{"rf-videoplayer-transcript-shown":c})},l().createElement("button",ur({className:qa()("rf-videoplayer-transcript-btn","icon icon-after icon-chevrondown",nd.BODY_REDUCED,a.button,t),"aria-controls":u,"aria-expanded":c,"data-autom":c?"hideTranscript":"viewTranscript",onClick:e=>{d(!c),r(e,c)},type:"button"},Ya(c?g:p))),l().createElement(Yr,{in:c,mountOnEnter:!0,id:u,className:qa()("rf-videoplayer-transcript-content",a.content)},i&&l().createElement("button",ur({className:qa()("rf-videoplayer-download-transcript","icon icon-before icon-arrowdowncircle","as-buttonlink",nd.BODY_REDUCED,t),onClick:()=>{const t=(e=>{const t=document.createElement("div");return t.innerHTML=e,(t.textContent||t.innerText||"").replace(/(\r\n|\n|\r)/gm,"").replace(/  +/g,"\n")})(E);((e,t)=>{const a=document.createElement("a");a.setAttribute("href",`data:text/plain;charset=utf-8,${encodeURIComponent(t)}`),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)})(`${e||u}.txt`,t)}},Ya(h),{type:"button"})),o))};n(8693);const JN=({onCancel:e,onClick:t,learnmoreAssets:a,overlayId:r,isLandingPage:n,isSorryPage:s})=>{const{body:o,cta:i,desc:c,footnote:d,howVerify:m,header:u,checkoutHeader:p,checkoutDesc:g,later:y,verifyDesc:h,eduVideo:E}=a,{translatedFragmentText:v,sectionFooter:b}=E||{},f=n?u:s?"":p,w=n?c:s?"":g,N=l().useRef(null);l().useEffect((()=>()=>{N.current&&(N.current.pause(),N.current.seek(0))}),[]);return l().createElement("div",{className:"rf-edu-story-content"},f&&l().createElement("h2",ur({className:`rf-edu-story-header ${nd.HEADLINE_REDUCED}`,id:r},Ya(f))),w&&l().createElement("div",ur({className:`rf-edu-story-desc ${nd.BODY}`},Ya(w))),n&&l().createElement(l().Fragment,null,E&&l().createElement(l().Fragment,null,l().createElement(zN,{className:"rf-edu-story-videoplayer",data:E,onInit:e=>{N.current=e}}),l().createElement("div",ur({className:`rf-edu-story-videoplayer-footer ${nd.CAPTION}`},Ya(b))),l().createElement(XN,{data:E},l().createElement("div",{className:"row"},l().createElement("div",ur({className:"demo-video-player-transcript-content column large-9 small-12"},Ya(v)))))),o&&l().createElement("div",ur({className:`rf-edu-story-body ${nd.BODY}`},Ya(o))),m&&l().createElement("div",Ya(m)),h&&l().createElement("div",ur({className:`rf-edu-story-verifydesc ${nd.BODY}`},Ya(h)))),l().createElement("div",{className:`rf-edu-story-buttons ${nd.BODY}`},i&&l().createElement("button",ur({type:"button",className:qa()("rf-edu-story-verify-button button",{"form-button":s}),onClick:t},Ya(i))),n&&y&&l().createElement("div",{className:"rf-edu-story-cancel-button"},l().createElement("button",ur({type:"button",onClick:e,className:"as-buttonlink"},Ya(y))))),!s&&d&&l().createElement("div",ur({className:`rf-edu-story-footer ${nd.CAPTION}`},Ya(d))))},ZN=({errorAssets:e,overlayId:t,onCancel:a})=>{const{closeButtonLabel:r,errorDescription:n,errorHeader:s}=e;return l().createElement("div",{className:"rf-edu-verify-content rf-edu-text-center"},l().createElement("h2",ur({className:`rf-edu-verify-header ${nd.HEADLINE_REDUCED}`,id:t},Ya(s))),l().createElement("p",ur({className:nd.BODY},Ya(n))),l().createElement("div",{className:`rf-edu-story-buttons ${nd.BODY}`},l().createElement("button",ur({type:"button",onClick:a,className:"button"},Ya(r)))))},QN="INIT",eS="SHOW_STORY",tS="SHOW_FORM",aS="ACCEPTED",rS="POLL_WAIT",nS="FAILED",sS=()=>{const e=vn("as_atb");return(e?e.split("|"):[]).pop()},lS=({src:e,alt:t,href:a})=>l().createElement("a",{className:"rf-edu-verify-a11y-qrcode-link",href:a,onClick:e=>e.preventDefault(),onKeyDown:e=>{"Enter"!==e.code&&"Space"!==e.code||(window.location=e.target.href)}},l().createElement("img",{src:e,alt:t,height:"200",width:"200"})),oS=({appUrl:e,assets:t,qrCode:a,initialStatusUrl:r,initialDelay:n,onPoll:o,overlayId:c})=>((({initialStatusUrl:e,initialDelay:t,onPoll:a})=>{const[r,n]=(0,s.useState)(e),[l,o]=(0,s.useState)(t),[c,d]=(0,s.useState)(0),m=new URL(r,window.location.origin);m.searchParams.set("atbtoken",sS());const u=(0,s.useCallback)((async()=>{const e=i("edu-verify-overlay/checkStatus");try{const e=await wt(m.href,{credentials:"include"});d(c+1),"object"==typeof e?.config&&(n(e.config.statusUrl),o(e.config.delay),a({pollStatus:e.config.status,url:e.config.url}))}catch(t){e.error(t),d(c+1)}}),[c,m.href,a]);(0,s.useEffect)((()=>{const e=setTimeout(u,l);return()=>clearTimeout(e)}),[u,l])})({initialStatusUrl:r,initialDelay:n,onPoll:o}),l().createElement("div",{className:"rf-edu-verify-content"},l().createElement("div",ur({className:"rf-edu-verify-logo"},Ya(t.qrCodeHeader))),l().createElement("h2",{className:`rf-edu-verify-header ${nd.HEADLINE_REDUCED}`,id:c},t.qrCodeSubHeader),l().createElement("p",{className:nd.BODY},t.qrCodeDescription),l().createElement("p",{className:"rf-edu-verify-qrcode-container"},l().createElement(lS,{src:a,alt:t.qrCodeAltText,href:e})),l().createElement("p",ur({className:`rf-edu-verify-qrcode-instructions ${nd.BODY_REDUCED}`},Ya(t.qrCodeInstructions))))),iS=({privacyConsentUrl:e})=>{const[t,a]=(0,s.useState)(QN);return{status:t,close:()=>a(QN),open:()=>{a(eS)},showform:()=>{a(tS),window?.asMetrics?.sendUserInteraction&&window.asMetrics.sendUserInteraction({name:"privacy policy prompt|edu verify",beacon:{eVar6:'D=pageName+"|hero|get verified with the alipay app"'}})},accept:()=>{a(aS),e&&(async e=>{const t=i("edu-verify-overlay/pingConsentUrl");try{await fetch(e,{credentials:"include"})}catch(e){t.error(e)}})(e)},handleVerify:({isDesktop:e,redirectUrl:t,verifyStatus:r})=>{"SUCCESS"===r&&e?a(rS):"SUCCESS"===r?(a(QN),window.location=t):(WN(),a(nS))},handlePoll:({pollStatus:e,url:t})=>{switch(e){case"WAIT":default:break;case"PASS":a(QN),window.location=t;break;case"ERROR":case"TIMEOUT":case"NO_PASS":WN(),a(nS)}}}},cS=({onAccept:e,onClose:t,handleDecline:a,privacyData:r,verifyData:n,learnmoreAssets:s,errorAssets:o,authProvider:i,handleShowForm:c,status:d,ariaLabel:m,handleButtonClick:u,handlePoll:p,isLandingPage:g})=>"AlipayAuthProvider"===i?(()=>{switch(d){case eS:return s&&l().createElement(JN,{onClick:c,learnmoreAssets:s,overlayId:m,onCancel:t,isLandingPage:g});case tS:case aS:return l().createElement(qN,{assets:r,isLoading:d===aS,onAccept:e,onCancel:a,overlayId:m});case rS:return l().createElement(oS,{appUrl:n?.assets?.url,assets:r,initialDelay:n?.config?.delay,initialStatusUrl:n?.config?.statusUrl,onPoll:p,qrCode:n?.assets?.qrCode,overlayId:m});case nS:return l().createElement(ZN,{errorAssets:o,overlayId:m,onCancel:t});default:return null}})():d===QN?null:s&&l().createElement(JN,{onCancel:t,onClick:u,learnmoreAssets:s,overlayId:m,isLandingPage:g}),dS=({modKey:e,isSorryPage:t,actionBtnRef:a})=>{const[r,n]=cr(e),{data:o}=Ra(e),{overlayBoostrap:c}=o,[d,m]=(0,s.useState)(!1),{viewport:u}=z(),p="small"===u,[g,y]=(0,s.useState)({ctaLink:{},learnmoreAssets:{},qrAssets:{},privacyAssets:{},authProvider:{},errorAssets:{}}),h=g.ctaLink||"",{verifyData:v,fetchVerifyData:b}=(e=>{const[t,a]=(0,s.useState)({}),{viewport:r}=z(),n="small"!==r;return{verifyData:t,fetchVerifyData:async t=>{const r=i("edu-verify-overlay/fetchVerifyData");try{const r=new URL(e,window.location.origin);r.searchParams.set("ost",(({isAndroidMobile:e,isMobileIos:t})=>t?"ios":e?"android":"")(E.userAgent(navigator.userAgent))),r.searchParams.set("atbtoken",sS());const s=await wt(r.href,{credentials:"include"});a(s),t({isDesktop:n,redirectUrl:s?.assets?.url,verifyStatus:s?.config?.status})}catch(e){r.error(e),t({verifyStatus:nS})}}}})(h),f=((e,t)=>{const{cancelButtonLabel:a,continueButtonLabel:r,privacyheader:n,footer:s,subHeader:l,termsAndConditions_1:o,termsAndConditions_2:i}=e||{},{qrCodeHeader:c,qrCodeSubHeader:d,qrCodeDescription:m,qrCodeAltText:u,qrCodeInstructions:p}=t||{};return{overlayHeader:n,overlayFooter:s,overlayDescription:l,consent_1:o,consent_2:i,cancelButton:a,continueButton:r,qrCodeHeader:c,qrCodeSubHeader:d,qrCodeDescription:m,qrCodeAltText:u,qrCodeInstructions:p}})(g.privacyAssets,g.qrAssets),{status:w,open:N,showform:S,accept:C,handleVerify:T,handlePoll:L}=iS({}),k=w===tS||w===aS,I=i("edu-verify-overlay/fetchVerifyData"),A="edu-verify-overlay-label",P=()=>{t?m(!1):n()},D=()=>{S(),t&&m(!0)},O=()=>{const e=g.ctaLink;e?window.location.href=e:I.error("url not provided")},x=l().useRef(!0);(0,s.useEffect)((()=>{(async()=>{x.current&&c&&(x.current=!1,await fetch(c).then((e=>e.json())).then((e=>{const{provider:a,data:r}=e.body,{sections:n={},ctaLink:s}=r||{};y({ctaLink:s,learnmoreAssets:n.learnmore,privacyAssets:n.privacy,qrAssets:n.qrcode,authProvider:a,errorAssets:n.error}),t||m(!0)})).catch((e=>{I.error(e)})))})()}),[c]);const R={...r,visible:r.visible&&d,onEnter:()=>{!t&&N()},onClose:()=>{P()},onExited:()=>{!t&&r.onExited(),a&&a.current&&a.current.focus()}};return l().createElement(l().Fragment,null,t&&l().createElement(JN,{onClick:"AlipayAuthProvider"===g.authProvider?D:O,learnmoreAssets:g.learnmoreAssets,isSorryPage:t}),l().createElement(is,ur({},R,{name:"segment-overlay",noCloseButton:k,disableEsc:k,disableClickAway:k,closeButtonAttrs:{ariaLabel:f.closeButtonLabel},isFullscreen:p,ariaLabel:A}),l().createElement(cS,{onClose:P,onAccept:()=>{C(),GN(!0),b(T)},handleShowForm:D,handleDecline:()=>{GN(!1),P()},handleButtonClick:O,handlePoll:L,privacyData:f,verifyData:v,learnmoreAssets:g.learnmoreAssets,errorAssets:g.errorAssets,authProvider:g.authProvider,status:w,ariaLabel:A})))},mS=l().memo(dS),uS=({hasItems:e,showInstallmentsExample:t,showHeader:a,messages:r,messagesLastUpdated:n,hasGetReadyBanner:s,hasRCCToolbar:o,hasTopInstallmentBanner:i,hasInstallmentBanner:c,hasAckMessages:d,hasInstallmentSummaryCard:m,hasUndoMessages:u,hasItemsBilledSeparately:p,hasRecurringServicesSummary:g,hasSummary:y,hasDeviceTradeInServicesSummary:h,hasRecommendationItems:E,hasRecommendedSystem:v,hasChat:b,xMerch:f,buyflowMessagesEnabled:w,acmiSelected:N,partnerFinancedInstallment:S,hasTradeInError:C,hasFootnotes:T,hasTradeIn:L,hasMonthlyPricing:k,displayInStack:I,hasIupSummary:A,hasPartnerFinanceTradeIn:P,hasSavedItemsMessages:D,hasMultipleFlexTradeIn:O,hasTopUpgradeBanner:x,hasVerification:R})=>{const{fragments:F,viewport:M}=z(),{acShowInstallment:B}=zs(),_=l().useRef(null),$=l().useRef(null),U=Xs(e)&&!e,K=I&&"small"===M&&B&&w,V=ja(Ds,"viewFinanceOverlay");l().useEffect((()=>{!U&&u||!_.current||_.current.focus()}),[U,u,_]);const H=h&&(!B||P)&&l().createElement(Ww,null);return l().createElement("div",{className:"rs-bag",role:"main"},o&&l().createElement(FE,{modKey:Ns,isBagToolBar:!0}),e&&F.eppBagBanner&&l().createElement("header",{className:"rs-bag-eppbanner"},l().createElement("div",ur({className:"rs-bag-eppbanner-content as-l-container"},Ya(F.eppBagBanner)))),x&&l().createElement(jN,null),f.topBanner&&!V.binding.bindExists&&l().createElement("div",ur({className:"rs-bag-topxmerch"},Ya(f.topBanner))),f.topBanner&&V.binding.bindExists&&l().createElement("div",{className:"ribbon ribbon-blue-to-default"},l().createElement("div",{className:"ribbon-drop-wrapper"},l().createElement("div",{className:"ribbon-content-wrapper"},l().createElement("div",{className:"ribbon-content column"},l().createElement("div",ur({className:"rs-bag-topxmerch"},Ya(f.topBanner))),l().createElement(Nf,{modKey:Ds,topBanner:f.topBanner}))))),i&&l().createElement(iw,{positionTop:!0}),d&&l().createElement(Xh,{modKey:Cs,key:"ack-message",headerRef:_,showBindName:"ackBanner",closeBindName:"ack"}),u&&l().createElement(Xh,{modKey:Cs,key:"undo-message",headerRef:_,showBindName:"undoBanner",closeBindName:"undoClose",undoBindName:"undo"}),D&&l().createElement(Xh,{modKey:_s,key:"ack-message",headerRef:_,showBindName:"ackBanner",closeBindName:"ack"}),s&&l().createElement(aN,null),l().createElement("div",{id:"bag-content",className:"rs-bag-content as-l-container rs-zoom-content"},l().createElement(Qs,{messages:r,lastUpdated:n,dataAutom:"bag-error-message"}),C&&l().createElement(Xw,{modKey:Cs,dataAutom:"bag-error-message"}),e?l().createElement(l().Fragment,null,a&&l().createElement(Ow,{headerRef:_,continueBtnRef:$}),c&&l().createElement(iw,null),v&&l().createElement(qw,null),l().createElement(Gh,{modKey:ws})):l().createElement(Fw,{headerRef:_}),p&&l().createElement(_E,{modKey:Ls}),e&&g&&l().createElement(Kw,{modKey:ks,noKeyline:!0}),O&&H,y&&e&&l().createElement(tw,{modKey:Is}),A&&l().createElement(Qw,{modKey:Ms}),m&&l().createElement(KN,{modKey:Is}),!O&&H,e&&l().createElement(Lw,{continueBtnRef:$}),f.bottom&&l().createElement("div",ur({className:"rs-bag-bottomxmerch"},Ya(f.bottom)))),K&&l().createElement(Df,{modKey:Is,showFinancingMessages:!0}),b&&l().createElement("div",{className:qa()("rs-bag-chat-wrapper",{"rs-bag-chat-hidekeyline":E})},l().createElement(wi,null)),l().createElement(BN,null),l().createElement(Yv,{modKey:"shoppingCart.recommendations"}),f.productSpotlight&&l().createElement("div",ur({className:"rs-bag-productspotlight"},Ya(f.productSpotlight))),f.accessoriesLink&&l().createElement("div",ur({className:"rs-bag-accessoriesLink"},Ya(f.accessoriesLink))),t&&l().createElement("div",ur({className:"rs-bag-installment-example"},Ya(t))),l().createElement(Xv,{modKey:"shoppingCart.faq"}),T&&l().createElement(rw,{modKey:Os,buyflowMessageFootNote:w,acmiSelected:N,hasTradeIn:L,partnerFinancedInstallment:S,hasMonthlyPricing:k}),R&&l().createElement(mS,{modKey:"shoppingCart.customerVerification",actionBtnRef:$}))},pS=()=>{const[e]=Ma(fs),[t]=Ma(Cs),[a]=Ma(Ss),[r]=Ma(Ls),[n]=Ma(Ps),[o]=Ba(Ds,"placements"),[i,c]=_a(Cs),[d]=Ba(Cs,"tradeInErrorMessage"),m=Boolean(d),[u]=Ma(Is),{buyflowMessages:p={}}=u,g=(u.total||e.savedCart||e.sharedCart)&&!u.buyFlowInstallmentsFinancing,{acShowInstallment:y}=zs(),[h]=Ba(Ps,"hasTradeIn"),E=Ua(),{displayInStack:v,acmiSelected:b,verificationType:f}=n,w=$a(`${Us}.items`),[N]=Ma(`${Is}.cartInstallmentSummary`),S=Object.keys(N).length>0,[C]=Ma(As),T=Boolean(C.multipleFlexTradeIn);(0,s.useEffect)((()=>{v&&b&&E({type:Pe,modKey:Ps,key:"displayInStack",value:!1})}),[v,b]);const L=w&&w.some((e=>{const{data:{monthlyPriceA11y:t,isEOLProduct:a}}=e;return t&&!a})),k={hasItems:e.hasItems,showInstallmentsExample:e.showInstallmentsExample,showHeader:g,hasGetReadyBanner:Fa(Bs),hasRCCToolbar:Fa(Ns),hasTopInstallmentBanner:Boolean(y&&a.topBannerDescription),hasInstallmentBanner:Boolean((y||r.partnerPromoAvailable||a.hasInstallmentIneligibilityMessage)&&a.bannerDescription),hasAckMessages:Boolean(t.ackMessages),hasUndoMessages:Boolean(t.undoMessages),hasItemsBilledSeparately:Boolean(r.itemsBilledSeparately),hasInstallmentSummaryCard:S,hasRecurringServicesSummary:Fa(ks),hasSummary:Fa(Is),hasDeviceTradeInServicesSummary:Fa(As),hasRecommendedSystem:Fa(Ts),hasRecommendationItems:Fa("shoppingCart.recommendations.recommendedItem"),messages:i,messagesLastUpdated:c,hasTradeInError:m,hasChat:n.shouldShowChat,acmiSelected:n.acmiSelected,xMerch:o||{},buyflowMessagesEnabled:p.buyflowMessagesEnabled,displayInStack:n.displayInStack,partnerFinancedInstallment:Boolean(a.partnerFinancedInstallments),hasFootnotes:Fa(Os),hasTradeIn:h,hasMonthlyPricing:L,hasIupSummary:Fa(Ms),hasPartnerFinanceTradeIn:r.hasPartnerFinanceTradeIn,hasSavedItemsMessages:Fa(_s),hasMultipleFlexTradeIn:T,hasTopUpgradeBanner:!K().isEmpty(a.installmentsUpgradeBannerDetails),hasVerification:Boolean(f)};return l().createElement(uS,k)},gS=l().memo(pS),yS=e=>{0},hS=({initData:e})=>(l().useEffect((()=>{(({bagItemsCount:e=0})=>{try{window.performance&&(window.performance.mark("echo-rs-checkout.bag.react-render-finish"),window.performance.measure(`echo-rs-checkout.bag.react-${e}`,"echo-rs-checkout.bag.react-render-start","echo-rs-checkout.bag.react-render-finish"))}catch(e){Jr.error(e)}})({bagItemsCount:K().get(e,"shoppingCart.items.c.length",0)})}),[]),l().createElement(l().StrictMode,null,l().createElement(Ia,{initData:e,onInit:yS},l().createElement(X,null,l().createElement(Ys,null,l().createElement(gS,null))),l().createElement(Xr,null))));document.addEventListener("DOMContentLoaded",(()=>{const e=i("rs-checkout/bag");window.performance&&window.performance.mark("echo-rs-checkout.bag.react-render-start");let t={};p||(document.addEventListener("click",h),document.addEventListener("focusin",h),document.addEventListener("focusout",h),document.addEventListener("keydown",h),p=!0),(()=>{const e=document.documentElement,t=A();e.classList.add(t.backgroundSvg?"svg":"no-svg"),e.classList.add(t.touch?"touch":"no-touch"),e.classList.add(t.isIe&&t.ieVersion>=9?"ie":"no-ie"),e.classList.add(t.isIe&&t.ieVersion<9?"oldie":"no-oldie"),e.classList.add(t.isMobileIos||t.isIpad?"ios":"no-ios"),e.classList.add(t.animation?"supports-animation":"no-supports-animation"),e.classList.add(T("columns",!0)?"supports-columns":"no-supports-columns"),e.classList.add(T("backdropFilter",!0)?"supports-backdrop-filter":"no-supports-backdrop-filter"),e.classList.add(t.isSafari&&t.supportsAR?"supports-ar":"no-supports-ar"),t.rtl="rtl"===window.getComputedStyle(document.body).direction})(),((e=document.documentElement)=>{O=e,F||(B(),document.addEventListener("mousedown",B),document.addEventListener("keyup",_),F=!0)})();try{t=JSON.parse(document.getElementById("init_data").innerHTML)}catch(t){e.error(t)}const a=document.getElementById("bag-container");(0,o.H)(a).render(l().createElement(hS,{initData:t}))}))})()})();